{"version":3,"sources":["./src/app/shell/schedule/event-list/event-list.component.html","./src/app/shell/schedule/event-list/event-list.component.ts","./src/app/shell/schedule/schedule.template.html","./src/app/shell/schedule/schedule.component.ts","./src/app/shell/schedule/schedule.module.ts"],"names":[],"mappings":"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","file":"shell-schedule-schedule-module-ngfactory-es2015.js","sourcesContent":["<div class=\"container\">\n    <cdk-virtual-scroll-viewport itemSize=\"80\" (scrolledIndexChange)=\"checkScroll()\">\n        <div class=\"content\">\n            <ng-container *cdkVirtualFor=\"let item of items | async \">\n                <div #list_item [class]=\"'item ' + item.type\" [class.tentative]=\"item.is_tentative\" [class.declined]=\"item.is_declined\" [title]=\"item?.custom_name || item?.name || item?.title || item\"\n                    [ngSwitch]=\"item.type\" [id]=\"item.title\" (touchrelease)=\"item.type==='event'? view(item):''\">\n                    <ng-container *ngSwitchCase=\"'date'\">\n                        <div [id]=\"'item-'+item.date\" class=\"dot today\" *ngIf=\"item.today\"></div>{{item.title}}\n                    </ng-container>\n                    <ng-container *ngSwitchCase=\"'no-items'\">\n                        {{item.title}}\n                    </ng-container>\n                    <ng-container *ngSwitchCase=\"'event'\">\n                        <div class=\"period\">\n                            <div class=\"text\">{{item.all_day ? 'All Day' : item.display?.start}}</div>\n                            <div class=\"info\">{{item.display?.short_duration}}</div>\n                        </div>\n                        <div class=\"icon\">\n                            <img *ngIf=\"!item.visitors && item.attendees && item.attendees.length > 0\" src=\"assets/icon/roombooked.svg\">\n                            <img *ngIf=\"item.visitors\" src=\"assets/icon/events.svg\">\n                            <div class=\"dot\" *ngIf=\"!item.attendees || item.attendees.length <= 0\"></div>\n                        </div>\n                        <div class=\"details\">\n                            <div class=\"text\">{{item.title}}</div>\n                            <div class=\"location\" *ngIf=\"item.display && item.display.room\">\n                                <div class=\"icon\"><img src=\"assets/icon/location.svg\"></div>\n                                <div class=\"text\">{{item.location_name || 'No location set'}}</div>\n                            </div>\n                        </div>\n\n                    </ng-container>\n                    <div class=\"line\"></div>\n                </div>\n            </ng-container>\n        </div>\n    </cdk-virtual-scroll-viewport>\n    <div class=\"loader\" *ngIf=\"model.loading\">\n        <spinner type=\"circle-ring\" color=\"#000\"></spinner>\n    </div>\n</div>\n","import { animate, keyframes, style, transition, trigger } from '@angular/animations';\nimport { Component, OnInit, ViewChild, Input, OnChanges, OnDestroy } from '@angular/core';\nimport { CdkVirtualScrollViewport } from '@angular/cdk/scrolling';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { BaseDirective } from '../../../shared/globals/base.directive';\nimport { AppService } from '../../../services/app.service';\nimport { IBooking } from '../../../services/data/bookings.service';\nimport { Utils } from '../../../shared/utility.class';\nimport { IUser } from '../../../services/data/users.service';\n\nimport * as dayjs from 'dayjs';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n    MeetingDetailsOverlayComponent,\n    MeetingDetailsModalData\n} from '../../../overlays/meeting-details-overlay/meeting-details-overlay.component';\nimport { CONFIRM_METADATA } from '../../../overlays/confirm-modal/confirm-modal.component';\n\n@Component({\n    selector: 'schedule-event-list',\n    templateUrl: './event-list.component.html',\n    styleUrls: ['./event-list.component.scss'],\n    animations: [\n        trigger('show', [\n            transition(\n                'void => event',\n                animate(\n                    '.3s ease-out',\n                    keyframes([\n                        style({ height: 0, opacity: 0, offset: 0 }),\n                        style({ height: '80px', opacity: 1, offset: 1 })\n                    ])\n                )\n            )\n        ])\n    ]\n})\nexport class ScheduleEventListComponent extends BaseDirective\n    implements OnInit, OnChanges, OnDestroy {\n    /** User to show events for */\n    @Input() public user: IUser;\n    @Input() public date = dayjs().valueOf();\n    public model: any = {};\n    public items: BehaviorSubject<IBooking[]> = new BehaviorSubject([]);\n    public selected_index: number;\n\n    // @ViewChild('list') private list: ElementRef;\n\n    @ViewChild(CdkVirtualScrollViewport, { static: true })\n    private viewport: CdkVirtualScrollViewport;\n\n    constructor(private service: AppService, private _dialog: MatDialog) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.model.days = 15;\n        this.checkScroll();\n        this.items.subscribe(res => (this.model.list = res));\n        this.subscription(\n            'bookings',\n            this.service.Bookings.listen('timeline', timeline => {\n                let date = dayjs().startOf('d');\n                const end = date.add(this.model.days, 'd');\n                let list: IBooking[] = [];\n                for (; date.isBefore(end, 'm'); date = date.add(1, 'd')) {\n                    list = [...list, ...(timeline[date.format('YYYY/MM/DD')] || [])];\n                }\n                list = Utils.unique(list, 'order_id');\n                if (this.user) {\n                    list = list.filter(\n                        i =>\n                            i.organiser.email === this.user.email ||\n                            !!i.attendees.find(j => j.email === this.user.email)\n                    );\n                }\n                this.model.list = list;\n                this.processBookings();\n            })\n        );\n        this.loadBookings();\n        this.interval('update', () => this.updateBookings(), 10 * 1000);\n    }\n\n    public ngOnChanges(changes: any) {\n        if (changes.date) {\n            this.timeout('date_change', () => this.changeDate(this.date), 500);\n        }\n        if (changes.user) {\n            this.updateBookings();\n            this.interval('update', () => this.updateBookings(), 10 * 1000);\n        }\n    }\n\n    public ngOnDestroy(): void {\n        super.ngOnDestroy();\n        this.clearInterval('update');\n    }\n\n    public loadBookings() {\n        if (this.model.loading) {\n            return;\n        }\n        return new Promise((resolve, reject) => {\n            this.model.loading = true;\n            const date = dayjs().startOf('d');\n            const end = date.add(Math.max(3, this.model.days), 'd');\n            const user = this.service.Users.current();\n            if (!this.user) {\n                this.user = this.service.Users.current();\n            }\n            const user_list =\n                user.delegates && user.delegates.length > 0\n                    ? [user.email, ...user.delegates]\n                    : [user.email];\n            this.service.Bookings.query({\n                email: this.user\n                    ? this.user.email\n                    : user_list.reduce((a, v) => (a ? a + ',' : a) + v, ''),\n                from: date.unix(),\n                to: end.unix(),\n                timezone_offset: new Date().getTimezoneOffset()\n            }).then(\n                items => {\n                    this.service.Bookings.clear({ from: date.valueOf(), to: end.valueOf() });\n                    this.service.Bookings.updateList(Utils.unique(items, 'icaluid'));\n                    this.model.loading = false;\n                    resolve();\n                },\n                _ => {\n                    this.model.loading = false;\n                    reject();\n                }\n            );\n        });\n    }\n\n    public checkScroll() {\n        this.timeout(\n            'check_scroll',\n            () => {\n                if (!this.viewport) {\n                    return this.timeout('atBottom', () => this.checkScroll());\n                }\n                const start = this.viewport.getRenderedRange().start;\n                const end = this.viewport.getRenderedRange().end;\n                const total = this.viewport.getDataLength();\n                const from_start = dayjs()\n                    .add(this.model.from_start, 'd')\n                    .format('YYYY-MM-DD');\n                const items = this.items.getValue();\n                if (end === total) {\n                    this.atBottom();\n                } else if (\n                    this.model.from_start > 0 &&\n                    items.indexOf(items.find(i => i.id === from_start)) > start\n                ) {\n                    this.atTop();\n                }\n            },\n            100\n        );\n    }\n\n    public atBottom() {\n        if (this.model.loading) {\n            return;\n        }\n        this.model.days += 3;\n        this.interval('update', () => this.updateBookings(), 5 * 1000);\n        this.updateBookings();\n    }\n\n    public getViewLocation() {\n        if (this.viewport) {\n            const start = Math.floor(this.viewport.measureScrollOffset() / 80);\n            const items = this.items.getValue();\n            if (items && items.length > 0 && start < items.length) {\n                const item = items[start];\n                return item ? item.id : null;\n            }\n        }\n        return null;\n    }\n\n    public atTop() {\n        if (this.model.loading || this.model.from_start <= 0) {\n            return;\n        }\n        const range = this.viewport.getRenderedRange();\n        const now = dayjs().startOf('d');\n        const items = this.items.getValue();\n        const middle = Math.floor((range.start + range.end) / 2);\n        const time = dayjs(items && items[middle] ? items[middle].date : undefined);\n        this.model.from_start = Math.floor(time.diff(now, 'd'));\n        this.updateBookings();\n    }\n\n    public scrollTo(id: string, offset: number = 0, smooth: boolean = true) {\n        if (!id || (this.model.ignore && id !== this.model.ignore)) {\n            return;\n        }\n        const items = this.items.getValue();\n        const index = items.findIndex(i => i.id === id);\n        if (index >= 0) {\n            this.viewport.scrollToOffset(index * 80 + offset, smooth ? 'smooth' : 'auto');\n        }\n        this.timeout('ignore', () => (this.model.ignore = null), 1000);\n    }\n\n    public changeDate(date: number) {\n        const now = dayjs().startOf('d');\n        const day = dayjs(date);\n        let time = day.subtract(3, 'd');\n        if (time.isBefore(now, 'd')) {\n            time = dayjs(now);\n        }\n        if (day.diff(now, 'd') < this.model.days) {\n            this.model.ignore = day.format('YYYY-MM-DD');\n            this.scrollTo(day.format('YYYY-MM-DD'));\n        } else {\n            this.model.from_start = time.diff(now, 'd');\n            this.model.days = this.model.from_start + 8;\n            this.updateBookings().then(() => {\n                this.timeout('scroll', () => this.scrollTo(day.format('YYYY-MM-DD')), 1000);\n            });\n        }\n    }\n\n    public updateBookings() {\n        return new Promise((resolve, reject) => {\n            if (this.model.loading) {\n                return reject();\n            }\n            if (!this.viewport) {\n                return this.timeout('update_bookings', () =>\n                    this.updateBookings().then(resolve, reject)\n                );\n            }\n            if (!this.user) {\n                this.user = this.service.Users.current();\n            }\n            const range = this.viewport.getRenderedRange();\n            const now = dayjs().startOf('d');\n            const items = this.items.getValue();\n            const middle = Math.floor((range.start + range.end) / 2);\n            const date = items && items[middle] ? items[middle].date : undefined;\n            const start = dayjs(date)\n                .subtract(3, 'd')\n                .startOf('d');\n            const end = dayjs(date)\n                .add(3, 'd')\n                .endOf('d');\n            const from = start.isBefore(now, 'd') ? now.unix() : start.unix();\n            if (dayjs(from).isAfter(end, 's')) {\n                return;\n            }\n            this.setLoading(start.valueOf(), end.valueOf());\n            const user = this.service.Users.current();\n            const user_list =\n                user.delegates && user.delegates.length > 0\n                    ? [user.email, ...user.delegates]\n                    : [user.email];\n            this.model.loading = true;\n            this.service.Bookings.query({\n                email: this.user\n                    ? this.user.email\n                    : user_list.reduce((a, v) => (a ? a + ',' : a) + v, ''),\n                from,\n                to: end.unix(),\n                timezone_offset: new Date().getTimezoneOffset()\n            }).then(\n                list => {\n                    this.service.Bookings.clear({\n                        from: start.isBefore(now, 'd') ? now.valueOf() : start.valueOf(),\n                        to: end.valueOf()\n                    });\n                    this.service.Bookings.updateList(list);\n                    this.model.loading = false;\n                    resolve();\n                },\n                _ => {\n                    this.model.loading = false;\n                    reject();\n                }\n            );\n        });\n    }\n\n    public setLoading(start: number, end: number) {\n        let from = dayjs(start);\n        const to = dayjs(end);\n        const items: any[] = this.items.getValue();\n        for (; from.isBefore(to, 'm'); from = from.add(1, 'd')) {\n            const item = items.find(i => i.id === from.format('YYYY-MM-DD'));\n            if (item) {\n                item.loading = true;\n            }\n        }\n    }\n\n    public processBookings() {\n        this.timeout(\n            'process',\n            () => {\n                const offset = this.viewport.measureScrollOffset() % 80;\n                const scroll_id = this.getViewLocation();\n                this.model.list.sort((a, b) => a.date - b.date);\n                let list: any[] = [];\n                const now = dayjs();\n                let date = dayjs().startOf('d');\n                const end = date.add(this.model.days, 'd').endOf('d');\n                for (; date.isBefore(end, 'd') || date.isSame(end, 'd'); date = date.add(1, 'd')) {\n                    list.push({\n                        order_id: date.format('YYYY-MM-DD'),\n                        id: date.format('YYYY-MM-DD'),\n                        type: 'date',\n                        today: now.isSame(date, 'd'),\n                        title: date.format('dddd, DD MMM'),\n                        value: date.format('YYYY-MM-DD'),\n                        date: date.valueOf()\n                    });\n                    const length = list.length;\n                    for (const bkn of this.model.list) {\n                        if (bkn.type && bkn.type !== 'event') {\n                            continue;\n                        }\n                        const bkn_date = dayjs(bkn.for_date || bkn.date);\n                        if (bkn_date.isSame(date, 'd')) {\n                            const item = {\n                                ...bkn,\n                                room: bkn.room,\n                                room_list: bkn.room_list,\n                                status: bkn.status,\n                                type: 'event'\n                            };\n                            list.push(item);\n                        }\n                    }\n                    if (list.length === length) {\n                        list.push({\n                            order_id: `${date.format('YYYY-MM-DD')}-no-items`,\n                            type: 'no-items',\n                            title: 'No events',\n                            date: date.valueOf()\n                        });\n                    }\n                }\n                list.forEach(bkn => {\n                    const rooms = bkn.spaces || [];\n                    bkn.is_declined = rooms.reduce(\n                        (state, room) => state || bkn.approval_status[room] === 'declined',\n                        false\n                    );\n                    bkn.is_tentative = rooms.reduce(\n                        (state, room) =>\n                            state ||\n                            (bkn.approval_status[room] || '').indexOf('tentative') >= 0 ||\n                            (bkn.approval_status[room] || '').indexOf('not') >= 0,\n                        false\n                    );\n                });\n                list.sort((a, b) => (a.for_date || a.date) - (b.for_date || b.date));\n                list = Utils.unique(list, 'order_id');\n                this.items.next(list);\n                this.model.bookings = list.filter(i => i.id);\n                if (this.model.ignore && !!list.find(i => i.id === this.model.ignore)) {\n                    this.scrollTo(this.model.ignore);\n                } else {\n                    this.scrollTo(scroll_id, offset, false);\n                }\n            },\n            50\n        );\n    }\n\n    public view(item: any) {\n        this.model.mainIndex = this.model.bookings.indexOf(item);\n        const idx = this.model.mainIndex;\n        const ref = this._dialog.open<MeetingDetailsOverlayComponent, MeetingDetailsModalData>(\n            MeetingDetailsOverlayComponent,\n            {\n                maxHeight: 'auto',\n                maxWidth: 'auto',\n                width: 'auto',\n                height: 'auto',\n                hasBackdrop: false,\n                closeOnNavigation: true,\n                data: {\n                    booking: this.service.Bookings.item(item.id),\n                    as_delegate:\n                        this.user && this.user.email !== this.service.Users.current().email,\n                    delegate: this.user.email,\n                    is_first: idx === 0,\n                    is_last: idx === this.model.bookings.length - 1\n                }\n            }\n        );\n        this.subscription(\n            'details-modal',\n            ref.componentInstance.event.subscribe(event => {\n                if (event.reason === 'action') {\n                    switch (event.metadata) {\n                        case 'next':\n                            this.nextBooking();\n                            break;\n                        case 'previous':\n                            this.previousBooking();\n                            break;\n                    }\n                }\n            })\n        );\n        ref.afterClosed().subscribe(() => this.unsub('details-modal'));\n    }\n\n    public checkin() {\n        const index = this.model.mainIndex;\n        this.model.bookings[index].checkin = true;\n    }\n\n    public deletebooking() {\n        this.model.bookings.splice(this.model.mainIndex, 1);\n    }\n\n    public nextBooking() {\n        const index = this.model.mainIndex;\n        if (index < this.model.bookings.length - 1) {\n            this.view(this.model.bookings[index + 1]);\n        } else {\n            this.view(this.model.bookings[index]);\n        }\n    }\n\n    public previousBooking() {\n        const index = this.model.mainIndex;\n        if (index > 0) {\n            this.view(this.model.bookings[index - 1]);\n        } else {\n            this.view(this.model.bookings[index]);\n        }\n    }\n}\n","<div class=\"container\" [class.popout]=\"model.popout\" [class.visitor-dropdown]=\"model.visitorDropdown\">\n    <div class=\"header\">\n        <div class=\"icon text\">\n            <dropdown\n                *ngIf=\"users && users.length > 1\"\n                klass=\"no-back form\"\n                [list]=\"users\"\n                [model]=\"model.host\"\n                (modelChange)=\"model.show_user = users[$event]\"\n            ></dropdown>\n        </div>\n        <div class=\"buttons\">\n            <button mat-icon-button class=\"shadow\" (touchrelease)=\"model.show_tooltip = !model.show_tooltip\">\n                <app-icon\n                    tooltip\n                    [(show)]=\"model.show_tooltip\"\n                    [template]=\"calendar\"\n                    [triangle]=\"true\"\n                    position=\"bottom\"\n                    offset=\"end\"\n                    [icon]=\"{class:'material-icons', content: 'today'}\"\n                ></app-icon>\n            </button>\n        </div>\n    </div>\n    <ng-template #calendar>\n        <a-date-picker\n            class=\"themed\"\n            [ngModel]=\"model.date?.value\"\n            [counters]=\"model.events\"\n            [options]=\"{ from: model.today }\"\n            (ngModelChange)=\"setDate($event); model.show_tooltip = false\"\n        ></a-date-picker>\n    </ng-template>\n\n    <div class=\"body\">\n        <div class=\"events\" *ngIf=\"!model.settings || model.settings.visitors !== false\">\n            <schedule-event-list\n                [user]=\"model.show_user\"\n                [(date)]=\"model.date.value\"\n                (loading)=\"model.loading = $event\"\n            ></schedule-event-list>\n        </div>\n    </div>\n</div>\n","/*\n * @Author: Alex Sorafumo\n * @Date:   2017-05-16 14:12:48\n * @Last Modified by: Alex Sorafumo\n * @Last Modified time: 2018-08-08 14:49:27\n */\n\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { CdkVirtualScrollViewport } from '@angular/cdk/scrolling';\nimport { FormGroup, AbstractControl } from '@angular/forms';\n\nimport { AppService } from '../../services/app.service';\nimport { IBooking } from '../../services/data/bookings.service';\nimport { BaseDirective } from '../../shared/globals/base.directive';\n\nimport * as dayjs from 'dayjs';\nimport { IUser } from '../../services/data/users.service';\n\n@Component({\n    selector: 'app-schedule',\n    templateUrl: './schedule.template.html',\n    styleUrls: ['./schedule.styles.scss'],\n})\nexport class ScheduleComponent extends BaseDirective implements OnInit {\n    public model: any = {};\n    public form: FormGroup;\n    /** List of users that the current user can see the bookings of */\n    public users: IUser[] = [];\n    /** Email of the host of the last created booking */\n    public host: string;\n\n\n    private process_list = (dates) => (list) => {\n        const timeline: { [name: string]: IBooking[] } = this.service.Bookings.get('timeline');\n        for (const d of dates) {\n            this.service.Bookings.clear({ from: d });\n        }\n    }\n\n    constructor(private service: AppService, private route: ActivatedRoute) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.model.dates = [];\n        this.init();\n    }\n\n    public init() {\n        if (!this.service.ready()) {\n            return setTimeout(() => this.init(), 500);\n        }\n        this.model.day_count = this.service.Settings.get('app.schedule.length') || 14;\n        this.model.has_lockers = this.service.Settings.get('app.lockers.enabled');\n        this.model.popout = this.service.Settings.get('app.style.popout') || false;\n        this.model.settings = this.service.Settings.get('app.schedule');\n        if (this.model.settings.popout === false) {\n            this.model.popout = false;\n        }\n        this.service.set('BANNER.block_height', 0);\n        this.model.year = dayjs().year();\n        this.loadBookings();\n        this.model.visitorDropdown = false;\n        this.service.Analytics.screen('Schedule');\n        this.service.Analytics.page('/schedule');\n        this.model.today = dayjs().valueOf();\n        this.model.user = this.service.Users.current();\n        this.model.host = 0;\n        this.users = [this.model.user];\n        for (const email of this.model.user.delegates) {\n            let user = this.service.Users.item(email);\n            if (user) {\n                this.users.push(user);\n            } else {\n                this.service.Users.show(email).then((u) => {\n                    if (this.host && u.email === this.host) {\n                        this.model.host = this.users.length;\n                        this.model.show_user = u;\n                    }\n                    this.users.push(u);\n                });\n            }\n        }\n        this.model.lockers = this.model.user.lockers;\n        this.model.show_tooltip = false;\n        const date = this.model.date ? this.model.date.value : undefined;\n        this.model.is_today = dayjs().isSame(dayjs(date), 'd');\n        this.subscription('route', this.route.queryParamMap.subscribe((params) => {\n            if (params.has('host')) {\n                const email = params.get('host')\n                const index = this.users.findIndex(i => i.email === email);\n                this.model.host = index > 0 ? index : 0;\n                this.model.show_user = this.users[this.model.host];\n                this.host = email;\n            }\n        }));\n    }\n\n    public loadBookings() {\n        const date = dayjs().startOf('d');\n        this.model.date = this.model.dates.find(i => dayjs(i.value).isSame(date, 'd')) || {};\n        this.service.Bookings.listen<{ [name: string]: IBooking[] }>(`timeline`, (list) => {\n            this.timeout('update_timeline', () => this.processTimeline(list), 100);\n        });\n    }\n\n    public setDate(date: number) {\n        this.model.date = { value: date };\n    }\n\n    public changeDate(value: number) {\n        const date_obj = this.model.date ? this.model.date.value : undefined;\n        const date = dayjs(date_obj);\n        date.add(value, 'd');\n        this.setDate(date.valueOf());\n    }\n\n    public resetDate() {\n        this.setDate(dayjs().valueOf());\n    }\n\n    public toggleView(e: any) {\n        this.model.visitorDropdown = e;\n    }\n\n    public updateEvents(timestamp?: number) {\n        this.model.dates = [];\n        let date = dayjs(timestamp).startOf('M');\n        const end = date.endOf('M');\n        const now = dayjs();\n        for (; date.isBefore(end, 's'); date = date.add(1, 'd')) {\n            const date_obj = {\n                count: 0,\n                display: now.isSame(date, 'd') ? 'Today' : date.format('ddd, MMM Do'),\n                date: date.format('YYYY/MM/DD'),\n                value: date.valueOf()\n            };\n            this.model.dates.push(date_obj);\n        }\n        this.processTimeline(this.service.Bookings.get('timeline'));\n    }\n\n    public processTimeline(list: { [name: string]: IBooking[] }) {\n        this.model.events = {};\n        for (const day of this.model.dates) {\n            day.count = (list ? list[day.date] || [] : []).length;\n            this.model.events[dayjs(day.value).format('YYYY-MM-DD')] = day.count;\n        }\n    }\n\n}\n","\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ScrollingModule } from '@angular/cdk/scrolling';\nimport { ComposerModule } from '@acaprojects/ngx-composer';\n\nimport { WidgetsModule } from '@acaprojects/ngx-widgets';\nimport { RouterModule } from '@angular/router';\nimport { ROUTES } from './schedule.routes';\n\nimport { SharedComponentModule } from '../../shared/components/shared.module';\n\nimport { ScheduleComponent } from './schedule.component';\nimport { ScheduleEventListComponent } from './event-list/event-list.component';\n\nconst COMPONENTS: any = [\n    ScheduleComponent,\n    ScheduleEventListComponent,\n\n];\n\n@NgModule({\n    declarations: [\n        ...COMPONENTS\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        WidgetsModule,\n        ComposerModule,\n        RouterModule.forChild(ROUTES),\n        SharedComponentModule,\n        ScrollingModule\n    ],\n    exports: [\n        ...COMPONENTS\n    ]\n})\nexport class AppScheduleModule { }\n"],"sourceRoot":"webpack:///"}