{"version":3,"sources":["webpack:///node_modules/spacetime/builds/spacetime.mjs","webpack:///src/app/shell/bookings/bookings.component.ts","webpack:///src/app/shell/bookings/bookings.component.html","webpack:///src/app/shell/bookings/bookings.module.ts","webpack:///src/app/shell/bookings/overlays/catering-confirm-modal/catering-confirm-modal.component.ts","webpack:///src/app/shell/bookings/overlays/catering-confirm-modal/catering-confirm-modal.component.html","webpack:///src/app/shell/bookings/overlays/catering-details-modal/catering-details-modal.component.ts","webpack:///src/app/shell/bookings/overlays/catering-details-modal/catering-details-modal.component.html","webpack:///src/app/shell/bookings/overlays/package-options-modal/package-options-modal.component.ts","webpack:///src/app/shell/bookings/overlays/package-options-modal/package-options-modal.component.html","webpack:///src/app/shell/bookings/overlays/recurrence-spaces-modal/recurrence-spaces-modal.component.ts","webpack:///src/app/shell/bookings/overlays/recurrence-spaces-modal/recurrence-spaces-modal.component.html","webpack:///src/app/shell/bookings/space-flow/catering/catering.component.ts","webpack:///src/app/shell/bookings/space-flow/catering/catering.component.html","webpack:///src/app/shell/bookings/space-flow/catering/order-details/category/category.component.ts","webpack:///src/app/shell/bookings/space-flow/catering/order-details/category/category.component.html","webpack:///src/app/shell/bookings/space-flow/catering/order-details/item/item.component.ts","webpack:///src/app/shell/bookings/space-flow/catering/order-details/item/item.component.html","webpack:///src/app/shell/bookings/space-flow/catering/order-details/order-details.component.ts","webpack:///src/app/shell/bookings/space-flow/catering/order-details/order-details.component.html","webpack:///src/app/shell/bookings/space-flow/catering/order-list/item/item.component.ts","webpack:///src/app/shell/bookings/space-flow/catering/order-list/item/item.component.html","webpack:///src/app/shell/bookings/space-flow/catering/order-list/order-list.component.ts","webpack:///src/app/shell/bookings/space-flow/catering/order-list/order-list.component.html","webpack:///src/app/shell/bookings/space-flow/find-space/filters/filters.component.ts","webpack:///src/app/shell/bookings/space-flow/find-space/filters/filters.component.html","webpack:///src/app/shell/bookings/space-flow/find-space/find-space.component.ts","webpack:///src/app/shell/bookings/space-flow/find-space/find-space.component.html","webpack:///src/app/shell/bookings/space-flow/find-space/item/item.component.ts","webpack:///src/app/shell/bookings/space-flow/find-space/item/item.component.html","webpack:///src/app/shell/bookings/space-flow/form/form.component.ts","webpack:///src/app/shell/bookings/space-flow/form/form.component.html","webpack:///src/app/shell/bookings/space-flow/space-flow.component.ts","webpack:///src/app/shell/bookings/space-flow/space-flow.component.html"],"names":["createCommonjsModule","fn","module","exports","getCjsExportFromNamespace","n","fns","isLeapYear","year","isDate","d","Object","prototype","toString","call","isNaN","valueOf","isArray","input","isObject","zeroPad","str","len","arguments","length","undefined","pad","Array","join","titleCase","toUpperCase","substr","ordinal","i","j","k","toCardinal","String","replace","parseInt","normalize","toLowerCase","trim","getEpoch","tmp","getTime","epoch","beADate","s","clone","set","formatTimezone","offset","delimiter","absOffset","Math","abs","sign","concat","fns_1","fns_2","fns_3","fns_4","fns_5","fns_6","fns_7","fns_8","fns_9","fns_10","fns_11","fns_12","serialize","getMonth","getDate","getHours","shouldChange","start","end","defaultOffset","Date","bias","getTimezoneOffset","shift","current","summerTime","quickOffset","zones","timezones","obj","tz","console","warn","dst","jul","dec","hem","split","inSummer","quick","_build","_build$1","freeze","__proto__","_prefixes","data","all","keys","forEach","Number","names","before","num","name","unpack","fallbackTZ","safeIntl","Intl","DateTimeFormat","format","resolvedOptions","timezone","timeZone","guessTz","guessTz_1","isOffset","isNumber","utcOffset","gmtOffset","toIana","parseOffset","m","match","parseOffset_1","local","cities","reduce","h","city","lookupTz","hasOwnProperty","test","id","Error","find","o","millisecond","second","minute","hour","day","date","month","week","milliseconds","walk","unit","previous","startUnit","original","diff","halfStep","units","valid","walkTo","getFullYear","seconds","wants","old","silent","walk_1","shortMonths","longMonths","buildMapping","sep","_i","months","short","long","mapping","i18n","parseOffset$1","parseFloat","parseOffset_1$1","parseTime","arr","startOf","ampm","_h","parseTime_1","monthLengths","monthLengths_1","hasDate","max","hasDate_1","months$1","parseYear","strFmt","reg","parse","givenTz","options","british","strParse","dates","now","tonight","today","tomorrow","add","yesterday","subtract","christmas","newYears","namedDates","minimumEpoch","defaults","handleArray","order","handleObject","assign","parseInput","res","shortDays","longDays","days","isoOffset","isNegative","floor","ceil","_offset","dayName","dayShort","dayNumber","dayOrdinal","dayPad","dateOrdinal","datePad","monthName","monthShort","monthNumber","monthOrdinal","monthPad","isoMonth","yearShort","isoYear","time","time24","hour24","hour12","hourPad","hour24Pad","minutePad","secondPad","quarter","season","era","json","numeric","numericUs","numericUk","mmDd","iso","h24","ms","isoShort","isoUtc","toISOString","nice","niceYear","niceDay","niceFull","aliases","mdy","dmy","ymd","printFormat","isValid","out","indexOf","sections","_","fmt","format_1","G","GG","GGG","GGGG","y","yy","yyy","yyyy","yyyyy","Q","QQ","QQQ","QQQQ","M","MM","MMM","MMMM","w","ww","dd","D","dayOfYear","DD","DDD","E","EE","EEE","EEEE","EEEEE","e","ee","eee","eeee","eeeee","a","aa","aaa","aaaa","h12","hh","H","HH","mm","_s","ss","A","z","zz","zzz","zzzz","Z","ZZ","ZZZ","ZZZZ","addAlias","_char","to","toName","unixFmt","chars","quoteOn","push","txt","c","unixFmt_1","units$1","doUnit","endOf","duration","percent","toFixed","progress","progress_1","nearest","prog","nearest_1","climb","b","isBefore","isAfter","diffOne","one","fastYear","years","msDiff","minutes","hours","weeks","waterfall","reverseDiff","main","reversed","diff$1","qualifiers","almost","over","getDiff","later","earlier","isSame","u","pluralize","value","slice","since","isNow","every","rounded","qualified","precise","englishValues","englishValue","nextUnit","nextValue","splice","since_1","seasons","north","south","quarters","units$2","quarterhour","_weekStart","q","hemisphere","decade","century","startOf_1","isDay","next","result","every_1","parseDst","epochShift","found","hasDst","Boolean","default_offset","change","back","summer","winter","isDST","timezone_1","units$3","methods","input$1","hasDST","leapYear","last","goto","isAwake","isAsleep","log","logYear","_this","debug","from","fromNow","weekStart","inDST","round","each","methods_1","validate","confirm","want","methods$1","getMilliseconds","getSeconds","getMinutes","hourFloat","_minute","_hour","which","dayTime","times","morning","breakfast","noon","lunch","afternoon","evening","dinner","night","midnight","_01Time","methods$2","getDay","_02Date","clearMinutes","methods$3","sum","setDate","setFullYear","setHours","setMinutes","setMonth","toAdd","minus","thisOne","skipWeeks","_month","millenium","_03Year","methods$4","addMethods","Space","query","order$1","keep","dstAwareUnits","keepDate","rollMonth","_years","addMethods$1","SpaceTime","_sum","plus","print","addMethods$2","same","addMethods$3","isEqual","isBetween","isInclusive","startEpoch","endEpoch","compare","addMethods$4","defineProperty","get","toLocalDate","spacetime","whereIts","startHour","endHour","tzs","filter","whereIts_1","_version","main$1","extend","version","plugin","src","BookingsComponent","_service","_route","_router","title","subscription","paramMap","subscribe","params","has","flow","events","event","url","localStorage","removeItem","selector","templateUrl","styleUrls","ROUTES","path","component","redirectTo","BookingsModule","forChild","declarations","imports","BookingCateringConfirmModalComponent","_dialog_ref","_data","item_list","form","notifyError","close","controls","items","valueChanges","map","item","space","amount","unit_price","level","building","Organisation","buildings","bld","building_id","currency","CateringDetailsModalComponent","notes","codes","head_counts","needs_charge_code","active_space","note_list","notes_field","note","type","message","catering","location_id","charge_code","generateFormFields","space_list","markAllAsTouched","is_valid","new_notes","author","Users","setValue","orders","code","emit","reason","spaces","submit","checkItemRequirements","category","must_select","getActiveItems","PackageOptionsModalComponent","a_package","option","state","needed","active","an_item","setAmount","RecurrenceSpacesModalComponent","_dialog","occurrences","space_details","conflicts","updateOccurrences","metadata","occurrence","ref","open","width","height","maxWidth","zone_ids","host","multiple","componentInstance","unshift","email","replaces","unsub","recurr_available","details","Spaces","date_string","replaced_by","available","save","BookingCateringComponent","active_order","index","findIndex","an_order","all_day","CateringMenuCategoryComponent","CateringMenuItemComponent","changes","field","list","selectPackageOptions","then","confirmed_item","timeout","notifyWarn","Promise","resolve","reject","done","afterClosed","a_list","animations","BookingCateringOrderDetailsComponent","category_list","available_times","loadMenu","generateAvailableTimes","initForm","booking_date","delivery_time","loading","Menu","room_id","start_date","generateStartAndEndTimes","building_time","toDate","as_dayjs","possible_end","active_building","has_catering","within_restricted_time","has_available_items","form_controls","catering_restricted_from","total","restricted","can_order_anytime","confirmOrder","CateringOrderListItemComponent","edit","BookingCateringOrderListComponent","step","BookingSpaceFiltersComponent","locations","locationsChange","building_list","listen","bld_list","is_today","BookingFindSpaceComponent","change$","initialised","pipe","search_results$","recurrence","recurrence_properties","period","recurr_period","recurr_end","unix","bookable","onChange","setting","BookingSpaceItemComponent","select","maxHeight","availability","selected","organiser","recurr","conflict_list","byRequest","count","ocurrence","BookingSpaceFlowFormComponent","can_return","container","nativeElement","scrollIntoView","behavior","block","inline","resetForm","BookingSpaceFlowComponent","settings","flow_step","loadFormData","toNextFlowStep","toPreviousFlowStep","multiple_spaces","openEquipmentDetailsModal","navigate","confirmBooking","order_list","openCateringDetailsModal","needs_space","route","queryParamsHandling","booking","clearPendingChanges","available_fields","form_data","form_string","getItem","JSON","Bookings","changeEvents","saveFormData","key","storePendingChange","room_ids","setItem","stringify","toJSON","codes_field","equipment_codes","head_counts_field","expected_attendees","has_changes","notifyInfo","dialog_ref","show_fields"],"mappings":"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","file":"shell-bookings-bookings-module-es5.js","sourcesContent":["/* spencermountain/spacetime 6.4.3 Apache 2.0 */\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nfunction getCjsExportFromNamespace (n) {\n\treturn n && n['default'] || n;\n}\n\nvar fns = createCommonjsModule(function (module, exports) {\n  //git:blame @JuliasCaesar https://www.timeanddate.com/date/leapyear.html\n  exports.isLeapYear = function (year) {\n    return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;\n  }; // unsurprisingly-nasty `typeof date` call\n\n\n  exports.isDate = function (d) {\n    return Object.prototype.toString.call(d) === '[object Date]' && !isNaN(d.valueOf());\n  };\n\n  exports.isArray = function (input) {\n    return Object.prototype.toString.call(input) === '[object Array]';\n  };\n\n  exports.isObject = function (input) {\n    return Object.prototype.toString.call(input) === '[object Object]';\n  };\n\n  exports.zeroPad = function (str) {\n    var len = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    var pad = '0';\n    str = str + '';\n    return str.length >= len ? str : new Array(len - str.length + 1).join(pad) + str;\n  };\n\n  exports.titleCase = function (str) {\n    if (!str) {\n      return '';\n    }\n\n    return str[0].toUpperCase() + str.substr(1);\n  };\n\n  exports.ordinal = function (i) {\n    var j = i % 10;\n    var k = i % 100;\n\n    if (j === 1 && k !== 11) {\n      return i + 'st';\n    }\n\n    if (j === 2 && k !== 12) {\n      return i + 'nd';\n    }\n\n    if (j === 3 && k !== 13) {\n      return i + 'rd';\n    }\n\n    return i + 'th';\n  }; //strip 'st' off '1st'..\n\n\n  exports.toCardinal = function (str) {\n    str = String(str);\n    str = str.replace(/([0-9])(st|nd|rd|th)$/i, '$1');\n    return parseInt(str, 10);\n  }; //used mostly for cleanup of unit names, like 'months'\n\n\n  exports.normalize = function () {\n    var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    str = str.toLowerCase().trim();\n    str = str.replace(/ies$/, 'y'); //'centuries'\n\n    str = str.replace(/s$/, '');\n    str = str.replace(/-/g, '');\n\n    if (str === 'day') {\n      return 'date';\n    }\n\n    return str;\n  };\n\n  exports.getEpoch = function (tmp) {\n    //support epoch\n    if (typeof tmp === 'number') {\n      return tmp;\n    } //suport date objects\n\n\n    if (exports.isDate(tmp)) {\n      return tmp.getTime();\n    }\n\n    if (tmp.epoch) {\n      return tmp.epoch;\n    }\n\n    return null;\n  }; //make sure this input is a spacetime obj\n\n\n  exports.beADate = function (d, s) {\n    if (exports.isObject(d) === false) {\n      return s.clone().set(d);\n    }\n\n    return d;\n  };\n\n  exports.formatTimezone = function (offset) {\n    var delimiter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var absOffset = Math.abs(offset);\n    var sign = offset > 0 ? '+' : '-';\n    return \"\".concat(sign).concat(exports.zeroPad(absOffset)).concat(delimiter, \"00\");\n  };\n});\nvar fns_1 = fns.isLeapYear;\nvar fns_2 = fns.isDate;\nvar fns_3 = fns.isArray;\nvar fns_4 = fns.isObject;\nvar fns_5 = fns.zeroPad;\nvar fns_6 = fns.titleCase;\nvar fns_7 = fns.ordinal;\nvar fns_8 = fns.toCardinal;\nvar fns_9 = fns.normalize;\nvar fns_10 = fns.getEpoch;\nvar fns_11 = fns.beADate;\nvar fns_12 = fns.formatTimezone;\n\nvar zeroPad = fns.zeroPad;\n\nvar serialize = function serialize(d) {\n  return zeroPad(d.getMonth() + 1) + '/' + zeroPad(d.getDate()) + ':' + zeroPad(d.getHours());\n}; // a timezone will begin with a specific offset in january\n// then some will switch to something else between november-march\n\n\nvar shouldChange = function shouldChange(epoch, start, end, defaultOffset) {\n  //note: this has a cray order-of-operations issue\n  //we can't get the date, without knowing the timezone, and vice-versa\n  //it's possible that we can miss a dst-change by a few hours.\n  var d = new Date(epoch); //(try to mediate this a little?)\n\n  var bias = d.getTimezoneOffset() || 0;\n  var shift = bias + defaultOffset * 60; //in minutes\n\n  shift = shift * 60 * 1000; //in ms\n\n  d = new Date(epoch + shift);\n  var current = serialize(d); //eg. is it after ~november?\n\n  if (current >= start) {\n    //eg. is it before ~march~ too?\n    if (current < end) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\nvar summerTime = shouldChange;\n\n// it reproduces some things in ./index.js, but speeds up spacetime considerably\n\nvar quickOffset = function quickOffset(s) {\n  var zones = s.timezones;\n  var obj = zones[s.tz];\n\n  if (obj === undefined) {\n    console.warn(\"Warning: couldn't find timezone \" + s.tz);\n    return 0;\n  }\n\n  if (obj.dst === undefined) {\n    return obj.offset;\n  } //get our two possible offsets\n\n\n  var jul = obj.offset;\n  var dec = obj.offset + 1; // assume it's the same for now\n\n  if (obj.hem === 'n') {\n    dec = jul - 1;\n  }\n\n  var split = obj.dst.split('->');\n  var inSummer = summerTime(s.epoch, split[0], split[1], jul);\n\n  if (inSummer === true) {\n    return jul;\n  }\n\n  return dec;\n};\n\nvar quick = quickOffset;\n\nvar _build = {\n\t\"9|s\": \"2/dili,2/jayapura\",\n\t\"9|n\": \"2/chita,2/khandyga,2/pyongyang,2/seoul,2/tokyo,11/palau\",\n\t\"9.5|s|04/05:03->10/04:02\": \"4/adelaide,4/broken_hill,4/south,4/yancowinna\",\n\t\"9.5|s\": \"4/darwin,4/north\",\n\t\"8|s\": \"12/casey,2/kuala_lumpur,2/makassar,2/singapore,4/perth,4/west\",\n\t\"8|n|03/25:03->09/29:23\": \"2/ulan_bator\",\n\t\"8|n\": \"2/brunei,2/choibalsan,2/chongqing,2/chungking,2/harbin,2/hong_kong,2/irkutsk,2/kuching,2/macao,2/macau,2/manila,2/shanghai,2/taipei,2/ujung_pandang,2/ulaanbaatar\",\n\t\"8.75|s\": \"4/eucla\",\n\t\"7|s\": \"12/davis,2/jakarta,9/christmas\",\n\t\"7|n\": \"2/bangkok,2/barnaul,2/ho_chi_minh,2/hovd,2/krasnoyarsk,2/novokuznetsk,2/novosibirsk,2/phnom_penh,2/pontianak,2/saigon,2/tomsk,2/vientiane\",\n\t\"6|s\": \"12/vostok\",\n\t\"6|n\": \"2/almaty,2/bishkek,2/dacca,2/dhaka,2/kashgar,2/omsk,2/qyzylorda,2/thimbu,2/thimphu,2/urumqi,9/chagos\",\n\t\"6.5|n\": \"2/rangoon,2/yangon,9/cocos\",\n\t\"5|s\": \"12/mawson,9/kerguelen\",\n\t\"5|n\": \"2/aqtau,2/aqtobe,2/ashgabat,2/ashkhabad,2/atyrau,2/baku,2/dushanbe,2/karachi,2/oral,2/samarkand,2/tashkent,2/yekaterinburg,9/maldives\",\n\t\"5.75|n\": \"2/kathmandu,2/katmandu\",\n\t\"5.5|n\": \"2/calcutta,2/colombo,2/kolkata\",\n\t\"4|s\": \"9/reunion\",\n\t\"4|n\": \"2/dubai,2/muscat,2/tbilisi,2/yerevan,8/astrakhan,8/samara,8/saratov,8/ulyanovsk,8/volgograd,2/volgograd,9/mahe,9/mauritius\",\n\t\"4.5|n|03/21:00->09/20:24\": \"2/tehran\",\n\t\"4.5|n\": \"2/kabul\",\n\t\"3|s\": \"12/syowa,9/antananarivo\",\n\t\"3|n|03/29:03->10/25:04\": \"2/famagusta,2/nicosia,8/athens,8/bucharest,8/helsinki,8/kiev,8/mariehamn,8/nicosia,8/riga,8/sofia,8/tallinn,8/uzhgorod,8/vilnius,8/zaporozhye\",\n\t\"3|n|03/29:02->10/25:03\": \"8/chisinau,8/tiraspol\",\n\t\"3|n|03/29:00->10/24:24\": \"2/beirut\",\n\t\"3|n|03/27:02->10/25:02\": \"2/jerusalem,2/tel_aviv\",\n\t\"3|n|03/27:00->10/31:01\": \"2/gaza,2/hebron\",\n\t\"3|n|03/27:00->10/30:01\": \"2/amman\",\n\t\"3|n|03/27:00->10/29:24\": \"2/damascus\",\n\t\"3|n\": \"0/addis_ababa,0/asmara,0/asmera,0/dar_es_salaam,0/djibouti,0/juba,0/kampala,0/mogadishu,0/nairobi,2/aden,2/baghdad,2/bahrain,2/istanbul,2/kuwait,2/qatar,2/riyadh,8/istanbul,8/kirov,8/minsk,8/moscow,8/simferopol,9/comoro,9/mayotte\",\n\t\"2|s|03/29:02->10/25:02\": \"12/troll\",\n\t\"2|s\": \"0/gaborone,0/harare,0/johannesburg,0/lubumbashi,0/lusaka,0/maputo,0/maseru,0/mbabane\",\n\t\"2|n|03/29:02->10/25:03\": \"0/ceuta,arctic/longyearbyen,3/jan_mayen,8/amsterdam,8/andorra,8/belgrade,8/berlin,8/bratislava,8/brussels,8/budapest,8/busingen,8/copenhagen,8/gibraltar,8/ljubljana,8/luxembourg,8/madrid,8/malta,8/monaco,8/oslo,8/paris,8/podgorica,8/prague,8/rome,8/san_marino,8/sarajevo,8/skopje,8/stockholm,8/tirane,8/vaduz,8/vatican,8/vienna,8/warsaw,8/zagreb,8/zurich\",\n\t\"2|n\": \"0/blantyre,0/bujumbura,0/cairo,0/khartoum,0/kigali,0/tripoli,8/kaliningrad\",\n\t\"1|s|04/02:01->09/03:03\": \"0/windhoek\",\n\t\"1|s\": \"0/kinshasa,0/luanda\",\n\t\"1|n|04/19:03->05/24:02\": \"0/casablanca,0/el_aaiun\",\n\t\"1|n|03/29:01->10/25:02\": \"3/canary,3/faeroe,3/faroe,3/madeira,8/belfast,8/dublin,8/guernsey,8/isle_of_man,8/jersey,8/lisbon,8/london\",\n\t\"1|n\": \"0/algiers,0/bangui,0/brazzaville,0/douala,0/lagos,0/libreville,0/malabo,0/ndjamena,0/niamey,0/porto-novo,0/tunis\",\n\t\"14|n\": \"11/kiritimati\",\n\t\"13|s|04/05:04->09/27:03\": \"11/apia\",\n\t\"13|s|01/15:02->11/05:03\": \"11/tongatapu\",\n\t\"13|n\": \"11/enderbury,11/fakaofo\",\n\t\"12|s|04/05:03->09/27:02\": \"12/mcmurdo,12/south_pole,11/auckland\",\n\t\"12|s|01/12:03->11/08:02\": \"11/fiji\",\n\t\"12|n\": \"2/anadyr,2/kamchatka,2/srednekolymsk,11/funafuti,11/kwajalein,11/majuro,11/nauru,11/tarawa,11/wake,11/wallis\",\n\t\"12.75|s|04/05:03->04/05:02\": \"11/chatham\",\n\t\"11|s\": \"12/macquarie,11/bougainville\",\n\t\"11|n\": \"2/magadan,2/sakhalin,11/efate,11/guadalcanal,11/kosrae,11/noumea,11/pohnpei,11/ponape\",\n\t\"11.5|n|04/05:03->10/04:02\": \"11/norfolk\",\n\t\"10|s|04/05:03->10/04:02\": \"4/act,4/canberra,4/currie,4/hobart,4/melbourne,4/nsw,4/sydney,4/tasmania,4/victoria\",\n\t\"10|s\": \"12/dumontdurville,4/brisbane,4/lindeman,4/queensland\",\n\t\"10|n\": \"2/ust-nera,2/vladivostok,2/yakutsk,11/chuuk,11/guam,11/port_moresby,11/saipan,11/truk,11/yap\",\n\t\"10.5|s|04/05:01->10/04:02\": \"4/lhi,4/lord_howe\",\n\t\"0|n|03/29:00->10/25:01\": \"1/scoresbysund,3/azores\",\n\t\"0|n\": \"0/abidjan,0/accra,0/bamako,0/banjul,0/bissau,0/conakry,0/dakar,0/freetown,0/lome,0/monrovia,0/nouakchott,0/ouagadougou,0/sao_tome,0/timbuktu,1/danmarkshavn,3/reykjavik,3/st_helena,13/gmt,13/gmt+0,13/gmt-0,13/gmt0,13/greenwich,13/utc,13/universal,13/zulu\",\n\t\"-9|n|03/08:02->11/01:02\": \"1/adak,1/atka\",\n\t\"-9|n\": \"11/gambier\",\n\t\"-9.5|n\": \"11/marquesas\",\n\t\"-8|n|03/08:02->11/01:02\": \"1/anchorage,1/juneau,1/metlakatla,1/nome,1/sitka,1/yakutat\",\n\t\"-8|n\": \"11/pitcairn\",\n\t\"-7|n|03/08:02->11/01:02\": \"1/dawson,1/ensenada,1/los_angeles,1/santa_isabel,1/tijuana,1/vancouver,1/whitehorse,6/pacific,6/yukon,10/bajanorte\",\n\t\"-7|n\": \"1/creston,1/dawson_creek,1/hermosillo,1/phoenix\",\n\t\"-6|s|04/04:22->09/05:22\": \"7/easterisland,11/easter\",\n\t\"-6|n|04/05:02->10/25:02\": \"1/chihuahua,1/mazatlan,10/bajasur\",\n\t\"-6|n|03/08:02->11/01:02\": \"1/boise,1/cambridge_bay,1/denver,1/edmonton,1/inuvik,1/ojinaga,1/shiprock,1/yellowknife,6/mountain\",\n\t\"-6|n\": \"1/belize,1/costa_rica,1/el_salvador,1/guatemala,1/managua,1/regina,1/swift_current,1/tegucigalpa,6/east-saskatchewan,6/saskatchewan,11/galapagos\",\n\t\"-5|s\": \"1/lima,1/rio_branco,5/acre\",\n\t\"-5|n|04/05:02->10/25:02\": \"1/bahia_banderas,1/merida,1/mexico_city,1/monterrey,10/general\",\n\t\"-5|n|03/12:03->11/05:01\": \"1/north_dakota\",\n\t\"-5|n|03/08:02->11/01:02\": \"1/chicago,1/knox_in,1/matamoros,1/menominee,1/rainy_river,1/rankin_inlet,1/resolute,1/winnipeg,6/central\",\n\t\"-5|n\": \"1/atikokan,1/bogota,1/cancun,1/cayman,1/coral_harbour,1/eirunepe,1/guayaquil,1/jamaica,1/panama,1/porto_acre\",\n\t\"-4|s|05/13:23->08/13:01\": \"12/palmer\",\n\t\"-4|s|04/04:24->09/06:00\": \"1/santiago,7/continental\",\n\t\"-4|s|03/21:24->10/04:00\": \"1/asuncion\",\n\t\"-4|s|02/16:24->11/03:00\": \"1/campo_grande,1/cuiaba\",\n\t\"-4|s\": \"1/la_paz,1/manaus,5/west\",\n\t\"-4|n|03/12:03->11/05:01\": \"1/indiana,1/kentucky\",\n\t\"-4|n|03/08:02->11/01:02\": \"1/detroit,1/fort_wayne,1/grand_turk,1/indianapolis,1/iqaluit,1/louisville,1/montreal,1/nassau,1/new_york,1/nipigon,1/pangnirtung,1/port-au-prince,1/thunder_bay,1/toronto,6/eastern\",\n\t\"-4|n|03/08:00->11/01:01\": \"1/havana\",\n\t\"-4|n\": \"1/anguilla,1/antigua,1/aruba,1/barbados,1/blanc-sablon,1/boa_vista,1/caracas,1/curacao,1/dominica,1/grenada,1/guadeloupe,1/guyana,1/kralendijk,1/lower_princes,1/marigot,1/martinique,1/montserrat,1/port_of_spain,1/porto_velho,1/puerto_rico,1/santo_domingo,1/st_barthelemy,1/st_kitts,1/st_lucia,1/st_thomas,1/st_vincent,1/tortola,1/virgin\",\n\t\"-3|s\": \"1/argentina,1/buenos_aires,1/cordoba,1/fortaleza,1/montevideo,1/punta_arenas,1/sao_paulo,12/rothera,3/stanley,5/east\",\n\t\"-3|n|03/08:02->11/01:02\": \"1/glace_bay,1/goose_bay,1/halifax,1/moncton,1/thule,3/bermuda,6/atlantic\",\n\t\"-3|n\": \"1/araguaina,1/bahia,1/belem,1/catamarca,1/cayenne,1/jujuy,1/maceio,1/mendoza,1/paramaribo,1/recife,1/rosario,1/santarem\",\n\t\"-2|s\": \"5/denoronha\",\n\t\"-2|n|03/28:22->10/24:23\": \"1/godthab\",\n\t\"-2|n|03/08:02->11/01:02\": \"1/miquelon\",\n\t\"-2|n\": \"1/noronha,3/south_georgia\",\n\t\"-2.5|n|03/08:02->11/01:02\": \"1/st_johns,6/newfoundland\",\n\t\"-1|n\": \"3/cape_verde\",\n\t\"-11|n\": \"11/midway,11/niue,11/pago_pago,11/samoa\",\n\t\"-10|n\": \"11/honolulu,11/johnston,11/rarotonga,11/tahiti\"\n};\n\nvar _build$1 = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\t'default': _build\n});\n\n//prefixes for iana names..\nvar _prefixes = ['africa', 'america', 'asia', 'atlantic', 'australia', 'brazil', 'canada', 'chile', 'europe', 'indian', 'mexico', 'pacific', 'antarctica', 'etc'];\n\nvar data = getCjsExportFromNamespace(_build$1);\n\nvar all = {};\nObject.keys(data).forEach(function (k) {\n  var split = k.split('|');\n  var obj = {\n    offset: Number(split[0]),\n    hem: split[1]\n  };\n\n  if (split[2]) {\n    obj.dst = split[2];\n  }\n\n  var names = data[k].split(',');\n  names.forEach(function (str) {\n    str = str.replace(/(^[0-9]+)\\//, function (before, num) {\n      num = Number(num);\n      return _prefixes[num] + '/';\n    });\n    all[str] = obj;\n  });\n});\nall['utc'] = {\n  offset: 0,\n  hem: 'n' //(sorry)\n\n}; //add etc/gmt+n\n\nfor (var i = -14; i <= 14; i += 0.5) {\n  var num = i;\n\n  if (num > 0) {\n    num = '+' + num;\n  }\n\n  var name = 'etc/gmt' + num;\n  all[name] = {\n    offset: i * -1,\n    //they're negative!\n    hem: 'n' //(sorry)\n\n  };\n  name = 'utc/gmt' + num; //this one too, why not.\n\n  all[name] = {\n    offset: i * -1,\n    hem: 'n'\n  };\n} // console.log(all)\n// console.log(Object.keys(all).length)\n\n\nvar unpack = all;\n\n//find the implicit iana code for this machine.\n//safely query the Intl object\n//based on - https://bitbucket.org/pellepim/jstimezonedetect/src\nvar fallbackTZ = 'utc'; //\n//this Intl object is not supported often, yet\n\nvar safeIntl = function safeIntl() {\n  if (typeof Intl === 'undefined' || typeof Intl.DateTimeFormat === 'undefined') {\n    return null;\n  }\n\n  var format = Intl.DateTimeFormat();\n\n  if (typeof format === 'undefined' || typeof format.resolvedOptions === 'undefined') {\n    return null;\n  }\n\n  var timezone = format.resolvedOptions().timeZone;\n\n  if (!timezone) {\n    return null;\n  }\n\n  return timezone.toLowerCase();\n};\n\nvar guessTz = function guessTz() {\n  var timezone = safeIntl();\n\n  if (timezone === null) {\n    return fallbackTZ;\n  }\n\n  return timezone;\n}; //do it once per computer\n\n\nvar guessTz_1 = guessTz;\n\nvar isOffset = /(\\-?[0-9]+)h(rs)?/i;\nvar isNumber = /(\\-?[0-9]+)/;\nvar utcOffset = /utc([\\-+]?[0-9]+)/i;\nvar gmtOffset = /gmt([\\-+]?[0-9]+)/i;\n\nvar toIana = function toIana(num) {\n  num = Number(num);\n\n  if (num > -13 && num < 13) {\n    num = num * -1; //it's opposite!\n\n    num = (num > 0 ? '+' : '') + num; //add plus sign\n\n    return 'etc/gmt' + num;\n  }\n\n  return null;\n};\n\nvar parseOffset = function parseOffset(tz) {\n  // '+5hrs'\n  var m = tz.match(isOffset);\n\n  if (m !== null) {\n    return toIana(m[1]);\n  } // 'utc+5'\n\n\n  m = tz.match(utcOffset);\n\n  if (m !== null) {\n    return toIana(m[1]);\n  } // 'GMT-5' (not opposite)\n\n\n  m = tz.match(gmtOffset);\n\n  if (m !== null) {\n    var num = Number(m[1]) * -1;\n    return toIana(num);\n  } // '+5'\n\n\n  m = tz.match(isNumber);\n\n  if (m !== null) {\n    return toIana(m[1]);\n  }\n\n  return null;\n};\n\nvar parseOffset_1 = parseOffset;\n\nvar local = guessTz_1(); //add all the city names by themselves\n\nvar cities = Object.keys(unpack).reduce(function (h, k) {\n  var city = k.split('/')[1] || '';\n  city = city.replace(/_/g, ' ');\n  h[city] = k;\n  return h;\n}, {}); //try to match these against iana form\n\nvar normalize = function normalize(tz) {\n  tz = tz.replace(/ time/g, '');\n  tz = tz.replace(/ (standard|daylight|summer)/g, '');\n  tz = tz.replace(/\\b(east|west|north|south)ern/g, '$1');\n  tz = tz.replace(/\\b(africa|america|australia)n/g, '$1');\n  tz = tz.replace(/\\beuropean/g, 'europe');\n  tz = tz.replace(/\\islands/g, 'island');\n  return tz;\n}; // try our best to reconcile the timzone to this given string\n\n\nvar lookupTz = function lookupTz(str, zones) {\n  if (!str) {\n    return local;\n  }\n\n  var tz = str.trim();\n  var split = str.split('/'); //support long timezones like 'America/Argentina/Rio_Gallegos'\n\n  if (split.length > 2 && zones.hasOwnProperty(tz) === false) {\n    tz = split[0] + '/' + split[1];\n  }\n\n  tz = tz.toLowerCase();\n\n  if (zones.hasOwnProperty(tz) === true) {\n    return tz;\n  } //lookup more loosely..\n\n\n  tz = normalize(tz);\n\n  if (zones.hasOwnProperty(tz) === true) {\n    return tz;\n  } //try city-names\n\n\n  if (cities.hasOwnProperty(tz) === true) {\n    return cities[tz];\n  } // //try to parse '-5h'\n\n\n  if (/[0-9]/.test(tz) === true) {\n    var id = parseOffset_1(tz);\n\n    if (id) {\n      return id;\n    }\n  }\n\n  throw new Error(\"Spacetime: Cannot find timezone named: '\" + str + \"'. Please enter an IANA timezone id.\");\n};\n\nvar find = lookupTz;\n\nvar o = {\n  millisecond: 1\n};\no.second = 1000;\no.minute = 60000;\no.hour = 3.6e6; // dst is supported post-hoc\n\no.day = 8.64e7; //\n\no.date = o.day;\no.month = 8.64e7 * 29.5; //(average)\n\no.week = 6.048e8;\no.year = 3.154e10; // leap-years are supported post-hoc\n//add plurals\n\nObject.keys(o).forEach(function (k) {\n  o[k + 's'] = o[k];\n});\nvar milliseconds = o;\n\nvar walk = function walk(s, n, fn, unit, previous) {\n  var current = s.d[fn]();\n\n  if (current === n) {\n    return; //already there\n  }\n\n  var startUnit = previous === null ? null : s.d[previous]();\n  var original = s.epoch; //try to get it as close as we can\n\n  var diff = n - current;\n  s.epoch += milliseconds[unit] * diff; //DST edge-case: if we are going many days, be a little conservative\n\n  if (unit === 'day' && Math.abs(diff) > 28) {\n    //but don't push it over a month\n    if (n < 28) {\n      s.epoch += milliseconds.hour;\n    }\n  } //repair it if we've gone too far or something\n  //(go by half-steps, just in case)\n\n\n  var halfStep = milliseconds[unit] / 2;\n\n  while (s.d[fn]() < n) {\n    s.epoch += halfStep;\n  }\n\n  while (s.d[fn]() > n) {\n    s.epoch -= halfStep;\n  } //oops, did we change previous unit? revert it.\n\n\n  if (previous !== null && startUnit !== s.d[previous]()) {\n    // console.warn('spacetime warning: missed setting ' + unit)\n    s.epoch = original; // i mean, but make it close...\n\n    s.epoch += milliseconds[unit] * diff * 0.89; // i guess?\n  }\n}; //find the desired date by a increment/check while loop\n\n\nvar units = {\n  year: {\n    valid: function valid(n) {\n      return n > -4000 && n < 4000;\n    },\n    walkTo: function walkTo(s, n) {\n      return walk(s, n, 'getFullYear', 'year', null);\n    }\n  },\n  month: {\n    valid: function valid(n) {\n      return n >= 0 && n <= 11;\n    },\n    walkTo: function walkTo(s, n) {\n      var d = s.d;\n      var current = d.getMonth();\n      var original = s.epoch;\n      var startUnit = d.getFullYear();\n\n      if (current === n) {\n        return;\n      } //try to get it as close as we can..\n\n\n      var diff = n - current;\n      s.epoch += milliseconds.day * (diff * 28); //special case\n      //oops, did we change the year? revert it.\n\n      if (startUnit !== s.d.getFullYear()) {\n        s.epoch = original;\n      } //incriment by day\n\n\n      while (s.d.getMonth() < n) {\n        s.epoch += milliseconds.day;\n      }\n\n      while (s.d.getMonth() > n) {\n        s.epoch -= milliseconds.day;\n      }\n    }\n  },\n  date: {\n    valid: function valid(n) {\n      return n > 0 && n <= 31;\n    },\n    walkTo: function walkTo(s, n) {\n      return walk(s, n, 'getDate', 'day', 'getMonth');\n    }\n  },\n  hour: {\n    valid: function valid(n) {\n      return n >= 0 && n < 24;\n    },\n    walkTo: function walkTo(s, n) {\n      return walk(s, n, 'getHours', 'hour', 'getDate');\n    }\n  },\n  minute: {\n    valid: function valid(n) {\n      return n >= 0 && n < 60;\n    },\n    walkTo: function walkTo(s, n) {\n      return walk(s, n, 'getMinutes', 'minute', 'getHours');\n    }\n  },\n  second: {\n    valid: function valid(n) {\n      return n >= 0 && n < 60;\n    },\n    walkTo: function walkTo(s, n) {\n      //do this one directly\n      s.epoch = s.seconds(n).epoch;\n    }\n  },\n  millisecond: {\n    valid: function valid(n) {\n      return n >= 0 && n < 1000;\n    },\n    walkTo: function walkTo(s, n) {\n      //do this one directly\n      s.epoch = s.milliseconds(n).epoch;\n    }\n  }\n};\n\nvar walkTo = function walkTo(s, wants) {\n  var keys = Object.keys(units);\n  var old = s.clone();\n\n  for (var i = 0; i < keys.length; i++) {\n    var k = keys[i];\n    var n = wants[k];\n\n    if (n === undefined) {\n      n = old[k]();\n    }\n\n    if (typeof n === 'string') {\n      n = parseInt(n, 10);\n    } //make-sure it's valid\n\n\n    if (!units[k].valid(n)) {\n      s.epoch = null;\n\n      if (s.silent === false) {\n        console.warn('invalid ' + k + ': ' + n);\n      }\n\n      return;\n    } // console.log(k, n)\n\n\n    units[k].walkTo(s, n);\n  }\n\n  return;\n};\n\nvar walk_1 = walkTo;\n\nvar shortMonths = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sept', 'oct', 'nov', 'dec'];\nvar longMonths = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\n\nfunction buildMapping() {\n  var obj = {\n    sep: 8 //support this format\n\n  };\n\n  for (var i = 0; i < shortMonths.length; i++) {\n    obj[shortMonths[i]] = i;\n  }\n\n  for (var _i = 0; _i < longMonths.length; _i++) {\n    obj[longMonths[_i]] = _i;\n  }\n\n  return obj;\n}\n\nvar months = {\n  \"short\": function short() {\n    return shortMonths;\n  },\n  \"long\": function long() {\n    return longMonths;\n  },\n  mapping: function mapping() {\n    return buildMapping();\n  },\n  set: function set(i18n) {\n    shortMonths = i18n[\"short\"] || shortMonths;\n    longMonths = i18n[\"long\"] || longMonths;\n  }\n};\n\n//pull-apart ISO offsets, like \"+0100\"\nvar parseOffset$1 = function parseOffset(s, offset) {\n  if (!offset) {\n    return s;\n  } //this is a fancy-move\n\n\n  if (offset === 'Z') {\n    offset = '+0000';\n  } // according to ISO8601, tz could be hh:mm, hhmm or hh\n  // so need few more steps before the calculation.\n\n\n  var num = 0; // for (+-)hh:mm\n\n  if (/^[\\+-]?[0-9]{2}:[0-9]{2}$/.test(offset)) {\n    //support \"+01:00\"\n    if (/:00/.test(offset) === true) {\n      offset = offset.replace(/:00/, '');\n    } //support \"+01:30\"\n\n\n    if (/:30/.test(offset) === true) {\n      offset = offset.replace(/:30/, '.5');\n    }\n  } // for (+-)hhmm\n\n\n  if (/^[\\+-]?[0-9]{4}$/.test(offset)) {\n    offset = offset.replace(/30$/, '.5');\n  }\n\n  num = parseFloat(offset); //divide by 100 or 10 - , \"+0100\", \"+01\"\n\n  if (Math.abs(num) > 100) {\n    num = num / 100;\n  } //okay, try to match it to a utc timezone\n  //remember - this is opposite! a -5 offset maps to Etc/GMT+5  ¯\\_(:/)_/¯\n  //https://askubuntu.com/questions/519550/why-is-the-8-timezone-called-gmt-8-in-the-filesystem\n\n\n  num *= -1;\n\n  if (num >= 0) {\n    num = '+' + num;\n  }\n\n  var tz = 'etc/gmt' + num;\n  var zones = s.timezones;\n\n  if (zones[tz]) {\n    // log a warning if we're over-writing a given timezone?\n    // console.log('changing timezone to: ' + tz)\n    s.tz = tz;\n  }\n\n  return s;\n};\n\nvar parseOffset_1$1 = parseOffset$1;\n\nvar parseTime = function parseTime(s) {\n  var str = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  str = str.replace(/^\\s+/, '').toLowerCase(); //trim\n  //formal time formats - 04:30.23\n\n  var arr = str.match(/([0-9]{1,2}):([0-9]{1,2}):?([0-9]{1,2})?[:\\.]?([0-9]{1,4})?/);\n\n  if (arr !== null) {\n    //validate it a little\n    var h = Number(arr[1]);\n\n    if (h < 0 || h > 24) {\n      return s.startOf('day');\n    }\n\n    var m = Number(arr[2]); //don't accept '5:3pm'\n\n    if (arr[2].length < 2 || m < 0 || m > 59) {\n      return s.startOf('day');\n    }\n\n    s = s.hour(h);\n    s = s.minute(m);\n    s = s.seconds(arr[3] || 0);\n    s = s.millisecond(arr[4] || 0); //parse-out am/pm\n\n    var ampm = str.match(/[\\b0-9](am|pm)\\b/);\n\n    if (ampm !== null && ampm[1]) {\n      s = s.ampm(ampm[1]);\n    }\n\n    return s;\n  } //try an informal form - 5pm (no minutes)\n\n\n  arr = str.match(/([0-9]+) ?(am|pm)/);\n\n  if (arr !== null && arr[1]) {\n    var _h = Number(arr[1]); //validate it a little..\n\n\n    if (_h > 12 || _h < 1) {\n      return s.startOf('day');\n    }\n\n    s = s.hour(arr[1] || 0);\n    s = s.ampm(arr[2]);\n    s = s.startOf('hour');\n    return s;\n  } //no time info found, use start-of-day\n\n\n  s = s.startOf('day');\n  return s;\n};\n\nvar parseTime_1 = parseTime;\n\nvar monthLengths = [31, // January - 31 days\n28, // February - 28 days in a common year and 29 days in leap years\n31, // March - 31 days\n30, // April - 30 days\n31, // May - 31 days\n30, // June - 30 days\n31, // July - 31 days\n31, // August - 31 days\n30, // September - 30 days\n31, // October - 31 days\n30, // November - 30 days\n31 // December - 31 days\n];\nvar monthLengths_1 = monthLengths;\n\nvar isLeapYear = fns.isLeapYear; //given a month, return whether day number exists in it\n\nvar hasDate = function hasDate(obj) {\n  //invalid values\n  if (monthLengths_1.hasOwnProperty(obj.month) !== true) {\n    return false;\n  } //support leap-year in february\n\n\n  if (obj.month === 1) {\n    if (isLeapYear(obj.year) && obj.date <= 29) {\n      return true;\n    } else {\n      return obj.date <= 28;\n    }\n  } //is this date too-big for this month?\n\n\n  var max = monthLengths_1[obj.month] || 0;\n\n  if (obj.date <= max) {\n    return true;\n  }\n\n  return false;\n};\n\nvar hasDate_1 = hasDate;\n\nvar months$1 = months.mapping();\n\nvar parseYear = function parseYear() {\n  var str = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  //support '18 -> 2018\n  // str = str.replace(/^'([0-9]{2})/, '20$1')\n  // str = str.replace('([0-9]+) ?b\\.?c\\.?$', '-$1')\n  var year = parseInt(str.trim(), 10);\n  year = year || new Date().getFullYear();\n  return year;\n};\n\nvar strFmt = [//iso-this 1998-05-30T22:00:00:000Z, iso-that 2017-04-03T08:00:00-0700\n{\n  reg: /^(\\-?0?0?[0-9]{3,4})-([0-9]{1,2})-([0-9]{1,2})[T| ]([0-9.:]+)(Z|[0-9\\-\\+:]+)?$/,\n  parse: function parse(s, arr, givenTz, options) {\n    var month = parseInt(arr[2], 10) - 1;\n    var obj = {\n      year: arr[1],\n      month: month,\n      date: arr[3]\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    parseOffset_1$1(s, arr[5]);\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //iso \"2015-03-25\" or \"2015/03/25\" or \"2015/03/25 12:26:14 PM\"\n{\n  reg: /^([0-9]{4})[\\-\\/]([0-9]{1,2})[\\-\\/]([0-9]{1,2}),?( [0-9]{1,2}:[0-9]{2}:?[0-9]{0,2}? ?(am|pm|gmt))?$/i,\n  parse: function parse(s, arr) {\n    var obj = {\n      year: arr[1],\n      month: parseInt(arr[2], 10) - 1,\n      date: parseInt(arr[3], 10)\n    };\n\n    if (obj.month >= 12) {\n      //support yyyy/dd/mm (weird, but ok)\n      obj.date = parseInt(arr[2], 10);\n      obj.month = parseInt(arr[3], 10) - 1;\n    }\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //mm/dd/yyyy - uk/canada \"6/28/2019, 12:26:14 PM\"\n{\n  reg: /^([0-9]{1,2})[\\-\\/]([0-9]{1,2})[\\-\\/]?([0-9]{4})?,?( [0-9]{1,2}:[0-9]{2}:?[0-9]{0,2}? ?(am|pm|gmt))?$/i,\n  parse: function parse(s, arr) {\n    var month = parseInt(arr[1], 10) - 1;\n    var date = parseInt(arr[2], 10); //support dd/mm/yyy\n\n    if (s.british || month >= 12) {\n      date = parseInt(arr[1], 10);\n      month = parseInt(arr[2], 10) - 1;\n    }\n\n    var year = arr[3] || new Date().getFullYear();\n    var obj = {\n      year: year,\n      month: month,\n      date: date\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //common british format - \"25-feb-2015\"\n{\n  reg: /^([0-9]{1,2})[\\-\\/]([a-z]+)[\\-\\/]?([0-9]{4})?$/i,\n  parse: function parse(s, arr) {\n    var month = months$1[arr[2].toLowerCase()];\n    var year = parseYear(arr[3]);\n    var obj = {\n      year: year,\n      month: month,\n      date: fns.toCardinal(arr[1] || '')\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //Long \"Mar 25 2015\"\n//February 22, 2017 15:30:00\n{\n  reg: /^([a-z]+) ([0-9]{1,2}(?:st|nd|rd|th)?),?( [0-9]{4})?( ([0-9:]+( ?am| ?pm| ?gmt)?))?$/i,\n  parse: function parse(s, arr) {\n    var month = months$1[arr[1].toLowerCase()];\n    var year = parseYear(arr[3]);\n    var obj = {\n      year: year,\n      month: month,\n      date: fns.toCardinal(arr[2] || '')\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //February 2017 (implied date)\n{\n  reg: /^([a-z]+) ([0-9]{4})$/i,\n  parse: function parse(s, arr) {\n    var month = months$1[arr[1].toLowerCase()];\n    var year = parseYear(arr[2]);\n    var obj = {\n      year: year,\n      month: month,\n      date: 1\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, //Long \"25 Mar 2015\"\n{\n  reg: /^([0-9]{1,2}(?:st|nd|rd|th)?) ([a-z]+),?( [0-9]{4})?,? ?([0-9]{1,2}:[0-9]{2}:?[0-9]{0,2}? ?(am|pm|gmt))?$/i,\n  parse: function parse(s, arr) {\n    var month = months$1[arr[2].toLowerCase()];\n\n    if (!month) {\n      return null;\n    }\n\n    var year = parseYear(arr[3]);\n    var obj = {\n      year: year,\n      month: month,\n      date: fns.toCardinal(arr[1])\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s, arr[4]);\n    return s;\n  }\n}, {\n  // '200bc'\n  reg: /^[0-9,]+ ?b\\.?c\\.?$/i,\n  parse: function parse(s, arr) {\n    var str = arr[0] || ''; //make negative-year\n\n    str = str.replace(/^([0-9,]+) ?b\\.?c\\.?$/i, '-$1'); //remove commas\n\n    str = str.replace(/,/g, '');\n    var year = parseInt(str.trim(), 10);\n    var d = new Date();\n    var obj = {\n      year: year,\n      month: d.getMonth(),\n      date: d.getDate()\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s);\n    return s;\n  }\n}, {\n  // '200ad'\n  reg: /^[0-9,]+ ?(a\\.?d\\.?|c\\.?e\\.?)$/i,\n  parse: function parse(s, arr) {\n    var str = arr[0] || ''; //remove commas\n\n    str = str.replace(/,/g, '');\n    var year = parseInt(str.trim(), 10);\n    var d = new Date();\n    var obj = {\n      year: year,\n      month: d.getMonth(),\n      date: d.getDate()\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s);\n    return s;\n  }\n}, {\n  // '1992'\n  reg: /^[0-9]{4}( ?a\\.?d\\.?)?$/i,\n  parse: function parse(s, arr) {\n    var year = parseYear(arr[0]);\n    var d = new Date();\n    var obj = {\n      year: year,\n      month: d.getMonth(),\n      date: d.getDate()\n    };\n\n    if (hasDate_1(obj) === false) {\n      s.epoch = null;\n      return s;\n    }\n\n    walk_1(s, obj);\n    s = parseTime_1(s);\n    return s;\n  }\n}];\nvar strParse = strFmt;\n\nvar dates = {\n  now: function now(s) {\n    s.epoch = Date.now();\n    return s;\n  },\n  tonight: function tonight(s) {\n    s.epoch = Date.now();\n    s = s.hour(18);\n    return s;\n  },\n  today: function today(s) {\n    s.epoch = Date.now();\n    return s;\n  },\n  tomorrow: function tomorrow(s) {\n    s.epoch = Date.now();\n    s = s.add(1, 'day');\n    s = s.startOf('day');\n    return s;\n  },\n  yesterday: function yesterday(s) {\n    s.epoch = Date.now();\n    s = s.subtract(1, 'day');\n    s = s.startOf('day');\n    return s;\n  },\n  christmas: function christmas(s) {\n    var year = new Date().getFullYear();\n    s = s.set([year, 11, 25, 18, 0, 0]); // Dec 25\n\n    return s;\n  },\n  'new years': function newYears(s) {\n    var year = new Date().getFullYear();\n    s = s.set([year, 11, 31, 18, 0, 0]); // Dec 31\n\n    return s;\n  }\n};\ndates['new years eve'] = dates['new years'];\nvar namedDates = dates;\n\n//  -  can't use built-in js parser ;(\n//=========================================\n// ISO Date\t  \"2015-03-25\"\n// Short Date\t\"03/25/2015\" or \"2015/03/25\"\n// Long Date\t\"Mar 25 2015\" or \"25 Mar 2015\"\n// Full Date\t\"Wednesday March 25 2015\"\n//=========================================\n//-- also -\n// if the given epoch is really small, they've probably given seconds and not milliseconds\n// anything below this number is likely (but not necessarily) a mistaken input.\n// this may seem like an arbitrary number, but it's 'within jan 1970'\n// this is only really ambiguous until 2054 or so\n\nvar minimumEpoch = 2500000000;\nvar defaults = {\n  year: new Date().getFullYear(),\n  month: 0,\n  date: 1\n}; //support [2016, 03, 01] format\n\nvar handleArray = function handleArray(s, arr) {\n  var order = ['year', 'month', 'date', 'hour', 'minute', 'second', 'millisecond'];\n\n  for (var i = 0; i < order.length; i++) {\n    var num = arr[i] || defaults[order[i]] || 0;\n    s = s[order[i]](num);\n  }\n\n  return s;\n}; //support {year:2016, month:3} format\n\n\nvar handleObject = function handleObject(s, obj) {\n  obj = Object.assign({}, defaults, obj);\n  var keys = Object.keys(obj);\n\n  for (var i = 0; i < keys.length; i++) {\n    var unit = keys[i]; //make sure we have this method\n\n    if (s[unit] === undefined || typeof s[unit] !== 'function') {\n      continue;\n    } //make sure the value is a number\n\n\n    if (obj[unit] === null || obj[unit] === undefined || obj[unit] === '') {\n      continue;\n    }\n\n    var num = obj[unit] || defaults[unit] || 0;\n    s = s[unit](num);\n  }\n\n  return s;\n}; //find the epoch from different input styles\n\n\nvar parseInput = function parseInput(s, input, givenTz) {\n  //if we've been given a epoch number, it's easy\n  if (typeof input === 'number') {\n    if (input > 0 && input < minimumEpoch && s.silent === false) {\n      console.warn('  - Warning: You are setting the date to January 1970.');\n      console.warn('       -   did input seconds instead of milliseconds?');\n    }\n\n    s.epoch = input;\n    return s;\n  } //set tmp time\n\n\n  s.epoch = Date.now();\n\n  if (input === null || input === undefined) {\n    return s; //k, we're good.\n  } //support input of Date() object\n\n\n  if (fns.isDate(input) === true) {\n    s.epoch = input.getTime();\n    return s;\n  } //support [2016, 03, 01] format\n\n\n  if (fns.isArray(input) === true) {\n    s = handleArray(s, input);\n    return s;\n  } //support {year:2016, month:3} format\n\n\n  if (fns.isObject(input) === true) {\n    //support spacetime object as input\n    if (input.epoch) {\n      s.epoch = input.epoch;\n      s.tz = input.tz;\n      return s;\n    }\n\n    s = handleObject(s, input);\n    return s;\n  } //input as a string..\n\n\n  if (typeof input !== 'string') {\n    return s;\n  } //little cleanup..\n\n\n  input = input.replace(/\\b(mon|tues|wed|wednes|thu|thurs|fri|sat|satur|sun)(day)?\\b/i, '');\n  input = input.replace(/,/g, '');\n  input = input.replace(/ +/g, ' ').trim(); //try some known-words, like 'now'\n\n  if (namedDates.hasOwnProperty(input) === true) {\n    s = namedDates[input](s);\n    return s;\n  } //try each text-parse template, use the first good result\n\n\n  for (var i = 0; i < strParse.length; i++) {\n    var m = input.match(strParse[i].reg);\n\n    if (m) {\n      var res = strParse[i].parse(s, m, givenTz);\n\n      if (res !== null) {\n        return res;\n      }\n    }\n  }\n\n  if (s.silent === false) {\n    console.warn(\"Warning: couldn't parse date-string: '\" + input + \"'\");\n  }\n\n  s.epoch = null;\n  return s;\n};\n\nvar input = parseInput;\n\nvar shortDays = ['sun', 'mon', 'tue', 'wed', 'thu', 'fri', 'sat'];\nvar longDays = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\nvar days = {\n  \"short\": function short() {\n    return shortDays;\n  },\n  \"long\": function long() {\n    return longDays;\n  },\n  set: function set(i18n) {\n    shortDays = i18n[\"short\"] || shortDays;\n    longDays = i18n[\"long\"] || longDays;\n  }\n};\n\n// it's kind of nuts how involved this is\n// \"+01:00\", \"+0100\", or simply \"+01\"\n\nvar isoOffset = function isoOffset(s) {\n  var offset = s.timezone().current.offset;\n  var isNegative = offset < 0;\n  var minute = '00'; //handle 5.5 → '5:30'\n\n  if (Math.abs(offset % 1) === 0.5) {\n    minute = '30';\n\n    if (offset >= 0) {\n      offset = Math.floor(offset);\n    } else {\n      offset = Math.ceil(offset);\n    }\n  }\n\n  if (isNegative) {\n    //handle negative sign\n    offset *= -1;\n    offset = fns.zeroPad(offset, 2);\n    offset = '-' + offset;\n  } else {\n    offset = fns.zeroPad(offset, 2);\n    offset = '+' + offset;\n  }\n\n  offset = offset + ':' + minute; //'Z' means 00\n\n  if (offset === '+00:00') {\n    offset = 'Z';\n  }\n\n  return offset;\n};\n\nvar _offset = isoOffset;\n\nvar format = {\n  day: function day(s) {\n    return fns.titleCase(s.dayName());\n  },\n  'day-short': function dayShort(s) {\n    return fns.titleCase(days[\"short\"]()[s.day()]);\n  },\n  'day-number': function dayNumber(s) {\n    return s.day();\n  },\n  'day-ordinal': function dayOrdinal(s) {\n    return fns.ordinal(s.day());\n  },\n  'day-pad': function dayPad(s) {\n    return fns.zeroPad(s.day());\n  },\n  date: function date(s) {\n    return s.date();\n  },\n  'date-ordinal': function dateOrdinal(s) {\n    return fns.ordinal(s.date());\n  },\n  'date-pad': function datePad(s) {\n    return fns.zeroPad(s.date());\n  },\n  month: function month(s) {\n    return fns.titleCase(s.monthName());\n  },\n  'month-short': function monthShort(s) {\n    return fns.titleCase(months[\"short\"]()[s.month()]);\n  },\n  'month-number': function monthNumber(s) {\n    return s.month();\n  },\n  'month-ordinal': function monthOrdinal(s) {\n    return fns.ordinal(s.month());\n  },\n  'month-pad': function monthPad(s) {\n    return fns.zeroPad(s.month());\n  },\n  'iso-month': function isoMonth(s) {\n    return fns.zeroPad(s.month() + 1);\n  },\n  //1-based months\n  year: function year(s) {\n    var year = s.year();\n\n    if (year > 0) {\n      return year;\n    }\n\n    year = Math.abs(year);\n    return year + ' BC';\n  },\n  'year-short': function yearShort(s) {\n    var year = s.year();\n\n    if (year > 0) {\n      return \"'\".concat(String(s.year()).substr(2, 4));\n    }\n\n    year = Math.abs(year);\n    return year + ' BC';\n  },\n  'iso-year': function isoYear(s) {\n    var year = s.year();\n    var isNegative = year < 0;\n    var str = fns.zeroPad(Math.abs(year), 4); //0-padded\n\n    if (isNegative) {\n      //negative years are for some reason 6-digits ('-00008')\n      str = fns.zeroPad(str, 6);\n      str = '-' + str;\n    }\n\n    return str;\n  },\n  time: function time(s) {\n    return s.time();\n  },\n  'time-24': function time24(s) {\n    return \"\".concat(s.hour24(), \":\").concat(fns.zeroPad(s.minute()));\n  },\n  hour: function hour(s) {\n    return s.hour12();\n  },\n  'hour-pad': function hourPad(s) {\n    return fns.zeroPad(s.hour12());\n  },\n  'hour-24': function hour24(s) {\n    return s.hour24();\n  },\n  'hour-24-pad': function hour24Pad(s) {\n    return fns.zeroPad(s.hour24());\n  },\n  minute: function minute(s) {\n    return s.minute();\n  },\n  'minute-pad': function minutePad(s) {\n    return fns.zeroPad(s.minute());\n  },\n  second: function second(s) {\n    return s.second();\n  },\n  'second-pad': function secondPad(s) {\n    return fns.zeroPad(s.second());\n  },\n  ampm: function ampm(s) {\n    return s.ampm();\n  },\n  quarter: function quarter(s) {\n    return 'Q' + s.quarter();\n  },\n  season: function season(s) {\n    return s.season();\n  },\n  era: function era(s) {\n    return s.era();\n  },\n  json: function json(s) {\n    return s.json();\n  },\n  timezone: function timezone(s) {\n    return s.timezone().name;\n  },\n  offset: function offset(s) {\n    return _offset(s);\n  },\n  numeric: function numeric(s) {\n    return \"\".concat(s.year(), \"/\").concat(fns.zeroPad(s.month() + 1), \"/\").concat(fns.zeroPad(s.date()));\n  },\n  // yyyy/mm/dd\n  'numeric-us': function numericUs(s) {\n    return \"\".concat(fns.zeroPad(s.month() + 1), \"/\").concat(fns.zeroPad(s.date()), \"/\").concat(s.year());\n  },\n  // mm/dd/yyyy\n  'numeric-uk': function numericUk(s) {\n    return \"\".concat(fns.zeroPad(s.date()), \"/\").concat(fns.zeroPad(s.month() + 1), \"/\").concat(s.year());\n  },\n  //dd/mm/yyyy\n  'mm/dd': function mmDd(s) {\n    return \"\".concat(fns.zeroPad(s.month() + 1), \"/\").concat(fns.zeroPad(s.date()));\n  },\n  //mm/dd\n  // ... https://en.wikipedia.org/wiki/ISO_8601 ;(((\n  iso: function iso(s) {\n    var year = s.format('iso-year');\n    var month = fns.zeroPad(s.month() + 1); //1-based months\n\n    var date = fns.zeroPad(s.date());\n    var hour = fns.zeroPad(s.h24());\n    var minute = fns.zeroPad(s.minute());\n    var second = fns.zeroPad(s.second());\n    var ms = fns.zeroPad(s.millisecond(), 3);\n    var offset = _offset(s);\n    return \"\".concat(year, \"-\").concat(month, \"-\").concat(date, \"T\").concat(hour, \":\").concat(minute, \":\").concat(second, \".\").concat(ms).concat(offset); //2018-03-09T08:50:00.000-05:00\n  },\n  'iso-short': function isoShort(s) {\n    var month = fns.zeroPad(s.month() + 1); //1-based months\n\n    var date = fns.zeroPad(s.date());\n    return \"\".concat(s.year(), \"-\").concat(month, \"-\").concat(date); //2017-02-15\n  },\n  'iso-utc': function isoUtc(s) {\n    return new Date(s.epoch).toISOString(); //2017-03-08T19:45:28.367Z\n  },\n  //i made these up\n  nice: function nice(s) {\n    return \"\".concat(months[\"short\"]()[s.month()], \" \").concat(fns.ordinal(s.date()), \", \").concat(s.time());\n  },\n  'nice-year': function niceYear(s) {\n    return \"\".concat(months[\"short\"]()[s.month()], \" \").concat(fns.ordinal(s.date()), \", \").concat(s.year());\n  },\n  'nice-day': function niceDay(s) {\n    return \"\".concat(days[\"short\"]()[s.day()], \" \").concat(fns.titleCase(months[\"short\"]()[s.month()]), \" \").concat(fns.ordinal(s.date()));\n  },\n  'nice-full': function niceFull(s) {\n    return \"\".concat(s.dayName(), \" \").concat(fns.titleCase(s.monthName()), \" \").concat(fns.ordinal(s.date()), \", \").concat(s.time());\n  }\n}; //aliases\n\nvar aliases = {\n  'day-name': 'day',\n  'month-name': 'month',\n  'iso 8601': 'iso',\n  'time-h24': 'time-24',\n  'time-12': 'time',\n  'time-h12': 'time',\n  tz: 'timezone',\n  'day-num': 'day-number',\n  'month-num': 'month-number',\n  'month-iso': 'iso-month',\n  'year-iso': 'iso-year',\n  'nice-short': 'nice',\n  mdy: 'numeric-us',\n  dmy: 'numeric-uk',\n  ymd: 'numeric',\n  'yyyy/mm/dd': 'numeric',\n  'mm/dd/yyyy': 'numeric-us',\n  'dd/mm/yyyy': 'numeric-us',\n  'little-endian': 'numeric-uk',\n  'big-endian': 'numeric',\n  'day-nice': 'nice-day'\n};\nObject.keys(aliases).forEach(function (k) {\n  return format[k] = format[aliases[k]];\n});\n\nvar printFormat = function printFormat(s) {\n  var str = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  //don't print anything if it's an invalid date\n  if (s.isValid() !== true) {\n    return '';\n  } //support .format('month')\n\n\n  if (format.hasOwnProperty(str)) {\n    var out = format[str](s) || '';\n\n    if (str !== 'json') {\n      out = String(out);\n\n      if (str !== 'ampm') {\n        out = fns.titleCase(out);\n      }\n    }\n\n    return out;\n  } //support '{hour}:{minute}' notation\n\n\n  if (str.indexOf('{') !== -1) {\n    var sections = /\\{(.+?)\\}/g;\n    str = str.replace(sections, function (_, fmt) {\n      fmt = fmt.toLowerCase().trim();\n\n      if (format.hasOwnProperty(fmt)) {\n        return String(format[fmt](s) || '');\n      }\n\n      return '';\n    });\n    return str;\n  }\n\n  return s.format('iso-short');\n};\n\nvar format_1 = printFormat;\n\nvar pad = fns.zeroPad;\nvar formatTimezone = fns.formatTimezone; //parse this insane unix-time-templating thing, from the 19th century\n//http://unicode.org/reports/tr35/tr35-25.html#Date_Format_Patterns\n//time-symbols we support\n\nvar mapping = {\n  G: function G(s) {\n    return s.era();\n  },\n  GG: function GG(s) {\n    return s.era();\n  },\n  GGG: function GGG(s) {\n    return s.era();\n  },\n  GGGG: function GGGG(s) {\n    return s.era() === 'AD' ? 'Anno Domini' : 'Before Christ';\n  },\n  //year\n  y: function y(s) {\n    return s.year();\n  },\n  yy: function yy(s) {\n    //last two chars\n    return parseInt(String(s.year()).substr(2, 4), 10);\n  },\n  yyy: function yyy(s) {\n    return s.year();\n  },\n  yyyy: function yyyy(s) {\n    return s.year();\n  },\n  yyyyy: function yyyyy(s) {\n    return '0' + s.year();\n  },\n  // u: (s) => {},//extended non-gregorian years\n  //quarter\n  Q: function Q(s) {\n    return s.quarter();\n  },\n  QQ: function QQ(s) {\n    return s.quarter();\n  },\n  QQQ: function QQQ(s) {\n    return s.quarter();\n  },\n  QQQQ: function QQQQ(s) {\n    return s.quarter();\n  },\n  //month\n  M: function M(s) {\n    return s.month() + 1;\n  },\n  MM: function MM(s) {\n    return pad(s.month() + 1);\n  },\n  MMM: function MMM(s) {\n    return s.format('month-short');\n  },\n  MMMM: function MMMM(s) {\n    return s.format('month');\n  },\n  //week\n  w: function w(s) {\n    return s.week();\n  },\n  ww: function ww(s) {\n    return pad(s.week());\n  },\n  //week of month\n  // W: (s) => s.week(),\n  //date of month\n  d: function d(s) {\n    return s.date();\n  },\n  dd: function dd(s) {\n    return pad(s.date());\n  },\n  //date of year\n  D: function D(s) {\n    return s.dayOfYear();\n  },\n  DD: function DD(s) {\n    return pad(s.dayOfYear());\n  },\n  DDD: function DDD(s) {\n    return pad(s.dayOfYear(), 3);\n  },\n  // F: (s) => {},//date of week in month\n  // g: (s) => {},//modified julian day\n  //day\n  E: function E(s) {\n    return s.format('day-short');\n  },\n  EE: function EE(s) {\n    return s.format('day-short');\n  },\n  EEE: function EEE(s) {\n    return s.format('day-short');\n  },\n  EEEE: function EEEE(s) {\n    return s.format('day');\n  },\n  EEEEE: function EEEEE(s) {\n    return s.format('day')[0];\n  },\n  e: function e(s) {\n    return s.day();\n  },\n  ee: function ee(s) {\n    return s.day();\n  },\n  eee: function eee(s) {\n    return s.format('day-short');\n  },\n  eeee: function eeee(s) {\n    return s.format('day');\n  },\n  eeeee: function eeeee(s) {\n    return s.format('day')[0];\n  },\n  //am/pm\n  a: function a(s) {\n    return s.ampm().toUpperCase();\n  },\n  aa: function aa(s) {\n    return s.ampm().toUpperCase();\n  },\n  aaa: function aaa(s) {\n    return s.ampm().toUpperCase();\n  },\n  aaaa: function aaaa(s) {\n    return s.ampm().toUpperCase();\n  },\n  //hour\n  h: function h(s) {\n    return s.h12();\n  },\n  hh: function hh(s) {\n    return pad(s.h12());\n  },\n  H: function H(s) {\n    return s.hour();\n  },\n  HH: function HH(s) {\n    return pad(s.hour());\n  },\n  // j: (s) => {},//weird hour format\n  m: function m(s) {\n    return s.minute();\n  },\n  mm: function mm(s) {\n    return pad(s.minute());\n  },\n  s: function s(_s) {\n    return _s.second();\n  },\n  ss: function ss(s) {\n    return pad(s.second());\n  },\n  //milliseconds in the day\n  A: function A(s) {\n    return s.epoch - s.startOf('day').epoch;\n  },\n  //timezone\n  z: function z(s) {\n    return s.timezone().name;\n  },\n  zz: function zz(s) {\n    return s.timezone().name;\n  },\n  zzz: function zzz(s) {\n    return s.timezone().name;\n  },\n  zzzz: function zzzz(s) {\n    return s.timezone().name;\n  },\n  Z: function Z(s) {\n    return formatTimezone(s.timezone().current.offset);\n  },\n  ZZ: function ZZ(s) {\n    return formatTimezone(s.timezone().current.offset);\n  },\n  ZZZ: function ZZZ(s) {\n    return formatTimezone(s.timezone().current.offset);\n  },\n  ZZZZ: function ZZZZ(s) {\n    return formatTimezone(s.timezone().current.offset, ':');\n  }\n};\n\nvar addAlias = function addAlias(_char, to, n) {\n  var name = _char;\n  var toName = to;\n\n  for (var i = 0; i < n; i += 1) {\n    mapping[name] = mapping[toName];\n    name += _char;\n    toName += to;\n  }\n};\n\naddAlias('q', 'Q', 4);\naddAlias('L', 'M', 4);\naddAlias('Y', 'y', 4);\naddAlias('c', 'e', 4);\naddAlias('k', 'H', 2);\naddAlias('K', 'h', 2);\naddAlias('S', 's', 2);\naddAlias('v', 'z', 4);\naddAlias('V', 'Z', 4);\n\nvar unixFmt = function unixFmt(s, str) {\n  var chars = str.split(''); //combine consecutive chars, like 'yyyy' as one.\n\n  var arr = [chars[0]];\n  var quoteOn = false;\n\n  for (var i = 1; i < chars.length; i += 1) {\n    //support quoted substrings\n    if (chars[i] === \"'\") {\n      quoteOn = !quoteOn; //support '', meaning one tick\n\n      if (quoteOn === true && chars[i + 1] && chars[i + 1] === \"'\") {\n        quoteOn = true;\n      } else {\n        continue;\n      }\n    } //merge it with the last one\n\n\n    if (quoteOn === true || chars[i] === arr[arr.length - 1][0]) {\n      arr[arr.length - 1] += chars[i];\n    } else {\n      arr.push(chars[i]);\n    }\n  }\n\n  return arr.reduce(function (txt, c) {\n    if (mapping[c] !== undefined) {\n      txt += mapping[c](s) || '';\n    } else {\n      txt += c;\n    }\n\n    return txt;\n  }, '');\n};\n\nvar unixFmt_1 = unixFmt;\n\nvar units$1 = ['year', 'season', 'quarter', 'month', 'week', 'day', 'quarterHour', 'hour', 'minute'];\n\nvar doUnit = function doUnit(s, k) {\n  var start = s.clone().startOf(k);\n  var end = s.clone().endOf(k);\n  var duration = end.epoch - start.epoch;\n  var percent = (s.epoch - start.epoch) / duration;\n  return parseFloat(percent.toFixed(2));\n}; //how far it is along, from 0-1\n\n\nvar progress = function progress(s, unit) {\n  if (unit) {\n    unit = fns.normalize(unit);\n    return doUnit(s, unit);\n  }\n\n  var obj = {};\n  units$1.forEach(function (k) {\n    obj[k] = doUnit(s, k);\n  });\n  return obj;\n};\n\nvar progress_1 = progress;\n\nvar nearest = function nearest(s, unit) {\n  //how far have we gone?\n  var prog = s.progress();\n  unit = fns.normalize(unit); //fix camel-case for this one\n\n  if (unit === 'quarterhour') {\n    unit = 'quarterHour';\n  }\n\n  if (prog[unit] !== undefined) {\n    // go forward one?\n    if (prog[unit] > 0.5) {\n      s = s.add(1, unit);\n    } // go to start\n\n\n    s = s.startOf(unit);\n  } else if (s.silent === false) {\n    console.warn(\"no known unit '\" + unit + \"'\");\n  }\n\n  return s;\n};\n\nvar nearest_1 = nearest;\n\n//increment until dates are the same\nvar climb = function climb(a, b, unit) {\n  var i = 0;\n  a = a.clone();\n\n  while (a.isBefore(b)) {\n    //do proper, expensive increment to catch all-the-tricks\n    a = a.add(1, unit);\n    i += 1;\n  } //oops, we went too-far..\n\n\n  if (a.isAfter(b, unit)) {\n    i -= 1;\n  }\n\n  return i;\n}; // do a thurough +=1 on the unit, until they match\n// for speed-reasons, only used on day, month, week.\n\n\nvar diffOne = function diffOne(a, b, unit) {\n  if (a.isBefore(b)) {\n    return climb(a, b, unit);\n  } else {\n    return climb(b, a, unit) * -1; //reverse it\n  }\n};\n\nvar one = diffOne;\n\n// 2020 - 2019 may be 1 year, or 0 years\n// - '1 year difference' means 366 days during a leap year\n\nvar fastYear = function fastYear(a, b) {\n  var years = b.year() - a.year(); // should we decrement it by 1?\n\n  a = a.year(b.year());\n\n  if (a.isAfter(b)) {\n    years -= 1;\n  }\n\n  return years;\n}; // use a waterfall-method for computing a diff of any 'pre-knowable' units\n// compute years, then compute months, etc..\n// ... then ms-math for any very-small units\n\n\nvar diff = function diff(a, b) {\n  // an hour is always the same # of milliseconds\n  // so these units can be 'pre-calculated'\n  var msDiff = b.epoch - a.epoch;\n  var obj = {\n    milliseconds: msDiff,\n    seconds: parseInt(msDiff / 1000, 10)\n  };\n  obj.minutes = parseInt(obj.seconds / 60, 10);\n  obj.hours = parseInt(obj.minutes / 60, 10); //do the year\n\n  var tmp = a.clone();\n  obj.years = fastYear(tmp, b);\n  tmp = a.add(obj.years, 'year'); //there's always 12 months in a year...\n\n  obj.months = obj.years * 12;\n  tmp = a.add(obj.months, 'month');\n  obj.months += one(tmp, b, 'month'); // there's always atleast 52 weeks in a year..\n  // (month * 4) isn't as close\n\n  obj.weeks = obj.years * 52;\n  tmp = a.add(obj.weeks, 'week');\n  obj.weeks += one(tmp, b, 'week'); // there's always atleast 7 days in a week\n\n  obj.days = obj.weeks * 7;\n  tmp = a.add(obj.days, 'day');\n  obj.days += one(tmp, b, 'day');\n  return obj;\n};\n\nvar waterfall = diff;\n\nvar reverseDiff = function reverseDiff(obj) {\n  Object.keys(obj).forEach(function (k) {\n    obj[k] *= -1;\n  });\n  return obj;\n}; // this method counts a total # of each unit, between a, b.\n// '1 month' means 28 days in february\n// '1 year' means 366 days in a leap year\n\n\nvar main = function main(a, b, unit) {\n  b = fns.beADate(b, a); //reverse values, if necessary\n\n  var reversed = false;\n\n  if (a.isAfter(b)) {\n    var tmp = a;\n    a = b;\n    b = tmp;\n    reversed = true;\n  } //compute them all (i know!)\n\n\n  var obj = waterfall(a, b);\n\n  if (reversed) {\n    obj = reverseDiff(obj);\n  } //return just the requested unit\n\n\n  if (unit) {\n    //make sure it's plural-form\n    unit = fns.normalize(unit);\n\n    if (/s$/.test(unit) !== true) {\n      unit += 's';\n    }\n\n    if (unit === 'dates') {\n      unit = 'days';\n    }\n\n    return obj[unit];\n  }\n\n  return obj;\n};\n\nvar diff$1 = main;\n\n//our conceptual 'break-points' for each unit\n\nvar qualifiers = {\n  months: {\n    almost: 10,\n    over: 4\n  },\n  days: {\n    almost: 25,\n    over: 10\n  },\n  hours: {\n    almost: 20,\n    over: 8\n  },\n  minutes: {\n    almost: 50,\n    over: 20\n  },\n  seconds: {\n    almost: 50,\n    over: 20\n  }\n}; //get number of hours/minutes... between the two dates\n\nfunction getDiff(a, b) {\n  var isBefore = a.isBefore(b);\n  var later = isBefore ? b : a;\n  var earlier = isBefore ? a : b;\n  earlier = earlier.clone();\n  var diff = {\n    years: 0,\n    months: 0,\n    days: 0,\n    hours: 0,\n    minutes: 0,\n    seconds: 0\n  };\n  Object.keys(diff).forEach(function (unit) {\n    if (earlier.isSame(later, unit)) {\n      return;\n    }\n\n    var max = earlier.diff(later, unit);\n    earlier = earlier.add(max, unit);\n    diff[unit] = max;\n  }); //reverse it, if necessary\n\n  if (isBefore) {\n    Object.keys(diff).forEach(function (u) {\n      if (diff[u] !== 0) {\n        diff[u] *= -1;\n      }\n    });\n  }\n\n  return diff;\n} // Expects a plural unit arg\n\n\nfunction pluralize(value, unit) {\n  if (value === 1) {\n    unit = unit.slice(0, -1);\n  }\n\n  return value + ' ' + unit;\n} //create the human-readable diff between the two dates\n\n\nvar since = function since(start, end) {\n  end = fns.beADate(end, start);\n  var diff = getDiff(start, end);\n  var isNow = Object.keys(diff).every(function (u) {\n    return !diff[u];\n  });\n\n  if (isNow === true) {\n    return {\n      diff: diff,\n      rounded: 'now',\n      qualified: 'now',\n      precise: 'now'\n    };\n  }\n\n  var rounded;\n  var qualified;\n  var precise;\n  var englishValues = []; //go through each value and create its text-representation\n\n  Object.keys(diff).forEach(function (unit, i, units) {\n    var value = Math.abs(diff[unit]);\n\n    if (value === 0) {\n      return;\n    }\n\n    var englishValue = pluralize(value, unit);\n    englishValues.push(englishValue);\n\n    if (!rounded) {\n      rounded = qualified = englishValue;\n\n      if (i > 4) {\n        return;\n      } //is it a 'almost' something, etc?\n\n\n      var nextUnit = units[i + 1];\n      var nextValue = Math.abs(diff[nextUnit]);\n\n      if (nextValue > qualifiers[nextUnit].almost) {\n        rounded = pluralize(value + 1, unit);\n        qualified = 'almost ' + rounded;\n      } else if (nextValue > qualifiers[nextUnit].over) qualified = 'over ' + englishValue;\n    }\n  }); //make them into a string\n\n  precise = englishValues.splice(0, 2).join(', '); //handle before/after logic\n\n  if (start.isAfter(end) === true) {\n    rounded += ' ago';\n    qualified += ' ago';\n    precise += ' ago';\n  } else {\n    rounded = 'in ' + rounded;\n    qualified = 'in ' + qualified;\n    precise = 'in ' + precise;\n  }\n\n  return {\n    diff: diff,\n    rounded: rounded,\n    qualified: qualified,\n    precise: precise\n  };\n};\n\nvar since_1 = since;\n\n//https://www.timeanddate.com/calendar/aboutseasons.html\n// Spring - from March 1 to May 31;\n// Summer - from June 1 to August 31;\n// Fall (autumn) - from September 1 to November 30; and,\n// Winter - from December 1 to February 28 (February 29 in a leap year).\nvar seasons = {\n  north: [['spring', 2, 1], //spring march 1\n  ['summer', 5, 1], //june 1\n  ['fall', 8, 1], //sept 1\n  ['autumn', 8, 1], //sept 1\n  ['winter', 11, 1] //dec 1\n  ],\n  south: [['fall', 2, 1], //march 1\n  ['autumn', 2, 1], //march 1\n  ['winter', 5, 1], //june 1\n  ['spring', 8, 1], //sept 1\n  ['summer', 11, 1] //dec 1\n  ]\n};\n\nvar quarters = [null, [0, 1], //jan 1\n[3, 1], //apr 1\n[6, 1], //july 1\n[9, 1] //oct 1\n];\n\nvar units$2 = {\n  minute: function minute(s) {\n    walk_1(s, {\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  quarterhour: function quarterhour(s) {\n    var minute = s.minutes();\n\n    if (minute >= 45) {\n      s = s.minutes(45);\n    } else if (minute >= 30) {\n      s = s.minutes(30);\n    } else if (minute >= 15) {\n      s = s.minutes(15);\n    } else {\n      s = s.minutes(0);\n    }\n\n    walk_1(s, {\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  hour: function hour(s) {\n    walk_1(s, {\n      minute: 0,\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  day: function day(s) {\n    walk_1(s, {\n      hour: 0,\n      minute: 0,\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  week: function week(s) {\n    var original = s.clone();\n    s = s.day(s._weekStart); //monday\n\n    if (s.isAfter(original)) {\n      s = s.subtract(1, 'week');\n    }\n\n    walk_1(s, {\n      hour: 0,\n      minute: 0,\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  month: function month(s) {\n    walk_1(s, {\n      date: 1,\n      hour: 0,\n      minute: 0,\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  quarter: function quarter(s) {\n    var q = s.quarter();\n\n    if (quarters[q]) {\n      walk_1(s, {\n        month: quarters[q][0],\n        date: quarters[q][1],\n        hour: 0,\n        minute: 0,\n        second: 0,\n        millisecond: 0\n      });\n    }\n\n    return s;\n  },\n  season: function season(s) {\n    var current = s.season();\n    var hem = 'north';\n\n    if (s.hemisphere() === 'South') {\n      hem = 'south';\n    }\n\n    for (var i = 0; i < seasons[hem].length; i++) {\n      if (seasons[hem][i][0] === current) {\n        //winter goes between years\n        var year = s.year();\n\n        if (current === 'winter' && s.month() < 3) {\n          year -= 1;\n        }\n\n        walk_1(s, {\n          year: year,\n          month: seasons[hem][i][1],\n          date: seasons[hem][i][2],\n          hour: 0,\n          minute: 0,\n          second: 0,\n          millisecond: 0\n        });\n        return s;\n      }\n    }\n\n    return s;\n  },\n  year: function year(s) {\n    walk_1(s, {\n      month: 0,\n      date: 1,\n      hour: 0,\n      minute: 0,\n      second: 0,\n      millisecond: 0\n    });\n    return s;\n  },\n  decade: function decade(s) {\n    s = s.startOf('year');\n    var year = s.year();\n    var decade = parseInt(year / 10, 10) * 10;\n    s = s.year(decade);\n    return s;\n  },\n  century: function century(s) {\n    s = s.startOf('year');\n    var year = s.year(); // near 0AD goes '-1 | +1'\n\n    var decade = parseInt(year / 100, 10) * 100;\n    s = s.year(decade);\n    return s;\n  }\n};\nunits$2.date = units$2.day;\n\nvar startOf = function startOf(a, unit) {\n  var s = a.clone();\n  unit = fns.normalize(unit);\n\n  if (units$2[unit]) {\n    return units$2[unit](s);\n  }\n\n  if (unit === 'summer' || unit === 'winter') {\n    s = s.season(unit);\n    return units$2.season(s);\n  }\n\n  return s;\n}; //piggy-backs off startOf\n\n\nvar endOf = function endOf(a, unit) {\n  var s = a.clone();\n  unit = fns.normalize(unit);\n\n  if (units$2[unit]) {\n    s = units$2[unit](s);\n    s = s.add(1, unit);\n    s = s.subtract(1, 'milliseconds');\n    return s;\n  }\n\n  return s;\n};\n\nvar startOf_1 = {\n  startOf: startOf,\n  endOf: endOf\n};\n\nvar isDay = function isDay(unit) {\n  if (days[\"short\"]().find(function (s) {\n    return s === unit;\n  })) {\n    return true;\n  }\n\n  if (days[\"long\"]().find(function (s) {\n    return s === unit;\n  })) {\n    return true;\n  }\n\n  return false;\n}; // return a list of the weeks/months/days between a -> b\n// returns spacetime objects in the timezone of the input\n\n\nvar every = function every(start) {\n  var unit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n\n  if (!unit || !end) {\n    return [];\n  } //cleanup unit param\n\n\n  unit = fns.normalize(unit); //cleanup to param\n\n  end = start.clone().set(end); //swap them, if they're backwards\n\n  if (start.isAfter(end)) {\n    var tmp = start;\n    start = end;\n    end = tmp;\n  } //support 'every wednesday'\n\n\n  var d = start.clone();\n\n  if (isDay(unit)) {\n    d = d.next(unit);\n    unit = 'week';\n  } else {\n    d = d.next(unit);\n  } //okay, actually start doing it\n\n\n  var result = [];\n\n  while (d.isBefore(end)) {\n    result.push(d);\n    d = d.add(1, unit);\n  }\n\n  return result;\n};\n\nvar every_1 = every;\n\nvar parseDst = function parseDst(dst) {\n  if (!dst) {\n    return [];\n  }\n\n  return dst.split('->');\n};\n\nvar titleCase = function titleCase(str) {\n  str = str[0].toUpperCase() + str.substr(1);\n  str = str.replace(/\\/gmt/, '/GMT');\n  str = str.replace(/[\\/_]([a-z])/gi, function (s) {\n    return s.toUpperCase();\n  });\n  return str;\n}; //get metadata about this timezone\n\n\nvar timezone = function timezone(s) {\n  var zones = s.timezones;\n  var tz = s.tz;\n\n  if (zones.hasOwnProperty(tz) === false) {\n    tz = find(s.tz, zones);\n  }\n\n  if (tz === null) {\n    if (s.silent === false) {\n      console.warn(\"Warn: could not find given or local timezone - '\" + s.tz + \"'\");\n    }\n\n    return {\n      current: {\n        epochShift: 0\n      }\n    };\n  }\n\n  var found = zones[tz];\n  var result = {\n    name: titleCase(tz),\n    hasDst: Boolean(found.dst),\n    default_offset: found.offset,\n    //do north-hemisphere version as default (sorry!)\n    hemisphere: found.hem === 's' ? 'South' : 'North',\n    current: {}\n  };\n\n  if (result.hasDst) {\n    var arr = parseDst(found.dst);\n    result.change = {\n      start: arr[0],\n      back: arr[1]\n    };\n  } //find the offsets for summer/winter times\n  //(these variable names are north-centric)\n\n\n  var summer = found.offset; // (july)\n\n  var winter = summer; // (january) assume it's the same for now\n\n  if (result.hasDst === true) {\n    if (result.hemisphere === 'North') {\n      winter = summer - 1;\n    } else {\n      //southern hemisphere\n      winter = found.offset + 1;\n    }\n  } //find out which offset to use right now\n  //use 'summer' time july-time\n\n\n  if (result.hasDst === false) {\n    result.current.offset = summer;\n    result.current.isDST = false;\n  } else if (summerTime(s.epoch, result.change.start, result.change.back, summer) === true) {\n    result.current.offset = summer;\n    result.current.isDST = result.hemisphere === 'North'; //dst 'on' in winter in north\n  } else {\n    //use 'winter' january-time\n    result.current.offset = winter;\n    result.current.isDST = result.hemisphere === 'South'; //dst 'on' in summer in south\n  }\n\n  return result;\n};\n\nvar timezone_1 = timezone;\n\nvar units$3 = ['century', 'decade', 'year', 'month', 'date', 'day', 'hour', 'minute', 'second', 'millisecond']; //the spacetime instance methods (also, the API)\n\nvar methods = {\n  set: function set(input$1, tz) {\n    var s = this.clone();\n    s = input(s, input$1);\n\n    if (tz) {\n      this.tz = find(tz);\n    }\n\n    return s;\n  },\n  timezone: function timezone() {\n    return timezone_1(this);\n  },\n  isDST: function isDST() {\n    return timezone_1(this).current.isDST;\n  },\n  hasDST: function hasDST() {\n    return timezone_1(this).hasDst;\n  },\n  offset: function offset() {\n    return timezone_1(this).current.offset * 60;\n  },\n  hemisphere: function hemisphere() {\n    return timezone_1(this).hemisphere;\n  },\n  format: function format(fmt) {\n    return format_1(this, fmt);\n  },\n  unixFmt: function unixFmt(fmt) {\n    return unixFmt_1(this, fmt);\n  },\n  startOf: function startOf(unit) {\n    return startOf_1.startOf(this, unit);\n  },\n  endOf: function endOf(unit) {\n    return startOf_1.endOf(this, unit);\n  },\n  leapYear: function leapYear() {\n    var year = this.year();\n    return fns.isLeapYear(year);\n  },\n  progress: function progress(unit) {\n    return progress_1(this, unit);\n  },\n  nearest: function nearest(unit) {\n    return nearest_1(this, unit);\n  },\n  diff: function diff(d, unit) {\n    return diff$1(this, d, unit);\n  },\n  since: function since(d) {\n    if (!d) {\n      d = this.clone().set();\n    }\n\n    return since_1(this, d);\n  },\n  next: function next(unit) {\n    var s = this.add(1, unit);\n    return s.startOf(unit);\n  },\n  //the start of the previous year/week/century\n  last: function last(unit) {\n    var s = this.subtract(1, unit);\n    return s.startOf(unit);\n  },\n  isValid: function isValid() {\n    //null/undefined epochs\n    if (!this.epoch && this.epoch !== 0) {\n      return false;\n    }\n\n    return !isNaN(this.d.getTime());\n  },\n  //travel to this timezone\n  \"goto\": function goto(tz) {\n    var s = this.clone();\n    s.tz = find(tz, s.timezones); //science!\n\n    return s;\n  },\n  //get each week/month/day between a -> b\n  every: function every(unit, to) {\n    return every_1(this, unit, to);\n  },\n  isAwake: function isAwake() {\n    var hour = this.hour(); //10pm -> 8am\n\n    if (hour < 8 || hour > 22) {\n      return false;\n    }\n\n    return true;\n  },\n  isAsleep: function isAsleep() {\n    return !this.isAwake();\n  },\n  //pretty-printing\n  log: function log() {\n    console.log('');\n    console.log(format_1(this, 'nice-short'));\n    return this;\n  },\n  logYear: function logYear() {\n    console.log('');\n    console.log(format_1(this, 'full-short'));\n    return this;\n  },\n  json: function json() {\n    var _this = this;\n\n    return units$3.reduce(function (h, unit) {\n      h[unit] = _this[unit]();\n      return h;\n    }, {});\n  },\n  debug: function debug() {\n    var tz = this.timezone();\n    var date = this.format('MM') + ' ' + this.format('date-ordinal') + ' ' + this.year();\n    date += '\\n     - ' + this.format('time');\n    console.log('\\n\\n', date + '\\n     - ' + tz.name + ' (' + tz.current.offset + ')');\n    return this;\n  },\n  //alias of 'since' but opposite - like moment.js\n  from: function from(d) {\n    d = this.clone().set(d);\n    return d.since(this);\n  },\n  fromNow: function fromNow() {\n    var d = this.clone().set(Date.now());\n    return d.since(this);\n  },\n  weekStart: function weekStart(input) {\n    //accept a number directly\n    if (typeof input === 'number') {\n      this._weekStart = input;\n      return this;\n    }\n\n    if (typeof input === 'string') {\n      // accept 'wednesday'\n      input = input.toLowerCase().trim();\n      var num = days[\"short\"]().indexOf(input);\n\n      if (num === -1) {\n        num = days[\"long\"]().indexOf(input);\n      }\n\n      if (num === -1) {\n        num = 1; //go back to default\n      }\n\n      this._weekStart = num;\n    } else {\n      console.warn('Spacetime Error: Cannot understand .weekStart() input:', input);\n    }\n\n    return this;\n  }\n}; // aliases\n\nmethods.inDST = methods.isDST;\nmethods.round = methods.nearest;\nmethods.each = methods.every;\nvar methods_1 = methods;\n\n//these methods wrap around them.\n\nvar validate = function validate(n) {\n  //handle number as a string\n  if (typeof n === 'string') {\n    n = parseInt(n, 10);\n  }\n\n  return n;\n};\n\nvar order = ['year', 'month', 'date', 'hour', 'minute', 'second', 'millisecond']; //reduce hostile micro-changes when moving dates by millisecond\n\nvar confirm = function confirm(s, tmp, unit) {\n  var n = order.indexOf(unit);\n  var arr = order.slice(n, order.length);\n\n  for (var i = 0; i < arr.length; i++) {\n    var want = tmp[arr[i]]();\n    s[arr[i]](want);\n  }\n\n  return s;\n};\n\nvar set = {\n  milliseconds: function milliseconds(s, n) {\n    n = validate(n);\n    var current = s.millisecond();\n    var diff = current - n; //milliseconds to shift by\n\n    return s.epoch - diff;\n  },\n  seconds: function seconds(s, n) {\n    n = validate(n);\n    var diff = s.second() - n;\n    var shift = diff * milliseconds.second;\n    return s.epoch - shift;\n  },\n  minutes: function minutes(s, n) {\n    n = validate(n);\n    var old = s.clone();\n    var diff = s.minute() - n;\n    var shift = diff * milliseconds.minute;\n    s.epoch -= shift;\n    confirm(s, old, 'second');\n    return s.epoch;\n  },\n  hours: function hours(s, n) {\n    n = validate(n);\n\n    if (n >= 24) {\n      n = 24;\n    } else if (n < 0) {\n      n = 0;\n    }\n\n    var old = s.clone();\n    var diff = s.hour() - n;\n    var shift = diff * milliseconds.hour;\n    s.epoch -= shift;\n    walk_1(s, {\n      hour: n\n    });\n    confirm(s, old, 'minute');\n    return s.epoch;\n  },\n  //support setting time by '4:25pm' - this isn't very-well developed..\n  time: function time(s, str) {\n    var m = str.match(/([0-9]{1,2}):([0-9]{1,2})(am|pm)?/);\n\n    if (!m) {\n      //fallback to support just '2am'\n      m = str.match(/([0-9]{1,2})(am|pm)/);\n\n      if (!m) {\n        return s.epoch;\n      }\n\n      m.splice(2, 0, '0'); //add implicit 0 minutes\n    }\n\n    var h24 = false;\n    var hour = parseInt(m[1], 10);\n    var minute = parseInt(m[2], 10);\n\n    if (hour > 12) {\n      h24 = true;\n    } //make the hour into proper 24h time\n\n\n    if (h24 === false) {\n      if (m[3] === 'am' && hour === 12) {\n        //12am is midnight\n        hour = 0;\n      }\n\n      if (m[3] === 'pm' && hour < 12) {\n        //12pm is noon\n        hour += 12;\n      }\n    }\n\n    s = s.hour(hour);\n    s = s.minute(minute);\n    s = s.second(0);\n    s = s.millisecond(0);\n    return s.epoch;\n  },\n  date: function date(s, n) {\n    n = validate(n); //avoid setting february 31st\n\n    if (n > 28) {\n      var max = monthLengths_1[s.month()];\n\n      if (n > max) {\n        n = max;\n      }\n    } //avoid setting < 0\n\n\n    if (n <= 0) {\n      n = 1;\n    }\n\n    walk_1(s, {\n      date: n\n    });\n    return s.epoch;\n  },\n  //this one's tricky\n  month: function month(s, n) {\n    if (typeof n === 'string') {\n      n = months.mapping()[n.toLowerCase()];\n    }\n\n    n = validate(n); //don't go past december\n\n    if (n >= 12) {\n      n = 11;\n    }\n\n    if (n <= 0) {\n      n = 0;\n    }\n\n    var date = s.date(); //there's no 30th of february, etc.\n\n    if (date > monthLengths_1[n]) {\n      //make it as close as we can..\n      date = monthLengths_1[n];\n    }\n\n    walk_1(s, {\n      month: n,\n      date: date\n    });\n    return s.epoch;\n  },\n  year: function year(s, n) {\n    n = validate(n);\n    walk_1(s, {\n      year: n\n    });\n    return s.epoch;\n  },\n  dayOfYear: function dayOfYear(s, n) {\n    n = validate(n);\n    var old = s.clone();\n    n -= 1; //days are 1-based\n\n    if (n <= 0) {\n      n = 0;\n    } else if (n >= 365) {\n      n = 364;\n    }\n\n    s = s.startOf('year');\n    s = s.add(n, 'day');\n    confirm(s, old, 'hour');\n    return s.epoch;\n  }\n};\n\nvar methods$1 = {\n  millisecond: function millisecond(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.milliseconds(s, num);\n      return s;\n    }\n\n    return this.d.getMilliseconds();\n  },\n  second: function second(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.seconds(s, num);\n      return s;\n    }\n\n    return this.d.getSeconds();\n  },\n  minute: function minute(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.minutes(s, num);\n      return s;\n    }\n\n    return this.d.getMinutes();\n  },\n  hour: function hour(num) {\n    var d = this.d;\n\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.hours(s, num);\n      return s;\n    }\n\n    return d.getHours();\n  },\n  //'3:30' is 3.5\n  hourFloat: function hourFloat(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n\n      var _minute = num % 1;\n\n      _minute = _minute * 60;\n\n      var _hour = parseInt(num, 10);\n\n      s.epoch = set.hours(s, _hour);\n      s.epoch = set.minutes(s, _minute);\n      return s;\n    }\n\n    var d = this.d;\n    var hour = d.getHours();\n    var minute = d.getMinutes();\n    minute = minute / 60;\n    return hour + minute;\n  },\n  // hour in 12h format\n  hour12: function hour12(str) {\n    var d = this.d;\n\n    if (str !== undefined) {\n      var s = this.clone();\n      str = '' + str;\n      var m = str.match(/^([0-9]+)(am|pm)$/);\n\n      if (m) {\n        var hour = parseInt(m[1], 10);\n\n        if (m[2] === 'pm') {\n          hour += 12;\n        }\n\n        s.epoch = set.hours(s, hour);\n      }\n\n      return s;\n    } //get the hour\n\n\n    var hour12 = d.getHours();\n\n    if (hour12 > 12) {\n      hour12 = hour12 - 12;\n    }\n\n    if (hour12 === 0) {\n      hour12 = 12;\n    }\n\n    return hour12;\n  },\n  //some ambiguity here with 12/24h\n  time: function time(str) {\n    if (str !== undefined) {\n      var s = this.clone();\n      s.epoch = set.time(s, str);\n      return s;\n    }\n\n    return \"\".concat(this.h12(), \":\").concat(fns.zeroPad(this.minute())).concat(this.ampm());\n  },\n  // either 'am' or 'pm'\n  ampm: function ampm(input) {\n    var which = 'am';\n    var hour = this.hour();\n\n    if (hour >= 12) {\n      which = 'pm';\n    }\n\n    if (typeof input !== 'string') {\n      return which;\n    } //okay, we're doing a setter\n\n\n    var s = this.clone();\n    input = input.toLowerCase().trim(); //ampm should never change the day\n    // - so use `.hour(n)` instead of `.minus(12,'hour')`\n\n    if (hour >= 12 && input === 'am') {\n      //noon is 12pm\n      hour -= 12;\n      return s.hour(hour);\n    }\n\n    if (hour < 12 && input === 'pm') {\n      hour += 12;\n      return s.hour(hour);\n    }\n\n    return s;\n  },\n  //some hard-coded times of day, like 'noon'\n  dayTime: function dayTime(str) {\n    if (str !== undefined) {\n      var times = {\n        morning: '7:00am',\n        breakfast: '7:00am',\n        noon: '12:00am',\n        lunch: '12:00pm',\n        afternoon: '2:00pm',\n        evening: '6:00pm',\n        dinner: '6:00pm',\n        night: '11:00pm',\n        midnight: '23:59pm'\n      };\n      var s = this.clone();\n      str = str || '';\n      str = str.toLowerCase();\n\n      if (times.hasOwnProperty(str) === true) {\n        s = s.time(times[str]);\n      }\n\n      return s;\n    }\n\n    var h = this.hour();\n\n    if (h < 6) {\n      return 'night';\n    }\n\n    if (h < 12) {\n      //until noon\n      return 'morning';\n    }\n\n    if (h < 17) {\n      //until 5pm\n      return 'afternoon';\n    }\n\n    if (h < 22) {\n      //until 10pm\n      return 'evening';\n    }\n\n    return 'night';\n  },\n  //parse a proper iso string\n  iso: function iso(num) {\n    if (num !== undefined) {\n      return this.set(num);\n    }\n\n    return this.format('iso');\n  }\n};\nvar _01Time = methods$1;\n\nvar methods$2 = {\n  // # day in the month\n  date: function date(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.date(s, num);\n      return s;\n    }\n\n    return this.d.getDate();\n  },\n  //like 'wednesday' (hard!)\n  day: function day(input) {\n    if (input === undefined) {\n      return this.d.getDay();\n    }\n\n    var original = this.clone();\n    var want = input; // accept 'wednesday'\n\n    if (typeof input === 'string') {\n      input = input.toLowerCase();\n      want = days[\"short\"]().indexOf(input);\n\n      if (want === -1) {\n        want = days[\"long\"]().indexOf(input);\n      }\n    } //move approx\n\n\n    var day = this.d.getDay();\n    var diff = day - want;\n    var s = this.subtract(diff * 24, 'hours'); //tighten it back up\n\n    walk_1(s, {\n      hour: original.hour(),\n      minute: original.minute(),\n      second: original.second()\n    });\n    return s;\n  },\n  //these are helpful name-wrappers\n  dayName: function dayName(input) {\n    if (input === undefined) {\n      return days[\"long\"]()[this.day()];\n    }\n\n    var s = this.clone();\n    s = s.day(input);\n    return s;\n  },\n  //either name or number\n  month: function month(input) {\n    if (input !== undefined) {\n      var s = this.clone();\n      s.epoch = set.month(s, input);\n      return s;\n    }\n\n    return this.d.getMonth();\n  }\n};\nvar _02Date = methods$2;\n\nvar clearMinutes = function clearMinutes(s) {\n  s = s.minute(0);\n  s = s.second(0);\n  s = s.millisecond(1);\n  return s;\n};\n\nvar methods$3 = {\n  // day 0-366\n  dayOfYear: function dayOfYear(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.dayOfYear(s, num);\n      return s;\n    } //days since newyears - jan 1st is 1, jan 2nd is 2...\n\n\n    var sum = 0;\n    var month = this.d.getMonth();\n    var tmp; //count the num days in each month\n\n    for (var i = 1; i <= month; i++) {\n      tmp = new Date();\n      tmp.setDate(1);\n      tmp.setFullYear(this.d.getFullYear()); //the year matters, because leap-years\n\n      tmp.setHours(1);\n      tmp.setMinutes(1);\n      tmp.setMonth(i);\n      tmp.setHours(-2); //the last day of the month\n\n      sum += tmp.getDate();\n    }\n\n    return sum + this.d.getDate();\n  },\n  //since the start of the year\n  week: function week(num) {\n    // week-setter\n    if (num !== undefined) {\n      var s = this.clone();\n      s = s.month(0);\n      s = s.date(1);\n      s = s.day('monday');\n      s = clearMinutes(s); //don't go into last-year\n\n      if (s.monthName() === 'december') {\n        s = s.add(1, 'week');\n      }\n\n      num -= 1; //1-based\n\n      s = s.add(num, 'weeks');\n      return s;\n    } //find-out which week it is\n\n\n    var tmp = this.clone();\n    tmp = tmp.month(0);\n    tmp = tmp.date(1);\n    tmp = clearMinutes(tmp);\n    tmp = tmp.day('monday'); //don't go into last-year\n\n    if (tmp.monthName() === 'december') {\n      tmp = tmp.add(1, 'week');\n    } // is first monday the 1st?\n\n\n    var toAdd = 1;\n\n    if (tmp.date() === 1) {\n      toAdd = 0;\n    }\n\n    tmp = tmp.minus(1, 'second');\n    var thisOne = this.epoch; //if the week technically hasn't started yet\n\n    if (tmp.epoch > thisOne) {\n      return 1;\n    } //speed it up, if we can\n\n\n    var i = 0;\n    var skipWeeks = this.month() * 4;\n    tmp.epoch += milliseconds.week * skipWeeks;\n    i += skipWeeks;\n\n    for (; i < 52; i++) {\n      if (tmp.epoch > thisOne) {\n        return i + toAdd;\n      }\n\n      tmp = tmp.add(1, 'week');\n    }\n\n    return 52;\n  },\n  //'january'\n  monthName: function monthName(input) {\n    if (input === undefined) {\n      return months[\"long\"]()[this.month()];\n    }\n\n    var s = this.clone();\n    s = s.month(input);\n    return s;\n  },\n  //q1, q2, q3, q4\n  quarter: function quarter(num) {\n    if (num !== undefined) {\n      if (typeof num === 'string') {\n        num = num.replace(/^q/i, '');\n        num = parseInt(num, 10);\n      }\n\n      if (quarters[num]) {\n        var s = this.clone();\n        var _month = quarters[num][0];\n        s = s.month(_month);\n        s = s.date(1);\n        s = s.startOf('day');\n        return s;\n      }\n    }\n\n    var month = this.d.getMonth();\n\n    for (var i = 1; i < quarters.length; i++) {\n      if (month < quarters[i][0]) {\n        return i - 1;\n      }\n    }\n\n    return 4;\n  },\n  //spring, summer, winter, fall\n  season: function season(input) {\n    var hem = 'north';\n\n    if (this.hemisphere() === 'South') {\n      hem = 'south';\n    }\n\n    if (input !== undefined) {\n      var s = this.clone();\n\n      for (var i = 0; i < seasons[hem].length; i++) {\n        if (input === seasons[hem][i][0]) {\n          s = s.month(seasons[hem][i][1]);\n          s = s.date(1);\n          s = s.startOf('day');\n        }\n      }\n\n      return s;\n    }\n\n    var month = this.d.getMonth();\n\n    for (var _i = 0; _i < seasons[hem].length - 1; _i++) {\n      if (month >= seasons[hem][_i][1] && month < seasons[hem][_i + 1][1]) {\n        return seasons[hem][_i][0];\n      }\n    }\n\n    return 'winter';\n  },\n  //the year number\n  year: function year(num) {\n    if (num !== undefined) {\n      var s = this.clone();\n      s.epoch = set.year(s, num);\n      return s;\n    }\n\n    return this.d.getFullYear();\n  },\n  //bc/ad years\n  era: function era(str) {\n    if (str !== undefined) {\n      var s = this.clone();\n      str = str.toLowerCase(); //TODO: there is no year-0AD i think. may have off-by-1 error here\n\n      var year = s.d.getFullYear(); //make '1992' into 1992bc..\n\n      if (str === 'bc' && year > 0) {\n        s.epoch = set.year(s, year * -1);\n      } //make '1992bc' into '1992'\n\n\n      if (str === 'ad' && year < 0) {\n        s.epoch = set.year(s, year * -1);\n      }\n\n      return s;\n    }\n\n    if (this.d.getFullYear() < 0) {\n      return 'BC';\n    }\n\n    return 'AD';\n  },\n  // 2019 -> 2010\n  decade: function decade(input) {\n    if (input !== undefined) {\n      input = String(input);\n      input = input.replace(/([0-9])'?s$/, '$1'); //1950's\n\n      input = input.replace(/([0-9])(th|rd|st|nd)/, '$1'); //fix ordinals\n\n      if (!input) {\n        console.warn('Spacetime: Invalid decade input');\n        return this;\n      } // assume 20th century?? for '70s'.\n\n\n      if (input.length === 2 && /[0-9][0-9]/.test(input)) {\n        input = '19' + input;\n      }\n\n      var year = Number(input);\n\n      if (isNaN(year)) {\n        return this;\n      } // round it down to the decade\n\n\n      year = Math.floor(year / 10) * 10;\n      return this.year(year); //.startOf('decade')\n    }\n\n    return this.startOf('decade').year();\n  },\n  // 1950 -> 19+1\n  century: function century(input) {\n    if (input !== undefined) {\n      if (typeof input === 'string') {\n        input = input.replace(/([0-9])(th|rd|st|nd)/, '$1'); //fix ordinals\n\n        input = input.replace(/([0-9]+) ?(b\\.?c\\.?|a\\.?d\\.?)/i, function (a, b, c) {\n          if (c.match(/b\\.?c\\.?/i)) {\n            b = '-' + b;\n          }\n\n          return b;\n        });\n        input = input.replace(/c$/, ''); //20thC\n      }\n\n      var year = Number(input);\n\n      if (isNaN(input)) {\n        console.warn('Spacetime: Invalid century input');\n        return this;\n      } // there is no century 0\n\n\n      if (year === 0) {\n        year = 1;\n      }\n\n      if (year >= 0) {\n        year = (year - 1) * 100;\n      } else {\n        year = (year + 1) * 100;\n      }\n\n      return this.year(year);\n    } // century getter\n\n\n    var num = this.startOf('century').year();\n    num = Math.floor(num / 100);\n\n    if (num < 0) {\n      return num - 1;\n    }\n\n    return num + 1;\n  },\n  // 2019 -> 2+1\n  millenium: function millenium(input) {\n    if (input !== undefined) {\n      if (typeof input === 'string') {\n        input = input.replace(/([0-9])(th|rd|st|nd)/, '$1'); //fix ordinals\n\n        input = Number(input);\n\n        if (isNaN(input)) {\n          console.warn('Spacetime: Invalid millenium input');\n          return this;\n        }\n      }\n\n      if (input > 0) {\n        input -= 1;\n      }\n\n      var year = input * 1000; // there is no year 0\n\n      if (year === 0) {\n        year = 1;\n      }\n\n      return this.year(year);\n    } // get the current millenium\n\n\n    var num = Math.floor(this.year() / 1000);\n\n    if (num >= 0) {\n      num += 1;\n    }\n\n    return num;\n  }\n};\nvar _03Year = methods$3;\n\nvar methods$4 = Object.assign({}, _01Time, _02Date, _03Year); //aliases\n\nmethods$4.milliseconds = methods$4.millisecond;\nmethods$4.seconds = methods$4.second;\nmethods$4.minutes = methods$4.minute;\nmethods$4.hours = methods$4.hour;\nmethods$4.hour24 = methods$4.hour;\nmethods$4.h12 = methods$4.hour12;\nmethods$4.h24 = methods$4.hour24;\nmethods$4.days = methods$4.day;\n\nvar addMethods = function addMethods(Space) {\n  //hook the methods into prototype\n  Object.keys(methods$4).forEach(function (k) {\n    Space.prototype[k] = methods$4[k];\n  });\n};\n\nvar query = addMethods;\n\nvar order$1 = ['millisecond', 'second', 'minute', 'hour', 'date', 'month'];\nvar keep = {\n  second: order$1.slice(0, 1),\n  minute: order$1.slice(0, 2),\n  quarterhour: order$1.slice(0, 2),\n  hour: order$1.slice(0, 3),\n  date: order$1.slice(0, 4),\n  month: order$1.slice(0, 4),\n  quarter: order$1.slice(0, 4),\n  season: order$1.slice(0, 4),\n  year: order$1,\n  decade: order$1,\n  century: order$1\n};\nkeep.week = keep.hour;\nkeep.season = keep.date;\nkeep.quarter = keep.date; // Units need to be dst adjuested\n\nvar dstAwareUnits = {\n  year: true,\n  quarter: true,\n  season: true,\n  month: true,\n  week: true,\n  day: true\n};\nvar keepDate = {\n  month: true,\n  quarter: true,\n  season: true,\n  year: true\n}; //month is the only thing we 'model/compute'\n//- because ms-shifting can be off by enough\n\nvar rollMonth = function rollMonth(want, old) {\n  //increment year\n  if (want.month > 0) {\n    var years = parseInt(want.month / 12, 10);\n    want.year = old.year() + years;\n    want.month = want.month % 12;\n  } else if (want.month < 0) {\n    //decrement year\n    var _years = Math.floor(Math.abs(want.month) / 13, 10);\n\n    _years = Math.abs(_years) + 1;\n    want.year = old.year() - _years; //ignore extras\n\n    want.month = want.month % 12;\n    want.month = want.month + 12;\n\n    if (want.month === 12) {\n      want.month = 0;\n    }\n  }\n\n  return want;\n};\n\nvar addMethods$1 = function addMethods(SpaceTime) {\n  SpaceTime.prototype.add = function (num, unit) {\n    var s = this.clone();\n\n    if (!unit || num === 0) {\n      return s; //don't bother\n    }\n\n    var old = this.clone();\n    unit = fns.normalize(unit); //move forward by the estimated milliseconds (rough)\n\n    if (milliseconds[unit]) {\n      s.epoch += milliseconds[unit] * num;\n    } else if (unit === 'week') {\n      s.epoch += milliseconds.day * (num * 7);\n    } else if (unit === 'quarter' || unit === 'season') {\n      s.epoch += milliseconds.month * (num * 4);\n    } else if (unit === 'season') {\n      s.epoch += milliseconds.month * (num * 4);\n    } else if (unit === 'quarterhour') {\n      s.epoch += milliseconds.minute * 15 * num;\n    } //now ensure our milliseconds/etc are in-line\n\n\n    var want = {};\n\n    if (keep[unit]) {\n      keep[unit].forEach(function (u) {\n        want[u] = old[u]();\n      });\n    }\n\n    if (dstAwareUnits[unit]) {\n      var diff = old.timezone().current.offset - s.timezone().current.offset;\n      s.epoch += diff * 3600 * 1000;\n    } //ensure month/year has ticked-over\n\n\n    if (unit === 'month') {\n      want.month = old.month() + num; //month is the one unit we 'model' directly\n\n      want = rollMonth(want, old);\n    } //support coercing a week, too\n\n\n    if (unit === 'week') {\n      var sum = old.date() + num * 7;\n\n      if (sum <= 28 && sum > 1) {\n        want.date = sum;\n      }\n    } //support 25-hour day-changes on dst-changes\n    else if (unit === 'date') {\n        //specify a naive date number, if it's easy to do...\n        var _sum = old.date() + num;\n\n        if (_sum <= 28 && _sum > 1) {\n          want.date = _sum;\n        } //or if we haven't moved at all..\n        else if (num !== 0 && old.isSame(s, 'day')) {\n            want.date = old.date() + num;\n          }\n      } //ensure year has changed (leap-years)\n      else if (unit === 'year' && s.year() === old.year()) {\n          s.epoch += milliseconds.week;\n        } //these are easier\n        else if (unit === 'decade') {\n            want.year = s.year() + 10;\n          } else if (unit === 'century') {\n            want.year = s.year() + 100;\n          } //keep current date, unless the month doesn't have it.\n\n\n    if (keepDate[unit]) {\n      var max = monthLengths_1[want.month];\n      want.date = old.date();\n\n      if (want.date > max) {\n        want.date = max;\n      }\n    }\n\n    walk_1(s, want);\n    return s;\n  }; //subtract is only add *-1\n\n\n  SpaceTime.prototype.subtract = function (num, unit) {\n    var s = this.clone();\n    return s.add(num * -1, unit);\n  }; //add aliases\n\n\n  SpaceTime.prototype.minus = SpaceTime.prototype.subtract;\n  SpaceTime.prototype.plus = SpaceTime.prototype.add;\n};\n\nvar add = addMethods$1;\n\n//make a string, for easy comparison between dates\nvar print = {\n  millisecond: function millisecond(s) {\n    return s.epoch;\n  },\n  second: function second(s) {\n    return [s.year(), s.month(), s.date(), s.hour(), s.minute(), s.second()].join('-');\n  },\n  minute: function minute(s) {\n    return [s.year(), s.month(), s.date(), s.hour(), s.minute()].join('-');\n  },\n  hour: function hour(s) {\n    return [s.year(), s.month(), s.date(), s.hour()].join('-');\n  },\n  day: function day(s) {\n    return [s.year(), s.month(), s.date()].join('-');\n  },\n  week: function week(s) {\n    return [s.year(), s.week()].join('-');\n  },\n  month: function month(s) {\n    return [s.year(), s.month()].join('-');\n  },\n  quarter: function quarter(s) {\n    return [s.year(), s.quarter()].join('-');\n  },\n  year: function year(s) {\n    return s.year();\n  }\n};\nprint.date = print.day;\n\nvar addMethods$2 = function addMethods(SpaceTime) {\n  SpaceTime.prototype.isSame = function (b, unit) {\n    var a = this;\n\n    if (!unit) {\n      return null;\n    }\n\n    if (typeof b === 'string' || typeof b === 'number') {\n      b = new SpaceTime(b, this.timezone.name);\n    } //support 'seconds' aswell as 'second'\n\n\n    unit = unit.replace(/s$/, '');\n\n    if (print[unit]) {\n      return print[unit](a) === print[unit](b);\n    }\n\n    return null;\n  };\n};\n\nvar same = addMethods$2;\n\nvar addMethods$3 = function addMethods(SpaceTime) {\n  var methods = {\n    isAfter: function isAfter(d) {\n      d = fns.beADate(d, this);\n      var epoch = fns.getEpoch(d);\n\n      if (epoch === null) {\n        return null;\n      }\n\n      return this.epoch > epoch;\n    },\n    isBefore: function isBefore(d) {\n      d = fns.beADate(d, this);\n      var epoch = fns.getEpoch(d);\n\n      if (epoch === null) {\n        return null;\n      }\n\n      return this.epoch < epoch;\n    },\n    isEqual: function isEqual(d) {\n      d = fns.beADate(d, this);\n      var epoch = fns.getEpoch(d);\n\n      if (epoch === null) {\n        return null;\n      }\n\n      return this.epoch === epoch;\n    },\n    isBetween: function isBetween(start, end) {\n      var isInclusive = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      start = fns.beADate(start, this);\n      end = fns.beADate(end, this);\n      var startEpoch = fns.getEpoch(start);\n\n      if (startEpoch === null) {\n        return null;\n      }\n\n      var endEpoch = fns.getEpoch(end);\n\n      if (endEpoch === null) {\n        return null;\n      }\n\n      if (isInclusive) {\n        return this.isBetween(start, end) || this.isEqual(start) || this.isEqual(end);\n      }\n\n      return startEpoch < this.epoch && this.epoch < endEpoch;\n    }\n  }; //hook them into proto\n\n  Object.keys(methods).forEach(function (k) {\n    SpaceTime.prototype[k] = methods[k];\n  });\n};\n\nvar compare = addMethods$3;\n\nvar addMethods$4 = function addMethods(SpaceTime) {\n  var methods = {\n    i18n: function i18n(data) {\n      //change the day names\n      if (fns.isObject(data.days)) {\n        days.set(data.days);\n      } //change the month names\n\n\n      if (fns.isObject(data.months)) {\n        months.set(data.months);\n      }\n    }\n  }; //hook them into proto\n\n  Object.keys(methods).forEach(function (k) {\n    SpaceTime.prototype[k] = methods[k];\n  });\n};\n\nvar i18n = addMethods$4;\n\nvar timezones = unpack; //fake timezone-support, for fakers (es5 class)\n\nvar SpaceTime = function SpaceTime(input$1, tz) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  //the holy moment\n  this.epoch = null; //the shift for the given timezone\n\n  this.tz = find(tz, timezones); //whether to output warnings to console\n\n  this.silent = options.silent || true; // favour british interpretation of 02/02/2018, etc\n\n  this.british = options.dmy || options.british; //does the week start on sunday, or monday:\n\n  this._weekStart = 1; //default to monday\n\n  if (options.weekStart !== undefined) {\n    this._weekStart = options.weekStart;\n  } //add getter/setters\n\n\n  Object.defineProperty(this, 'd', {\n    //return a js date object\n    get: function get() {\n      var offset = quick(this); //every computer is somewhere- get this computer's built-in offset\n\n      var bias = new Date(this.epoch).getTimezoneOffset() || 0; //movement\n\n      var shift = bias + offset * 60; //in minutes\n\n      shift = shift * 60 * 1000; //in ms\n      //remove this computer's offset\n\n      var epoch = this.epoch + shift;\n      var d = new Date(epoch);\n      return d;\n    }\n  }); //add this data on the object, to allow adding new timezones\n\n  Object.defineProperty(this, 'timezones', {\n    get: function get() {\n      return timezones;\n    },\n    set: function set(obj) {\n      timezones = obj;\n      return obj;\n    }\n  }); //parse the various formats\n\n  if (input$1 !== undefined || input$1 === null) {\n    var tmp = input(this, input$1, tz);\n    this.epoch = tmp.epoch;\n  }\n}; //(add instance methods to prototype)\n\n\nObject.keys(methods_1).forEach(function (k) {\n  SpaceTime.prototype[k] = methods_1[k];\n}); // ¯\\_(ツ)_/¯\n\nSpaceTime.prototype.clone = function () {\n  return new SpaceTime(this.epoch, this.tz, {\n    silent: this.silent,\n    weekStart: this._weekStart\n  });\n}; //return native date object at the same epoch\n\n\nSpaceTime.prototype.toLocalDate = function () {\n  return new Date(this.epoch);\n}; //append more methods\n\n\nquery(SpaceTime);\nadd(SpaceTime);\nsame(SpaceTime);\ncompare(SpaceTime);\ni18n(SpaceTime);\nvar spacetime = SpaceTime;\n\nvar whereIts = function whereIts(a, b) {\n  var start = new spacetime(null);\n  var end = new spacetime(null);\n  start = start.time(a); //if b is undefined, use as 'within one hour'\n\n  if (b) {\n    end = end.time(b);\n  } else {\n    end = start.add(59, 'minutes');\n  }\n\n  var startHour = start.hour();\n  var endHour = end.hour();\n  var tzs = Object.keys(start.timezones).filter(function (tz) {\n    if (tz.indexOf('/') === -1) {\n      return false;\n    }\n\n    var m = new spacetime(null, tz);\n    var hour = m.hour(); //do 'calendar-compare' not real-time-compare\n\n    if (hour >= startHour && hour <= endHour) {\n      //test minutes too, if applicable\n      if (hour === startHour && m.minute() < start.minute()) {\n        return false;\n      }\n\n      if (hour === endHour && m.minute() > end.minute()) {\n        return false;\n      }\n\n      return true;\n    }\n\n    return false;\n  });\n  return tzs;\n};\n\nvar whereIts_1 = whereIts;\n\nvar _version = '6.4.3';\n\nvar main$1 = function main(input, tz, options) {\n  return new spacetime(input, tz, options);\n}; //some helper functions on the main method\n\n\nmain$1.now = function (tz, options) {\n  return new spacetime(new Date().getTime(), tz, options);\n};\n\nmain$1.today = function (tz, options) {\n  var s = new spacetime(new Date().getTime(), tz, options);\n  return s.startOf('day');\n};\n\nmain$1.tomorrow = function (tz, options) {\n  var s = new spacetime(new Date().getTime(), tz, options);\n  return s.add(1, 'day').startOf('day');\n};\n\nmain$1.yesterday = function (tz, options) {\n  var s = new spacetime(new Date().getTime(), tz, options);\n  return s.subtract(1, 'day').startOf('day');\n};\n\nmain$1.extend = function (obj) {\n  Object.keys(obj).forEach(function (k) {\n    spacetime.prototype[k] = obj[k];\n  });\n  return this;\n}; //find tz by time\n\n\nmain$1.whereIts = whereIts_1;\nmain$1.version = _version; //aliases:\n\nmain$1.plugin = main$1.extend;\nvar src = main$1;\n\nexport default src;\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router, NavigationEnd, NavigationStart } from '@angular/router';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/base.directive';\n\nimport { HashMap } from 'src/app/shared/utilities/types.utilities';\n\nexport interface BookingFlowEvent {\n    /** Type of flow event */\n    type: 'previous' | 'next' | 'reset' | 'close' | 'error';\n    /** Step which the event was emitted from */\n    step: string;\n    /** Additional metadata for the event */\n    metadata?: HashMap;\n}\n\n@Component({\n    selector: 'app-bookings',\n    templateUrl: './bookings.component.html',\n    styleUrls: ['./bookings.component.scss'],\n})\nexport class BookingsComponent extends BaseDirective implements OnInit {\n    /** Booking flow */\n    public flow: 'spaces' | 'desks';\n    /** Whether to show the overlay menu */\n    public show_menu: boolean;\n\n    constructor(\n        private _service: ApplicationService,\n        private _route: ActivatedRoute,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.title = 'Book';\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe((params) => {\n                /* istanbul ignore else */\n                if (params.has('flow')) {\n                    this.flow = params.get('flow') as any;\n                }\n            })\n        );\n        this.subscription(\n            'router.events',\n            this._router.events.subscribe((event) => {\n                /* istanbul ignore else */\n                if (event instanceof NavigationStart) {\n                    /* istanbul ignore else */\n                    if (event.url.indexOf('book') < 0) {\n                        localStorage.removeItem('ACA_STAFF.booking_form_data');\n                    }\n                }\n            })\n        );\n    }\n}\n","<div class=\"booking page\">\n    <header class=\"header\">\n        <a-topbar-header [(menu)]=\"show_menu\"></a-topbar-header>\n    </header>\n    <main class=\"body\">\n        <ng-container [ngSwitch]=\"flow\">\n            <booking-desk-flow *ngSwitchCase=\"'desks'\"></booking-desk-flow>\n            <booking-space-flow *ngSwitchDefault></booking-space-flow>\n        </ng-container>\n    </main>\n    <footer class=\"footer\">\n        <a-footer-menu></a-footer-menu>\n    </footer>\n</div>\n<a-overlay-menu [(show)]=\"show_menu\"></a-overlay-menu>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Route } from '@angular/router';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ComposerModule } from '@placeos/composer';\n\nimport { BookingsComponent } from './bookings.component';\nimport { SharedContentModule } from 'src/app/shared/shared.module';\nimport { BookingSpaceFlowComponent } from './space-flow/space-flow.component';\nimport { BookingSpaceFlowFormComponent } from './space-flow/form/form.component';\nimport { BookingFindSpaceComponent } from './space-flow/find-space/find-space.component';\nimport { BookingSpaceItemComponent } from './space-flow/find-space/item/item.component';\nimport { BookingSpaceFiltersComponent } from './space-flow/find-space/filters/filters.component';\nimport { BookingCateringComponent } from './space-flow/catering/catering.component';\nimport { BookingCateringOrderListComponent } from './space-flow/catering/order-list/order-list.component';\nimport { BookingCateringOrderDetailsComponent } from './space-flow/catering/order-details/order-details.component';\nimport { CateringOrderListItemComponent } from './space-flow/catering/order-list/item/item.component';\nimport { CateringMenuCategoryComponent } from './space-flow/catering/order-details/category/category.component';\nimport { BookingCateringConfirmModalComponent } from './overlays/catering-confirm-modal/catering-confirm-modal.component';\nimport { CateringMenuItemComponent } from './space-flow/catering/order-details/item/item.component';\nimport { PackageOptionsModalComponent } from './overlays/package-options-modal/package-options-modal.component';\nimport { RequirementDetailsModalComponent } from './overlays/requirement-details-modal/requirement-details-modal.component';\nimport { CateringDetailsModalComponent } from './overlays/catering-details-modal/catering-details-modal.component';\nimport { RecurrenceSpacesModalComponent } from './overlays/recurrence-spaces-modal/recurrence-spaces-modal.component';\n\nconst ROUTES: Route[] = [\n    { path: ':flow', component: BookingsComponent },\n    { path: ':flow/:step', component: BookingsComponent },\n    { path: '', redirectTo: 'spaces' }\n];\n\n@NgModule({\n    declarations: [\n        BookingsComponent,\n        BookingSpaceFlowComponent,\n        BookingSpaceFlowFormComponent,\n        BookingFindSpaceComponent,\n        BookingSpaceItemComponent,\n        BookingSpaceFiltersComponent,\n        BookingCateringComponent,\n        BookingCateringOrderListComponent,\n        BookingCateringOrderDetailsComponent,\n        CateringOrderListItemComponent,\n        CateringMenuCategoryComponent,\n        BookingCateringConfirmModalComponent,\n        CateringMenuItemComponent,\n        PackageOptionsModalComponent,\n        RequirementDetailsModalComponent,\n        CateringDetailsModalComponent,\n        RecurrenceSpacesModalComponent,\n    ],\n    imports: [\n        CommonModule,\n        RouterModule.forChild(ROUTES),\n        SharedContentModule,\n        FormsModule,\n        ReactiveFormsModule,\n        ComposerModule\n    ]\n})\nexport class BookingsModule {}\n","import { Component, OnInit, Inject, Output, EventEmitter } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { FormGroup, FormControl } from '@angular/forms';\n\nimport { CateringItem } from 'src/app/services/data/catering/catering-item.class';\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { DialogEvent } from 'src/app/shared/utilities/types.utilities';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/base.directive';\n\nimport * as dayjs from 'dayjs';\n\nexport interface CateringConfirmModalData {\n    form: FormGroup;\n    date: number;\n}\n\n@Component({\n    selector: 'a-catering-confirm-modal',\n    templateUrl: './catering-confirm-modal.component.html',\n    styleUrls: ['./catering-confirm-modal.component.scss'],\n})\nexport class BookingCateringConfirmModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for user actions on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** List of selected items for the order */\n    public item_list: CateringItem[] = [];\n\n    /** Space selected for delivery */\n    public get space(): Space {\n        return this._data.form && this._data.form.controls.space\n            ? this._data.form.controls.space.value\n            : ({} as any);\n    }\n    /** Delivery time for the order */\n    public get delivery_time(): string {\n        const date = dayjs(this._data.date);\n        return date.format('h:mm A');\n    }\n\n    /** Form field for order items */\n    public get item_field(): FormControl {\n        return this._data.form.controls.items as any;\n    }\n\n    /** Total cost of the order */\n    public get order_cost(): number {\n        return this.item_list.reduce((amount, item) => amount + item.amount * item.unit_price, 0);\n    }\n\n    /** Currency symbol for the selected space */\n    public get symbol(): string {\n        /* istanbul ignore else */\n        if (!this.space || !this.space.level) {\n            return 'USD';\n        }\n        const building = this._service.Organisation.buildings.find(\n            (bld) => bld.id === this.space.level.building_id\n        ) || { currency: 'USD' };\n        return building.currency;\n    }\n\n    constructor(\n        private _service: ApplicationService,\n        private _dialog_ref: MatDialogRef<BookingCateringConfirmModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: CateringConfirmModalData\n    ) {\n        super();\n        if (!this._data.form) {\n            this._service.notifyError('No form data for order');\n            this._dialog_ref.close();\n        }\n    }\n\n    public ngOnInit(): void {\n        /* istanbul ignore else */\n        if (this._data.form.controls.items) {\n            this.subscription(\n                'item_list',\n                this._data.form.controls.items.valueChanges.subscribe((items) => {\n                    /* istanbul ignore else */\n                    if (!items || items.length <= 0) {\n                        this._dialog_ref.close();\n                    }\n                })\n            );\n        }\n        this.item_list = this._data.form.controls.items.value.map((item) => new CateringItem(item));\n    }\n}\n","<header>\n    <div class=\"heading\" i18n=\"Catering confirm order header\">Confirm Catering Order</div>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <main>\n        <div class=\"details\">\n            Delivering to <span>{{ space.name || '&lt;Unset&gt;' }}</span> at <span>{{ delivery_time }}</span>\n        </div>\n        <div class=\"list\">\n            <a-catering-order-item\n                *ngFor=\"let item of item_list\"\n                [field]=\"item_field\"\n                [subitem]=\"true\"\n                [item]=\"item\"\n                [symbol]=\"symbol\"\n            ></a-catering-order-item>\n        </div>\n        <div class=\"total\">\n            <label>Order Total:</label>\n            <div class=\"value\">{{ order_cost / 100 | currency:symbol }}</div>\n        </div>\n    </main>\n</mat-dialog-content>\n<mat-dialog-actions>\n    <footer>\n        <button mat-button (tapped)=\"event.emit({ reason: 'done' })\" i18n=\"Catering confirm save action\">Save Order</button>\n    </footer>\n</mat-dialog-actions>\n","import { Component, OnInit, Inject, Output, EventEmitter } from '@angular/core';\nimport { FormGroup, Validators, AbstractControl, FormControl } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { HashMap, DialogEvent } from 'src/app/shared/utilities/types.utilities';\nimport { BookingNote } from 'src/app/services/data/bookings/booking.interfaces';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { CateringOrder } from 'src/app/services/data/catering/catering-order.class';\n\nimport * as dayjs from 'dayjs';\n\nexport interface CateringDetailsModalData {\n    spaces: Space[];\n    notes_field: AbstractControl;\n    catering: AbstractControl;\n}\n\n@Component({\n    selector: 'a-catering-details-modal',\n    templateUrl: './catering-details-modal.component.html',\n    styleUrls: ['./catering-details-modal.component.scss'],\n})\nexport class CateringDetailsModalComponent implements OnInit {\n    /** Emitter for modal events */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Mapping of spaces to notes */\n    public notes: HashMap<string> = {};\n    /** Mapping of spaces to cost codes */\n    public codes: HashMap<string> = {};\n    /** Mapping of spaces to estimated head count */\n    public head_counts: HashMap<string> = {};\n    /** Mapping of spaces to form fields */\n    public form: HashMap<FormGroup> = {};\n    /** Map of spaces to whether they need a charge code */\n    public needs_charge_code: HashMap<boolean> = {};\n    /** Index of the active space */\n    public active_space: number = 0;\n\n    /** List of selected spaces */\n    public get space_list(): Space[] {\n        return this._data.spaces || [];\n    }\n\n    public get active_form(): FormGroup {\n        return this.form[this.space_list[this.active_space].id];\n    }\n\n    /** Whether form fields are valid */\n    public get is_valid(): boolean {\n        return this.space_list.reduce((valid, space) => valid && this.form[space.id].valid, true);\n    }\n\n    constructor(\n        private _service: ApplicationService,\n        @Inject(MAT_DIALOG_DATA) private _data: CateringDetailsModalData\n    ) {}\n\n    public ngOnInit(): void {\n        const note_list = this._data.notes_field.value.filter(\n            (note: BookingNote) => note.type === 'catering'\n        );\n        this.notes = note_list.reduce((map, note) => {\n            map[note.space] = note.message;\n            return map;\n        }, {});\n        this.codes = this._data.catering.value.reduce((map, order: CateringOrder) => {\n            map[order.location_id] = order.charge_code;\n            return map;\n        }, {});\n        this.generateFormFields();\n    }\n\n    public submit(): void {\n        this.space_list.forEach((space) => this.form[space.id].markAllAsTouched());\n        /* istanbul ignore else */\n        if (this.is_valid) {\n            // Update notes\n            const notes = this._data.notes_field.value.filter(\n                (note: BookingNote) => note.type !== 'catering'\n            );\n            const new_notes = this.space_list.map(\n                (space) =>\n                    ({\n                        author: this._service.Users.current.name,\n                        type: 'catering',\n                        message: this.form[space.id].controls.notes.value,\n                        space: space.id,\n                        date: dayjs().valueOf(),\n                    } as BookingNote)\n            );\n            this._data.notes_field.setValue(notes.concat(new_notes).filter((note) => note.message));\n            const orders = this._data.catering.value.map(\n                (order) =>\n                    new CateringOrder({\n                        ...order,\n                        charge_code: this.form[order.location_id].controls.code.value,\n                    })\n            );\n            this._data.catering.setValue(orders);\n            this.event.emit({ reason: 'done' });\n        }\n    }\n\n    /** Generate form fields for each space */\n    private generateFormFields(): void {\n        for (const space of this.space_list) {\n            this.form[space.id] = new FormGroup({\n                notes: new FormControl(this.notes[space.id] || ''),\n                code: new FormControl(this.codes[space.id] || ''),\n            });\n        }\n    }\n}\n","<div class=\"header\">\n    <div class=\"tabs\">\n        <mat-tab-group [(selectedIndex)]=\"active_space\">\n            <mat-tab\n                *ngFor=\"let space of space_list\"\n                [label]=\"space.name + (form[space.id].invalid && form[space.id].touched ? '*' : '')\"\n            ></mat-tab>\n        </mat-tab-group>\n    </div>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n    </button>\n</div>\n<mat-dialog-content>\n    <main>\n        <div class=\"details\">\n            <img src=\"assets/img/food-notes.svg\" />\n            <div class=\"text\">Please specify any allergies or gluten intolerances</div>\n        </div>\n        <form *ngIf=\"space_list[active_space] && active_form\" [formGroup]=\"active_form\">\n            <div class=\"field\">\n                <label for=\"equipment-notes\" i18n=\"Catering details equipment notes label\">\n                    (eg - allergies, in tolerances, no ice in drinks etc) Additional requests are\n                    handled in confidence.\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"equipment-notes\"\n                        formControlName=\"notes\"\n                        placeholder=\"Add notes here...\"\n                        i18n-placeholder\n                    ></textarea>\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label\n                    for=\"charge-code\"\n                    [class.error]=\"\n                        active_form.controls.code.touched && active_form.controls.code.invalid\n                    \"\n                    i18n=\"Catering details charge code label\"\n                >\n                    Charge Code<span *ngIf=\"needs_charge_code[space_list[active_space].id]\">*</span>\n                </label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"charge-code\"\n                        formControlName=\"code\"\n                        placeholder=\"Charge Code\"\n                        i18n-placeholder\n                    />\n                    <mat-error i18n=\"Catering details charge code error\">\n                        Charge Code is required\n                    </mat-error>\n                    <mat-hint i18n=\"Catering details charge code hint\">\n                        <span>Note:</span> Your booking will be confirmed before you are charged.\n                    </mat-hint>\n                </mat-form-field>\n            </div>\n        </form>\n    </main>\n</mat-dialog-content>\n<mat-dialog-actions>\n    <footer>\n        <button mat-button (tapped)=\"submit()\" i18n=\"Catering details save action\">\n            Add to booking\n        </button>\n    </footer>\n</mat-dialog-actions>\n","import { Component, Output, EventEmitter, Inject } from '@angular/core';\n\nimport { DialogEvent, HashMap } from 'src/app/shared/utilities/types.utilities';\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { CateringItem } from 'src/app/services/data/catering/catering-item.class';\n\nexport interface PackageOptionsModalData {\n    item: CateringCategory;\n}\n\nexport function checkItemRequirements(category: CateringCategory): boolean {\n    const items = category.items;\n    return category.must_select >= items.length\n        ? items.reduce((valid, item) => valid && checkItemRequirements(item as any), true)\n        : items.reduce((amount, item) => (amount + item.amount ? 1 : 0), 0) ===\n              category.must_select;\n}\n\nexport function getActiveItems(category: CateringCategory): HashMap<string> {\n    let map = {};\n    if (category.items) {\n        const item = category.items.find(item  => item.amount > 0);\n        if (item) {\n            map[category.id] = item.id;\n        }\n        category.items.forEach(item => map = { ...map, ...getActiveItems(item as any) })\n    }\n    return map;\n}\n\n@Component({\n    selector: 'a-package-options-modal',\n    templateUrl: './package-options-modal.component.html',\n    styleUrls: ['./package-options-modal.component.scss']\n})\nexport class PackageOptionsModalComponent {\n    /** Emitter for user actions on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n\n    /** Item to select options for */\n    public get item(): CateringCategory {\n        return this._data.item;\n    }\n\n    /** Whether package requirements have been met */\n    public get requirements_met(): boolean {\n        return checkItemRequirements(this.item);\n    }\n\n    public get active_items(): HashMap<string> {\n        return getActiveItems(this.item);\n    }\n\n    constructor(@Inject(MAT_DIALOG_DATA) private _data: PackageOptionsModalData) {}\n\n    /**\n     * Update the list of selected items\n     */\n    public updateAmount(a_package: CateringCategory, option: CateringItem, state: boolean) {\n        if (state) {\n            const needed = a_package.must_select;\n            const active = a_package.items.filter(an_item => an_item.amount > 0).length;\n            if (active >= needed) {\n                const item = a_package.items.find(an_item => an_item.amount > 0);\n                item.setAmount(0);\n            }\n            option.setAmount(1);\n        } else {\n            option.setAmount(0);\n        }\n    }\n}\n","<header>\n    <h3 i18n=\"Catering package options header\">Package Options</h3>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <main>\n        <ng-container *ngTemplateOutlet=\"item_display; context: { package: item }\"></ng-container>\n    </main>\n</mat-dialog-content>\n<mat-dialog-actions>\n    <footer>\n        <button mat-button [disabled]=\"!requirements_met\" (tapped)=\"event.emit({ reason: 'done' })\" i18n=\"Catering package options save action\">\n            Confirm Options\n        </button>\n    </footer>\n</mat-dialog-actions>\n<ng-template #item_display let-package=\"package\">\n    <ng-container *ngIf=\"package.items && package.items.length\">\n        <mat-radio-group [ngModel]=\"active_items[package.id]\">\n            <div class=\"item\" *ngFor=\"let option of package.items\" [attr.to-select]=\"option.must_select\">\n            <ng-container\n                *ngIf=\"\n                    package.must_select &&\n                    package.must_select < package.items.length &&\n                    !option.must_select\n                \"\n            >\n                <mat-checkbox\n                    *ngIf=\"package.must_select > 1\"\n                    [checked]=\"!!option.amount\"\n                    (change)=\"updateAmount(package, option, $event.checked)\"\n                >\n                    {{ option.name }}\n                </mat-checkbox>\n                <mat-radio-button\n                    *ngIf=\"package.must_select === 1\"\n                    [value]=\"option.id\"\n                    (change)=\"updateAmount(package, option, true)\"\n                >\n                    {{ option.name }}\n                </mat-radio-button>\n            </ng-container>\n            <ng-container *ngIf=\"package.must_select >= package.items.length || option.must_select\">\n                {{ option.name }}\n            </ng-container>\n            <ng-container\n                *ngTemplateOutlet=\"item_display; context: { package: option }\"\n            ></ng-container>\n        </div>\n    </mat-radio-group>\n    </ng-container>\n</ng-template>\n","import { Component, OnInit, Inject, Output, EventEmitter } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialog } from '@angular/material/dialog';\n\nimport { Space, RecurrenceAvailability } from 'src/app/services/data/spaces/space.class';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { SpaceSelectModalComponent, SpaceSelectModalData } from 'src/app/overlays/space-select-modal/space-select-modal.component';\nimport { User } from 'src/app/services/data/users/user.class';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { unique } from 'src/app/shared/utilities/general.utilities';\nimport { BookingRecurrenceSpaceDetails } from 'src/app/services/data/bookings/booking.interfaces';\nimport { DialogEvent } from 'src/app/shared/utilities/types.utilities';\n\nimport * as dayjs from 'dayjs';\n\nexport interface RecurrenceSpacesModalData {\n    /** Space that has recurrence unavailability */\n    space: Space;\n    /** Duration of the booking */\n    duration: number;\n    /** Duration of the booking */\n    host: User;\n    /** List of current conflict matchups */\n    conflicts: BookingRecurrenceSpaceDetails[];\n}\n\nexport interface OccurrenceDetails extends RecurrenceAvailability {\n    /** Display string for the occurence datetime */\n    date_string: string;\n    /** Name of the space that replaces the space on this occurrence */\n    replaced_by: string;\n}\n\n@Component({\n    selector: 'a-recurrence-spaces-modal',\n    templateUrl: './recurrence-spaces-modal.component.html',\n    styleUrls: ['./recurrence-spaces-modal.component.scss']\n})\nexport class RecurrenceSpacesModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for modal events */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** List of occurence details for space booking */\n    public occurrences: OccurrenceDetails[] = [];\n    /** List of space details for occurrences */\n    public space_details: BookingRecurrenceSpaceDetails[] = []\n\n    /** Space to setup recurrence for */\n    public get space(): Space {\n        return this._data.space;\n    }\n\n    /** Whether all occurences have a valid space */\n    public get occurrences_valid(): boolean {\n        return this.occurrences.reduce((valid, event) => valid && (event.available || !!event.replaced_by), true);\n    }\n\n    constructor(\n        @Inject(MAT_DIALOG_DATA) private _data: RecurrenceSpacesModalData,\n        private _dialog: MatDialog,\n        private _service: ApplicationService\n    ) {\n        super();\n    }\n\n    ngOnInit(): void {\n        this.space_details = [].concat(this._data.conflicts || []);\n        this.updateOccurrences();\n    }\n\n    public save() {\n        this.event.emit({ reason: 'done', metadata: this.space_details });\n    }\n\n    public selectSpace(occurrence: OccurrenceDetails) {\n        const ref = this._dialog.open<SpaceSelectModalComponent, SpaceSelectModalData>(\n            SpaceSelectModalComponent,\n            {\n                width: 'auto',\n                height: 'auto',\n                maxWidth: '95vw',\n                data: {\n                    spaces: [],\n                    zone_ids: this.space.level.building_id,\n                    date: occurrence.date * 1000,\n                    duration: this._data.duration,\n                    host: this._data.host,\n                    multiple: false\n                }\n            }\n        );\n        this.subscription(\n            'new_spaces',\n            ref.componentInstance.event.subscribe(event => {\n                /* istanbul ignore else */\n                if (event.reason === 'done') {\n                    const space = event.metadata[0];\n                    /* istanbul ignore else */\n                    if (space) {\n                        this.space_details.unshift({\n                            date: occurrence.date,\n                            space: space.email,\n                            replaces: this.space.email\n                        });\n                        this.space_details = unique(this.space_details, 'date');\n                    }\n                    this.updateOccurrences();\n                    ref.close();\n                    this.unsub('new_spaces');\n                }\n            })\n        );\n    }\n\n    private updateOccurrences() {\n        this.occurrences = this._data.space.recurr_available.map(event => {\n            const space_details = this.space_details.find(details => details.date === event.date && details.replaces === this.space.email);\n            const email = (space_details || {}).space;\n            const space = this._service.Spaces.find(email) || { email, name: email };\n            return {\n                ...event,\n                date_string: dayjs(event.date * 1000).format('dddd, DD MMMM YYYY'),\n                replaced_by: space.name\n            }\n        });\n    }\n}\n","<header>\n    <div class=\"heading\" i18n=\"Space recurrence header\">Recurrence - {{ space.name }}</div>\n    <button mat-icon-button mat-dialog-close>\n        <app-icon [icon]=\"{ type: 'icon', class: 'material-icons', content: 'close' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <main>\n        <div class=\"info\" i18n=\"Space recurrence information\">\n            * Select individual dates to update selected space\n        </div>\n        <div class=\"item\" *ngFor=\"let item of occurrences\">\n            <div class=\"date\">{{ item.date_string }}</div>\n            <div class=\"action\">\n                <button\n                    mat-button\n                    [class.inverse]=\"!item.available && !item.replaced_by\"\n                    (tapped)=\"selectSpace(item)\"\n                >\n                    <div class=\"content\">\n                        {{ item.replaced_by || (item.available ? space.name : 'Find Room') }}\n                    </div>\n                </button>\n            </div>\n        </div>\n    </main>\n</mat-dialog-content>\n<mat-dialog-actions>\n    <footer>\n        <button\n            mat-button\n            [disabled]=\"!occurrences_valid\"\n            (tapped)=\"save()\"\n            i18n=\"Space recurrence save action\"\n        >\n            Add to Booking\n        </button>\n    </footer>\n</mat-dialog-actions>\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\nimport { BookingFlowEvent } from '../../bookings.component';\nimport { CateringOrder } from '../../../../services/data/catering/catering-order.class';\nimport { Space } from 'src/app/services/data/spaces/space.class';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'booking-catering',\n    templateUrl: './catering.component.html',\n    styleUrls: ['./catering.component.scss'],\n})\nexport class BookingCateringComponent {\n    /** Form fields for the booking */\n    @Input() public form: FormGroup;\n    /** Emitter for flow update events */\n    @Output() public event = new EventEmitter<BookingFlowEvent>();\n    /** Active order to display details for */\n    public active_order: CateringOrder;\n\n    /** Field for storing catering details */\n    public get catering_field() {\n        return this.form && this.form.controls.catering ? this.form.controls.catering : null;\n    }\n\n    /** List of spaces selected for the booking */\n    public get space_list(): Space[] {\n        return this.form && this.form.controls.space_list\n            ? this.form.controls.space_list.value\n            : [];\n    }\n\n    /** Date of the booking */\n    public get date(): number {\n        return this.form && this.form.controls.date\n            ? this.form.controls.date.value\n            : dayjs().startOf('m').valueOf();\n    }\n\n    /** Duration of the booking */\n    public get duration(): number {\n        return this.form && this.form.controls.duration ? this.form.controls.duration.value : 60;\n    }\n\n    /** Whether booking is all day */\n    public get all_day(): boolean {\n        return this.form && this.form.controls.all_day && this.form.controls.all_day.value;\n    }\n\n    /** Create a new catering order */\n    public newOrder(): void {\n        const order = new CateringOrder({});\n        this.active_order = order;\n    }\n\n    /** Handle changes to catering order */\n    public handleOrderEvent(order: CateringOrder) {\n        /* istanbul ignore else */\n        if (order) {\n            const orders = this.form.controls.catering.value;\n            const index = orders.findIndex((an_order) => order.id === an_order.id);\n            if (index < 0) {\n                orders.push(order);\n            } else {\n                orders.splice(index, 1, order);\n            }\n            this.form.controls.catering.setValue(orders);\n        }\n        this.active_order = null;\n    }\n}\n","<div class=\"catering\">\n    <ng-container *ngIf=\"!active_order; else order_display\">\n        <a-catering-order-list\n            [catering]=\"catering_field\"\n            [date]=\"date\"\n            [all_day]=\"all_day\"\n            (order)=\"$event ? (active_order = $event) : newOrder()\"\n            (event)=\"event.emit($event)\"\n        ></a-catering-order-list>\n    </ng-container>\n</div>\n<ng-template #order_display>\n    <a-catering-order-details\n        [space_list]=\"space_list\"\n        [order]=\"active_order\"\n        [date]=\"date\"\n        [duration]=\"duration\"\n        [all_day]=\"all_day\"\n        (event)=\"$event ? handleOrderEvent($event) : active_order = null\"\n    ></a-catering-order-details>\n</ng-template>\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { FormControl } from '@angular/forms';\n\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\n\n@Component({\n    selector: 'a-category-display',\n    templateUrl: './category.component.html',\n    styleUrls: ['./category.component.scss']\n})\nexport class CateringMenuCategoryComponent implements OnInit {\n    /** Category to display details for */\n    @Input() public category: CateringCategory;\n    /** Form control for the list of order items */\n    @Input() public items: FormControl;\n    /** Currency symbol for the active space */\n    @Input() public symbol: string;\n    /** Whether item should be disabled if not available anytime */\n    @Input() public disabled: boolean;\n    /** Emitter for close events */\n    @Output() public close = new EventEmitter<void>();\n\n    constructor() {}\n\n    ngOnInit(): void {}\n}\n","\n<div class=\"header\">\n    <div class=\"content\">\n        <button mat-icon-button (tapped)=\"close.emit()\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'arrow_back' }\"></app-icon>\n        </button>\n        <div class=\"name\">{{ category?.name }}</div>\n    </div>\n</div>\n<ng-container *ngIf=\"category.items && category.items.length; else empty_state\">\n    <div class=\"item\" *ngFor=\"let item of category.items\">\n        <a-catering-order-item [disabled]=\"disabled\" [symbol]=\"symbol\" [item]=\"item\" [field]=\"items\"></a-catering-order-item>\n    </div>\n</ng-container>\n<ng-template #empty_state>\n    <div class=\"info-block center\">\n        <div class=\"icon\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n        </div>\n        <div class=\"text\" i18n=\"Catering category empty label\">Category contains no available items</div>\n    </div>\n</ng-template>\n","import { Component, OnInit, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { FormControl } from '@angular/forms';\n\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\nimport { ANIMATION_SHOW_CONTRACT_EXPAND } from 'src/app/shared/globals/angular-animations';\nimport { CateringItem } from 'src/app/services/data/catering/catering-item.class';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { PackageOptionsModalComponent } from 'src/app/shell/bookings/overlays/package-options-modal/package-options-modal.component';\n\n@Component({\n    selector: 'a-catering-order-item',\n    templateUrl: './item.component.html',\n    styleUrls: ['./item.component.scss'],\n    animations: [ANIMATION_SHOW_CONTRACT_EXPAND],\n})\nexport class CateringMenuItemComponent extends BaseDirective implements OnChanges {\n    /** Whether item is a child of another */\n    @Input() public subitem: boolean;\n    /** Item to display */\n    @Input() public item: CateringCategory;\n    /** Field for storing items */\n    @Input() public field: FormControl;\n    /** Current symbol for the selected space */\n    @Input() public symbol: string;\n    /** Whether item should be disabled if not available anytime */\n    @Input() public disabled: boolean;\n    /** Whether to show children items */\n    public show_children: boolean;\n\n    /** List of contents of the package */\n    public get contents(): string {\n        return this.item.items\n            ? this.item.items.reduce((list, item) => {\n                  /* istanbul ignore else */\n                  if (list) {\n                      list += '\\n\\n';\n                  }\n                  return (list += `${item.name}${\n                      (item as any).items\n                          ? (item as any).items.reduce(\n                                (a_list, an_item) =>\n                                    (a_list += `\\n ${an_item.amount ? '✓' : '•'} ${an_item.name} `),\n                                ''\n                            )\n                          : ''\n                  } ${item.amount ? '✓' : ''}`);\n              }, '')\n            : '';\n    }\n\n    constructor(private _service: ApplicationService, private _dialog: MatDialog) {\n        super();\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        /* istanbul ignore else */\n        if (changes.field && this.field) {\n            const list = this.field.value;\n            const item = list.find((an_item) => an_item.id === this.item.id);\n            this.item.setAmount(item ? item.amount : 0);\n            this.subscription(\n                'field_change',\n                this.field.valueChanges.subscribe((list) => {\n                    const item = list.find((an_item) => an_item.id === this.item.id);\n                    this.item.setAmount(item ? item.amount : 0);\n                })\n            );\n        }\n    }\n\n    /**\n     * Update the amount of the item in the order\n     * @param value New amount\n     */\n    public updateAmount(value: number) {\n        /* istanbul ignore else */\n        if (this.field) {\n            const list: CateringItem[] = this.field.value;\n            const item = list.find((an_item) => an_item.id === this.item.id);\n            if (item) {\n                this.item.setAmount(value);\n                item.setAmount(value);\n            } else {\n                const amount = this.item.amount;\n                this.item.setAmount(value);\n                if (this.item.package && amount < value) {\n                    this.selectPackageOptions().then(\n                        (confirmed_item) => {\n                            list.push(new CateringItem(confirmed_item));\n                            this.field.setValue(list.filter((an_item) => an_item.amount));\n                        },\n                        () => {\n                            this.item.setAmount(999);\n                            this.timeout('amount', () => this.item.setAmount(0), 5);\n                            this._service.notifyWarn(\n                                'Package options not selected. Item removed from order'\n                            );\n                        }\n                    );\n                } else {\n                    list.push(new CateringItem(this.item));\n                }\n            }\n            this.field.setValue(list.filter((an_item) => an_item.amount));\n        }\n    }\n\n    /** Reselect package options */\n    public updatePackageOptions(): void {\n        this.selectPackageOptions().then(\n            () => null,\n            () => null\n        );\n    }\n\n    /**\n     * Open modal for user to select package options\n     */\n    private selectPackageOptions(): Promise<CateringCategory> {\n        return new Promise((resolve, reject) => {\n            const ref = this._dialog.open(PackageOptionsModalComponent, {\n                maxWidth: '95vw',\n                data: {\n                    item: new CateringCategory(this.item),\n                },\n            });\n            let done = false;\n            ref.componentInstance.event.subscribe((event) => {\n                /* istanbul ignore else */\n                if (event.reason === 'done') {\n                    done = true;\n                    resolve(ref.componentInstance.item);\n                    ref.close();\n                }\n            });\n            ref.afterClosed().subscribe(() => {\n                /* istanbul ignore else */\n                if (!done) {\n                    reject();\n                }\n            });\n        });\n    }\n}\n","<div\n    class=\"catering-item\"\n    *ngIf=\"item\"\n    [class.subitem]=\"subitem\"\n    [attr.disabled]=\"disabled && !item.can_order_anytime\"\n>\n    <div\n        class=\"image\"\n        *ngIf=\"!subitem\"\n        [style.background-image]=\"'url(' + item.image_path + ')'\"\n    ></div>\n    <div class=\"details\">\n        <div class=\"name\">{{ item.name }}</div>\n        <div class=\"description\">{{ item.package ? '[Package] ' : '' }}{{ item.description }}</div>\n        <div class=\"options\">\n            <div class=\"option price mobile-only\" *ngIf=\"item.unit_price\">\n                {{ item.unit_price / 100 | currency: symbol }}\n            </div>\n            <div\n                class=\"option\"\n                *ngIf=\"item.package && item.items.length && !item.must_select\"\n                [matTooltip]=\"contents\"\n                i18n=\"Catering order item available options label\"\n            >\n                { item.items.length, plural, =1 { Contains {{ item.items.length }} item } other {\n                Contains {{ item.items.length }} items } }\n            </div>\n            <div\n                class=\"option\"\n                *ngIf=\"item.package && item.must_select && item.amount > 0\"\n                [matTooltip]=\"contents\"\n            >\n                {{ item.must_select }}\n                <span class=\"not-mobile\" i18n=\"Catering order item selected options label\">\n                    Selected\n                </span>\n            </div>\n            <button\n                mat-button\n                *ngIf=\"item.package && item.must_select && item.amount > 0\"\n                (tapped)=\"updatePackageOptions()\"\n                i18n=\"Catering order item options change action\"\n            >\n                Customise\n            </button>\n        </div>\n    </div>\n    <div class=\"option price not-mobile\" *ngIf=\"item.unit_price\">\n        {{ item.unit_price / 100 | currency: symbol }}\n    </div>\n    <a-counter\n        *ngIf=\"!item.items || item.package\"\n        [ngModel]=\"item.amount\"\n        (ngModelChange)=\"updateAmount($event)\"\n    ></a-counter>\n    <button\n        mat-icon-button\n        *ngIf=\"item.items && item.items.length && !item.package\"\n        (tapped)=\"show_children = !show_children\"\n    >\n        <app-icon\n            [icon]=\"{\n                class: 'material-icons',\n                content: show_children ? 'keyboard_arrow_up' : 'keyboard_arrow_down'\n            }\"\n        ></app-icon>\n    </button>\n</div>\n<div class=\"children\" [@show]=\"show_children ? 'show' : 'hide'\">\n    <a-catering-order-item\n        *ngFor=\"let sub_item of item.items\"\n        [subitem]=\"true\"\n        [symbol]=\"symbol\"\n        [item]=\"sub_item\"\n        [field]=\"field\"\n    ></a-catering-order-item>\n</div>\n","import { Component, OnInit, Input, SimpleChanges, Output, EventEmitter } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { FormGroup, FormControl } from '@angular/forms';\n\nimport { CateringOrder } from '../../../../../services/data/catering/catering-order.class';\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { Building } from 'src/app/services/data/organisation/building.class';\nimport { Identity, DialogEvent } from 'src/app/shared/utilities/types.utilities';\nimport { CateringItem } from 'src/app/services/data/catering/catering-item.class';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport {\n    BookingCateringConfirmModalComponent,\n    CateringConfirmModalData,\n} from '../../../overlays/catering-confirm-modal/catering-confirm-modal.component';\n\nimport * as dayjs from 'dayjs';\nimport spacetime from 'spacetime';\n\n@Component({\n    selector: 'a-catering-order-details',\n    templateUrl: './order-details.component.html',\n    styleUrls: ['./order-details.component.scss'],\n})\nexport class BookingCateringOrderDetailsComponent extends BaseDirective implements OnInit {\n    /** Catering order to edit details of */\n    @Input() public order: CateringOrder;\n    /** Booking date */\n    @Input() public date: number;\n    /** Booking duration */\n    @Input() public duration: number;\n    /** Booking duration */\n    @Input() public space_list: Space[];\n    /** Whether booking is all day */\n    @Input() public all_day: boolean;\n    /** Emitter for changes to the catering order */\n    @Output() public event = new EventEmitter<CateringOrder>();\n    /** Form controls for order */\n    public form: FormGroup;\n    /** List of available catering item categories */\n    public category_list: CateringCategory[] = [];\n    /** Active category to display details for */\n    public active_category: CateringCategory;\n    /** List of available times for delivering catering */\n    public available_times: Identity[] = [];\n    /** Whether the menu is loading */\n    public loading: boolean;\n\n    /** Whether user is able to order from the currently selected space */\n    public get can_order(): boolean {\n        return (\n            (this.active_building.has_catering || this.category_list.length) &&\n            (!this.within_restricted_time || this.has_available_items)\n        );\n    }\n\n    /** Building associated with the selected space */\n    public get active_building(): Building {\n        const form_controls = (this.form || { controls: { space: { value: '' } } }).controls;\n        const space: Space = form_controls.space.value || { level: {} };\n        return this._service.Organisation.buildings.find(\n            (bld) => space.level.building_id === bld.id\n        ) || { catering_restricted_from: 0 } as any;\n    }\n\n    /** Currency code for the active building */\n    public get symbol(): string {\n        return this.active_building.currency || 'USD';\n    }\n\n    /** Number of items in the order */\n    public get item_count(): number {\n        return this.form\n            ? this.form.controls.items.value.reduce((total, item) => total + item.amount, 0)\n            : 0;\n    }\n\n    /** Whether booking time is outside of catering hours */\n    public get out_of_hours(): boolean {\n        return this.form.controls.start.value < 0;\n    }\n\n    /** Whether booking is with the restricted ordering period */\n    public get within_restricted_time(): boolean {\n        const building = this.active_building;\n        /* istanbul ignore else */\n        if (!building.catering_restricted_from || building.catering_restricted_from <= 0) {\n            return false;\n        }\n        const date = dayjs();\n        const restricted = dayjs(this.date).subtract(building.catering_restricted_from, 'h');\n        return date.isAfter(restricted, 's');\n    }\n\n    /** Whether items are available for order at anytime */\n    public get has_available_items(): boolean {\n        return this.category_list.reduce(\n            (available, category) => available || category.can_order_anytime,\n            false\n        );\n    }\n\n    constructor(private _service: ApplicationService, private _dialog: MatDialog) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.loadMenu();\n        this.generateAvailableTimes();\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        /* istanbul ignore else */\n        if (changes.date || changes.duration) {\n            this.generateAvailableTimes();\n            /* istanbul ignore else */\n            if (\n                this.form &&\n                !this.available_times.find((time) => time.id === this.form.controls.start.value)\n            ) {\n                this.form.controls.start.setValue(this.available_times[0].id);\n            }\n        }\n        /* istanbul ignore else */\n        if (changes.space_list) {\n            /* istanbul ignore else */\n            if (this.form && this.space_list && !this.form.controls.space.value) {\n                this.form.controls.space.setValue(this.space_list[0]);\n            }\n        }\n        /* istanbul ignore else */\n        if (changes.order && this.order) {\n            this.initForm();\n        }\n    }\n\n    public initForm() {\n        this.form = new FormGroup({\n            id: new FormControl(this.order.id),\n            booking_date: new FormControl(\n                this.all_day ? dayjs(this.date).startOf('d').valueOf() : this.date\n            ),\n            space: new FormControl(\n                this._service.Spaces.find(this.order.location_id) || this.space_list[0]\n            ),\n            location_id: new FormControl(this.order.location_id || this.space_list[0].id),\n            start: new FormControl(this.order.delivery_time || this.available_times[0].id),\n            items: new FormControl(this.order.items.map((item) => new CateringItem(item))),\n        });\n        this.subscription(\n            'space_change',\n            this.form.controls.space.valueChanges.subscribe((space) => {\n                this.form.controls.location_id.setValue(space.id);\n                this.generateAvailableTimes();\n                if (\n                    !this.available_times.find((time) => time.id === this.form.controls.start.value)\n                ) {\n                    this.form.controls.start.setValue(this.available_times[0].id);\n                }\n                this.loadMenu();\n            })\n        );\n        this.generateAvailableTimes();\n        if (\n            this.form &&\n            !this.available_times.find((time) => time.id === this.form.controls.start.value)\n        ) {\n            this.form.controls.start.setValue(this.available_times[0].id);\n        }\n    }\n\n    public confirmOrder() {\n        const ref = this._dialog.open<\n            BookingCateringConfirmModalComponent,\n            CateringConfirmModalData\n        >(BookingCateringConfirmModalComponent, {\n            maxWidth: '95vw',\n            data: {\n                date: this.date,\n                form: this.form,\n            },\n        });\n        this.subscription(\n            'confirm_event',\n            ref.componentInstance.event.subscribe((event: DialogEvent) => {\n                /* istanbul ignore else */\n                if (event.reason === 'done') {\n                    const order = new CateringOrder(this.form.value);\n                    this.event.emit(order);\n                    ref.close();\n                }\n            })\n        );\n        ref.afterClosed().subscribe(() => this.unsub('confirm_event'));\n    }\n\n    private loadMenu() {\n        const space: Space = this.form ? this.form.controls.space.value : null;\n        /* istanbul ignore else */\n        if (!space) {\n            return;\n        }\n        this.form.controls.items.setValue([]);\n        this.loading = true;\n        this._service.Menu.query({ room_id: space.id }).then(\n            (list) => {\n                this.loading = false;\n                this.category_list = list.map((i) => new CateringCategory(i));\n            },\n            () => (this.loading = false)\n        );\n    }\n\n    /** Generate a list of available delivery times for the given booking time */\n    private generateAvailableTimes() {\n        const start_date = this.all_day ? dayjs(this.date).startOf('d') : dayjs(this.date);\n        let { start, end } = this.generateStartAndEndTimes();\n        start = start.minute(Math.ceil(start.minute() / 5) * 5);\n        this.available_times = [];\n        while (start.isBefore(end, 'm')) {\n            this.available_times.push({\n                id: Math.abs(start_date.diff(start, 'm')),\n                name: start.format('h:mm A'),\n            });\n            start = start.add(5, 'm');\n        }\n        /* istanbul ignore else */\n        if (this.available_times.length === 0) {\n            this.available_times.push({ id: -1, name: 'Out of hours' });\n        }\n    }\n\n    private generateStartAndEndTimes(): { start: dayjs.Dayjs; end: dayjs.Dayjs } {\n        let start = dayjs(this.date);\n        /* istanbul ignore else */\n        if (this.all_day) {\n            start = start.startOf('d');\n        }\n        let end = this.all_day ? start.endOf('d') : start.add(this.duration, 'm');\n        let building_time = spacetime(start.toDate());\n        // const space: Space = this.form ? this.form.controls.space.value : null;\n        // if (space) {\n        //     const building = this._service.Organisation.buildings.find((bld) =>bld.id === space.level.building_id);\n        //     if (building && building.timezone) {\n        //         building_time = building_time.goto(building.timezone);\n        //     }\n        // }\n        building_time = building_time.hour(7);\n        const as_dayjs = dayjs(building_time.toLocalDate());\n        if (start.isBefore(as_dayjs, 'm')) {\n            start = as_dayjs;\n            end = start.add(13, 'h');\n        } else {\n            const possible_end = as_dayjs.hour(20);\n            if (end.isAfter(possible_end)) {\n                end = possible_end;\n            }\n        }\n        return { start, end };\n    }\n}\n","<div class=\"catering order-details\">\n    <div class=\"header\" *ngIf=\"form\">\n        <form [formGroup]=\"form\">\n            <div class=\"field\">\n                <label i18n=\"Catering order location label\">Deliver to:</label>\n                <mat-form-field appearance=\"outline\">\n                    <mat-select formControlName=\"space\">\n                        <mat-option *ngFor=\"let space of space_list\" [value]=\"space\">\n                            {{ space.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label for=\"start\" i18n=\"Catering order delivery time label\">At:</label>\n                <mat-form-field appearance=\"outline\">\n                    <mat-select name=\"start\" formControlName=\"start\">\n                        <mat-option *ngFor=\"let time of available_times\" [value]=\"time.id\">\n                            {{ time.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n        </form>\n    </div>\n    <div class=\"body\" *ngIf=\"!loading; else load_state\">\n        <ng-container *ngIf=\"!active_category; else category_display\">\n            <div class=\"contents\" *ngIf=\"can_order && category_list.length; else empty_state\">\n                <button\n                    mat-button\n                    class=\"category\"\n                    *ngFor=\"let item of category_list\"\n                    [style.background-image]=\"'url(' + item.image_path + ')'\"\n                    [disabled]=\"within_restricted_time && !item.can_order_anytime\"\n                    (tapped)=\"active_category = item\"\n                >\n                    <div class=\"overlay\"></div>\n                    <div class=\"name\">{{ item.name }}</div>\n                </button>\n            </div>\n        </ng-container>\n    </div>\n    <div class=\"footer\">\n        <button mat-button class=\"inverse\" (tapped)=\"event.emit()\" i18n=\"Catering order cancel action\">Back</button>\n        <button mat-button name=\"confirm\" [disabled]=\"!item_count || out_of_hours\" (tapped)=\"confirmOrder()\" i18n=\"Catering order confirm action\">\n            Confirm Order({{ item_count || '0' }})\n        </button>\n    </div>\n</div>\n<ng-template #empty_state>\n    <div class=\"empty-state center\">\n        <div class=\"icon\">\n            <img alt=\"No Catering Available\" src=\"assets/img/no-catering.svg\" />\n        </div>\n        <p i18n=\"Catering order unavailable\">\n            Catering is <span class=\"bold\">not available</span> for this booking.<br />\n            Catering must be ordered within business hours\n            <span *ngIf=\"active_building?.catering_restricted_from\" class=\"bold\">\n                at least {{ active_building?.catering_restricted_from || '0' }} hours in advance for\n                meetings\n            </span>\n            at {{ active_building?.name }}.\n        </p>\n    </div>\n</ng-template>\n<ng-template #load_state>\n    <div class=\"body\">\n        <div class=\"info-block center\">\n            <div class=\"icon\">\n                <mat-spinner diameter=\"48\"></mat-spinner>\n            </div>\n            <div class=\"text\" i18n=\"Catering order loading label\">Loading menu for {{ active_building?.name }}...</div>\n        </div>\n    </div>\n</ng-template>\n<ng-template #category_display>\n    <a-category-display\n        [category]=\"active_category\"\n        [symbol]=\"symbol\"\n        [items]=\"form.controls.items\"\n        [disabled]=\"within_restricted_time\"\n        (close)=\"active_category = null\"\n    ></a-category-display>\n</ng-template>\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\n\nimport { CateringOrder } from 'src/app/services/data/catering/catering-order.class';\nimport { ApplicationService } from 'src/app/services/app.service';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'catering-order-list-item',\n    templateUrl: './item.component.html',\n    styleUrls: ['./item.component.scss']\n})\nexport class CateringOrderListItemComponent {\n    /** Catering order to display */\n    @Input() order: CateringOrder;\n    /** Selected datetime */\n    @Input() date: number;\n    /** Emitter for edit events */\n    @Output() public edit = new EventEmitter<void>();\n    /** Emitter for delete events */\n    @Output() public delete = new EventEmitter<void>();\n\n    /** Space selected for delivery */\n    public get space(): string {\n        const space = this._service.Spaces.find((this.order || {}).location_id) || { name: '' };\n        return space.name || '<No Location>';\n    }\n    /** Delivery time for the order */\n    public get delivery_time(): string {\n        /* istanbul ignore else */\n        if (!this.order) {\n            return '<Meeting Start>';\n        }\n        const date = dayjs(this.order.booking_date).add(\n            this.order.changes.delivery_time || this.order.delivery_time,\n            'm'\n        );\n        return date.format('h:mm A');\n    }\n\n    /** Total cost of the order */\n    public get order_cost(): number {\n        const items = (this.order || { items: [] }).items as any;\n        return items.reduce((amount, item) => amount + item.amount * item.unit_price, 0);\n    }\n\n    /** Number of items in the order */\n    public get item_count(): number {\n        const items = (this.order || { items: [] }).items as any;\n        return items.reduce((amount, item) => amount + item.amount, 0);\n    }\n\n    /** Currency symbol for the selected space */\n    public get symbol(): string {\n        const space = this._service.Spaces.find((this.order || {}).location_id);\n        /* istanbul ignore else */\n        if (!space || !space.level) {\n            return 'USD';\n        }\n        const building = this._service.Organisation.buildings.find(\n            bld => bld.id === space.level.building_id\n        ) || { currency: 'USD' };\n        return building.currency;\n    }\n\n    constructor(private _service: ApplicationService) {}\n}\n","<div class=\"details\" i18n=\"Catering order item delivery details\">\n    Deliver to <span>{{ space }}</span> at <span>{{ delivery_time }}</span>\n</div>\n<div class=\"group\">\n    <div class=\"cost\">\n        {{ item_count }}\n        <span i18n=\"Items\">{ item_count, plural, =1 { item } other { items } }</span>\n    </div>\n    <div class=\"cost\">{{ order_cost / 100 | currency: symbol }}</div>\n</div>\n<div class=\"actions\">\n    <button mat-icon-button name=\"edit\" (tapped)=\"edit.emit()\">\n        <app-icon [icon]=\"{ class: 'material-icons', content: 'edit' }\"></app-icon>\n    </button>\n    <button mat-icon-button name=\"delete\" class=\"inverse\" (tapped)=\"delete.emit()\">\n        <app-icon [icon]=\"{ class: 'material-icons', content: 'delete' }\"></app-icon>\n    </button>\n</div>\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { FormControl } from '@angular/forms';\n\nimport { CateringOrder } from '../../../../../services/data/catering/catering-order.class';\nimport { BookingFlowEvent } from '../../../bookings.component';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'a-catering-order-list',\n    templateUrl: './order-list.component.html',\n    styleUrls: ['./order-list.component.scss']\n})\nexport class BookingCateringOrderListComponent {\n    /** Form field for storing catering orders */\n    @Input() public catering: FormControl;\n    /** Selected datetime for the booking */\n    @Input() public date: number;\n    /** Whether booking is all day */\n    @Input() public all_day: boolean;\n    /** Emitter for flow update events */\n    @Output() public event = new EventEmitter<BookingFlowEvent>();\n    /** Emiiter for order events */\n    @Output() public order = new EventEmitter<CateringOrder>();\n\n    /** List of orders in the booking */\n    public get orders(): CateringOrder[] {\n        /* istanbul ignore else */\n        if (!this.catering) {\n            return [];\n        }\n        const orders = this.catering.value;\n        orders.forEach(\n            order =>\n                (order.booking_date = this.all_day\n                    ? dayjs(this.date)\n                          .startOf('d')\n                          .valueOf()\n                    : this.date)\n        );\n        return orders;\n    }\n\n    /** Emit event for a new catering order */\n    public newOrder() {\n        this.order.emit();\n    }\n\n    /** Emit event for editing existing order */\n    public editOrder(order: CateringOrder) {\n        this.order.emit(order);\n    }\n\n    /** Remove order from the list */\n    public deleteOrder(order: CateringOrder) {\n        const orders = this.orders;\n        const index = orders.findIndex(an_order => order.id === an_order.id);\n        /* istanbul ignore else */\n        if (index >= 0) {\n            orders.splice(index, 1);\n            this.catering.setValue(orders);\n        }\n    }\n\n    /**\n     * Proceed to the next step in the space booking flow\n     */\n    public next(): void {\n        this.event.emit({ type: 'next', step: 'catering' });\n    }\n\n    /** Move flow to previous step */\n    public previous(): void {\n        this.event.emit({ type: 'previous', step: 'catering' });\n    }\n}\n","<div class=\"catering order-list\">\n    <div class=\"header\">\n        <h3 i18n=\"Catering order list header\">Catering Orders</h3>\n    </div>\n    <div class=\"body\">\n        <ng-container *ngIf=\"orders && orders.length; else empty_state\">\n            <div class=\"list\">\n                <catering-order-list-item\n                    *ngFor=\"let order of orders\"\n                    [order]=\"order\"\n                    [date]=\"date\"\n                    (edit)=\"editOrder(order)\"\n                    (delete)=\"deleteOrder(order)\"\n                ></catering-order-list-item>\n            </div>\n            <button mat-button name=\"new\" (tapped)=\"newOrder()\" i18n=\"Catering order list add action\">\n                Add Order\n            </button>\n        </ng-container>\n    </div>\n    <div class=\"footer\">\n        <button\n            mat-button\n            class=\"inverse\"\n            name=\"previous\"\n            (tapped)=\"previous()\"\n            i18n=\"Catering order list cancel action\"\n        >\n            Back\n        </button>\n        <button mat-button name=\"next\" (tapped)=\"next()\" i18n=\"Catering order list continue action\">\n            Next\n        </button>\n    </div>\n</div>\n<ng-template #empty_state>\n    <div class=\"info-block center\">\n        <div class=\"icon\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n        </div>\n        <div class=\"text\" i18n=\"Catering order list empty label\">No catering orders</div>\n        <button mat-button name=\"new\" (tapped)=\"newOrder()\" i18n=\"Catering order list add action\">\n            Add Order\n        </button>\n    </div>\n</ng-template>\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { first } from 'rxjs/operators';\n\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { Building } from 'src/app/services/data/organisation/building.class';\nimport { unique } from 'src/app/shared/utilities/general.utilities';\n\nimport * as dayjs from 'dayjs';\nimport { ANIMATION_SHOW_CONTRACT_EXPAND } from 'src/app/shared/globals/angular-animations';\n\n@Component({\n    selector: 'booking-space-filters',\n    templateUrl: './filters.component.html',\n    styleUrls: ['./filters.component.scss'],\n    animations: [ANIMATION_SHOW_CONTRACT_EXPAND]\n})\nexport class BookingSpaceFiltersComponent extends BaseDirective implements OnInit {\n    /** Date selected for the booking */\n    @Input() public date: FormControl;\n    /** List of location IDs being filtered on */\n    @Input() public locations: string[] = [];\n    /** Emitter for changes to location filter */\n    @Output() public locationsChange = new EventEmitter<string[]>();\n    /** List of available buildings */\n    public building_list: Building[] = [];\n    /** Whether to show the location list */\n    public show_locations: boolean;\n\n    /** Whether active date is current day */\n    public get is_today(): boolean {\n        const date = dayjs(this.date.value);\n        return dayjs().isSame(date, 'd');\n    }\n\n    /** Display string for the selected date */\n    public get date_display(): string {\n        const date = dayjs(this.date.value);\n        return this.is_today ? 'Today' : date.format('DD MMM YYYY');\n    }\n\n    /** List of filtered location */\n    public get location_list(): Building[] {\n        return this.locations.map(id => this.building_list.find(bld => bld.id === id));\n    }\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public changeDate(amount: number) {\n        let date = dayjs(this.date.value).add(amount, 'd');\n        const now = dayjs().startOf('m');\n        if (date.isBefore(now, 's')) {\n            date = now;\n        }\n        this.date.setValue(date.valueOf());\n    }\n\n    public ngOnInit(): void {\n        this.subscription('buildings', this._service.Organisation.listen('buildings').subscribe((bld_list) => {\n            this.building_list = bld_list;\n        }));\n    }\n\n    /**\n     * Update location filter to include the given building\n     * @param building Building to add\n     */\n    public addLocationFilter(building: Building): void {\n        this.locations.push(building.id);\n        this.locations = unique(this.locations);\n        this.locationsChange.emit(this.locations);\n    }\n\n    /**\n     * Remove location from the active filters\n     * @param building Building to remove\n     */\n    public removeLocationFilter(building: Building) {\n        this.locations.splice(\n            this.locations.findIndex(id => building.id === id),\n            1\n        );\n        this.locationsChange.emit(this.locations);\n    }\n}\n","<div class=\"space-filters\" *ngIf=\"date\">\n    <div class=\"actions\">\n        <div class=\"date\">\n            <button mat-icon-button [disabled]=\"is_today\" (tapped)=\"changeDate(-1)\">\n                <app-icon\n                    [icon]=\"{ class: 'material-icons', content: 'keyboard_arrow_left' }\"\n                ></app-icon>\n            </button>\n            <div class=\"text\">{{ date_display }}</div>\n            <button mat-icon-button (tapped)=\"changeDate(1)\">\n                <app-icon\n                    [icon]=\"{ class: 'material-icons', content: 'keyboard_arrow_right' }\"\n                ></app-icon>\n            </button>\n        </div>\n        <div class=\"location-list\">\n            <div class=\"inner\" (tapped)=\"show_locations = !show_locations\">\n                <img src=\"assets/img/location-img.svg\" />\n                <div class=\"text\" i18n=\"Booking space filters locations label\">Select locations(s)</div>\n                <app-icon\n                    [icon]=\"{\n                        class: 'material-icons',\n                        content: 'keyboard_arrow_' + (show_locations ? 'up' : 'down')\n                    }\"\n                ></app-icon>\n            </div>\n            <div\n                class=\"list\"\n                [@show]=\"show_locations ? 'show' : 'hide'\"\n            >\n            <div class=\"item\" *ngFor=\"let building of building_list\">\n                <mat-checkbox\n                    (change)=\"\n                        $event.checked\n                            ? addLocationFilter(building)\n                            : removeLocationFilter(building)\n                    \"\n                >\n                    <div class=\"building-name\">\n                        <div class=\"code\">{{ building.code }}</div>\n                        <div class=\"name\">{{ building.name }}</div>\n                        <div class=\"address\">{{ building.address }}</div>\n                    </div>\n                </mat-checkbox>\n            </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"filters\" *ngIf=\"location_list && location_list.length\">\n        <mat-chip-list aria-label=\"Location Filters\">\n            <mat-chip\n                *ngFor=\"let building of location_list\"\n                [id]=\"building.id\"\n                color=\"primary\"\n                [removable]=\"true\"\n                (removed)=\"removeLocationFilter(building)\"\n            >\n                {{ building.name }}\n                <app-icon\n                    matChipRemove\n                    [icon]=\"{ type: 'icon', class: 'material-icons', content: 'close' }\"\n                ></app-icon>\n            </mat-chip>\n        </mat-chip-list>\n    </div>\n</div>\n","import {\n    Component,\n    OnInit,\n    Input,\n    SimpleChanges,\n    EventEmitter,\n    Output,\n    OnChanges\n} from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { debounceTime, distinctUntilChanged, switchMap, catchError, map, first } from 'rxjs/operators';\nimport { Observable, of, Subject } from 'rxjs';\n\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Space, ISpaceAvailabilityOptions } from 'src/app/services/data/spaces/space.class';\nimport { BookingFlowEvent } from '../../bookings.component';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'booking-find-space',\n    templateUrl: './find-space.component.html',\n    styleUrls: ['./find-space.component.scss']\n})\nexport class BookingFindSpaceComponent extends BaseDirective implements OnInit, OnChanges {\n    /** Form control for setting the active space */\n    @Input() public spaces: FormControl;\n    /** Form group for booking */\n    @Input() public form: FormGroup;\n    /** Emitter for flow update events */\n    @Output() public event = new EventEmitter<BookingFlowEvent>();\n\n    /** List of spaces available during the required period */\n    public space_list: Space[] = [];\n    /** List of users from an API search */\n    public search_results$: Observable<Space[]>;\n    /** Whether space list is loading */\n    public loading: boolean;\n    /** List of zones to filter the spaces on */\n    public zone_ids: string[] = [];\n    /** Subject holding the value of the search */\n    public readonly change$ = new Subject<string>();\n\n    /**  Whether multiple spaces are allowed to be selected */\n    public get multiple(): boolean {\n        return this._service.setting('app.booking.multiple_spaces');\n    }\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.Spaces.initialised.pipe(first(_ => _)).subscribe(() => {\n            // Listen for input changes\n            this.search_results$ = this.change$.pipe(\n                debounceTime(400),\n                distinctUntilChanged(),\n                switchMap(_ => {\n                    this.loading = true;\n                    const recurrence = this.form.controls.recurrence ? this.form.controls.recurrence.value : null;\n                    const recurrence_properties = recurrence && recurrence.period && recurrence.period !== 'None' ? {\n                        recurr_period: (recurrence.period || '').toLowerCase(),\n                        recurr_end: dayjs(recurrence.end).unix()\n                    } : {};\n                    const query: ISpaceAvailabilityOptions = {\n                        date: this.form.controls.date.value,\n                        duration: this.form.controls.duration.value,\n                        zone_ids: this._service.Organisation.building.id,\n                        bookable: true,\n                        ...recurrence_properties\n                    };\n                    /* istanbul ignore else */\n                    if (this.zone_ids && this.zone_ids.length) {\n                        query.zone_ids = this.zone_ids.join(',');\n                    }\n                    return this._service.Spaces.available(query);\n                }),\n                catchError(_ => of([])),\n                map((list: Space[]) => {\n                    this.loading = false;\n                    return list;\n                })\n            );\n            // Process API results\n            this.subscription(\n                'search_results',\n                this.search_results$.subscribe(list => (this.space_list = list))\n            );\n            this.change$.next('');\n        });\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        /* istanbul ignore else */\n        if (changes.form) {\n            const onChange = _ => this.change$.next(_);\n            /* istanbul ignore else */\n            if (this.form.controls.date) {\n                this.subscription(\n                    'date_field',\n                    this.form.controls.date.valueChanges.subscribe(onChange)\n                );\n            }\n            /* istanbul ignore else */\n            if (this.form.controls.duration) {\n                this.subscription(\n                    'duration_field',\n                    this.form.controls.duration.valueChanges.subscribe(onChange)\n                );\n            }\n        }\n    }\n\n    /**\n     * Update the selected space list\n     * @param space Space to add/toggle in the selected list\n     */\n    public selectSpace(space: Space) {\n        if (this.multiple) {\n            const list = this.spaces.value;\n            if (list.find(item => item.id === space.id)) {\n                this.spaces.setValue(list.filter(item => item.id !== space.id));\n            } else {\n                this.spaces.setValue(list.concat([space]));\n            }\n        } else {\n            this.spaces.setValue([space]);\n            this.event.emit({ type: 'next', step: 'search' });\n        }\n    }\n\n    /**\n     * Proceed to the next step in the space booking flow\n     */\n    public next(): void {\n        this.event.emit({ type: 'next', step: 'search' });\n    }\n\n    /** Move flow to previous step */\n    public previous(): void {\n        this.event.emit({ type: 'previous', step: 'search' });\n    }\n}\n","<div class=\"find-space\">\n    <div class=\"background\"></div>\n    <div class=\"header\">\n        <booking-space-filters\n            [date]=\"form.controls.date\"\n            [(locations)]=\"zone_ids\"\n            (locationsChange)=\"change$.next($event)\"\n        ></booking-space-filters>\n    </div>\n    <ng-container *ngIf=\"!loading; else load_state\">\n        <cdk-virtual-scroll-viewport\n            *ngIf=\"space_list && space_list.length; else empty_state\"\n            [itemSize]=\"130\"\n        >\n            <ng-container *cdkVirtualFor=\"let space of space_list\">\n                <a-booking-space-item\n                    [form]=\"form\"\n                    [space]=\"space\"\n                    [multi]=\"multiple\"\n                    (select)=\"selectSpace(space)\"\n                ></a-booking-space-item>\n            </ng-container>\n        </cdk-virtual-scroll-viewport>\n    </ng-container>\n    <div class=\"footer\">\n        <div class=\"box\">\n            <button\n                mat-button\n                class=\"inverse\"\n                name=\"previous\"\n                (tapped)=\"previous()\"\n                i18n=\"Booking spaces cancel action\"\n            >\n                Back\n            </button>\n            <button\n                mat-button\n                *ngIf=\"multiple\"\n                name=\"next\"\n                [disabled]=\"!spaces.value || !spaces.value.length\"\n                (tapped)=\"next()\"\n                i18n=\"Booking spaces continue action\"\n            >\n                Next\n            </button>\n        </div>\n    </div>\n</div>\n<ng-template #load_state>\n    <div class=\"body\">\n        <div class=\"info-block center\">\n            <div class=\"icon\">\n                <mat-spinner diameter=\"48\"></mat-spinner>\n            </div>\n            <div class=\"text\" i18n=\"Booking spaces loading label\">\n                Checking space availability...\n            </div>\n        </div>\n    </div>\n</ng-template>\n<ng-template #empty_state>\n    <div class=\"body\">\n        <div class=\"info-block center\">\n            <div class=\"icon\">\n                <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n            </div>\n            <div class=\"text\" i18n=\"Booking spaces empty label\">\n                No spaces available for the selected time\n            </div>\n        </div>\n    </div>\n</ng-template>\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { FormGroup } from '@angular/forms';\n\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { ViewRoomModalComponent } from 'src/app/overlays/view-room-modal/view-room-modal.component';\nimport {\n    RecurrenceSpacesModalComponent,\n    RecurrenceSpacesModalData,\n} from '../../../overlays/recurrence-spaces-modal/recurrence-spaces-modal.component';\nimport { DialogEvent } from 'src/app/shared/utilities/types.utilities';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport {\n    BookingRecurrenceDetails,\n    BookingRecurrenceSpaceDetails,\n} from 'src/app/services/data/bookings/booking.interfaces';\n\n@Component({\n    selector: 'a-booking-space-item',\n    templateUrl: './item.component.html',\n    styleUrls: ['./item.component.scss'],\n})\nexport class BookingSpaceItemComponent extends BaseDirective {\n    /** Space to display */\n    @Input() public space: Space;\n    /** Form fields for booking */\n    @Input() public form: FormGroup;\n    /** Whether multiple spaces are able to be selected */\n    @Input() public multi: boolean;\n    /** Emitter for select actions on the */\n    @Output() public select = new EventEmitter<void>();\n\n    /** Whether space image should be displayed */\n    public get show_image() {\n        return this._service.setting('app.space_display.show_images');\n    }\n\n    /** Whether this space is selected */\n    public get selected(): boolean {\n        /* istanbul ignore else */\n        if (!this.form && this.space) {\n            return false;\n        }\n        return (\n            this.form.controls.space_list &&\n            !!(this.form.controls.space_list.value || []).find(\n                (space) => space.id === this.space.id\n            )\n        );\n    }\n\n    /** Whether space is booked by request */\n    public get is_request(): boolean {\n        /* istanbul ignore else */\n        if (!this.form) {\n            return false;\n        }\n        return this.space.byRequest({\n            date: this.form.controls.date.value,\n            duration: this.form.controls.duration.value,\n            host: this.form.controls.organiser.value || this._service.Users.current,\n        });\n    }\n\n    public get availability(): string {\n        const count = this.space.recurr_available.reduce(\n            (count, ocurrence) => count + (ocurrence.available ? 1 : 0),\n            0\n        );\n        return count >= this.space.recurr_available.length\n            ? 'all'\n            : `${count} of ${this.space.recurr_available.length}`;\n    }\n\n    /** Display location of the space */\n    public get location(): string {\n        /* istanbul ignore else */\n        if (!this.space) {\n            return 'Unable to determine location';\n        }\n        const level = this.space.level;\n        const bld = this._service.Organisation.buildings.find(\n            (building) => building.id === level.building_id\n        );\n        return `${bld ? bld.name + ', ' : ''}${level.name}`;\n    }\n\n    constructor(private _service: ApplicationService, private _dialog: MatDialog) {\n        super();\n    }\n\n    /**\n     * Open the modal to show the location of a space\n     * @param space Space to show the location\n     */\n    public locate() {\n        this._dialog.open(ViewRoomModalComponent, {\n            width: 'auto',\n            height: 'auto',\n            maxWidth: '95vw',\n            maxHeight: '95vh',\n            data: { space: this.space },\n        });\n    }\n\n    public selectSpace() {\n        if (!this.space.recurr_available || this.availability === 'all' || this.selected) {\n            this.select.emit();\n        } else {\n            const ref = this._dialog.open<\n                RecurrenceSpacesModalComponent,\n                RecurrenceSpacesModalData\n            >(RecurrenceSpacesModalComponent, {\n                width: 'auto',\n                height: 'auto',\n                maxWidth: '95vw',\n                maxHeight: '95vh',\n                data: {\n                    space: this.space,\n                    duration: this.form.controls.duration.value,\n                    host: this.form.controls.organiser.value,\n                    conflicts: this.form.controls.recurrence.value.conflicts || [],\n                },\n            });\n            this.subscription(\n                'recurr_conflicts',\n                ref.componentInstance.event.subscribe((event: DialogEvent) => {\n                    /* istanbul ignore else */\n                    if (event.reason === 'done') {\n                        const recurr: BookingRecurrenceDetails = this.form.controls.recurrence\n                            .value;\n                        const conflict_list: BookingRecurrenceSpaceDetails[] =\n                            recurr.conflicts || [];\n                        for (const item of event.metadata) {\n                            const index = conflict_list.findIndex(\n                                (event) =>\n                                    event.date === item.date && event.replaces === item.replaces\n                            );\n                            if (index >= 0) {\n                                conflict_list.splice(index, 1, item);\n                            } else {\n                                conflict_list.push(item);\n                            }\n                        }\n                        this.form.controls.recurrence.setValue({\n                            ...recurr,\n                            conflicts: conflict_list,\n                        });\n                        this.select.emit();\n                        ref.close();\n                    }\n                })\n            );\n        }\n    }\n}\n","<div class=\"space-details\" *ngIf=\"space\" [class.with-image]=\"show_image\">\n    <div class=\"details\">\n        <div\n            class=\"image\"\n            *ngIf=\"space.image\"\n            [style.background-image]=\"'url(' + space.image + ')'\"\n        ></div>\n        <div class=\"overlay\"></div>\n        <div class=\"name\">{{ space.name }}</div>\n        <div class=\"info\">\n            <div class=\"location\">{{ location }}</div>\n            <div class=\"capacity\">\n                <app-icon\n                    [icon]=\"{ type: 'icon', class: 'material-icons', content: 'account_circle' }\"\n                ></app-icon>\n                {{ space.capacity || '0' }}\n            </div>\n        </div>\n        <div\n            class=\"info recurr\"\n            *ngIf=\"space.recurr_available && space.recurr_available.length\"\n            i18n=\"Booking space availability label\"\n        >\n            Available for&nbsp;<span>{{ availability }}</span\n            >&nbsp;meeting ocurrences\n        </div>\n    </div>\n    <div class=\"actions\">\n        <button\n            mat-button\n            name=\"select\"\n            [class.inverse]=\"multi && !selected\"\n            [class.request]=\"is_request\"\n            (tapped)=\"selectSpace()\"\n        >\n            {{ multi ? (selected ? 'Remove' : 'Select') : is_request ? 'Request' : 'Book' }}\n        </button>\n        <button mat-button class=\"inverse\" name=\"locate\" (tapped)=\"locate()\" i18n=\"Booking space locate action\">\n            Map\n        </button>\n    </div>\n</div>\n","import { Component, Input, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\n\nimport { BookingFlowEvent } from '../../bookings.component';\n\n@Component({\n    selector: 'booking-spaces-form',\n    templateUrl: './form.component.html',\n    styleUrls: ['./form.component.scss']\n})\nexport class BookingSpaceFlowFormComponent {\n    /** Booking form fields */\n    @Input() public form: FormGroup;\n    /** Whether form is not the first page in the flow */\n    @Input() public can_return: boolean = false;\n    /** Emitter for flow update events */\n    @Output() public event = new EventEmitter<BookingFlowEvent>();\n\n    @ViewChild('container', { static: true }) private container: ElementRef<HTMLDivElement>;\n\n    /** Move flow to next step */\n    public next(): void {\n        this.form.markAllAsTouched();\n        /* istanbul ignore else */\n        if (this.form.valid) {\n            this.event.emit({ type: 'next', step: 'form' });\n        } else if (this.container) {\n            this.container.nativeElement.scrollIntoView({\n                behavior: 'smooth',\n                block: 'start',\n                inline: 'nearest'\n            });\n        }\n    }\n\n    /** Move flow to previous step */\n    public previous(): void {\n        this.event.emit({ type: 'previous', step: 'form' });\n    }\n\n    /** Reset form to initial state */\n    public resetForm(): void {\n        this.event.emit({ type: 'reset', step: 'form' });\n    }\n}\n","<div class=\"booking-form\" #container>\n    <div class=\"header\">\n        <h3 i18n=\"Booking form header\">New Booking</h3>\n        <button mat-icon-button name=\"reset\" (tapped)=\"resetForm()\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'refresh' }\"></app-icon>\n        </button>\n    </div>\n    <form [formGroup]=\"form\" (ngSubmit)=\"next()\">\n        <div class=\"body\">\n            <a-booking-form [form]=\"form\"></a-booking-form>\n        </div>\n        <div class=\"footer\">\n            <button mat-button type=\"button\" name=\"return\" *ngIf=\"can_return\" class=\"inverse\" (tapped)=\"previous()\" i18n=\"Booking form cancel action\">Back</button>\n            <button mat-button type=\"submit\" i18n=\"Booking form continue action\">Next</button>\n        </div>\n    </form>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\nimport { generateBookingForm } from 'src/app/services/data/bookings/booking.utilities';\nimport {\n    AvailableBookingFields,\n    BookingFlowSettings,\n} from 'src/app/shared/utilities/settings.interfaces';\nimport { HashMap, DialogEvent } from 'src/app/shared/utilities/types.utilities';\nimport { BookingFlowEvent } from '../bookings.component';\nimport { MatDialog } from '@angular/material/dialog';\nimport { BookingConfirmComponent } from '../overlays/booking-confirm/booking-confirm.component';\nimport { first } from 'rxjs/operators';\nimport {\n    RequirementDetailsModalComponent,\n    RequirementDetailsModalData,\n} from '../overlays/requirement-details-modal/requirement-details-modal.component';\nimport {\n    CateringDetailsModalComponent,\n    CateringDetailsModalData,\n} from '../overlays/catering-details-modal/catering-details-modal.component';\n\n@Component({\n    selector: 'booking-space-flow',\n    templateUrl: './space-flow.component.html',\n    styleUrls: ['./space-flow.component.scss'],\n})\nexport class BookingSpaceFlowComponent extends BaseDirective implements OnInit {\n    /** Form fields */\n    public form: FormGroup;\n    /** Form data store */\n    public booking: Booking;\n    /** Step of the booking flow that is currently active */\n    public flow_step: string;\n    /** Application settings for bookings */\n    public settings: BookingFlowSettings;\n\n    /** List of available booking fields for the form */\n    public get available_fields(): AvailableBookingFields[] {\n        return this.settings.show_fields || [];\n    }\n\n    constructor(\n        private _service: ApplicationService,\n        private _route: ActivatedRoute,\n        private _router: Router,\n        private _dialog: MatDialog\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.Spaces.initialised.pipe(first((_) => _)).subscribe(() => {\n            this.settings = this._service.setting('app.booking');\n            this.subscription(\n                'route.params',\n                this._route.paramMap.subscribe((params) => {\n                    /* istanbul ignore else */\n                    if (params.has('step')) {\n                        this.flow_step = params.get('step');\n                    }\n                })\n            );\n            this.loadFormData();\n        });\n    }\n\n    /**\n     * Handle events from child components\n     * @param event Booking flow event\n     */\n    public handleFlowEvent(event: BookingFlowEvent) {\n        switch (event.type) {\n            case 'next':\n                this.toNextFlowStep(event);\n                break;\n            case 'previous':\n                this.toPreviousFlowStep(event);\n                break;\n            case 'reset':\n                this.resetForm();\n                break;\n        }\n    }\n\n    private toNextFlowStep(event: BookingFlowEvent) {\n        const space_list = this.form.controls.space_list.value;\n        switch (event.step) {\n            case 'search':\n                if (\n                    space_list &&\n                    space_list.length &&\n                    this.settings.multiple_spaces &&\n                    (!event.metadata || !event.metadata.ref || event.metadata.ref !== 'equipment')\n                ) {\n                    this.openEquipmentDetailsModal();\n                } else {\n                    if (this.form.controls.has_catering && this.form.controls.has_catering.value) {\n                        this.navigate('catering');\n                    } else {\n                        this.navigate('form');\n                        this.confirmBooking();\n                    }\n                }\n                break;\n            case 'catering':\n                const order_list = this.form.controls.catering.value;\n                if (\n                    order_list &&\n                    order_list.length &&\n                    (!event.metadata || !event.metadata.ref || event.metadata.ref !== 'details')\n                ) {\n                    this.openCateringDetailsModal();\n                } else {\n                    this.navigate('form');\n                    this.confirmBooking();\n                }\n                break;\n            default:\n                if (\n                    !this.form.controls.needs_space ||\n                    (this.form.controls.needs_space.value && (!space_list || !space_list.length))\n                ) {\n                    this.navigate('search');\n                } else {\n                    this.confirmBooking();\n                }\n                break;\n        }\n    }\n\n    private toPreviousFlowStep(event: BookingFlowEvent) {\n        switch (event.step) {\n            case 'search':\n                this.navigate('form');\n                break;\n            case 'catering':\n                this.navigate('search');\n                break;\n        }\n    }\n\n    private navigate(route: string) {\n        this._router.navigate(['book', 'spaces', route], {\n            queryParamsHandling: 'preserve',\n        });\n        this.flow_step = route;\n    }\n\n    /** Clear user changes to the form data */\n    private resetForm() {\n        this.booking.clearPendingChanges();\n        delete this.form;\n        this.form = generateBookingForm(\n            this.booking,\n            this._service.Users.current,\n            this.available_fields\n        );\n    }\n\n    /**\n     * Load existing form data or generate a new booking form\n     */\n    private loadFormData(): void {\n        let form_data: HashMap = {};\n        /* istanbul ignore else */\n        if (localStorage) {\n            const form_string = localStorage.getItem('ACA_STAFF.booking_form_data');\n            /* istanbul ignore else */\n            if (form_string) {\n                try {\n                    form_data = JSON.parse(form_string);\n                } catch (e) {}\n            }\n        }\n        this.booking = new Booking(this._service.Bookings, form_data);\n        this.subscription(\n            'form_changes',\n            this.booking.changeEvents.subscribe(() => this.saveFormData())\n        );\n        this.form = generateBookingForm(\n            this.booking,\n            this._service.Users.current,\n            this.available_fields\n        );\n        /* istanbul ignore else */\n        /** Add local pending data */\n        if (form_data && !form_data.id) {\n            for (const key in form_data) {\n                if (this.form.controls[key]) {\n                    this.form.controls[key].setValue(form_data[key]);\n                } else if (this.booking.hasOwnProperty('')) {\n                    this.booking.storePendingChange(key as any, form_data[key]);\n                }\n            }\n        }\n        /* istanbul ignore else */\n        if (form_data && form_data.room_ids && this.form.controls.space_list) {\n            this.form.controls.space_list.setValue(\n                form_data.room_ids.map((id) => this._service.Spaces.find(id) || { id, name: id })\n            );\n        }\n    }\n\n    private saveFormData() {\n        /* istanbul ignore else */\n        if (localStorage && this.booking) {\n            localStorage.setItem(\n                'ACA_STAFF.booking_form_data',\n                JSON.stringify(this.booking.toJSON(true))\n            );\n        }\n    }\n\n    /** Open modal for adding equipment requirements to booking */\n    private openEquipmentDetailsModal() {\n        const ref = this._dialog.open<\n            RequirementDetailsModalComponent,\n            RequirementDetailsModalData\n        >(RequirementDetailsModalComponent, {\n            maxWidth: '95vw',\n            width: '32em',\n            data: {\n                spaces: this.form.controls.space_list.value,\n                notes_field: this.form.controls.notes,\n                codes_field: this.form.controls.equipment_codes,\n                head_counts_field: this.form.controls.expected_attendees,\n            },\n        });\n        this.subscription(\n            'modal_events',\n            ref.componentInstance.event.subscribe((event: DialogEvent) => {\n                /* istanbul ignore else */\n                if (event.reason === 'done') {\n                    this.toNextFlowStep({\n                        type: 'next',\n                        step: 'search',\n                        metadata: { ref: 'equipment' },\n                    });\n                    ref.close();\n                }\n            })\n        );\n        ref.afterClosed().subscribe(() => this.unsub('modal_events'));\n    }\n\n    /** Open modal for adding equipment requirements to booking */\n    private openCateringDetailsModal() {\n        const ref = this._dialog.open<CateringDetailsModalComponent, CateringDetailsModalData>(\n            CateringDetailsModalComponent,\n            {\n                maxWidth: '95vw',\n                width: '32em',\n                data: {\n                    spaces: this.form.controls.space_list.value,\n                    notes_field: this.form.controls.notes,\n                    catering: this.form.controls.catering,\n                },\n            }\n        );\n        this.subscription(\n            'modal_events',\n            ref.componentInstance.event.subscribe((event: DialogEvent) => {\n                /* istanbul ignore else */\n                if (event.reason === 'done') {\n                    this.toNextFlowStep({\n                        type: 'next',\n                        step: 'catering',\n                        metadata: { ref: 'details' },\n                    });\n                    ref.close();\n                }\n            })\n        );\n        ref.afterClosed().subscribe(() => this.unsub('modal_events'));\n    }\n\n    /**\n     * Open modal to confirm the booking details\n     */\n    private confirmBooking() {\n        /* istanbul ignore else */\n        if (!this.booking.has_changes) {\n            this._service.notifyInfo('No changes have been made to booking');\n            return;\n        }\n        /* istanbul ignore else */\n        if (this.form.valid) {\n            const dialog_ref = this._dialog.open(BookingConfirmComponent, {\n                width: '32em',\n                maxWidth: '95vw',\n                maxHeight: '95vh',\n                data: { booking: this.booking },\n            });\n            dialog_ref.componentInstance.event.subscribe((event: DialogEvent) => {\n                /* istanbul ignore else */\n                if (event.reason === 'done') {\n                    this._router.navigate(['/schedule']);\n                }\n            });\n        }\n    }\n}\n","<div class=\"space-flow\">\n    <ng-container [ngSwitch]=\"flow_step\">\n        <ng-container *ngSwitchCase=\"'search'\">\n            <booking-find-space\n                *ngIf=\"form\"\n                [spaces]=\"form.controls.space_list\"\n                [form]=\"form\"\n                (event)=\"handleFlowEvent($event)\"\n            ></booking-find-space>\n        </ng-container>\n        <ng-container *ngSwitchCase=\"'catering'\">\n            <booking-catering\n                *ngIf=\"form\"\n                [form]=\"form\"\n                (event)=\"handleFlowEvent($event)\"\n            ></booking-catering>\n        </ng-container>\n        <ng-container *ngSwitchDefault>\n            <booking-spaces-form\n                *ngIf=\"form\"\n                [form]=\"form\"\n                (event)=\"handleFlowEvent($event)\"\n            ></booking-spaces-form>\n        </ng-container>\n    </ng-container>\n</div>\n"]}