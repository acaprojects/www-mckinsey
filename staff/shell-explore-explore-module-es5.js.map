{"version":3,"sources":["webpack:///src/app/shell/explore/explore.component.ts","webpack:///src/app/shell/explore/explore.component.html","webpack:///src/app/shell/explore/explore.module.ts","webpack:///src/app/shell/explore/map-legend/map-legend.component.ts","webpack:///src/app/shell/explore/map-legend/map-legend.component.html","webpack:///src/app/shell/explore/map-view/map-view.component.html","webpack:///src/app/shell/explore/map-view/map-view.component.ts","webpack:///src/app/shell/explore/overlays/booking-modal/booking-modal.component.ts","webpack:///src/app/shell/explore/overlays/booking-modal/booking-modal.component.html","webpack:///src/app/shell/explore/overlays/space-info/space-info.component.ts","webpack:///src/app/shell/explore/overlays/space-info/space-info.component.html","webpack:///src/app/shell/explore/search/search.component.ts","webpack:///src/app/shell/explore/search/search.component.html","webpack:///src/app/shell/explore/status-managers/desk-status.component.ts","webpack:///src/app/shell/explore/status-managers/space-status.component.ts","webpack:///src/app/shell/explore/timeline/timeline.component.ts","webpack:///src/app/shell/explore/timeline/timeline.component.html","webpack:///src/app/shell/explore/zoom-controls/zoom-controls.component.ts","webpack:///src/app/shell/explore/zoom-controls/zoom-controls.component.html"],"names":["ExploreComponent","_service","title","selector","templateUrl","styleUrls","ROUTES","path","component","ExploreModule","forChild","declarations","imports","ExploreMapLegendComponent","legend_items","colours","show_legend","initialised","pipe","_","subscribe","explore_settings","setting","legend","colors","show_group_names","show_legend_group_names","Object","keys","animations","MapViewComponent","_route","center","x","y","style_map","listeners","features","status_map","listener_map","feature_map","active_level","bld","Organisation","building","levels","length","id","settings","subscription","queryParamMap","params","has","loadSpaceLocation","get","loadUserLocation","then","user","loading","message","focus","name","err","status","notifyError","styles","spaces","forEach","space","desks","desk","zones","zone","concat","focus_feature","space_id","Spaces","find","level","map_id","coordinates","content","data","text","zoom","processFeatures","user_email","Users","show","locate","location","fixed","diameter","confidence","levelWithID","map_url","processStatuses","processListeners","ExploreBookingModalComponent","_dialog_ref","_data","_router","state","date","booking","Bookings","valueOf","duration","room_ids","bookings","bookable","byRequest","host","current","available_until","is_now","toJSON","localStorage","setItem","JSON","stringify","navigate","queryParams","back","close","form","valid","checkSpaceAvailability","save","success","timeout","changes","space_list","Promise","resolve","reject","available","map","join","was_available","organiser","format","now","isSame","isAfter","ExploreSpaceInfoComponent","_position","processBookings","interval","toLowerCase","split","search$","ExploreSearchComponent","results","paramMap","type","search_results$","query","q","slice","cache","users","filter","search","search_str","item","indexOf","email","result_list","list","autofocus","focusField","input_field","nativeElement","relativeTo","queryParamsHandling","selectOption","ExploreDeskStatusComponent","occupied","free","colour_map","loadDesks","desk_list","id_list","status_list","desk_id","in_use","reserved","push","fill","stroke","status_id","emit","buildings","building_id","desk_management","systems","system_id","template","ExploreSpaceStatusComponent","_dialog","active_bookings","listen","loadSpaces","updateSpaceBookings","calculateStatus","clearSpaces","statuses","getStatus","opacity","datetime","startOf","second","current_booking","start","end","add","isBefore","options","rules","rulesFor","hide","auto_approve","bkn_data","is_today","from","unix","to","endOf","show_declined","zone_ids","processSpaceBookings","event","callback","showSpaceInfo","openBookingModal","open","width","height","notifyInfo","BLOCK_SIZE","MINUTES_IN_DAY","TimelineComponent","_renderer","dateChange","blocks","generateBlocks","checkDate","current_time","is_hour","minute","left","diff","amount","position","_start_position","_box","_container","getBoundingClientRect","MouseEvent","e","onMove","unsub","y_change","time_change","Math","round","old_date","floor","abs","ceil","changeDate","startMove","ZoomControlsComponent","zoomChange","positionChange","min_zoom","max_zoom","zoomIn","zoomOut","reset"],"mappings":"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","file":"shell-explore-explore-module-es5.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\n\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/base.directive';\n\n@Component({\n    selector: 'app-explore',\n    templateUrl: './explore.component.html',\n    styleUrls: ['./explore.component.scss']\n})\nexport class ExploreComponent extends BaseDirective implements OnInit {\n    /** Whether to show the overlay menu */\n    public show_menu: boolean;\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.title = 'Maps';\n    }\n}\n","<div class=\"explore page\">\n    <header class=\"header\">\n        <a-topbar-header [(menu)]=\"show_menu\"></a-topbar-header>\n    </header>\n    <main class=\"body\">\n        <explore-map-view></explore-map-view>\n    </main>\n    <footer class=\"footer\">\n        <a-footer-menu></a-footer-menu>\n    </footer>\n</div>\n<a-overlay-menu [(show)]=\"show_menu\"></a-overlay-menu>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule, Route } from '@angular/router';\nimport { FormsModule } from '@angular/forms';\n\nimport { ComposerModule } from '@placeos/composer';\nimport { AInteractiveMapModule } from '@acaprojects/ngx-interactive-map';\n\nimport { ExploreComponent } from './explore.component';\nimport { SharedContentModule } from 'src/app/shared/shared.module';\nimport { MapViewComponent } from './map-view/map-view.component';\nimport { ExploreSpaceStatusComponent } from './status-managers/space-status.component';\nimport { ExploreDeskStatusComponent } from './status-managers/desk-status.component';\nimport { ZoomControlsComponent } from './zoom-controls/zoom-controls.component';\nimport { ExploreSpaceInfoComponent } from './overlays/space-info/space-info.component';\nimport { ExploreSearchComponent } from './search/search.component';\nimport { ExploreMapLegendComponent } from './map-legend/map-legend.component';\nimport { TimelineComponent } from './timeline/timeline.component';\nimport { ExploreBookingModalComponent } from './overlays/booking-modal/booking-modal.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: ExploreComponent },\n    { path: ':search_type', component: ExploreComponent }\n];\n\n@NgModule({\n    declarations: [\n        ExploreComponent,\n        MapViewComponent,\n        ExploreSpaceStatusComponent,\n        ExploreDeskStatusComponent,\n        ZoomControlsComponent,\n        ExploreSpaceInfoComponent,\n        ExploreSearchComponent,\n        ExploreMapLegendComponent,\n        TimelineComponent,\n        ExploreBookingModalComponent\n    ],\n    imports: [\n        CommonModule,\n        RouterModule.forChild(ROUTES),\n        SharedContentModule,\n        AInteractiveMapModule,\n        ComposerModule,\n        FormsModule\n    ]\n})\nexport class ExploreModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { first } from 'rxjs/operators';\n\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { HashMap } from 'src/app/shared/utilities/types.utilities';\nimport { MapLegendItem, ExploreMapSettings } from 'src/app/shared/utilities/settings.interfaces';\nimport { ANIMATION_SHOW_CONTRACT_EXPAND } from 'src/app/shared/globals/angular-animations';\n\n@Component({\n    selector: 'a-map-legend',\n    templateUrl: './map-legend.component.html',\n    styleUrls: ['./map-legend.component.scss'],\n    animations: [ANIMATION_SHOW_CONTRACT_EXPAND]\n})\nexport class ExploreMapLegendComponent extends BaseDirective implements OnInit {\n    /** Mapping of legend item groups */\n    public legend_items: HashMap<MapLegendItem[]> = {};\n    /** Mapping of map colours */\n    public colours: HashMap<string> = {};\n    /** Whether group names should be displayed */\n    public show_group_names: boolean;\n    /** Whether the legend items should be shown */\n    public show_legend = false;\n\n    /** List of group names for legend items */\n    public get group_names(): string[] {\n        return Object.keys(this.legend_items);\n    }\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.initialised.pipe(first(_ => _)).subscribe(() => {\n            const explore_settings: ExploreMapSettings =\n                this._service.setting('app.explore') || ({} as any);\n            this.legend_items = explore_settings.legend || {};\n            this.colours = explore_settings.colors || {};\n            this.show_group_names = !!explore_settings.show_legend_group_names;\n        });\n    }\n}\n","<div class=\"map-legend\" *ngIf=\"group_names && group_names.length\">\n    <div class=\"tag\">\n        <div class=\"title\" (tapped)=\"show_legend = !show_legend\">\n            <div class=\"text\" i18n=\"Explore legend label\">{{ show_legend ? 'Hide' : 'Show' }} Legend</div>\n            <app-icon\n                [icon]=\"{\n                    class: 'material-icons',\n                    content: show_legend ? 'arrow_drop_up' : 'arrow_drop_down'\n                }\"\n            ></app-icon>\n        </div>\n    </div>\n    <div\n        class=\"contents\"\n        [@show]=\"show_legend ? 'show' : 'hide'\"\n        [style.padding-bottom]=\"show_legend ? '1em' : ''\"\n        [style.padding-bottom]=\"show_legend ? '.5em' : ''\"\n        [style.overflow]=\"show_legend ? 'hidden auto' : 'hidden'\"\n    >\n        <ul>\n            <ng-container *ngFor=\"let group of group_names\">\n                <li class=\"group\" *ngIf=\"show_group_names\">\n                    <div class=\"bar\"></div>\n                    <div class=\"name\">{{ group }}</div>\n                    <div class=\"bar\"></div>\n                </li>\n                <li class=\"item\" name=\"item.key\" *ngFor=\"let item of legend_items[group]\">\n                    <div class=\"ref\">\n                        <ng-container *ngIf=\"item.icon; else colour_display\">\n                            <app-icon [icon]=\"item.icon\"></app-icon>\n                        </ng-container>\n                        <ng-template #colour_display>\n                            <div\n                                class=\"colour\"\n                                [style.background-color]=\"item.color || colours[item.key]\"\n                            ></div>\n                        </ng-template>\n                    </div>\n                    <div class=\"name\">{{ item.name }}</div>\n                </li>\n            </ng-container>\n        </ul>\n    </div>\n</div>\n","<div class=\"map-view\">\n    <div class=\"header\">\n        <explore-search></explore-search>\n    </div>\n    <div class=\"body\">\n        <div class=\"status-list\" hidden>\n            <i\n                space-status\n                [zone]=\"active_level\"\n                [date]=\"date\"\n                (status)=\"status_map.spaces = $event; processStatuses()\"\n                (listeners)=\"listener_map.spaces = $event; processListeners()\"\n                (features)=\"feature_map.spaces = $event; processFeatures()\"\n            ></i>\n            <i desk-status [zone]=\"active_level\" (status)=\"status_map.desks = $event; processStatuses()\"></i>\n        </div>\n        <a-map-controls overlay [(level)]=\"active_level\" (levelChange)=\"zoom = 1; center = { x: .5, y: .5 }\"></a-map-controls>\n        <a-map\n            [(zoom)]=\"zoom\"\n            [(center)]=\"center\"\n            [src]=\"map_url\"\n            [css]=\"style_map\"\n            [listeners]=\"listeners\"\n            [features]=\"features\"\n            [focus]=\"focus\"\n        >\n            <mat-spinner diameter=\"32\"></mat-spinner>\n        </a-map>\n        <a-zoom-controls overlay [(zoom)]=\"zoom\" [(position)]=\"center\"></a-zoom-controls>\n        <a-map-legend overlay></a-map-legend>\n        <div class=\"message\" *ngIf=\"message\">\n            <div class=\"text\">{{ message }}</div>\n            <div class=\"loader\">\n                <mat-progress-bar mode=\"indeterminate\" *ngIf=\"loading\"></mat-progress-bar>\n            </div>\n        </div>\n    </div>\n    <a-timeline *ngIf=\"settings.show_timeline\" [(date)]=\"date\"></a-timeline>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport {\n    MapPinComponent,\n} from '@acaprojects/ngx-interactive-map';\nimport { first } from 'rxjs/operators';\n\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { MapStatus, MapListener } from '../status-managers/status.interfaces';\nimport { HashMap, Point } from 'src/app/shared/utilities/types.utilities';\nimport { MapFeature } from '@acaprojects/ngx-interactive-map/lib/helpers/map.interfaces';\nimport { MapRadiusComponent } from '@acaprojects/ngx-interactive-map';\nimport { ExploreMapSettings } from 'src/app/shared/utilities/settings.interfaces';\n\n@Component({\n    selector: 'explore-map-view',\n    templateUrl: './map-view.component.html',\n    styleUrls: ['./map-view.component.scss']\n})\nexport class MapViewComponent extends BaseDirective implements OnInit {\n    /** Zoom level of the map */\n    public zoom: number;\n    /** Center offset of the map */\n    public center: Point = { x: .5, y: .5 };\n    /** Mapping of elements to CSS styles */\n    public style_map: HashMap<HashMap<string | number>> = {};\n    /** List of listeners for the map */\n    public listeners: MapListener[] = [];\n    /** List of features to render on the map */\n    public features: MapFeature[] = [];\n    /** ID of the active level to display on the map */\n    public active_level: string;\n    /** Mapping of status lists to types */\n    public status_map: { spaces?: MapStatus[]; desks?: MapStatus[]; zones?: MapStatus[] } = {};\n    /** Mapping of listener lists to types */\n    public listener_map: {\n        spaces?: MapListener[];\n        desks?: MapListener[];\n        zones?: MapListener[];\n    } = {};\n    /** Mapping of features lists to types */\n    public feature_map: {\n        spaces?: MapFeature[];\n        desks?: MapFeature[];\n        zones?: MapFeature[];\n    } = {};\n    /** Message to display over the map */\n    public message: string;\n    /** Whether location data is loading */\n    public loading: boolean;\n    /** Point or element on the map to focus */\n    public focus: string | Point;\n    /** Feature on the map to focus */\n    public focus_feature: MapFeature;\n    /** Current shown time */\n    public date: number;\n    /** Application settings for the explore component */\n    public settings: ExploreMapSettings;\n\n    /** URL of the active map */\n    public get map_url(): string {\n        const level = this._service.Organisation.levelWithID(this.active_level) || { map_url: '' };\n        return level.map_url || '';\n    }\n\n    constructor(private _service: ApplicationService, private _route: ActivatedRoute) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.initialised.pipe(first(_ => _)).subscribe(() => {\n            /* istanbul ignore else */\n            if (!this.active_level) {\n                const bld = this._service.Organisation.building;\n                if (bld && bld.levels.length) {\n                    this.active_level = bld.levels[0].id;\n                }\n            }\n            this.settings = this._service.setting('app.explore') || {};\n            this.subscription(\n                'route.query',\n                this._route.queryParamMap.subscribe(params => {\n                    /* istanbul ignore else */\n                    if (params.has('space')) {\n                        this.loadSpaceLocation(params.get('space'));\n                    }\n                    /* istanbul ignore else */\n                    if (params.has('user')) {\n                        this.loadUserLocation(params.get('user')).then(\n                            (user) => {\n                                this.loading = false;\n                                this.message = this.focus ? '' : `Unable to locate ${user ? user.name : params.get('user')}`;\n                            },\n                            err => {\n                                this.loading = false;\n                                this.message = `Unable to locate user`;\n                                /* istanbul ignore else */\n                                if (err && err.status !== 404) {\n                                    this._service.notifyError(`Error loading user location. ${err.message}`);\n                                }\n                            }\n                        );\n                    }\n                })\n            );\n        });\n    }\n\n    /**\n     * Process changes to statuses\n     */\n    public processStatuses() {\n        const styles: HashMap<HashMap<string | number>> = {};\n        (this.status_map.spaces || []).forEach(space => (styles[`#${space.id}`] = space.styles));\n        (this.status_map.desks || []).forEach(desk => (styles[`#${desk.id}`] = desk.styles));\n        (this.status_map.zones || []).forEach(zone => (styles[`#${zone.id}`] = zone.styles));\n        this.style_map = styles;\n    }\n\n    /**\n     * Process changes to statuses\n     */\n    public processListeners() {\n        let listeners: MapListener[] = [];\n        listeners = listeners.concat(this.listener_map.spaces || []);\n        listeners = listeners.concat(this.listener_map.desks || []);\n        listeners = listeners.concat(this.listener_map.zones || []);\n        this.listeners = listeners;\n    }\n\n    /**\n     * Process changes to statuses\n     */\n    public processFeatures() {\n        let features: MapFeature[] = [];\n        /* istanbul ignore else */\n        if (this.focus_feature) {\n            features = features.concat([this.focus_feature])\n        }\n        features = features.concat(this.feature_map.spaces || []);\n        features = features.concat(this.feature_map.desks || []);\n        features = features.concat(this.feature_map.zones || []);\n        this.features = features;\n    }\n\n    /**\n     * Load and store location details for the space\n     * @param space_id Engine system ID of the space to locate\n     */\n    private loadSpaceLocation(space_id: string) {\n        const space = this._service.Spaces.find(space_id);\n        /* istanbul ignore else */\n        if (space) {\n            this.message = `Loading location of ${space.name}`;\n            this.loading = true;\n            this.active_level = space.level.id;\n            this.focus = space.map_id;\n            this.focus_feature = {\n                id: space.map_id,\n                coordinates: null,\n                content: MapPinComponent,\n                data: {\n                    text: space.name\n                }\n            };\n            this.zoom = 1;\n            this.loading = false;\n            this.message = '';\n            this.processFeatures();\n        }\n    }\n\n    /**\n     * Load and store the location for the user\n     * @param user_email Email address of the selected user\n     */\n    private async loadUserLocation(user_email: string) {\n        this.focus = null;\n        this.focus_feature = null;\n        this.loading = true;\n        this.message = `Loading user details...`;\n        const user = await this._service.Users.show(user_email);\n        /* istanbul ignore else */\n        if (!user) return user;\n        this.message = `Loading location for ${user.name}...`;\n        const location = await user.locate();\n        /* istanbul ignore else */\n        if (!location) return user;\n        this.active_level = location.level.id;\n        if (location.fixed) {\n            this.focus = location.id;\n            this.focus_feature = {\n                id: location.id,\n                coordinates: null,\n                content: MapPinComponent,\n                data: {\n                    text: `${user.name} is here`\n                }\n            };\n            this.zoom = 1;\n        } else {\n            this.focus = {\n                x: location.x,\n                y: location.y\n            }\n            this.focus_feature = {\n                coordinates: {\n                    x: location.x,\n                    y: location.y\n                },\n                content: MapRadiusComponent,\n                data: {\n                    text: `${user.name} is here`,\n                    diameter: location.confidence || 5\n                }\n            }\n        }\n        this.zoom = 1;\n        this.loading = false;\n        this.message = '';\n        this.processFeatures();\n        return user;\n    }\n}\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { FormGroup } from '@angular/forms';\nimport { Router } from '@angular/router';\n\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { generateBookingForm, statusFromBookings } from 'src/app/services/data/bookings/booking.utilities';\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { BaseDirective } from 'src/app/shared/base.directive';\n\nimport * as dayjs from 'dayjs';\n\nexport interface ExploreBookingModalData {\n    /** Unix epoch in ms of the booking start time */\n    date: number;\n    /** Space to make the booking in */\n    space: Space;\n    /** List of bookings for the active space at the current time */\n    bookings: Booking[];\n}\n\n@Component({\n    selector: 'a-explore-booking-modal',\n    templateUrl: './booking-modal.component.html',\n    styleUrls: ['./booking-modal.component.scss']\n})\nexport class ExploreBookingModalComponent extends BaseDirective {\n    /**  */\n    public booking: Booking;\n    /** Form fields for new ad-hoc booking */\n    public form: FormGroup;\n    /** Form contents to display */\n    public state: 'info' | 'form' = 'info';\n    /** Description of the current loading state */\n    public loading: string;\n    /** String of time until next booking */\n    public available_until: string;\n    /** Whether booking was successful */\n    public success: boolean;\n\n    public get is_requesting(): boolean {\n        const booking = this.booking.toJSON(true);\n        return this.space.byRequest({\n            date: this.booking.changes.date || this.booking.date || dayjs(this._data.date).valueOf(),\n            duration: this.booking.changes.duration || this.booking.duration || 30,\n            host: booking.organiser || this._service.Users.current\n        });\n    }\n\n    /** Display string for the selected date */\n    public get date(): string {\n        const date = dayjs(this._data.date);\n        return date.format('DD MMM YYYY');\n    }\n\n    /** Display string for the selected time */\n    public get time(): string {\n        const date = dayjs(this._data.date);\n        return date.format('h:mm A');\n    }\n\n    /** Selected space */\n    public get space(): Space {\n        return this._data.space;\n    }\n\n    /** Whether space is being booked for now */\n    public get is_now(): boolean {\n        const now = dayjs();\n        const date = dayjs(this._data.date);\n        return now.isSame(date, 'm') || now.isAfter(date, 'm');\n    }\n\n    constructor(\n        private _dialog_ref: MatDialogRef<ExploreBookingModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: ExploreBookingModalData,\n        private _router: Router,\n        private _service: ApplicationService\n    ) {\n        super();\n        const date = dayjs(this._data.date);\n        this.booking = new Booking(this._service.Bookings, {\n            title: 'Ad-Hoc Booking',\n            date: date.valueOf(),\n            duration: 30,\n            room_ids: [this._data.space.id]\n        });\n        const status = statusFromBookings(\n            this._data.bookings,\n            this.space.bookable,\n            this.space.byRequest({\n                date: this._data.date,\n                duration: 30,\n                host: this._service.Users.current\n            }),\n            this._data.date\n        );\n        this.available_until = status.available_until;\n    }\n\n    /**\n     * Move onto the next step of the booking flow\n     */\n    public next() {\n        if (!this.is_now) {\n            const booking = this.booking.toJSON(true);\n            localStorage.setItem('ACA_STAFF.booking_form_data', JSON.stringify({ id: 'ad-hoc', ...booking }));\n            this._router.navigate(['/book', 'space'], { queryParams: { back: '/explore' } });\n            this._dialog_ref.close();\n        } else {\n            this.form = generateBookingForm(this.booking, this._service.Users.current, [\n                'space_list',\n                'organiser',\n                'title',\n                'duration'\n            ]);\n            this.state = 'form';\n        }\n    }\n\n    public book() {\n        /* istanbul ignore else */\n        if (this.form.valid) {\n            this.loading = 'Checking space availability...';\n            this.checkSpaceAvailability().then(\n                () => {\n                    this.booking.save(true).then(\n                        () => {\n                            this.loading = null;\n                            this.success = true;\n                            this.timeout('close', () => this._dialog_ref.close(), 5000);\n                        },\n                        err => {\n                            this.loading = null;\n                            this._service.notifyError(\n                                `Error ${this.booking.id ? 'updating' : 'creating'} booking: ${err.message || err}}`\n                            );\n                        }\n                    );\n                },\n                err => {\n                    this.loading = null;\n                    this._service.notifyError(`Error checking space availability: ${err.message || err}`);\n                }\n            );\n        }\n    }\n\n    /**\n     * Check whether the selected spaces are available for the selected time period\n     */\n    private checkSpaceAvailability(): Promise<void> {\n        const spaces: Space[] = this.booking.changes.space_list || this.booking.space_list;\n        return new Promise((resolve, reject) => {\n            this._service.Spaces.available({\n                room_ids: spaces.map(space => space.id).join(','),\n                date: this.booking.changes.date || this.booking.date,\n                duration: this.booking.changes.duration || this.booking.duration\n            }).then(\n                space_list => {\n                    for (const space of space_list) {\n                        if (!space.was_available) {\n                            return reject(\n                                `${space.name} is not available at the select time period.`\n                            );\n                        }\n                    }\n                    resolve();\n                },\n                err => reject(err)\n            );\n        });\n    }\n}\n","<ng-container *ngIf=\"!success; else done_state\">\n    <header mat-dialog-title [class.request]=\"is_requesting\">\n        <ng-container *ngIf=\"state !== 'form'\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'add' }\"></app-icon>\n            <div class=\"text\">\n                Book <span>{{ space?.name }}</span> {{ is_now ? 'from now' : 'at ' + time }}\n            </div>\n        </ng-container>\n        <ng-container *ngIf=\"state === 'form'\">\n            <div class=\"text\">\n                Book <span>{{ space?.name }}</span>\n            </div>\n        </ng-container>\n    </header>\n    <mat-dialog-content>\n        <main *ngIf=\"!loading; else load_state\">\n            <ng-container [ngSwitch]=\"state\">\n                <ng-container *ngSwitchCase=\"'form'\">\n                    <a-booking-form [form]=\"form\"></a-booking-form>\n                </ng-container>\n                <ng-container *ngSwitchDefault>\n                    <div class=\"details\">\n                        <p>{{ available_until }}</p>\n                        <p *ngIf=\"is_requesting\" i18n=\"Explore booking request details\">\n                            This space requires approval to reserve\n                        </p>\n                    </div>\n                </ng-container>\n            </ng-container>\n        </main>\n    </mat-dialog-content>\n    <mat-dialog-actions *ngIf=\"!loading\">\n        <footer>\n            <button mat-button class=\"inverse\" mat-dialog-close>Cancel</button>\n            <button mat-button (tapped)=\"state === 'form' ? book() : next()\">\n                {{ state === 'form' ? (is_requesting ? 'Request' : 'Book') : 'Yes' }}\n            </button>\n        </footer>\n    </mat-dialog-actions>\n    <ng-template #load_state>\n        <main>\n            <div class=\"info-block\">\n                <div class=\"icon\">\n                    <mat-spinner diameter=\"48\"></mat-spinner>\n                </div>\n                <div class=\"text\">{{ loading || 'Processing request...' }}</div>\n            </div>\n        </main>\n    </ng-template>\n</ng-container>\n<ng-template #done_state>\n    <header class=\"success\" [class.request]=\"is_requesting\">\n        <div class=\"text\">\n            <ng-container *ngIf=\"is_requesting\" i18n=\"Explore booking request sent\">\n                Request for <span>{{ space?.name }}</span> sent\n            </ng-container>\n            <ng-container *ngIf=\"!is_requesting\" i18n=\"Explore booking made\">\n                Booked <span>{{ space?.name }}</span>\n                {{ is_now ? 'from now' : 'at ' + time }}\n            </ng-container>\n        </div>\n        <app-icon\n            [icon]=\"{ class: 'material-icons', content: is_requesting ? 'send' : 'done' }\"\n        ></app-icon>\n    </header>\n</ng-template>\n","import { Component, OnInit, Inject } from '@angular/core';\nimport {\n    MAP_OVERLAY_DATA,\n    MAP_LOCATION\n} from '@acaprojects/ngx-interactive-map';\n\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\nimport { statusFromBookings } from 'src/app/services/data/bookings/booking.utilities';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Point } from 'src/app/shared/utilities/types.utilities';\n\nexport interface SpaceInfoData {\n    /** Current time to show details for */\n    date?: number;\n    /** Space to show details for */\n    space: Space;\n    /** Active bookings for the space */\n    bookings: Booking[];\n}\n\n@Component({\n    selector: 'a-space-info',\n    templateUrl: './space-info.component.html',\n    styleUrls: ['./space-info.component.scss']\n})\nexport class ExploreSpaceInfoComponent extends BaseDirective implements OnInit {\n    /** Status of the space */\n    public status: string;\n    /** String of time until next booking */\n    public available_until: string;\n\n    /** Named position of the element location on the map */\n    public get quadrant(): 'top left' | 'top right' | 'bottom left' | 'bottom right' {\n        /* istanbul ignore if */\n        if (!this._position) {\n            return 'top left';\n        }\n        if (this._position.y < .5) {\n            if (this._position.x < .5) {\n                return 'top left';\n            } else {\n                return 'top right';\n            }\n        } else {\n            if (this._position.x < .5) {\n                return 'bottom left';\n            } else {\n                return 'bottom right';\n            }\n        }\n    }\n\n    /** CSS class for the current status of the space */\n    public get status_class(): string {\n        return (this.status || '')\n            .toLowerCase()\n            .split(' ')\n            .join('-');\n    }\n\n    /** Space to display on the component */\n    public get space(): Space {\n        /* istanbul ignore if */\n        if (!this._data) {\n            return null;\n        }\n        return this._data.space;\n    }\n\n    /** List of bookings from the space for the currently displayed time */\n    public get bookings(): Booking[] {\n        /* istanbul ignore if */\n        if (!this._data) {\n            return [];\n        }\n        return this._data.bookings || [];\n    }\n\n    constructor(\n        @Inject(MAP_OVERLAY_DATA) private _data: SpaceInfoData,\n        @Inject(MAP_LOCATION) private _position: Point,\n        private _service: ApplicationService\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.processBookings();\n        this.interval('update_bookings', () => this.processBookings(), 60 * 1000);\n    }\n\n    /**\n     * Calculate availability of space based off given bookings\n     */\n    public processBookings(): void {\n        /* istanbul ignore if */\n        if (!this.space) {\n            return;\n        }\n        const status = statusFromBookings(\n            this.bookings,\n            this.space.bookable,\n            this.space.byRequest({\n                date: this._data.date,\n                duration: 30,\n                host: this._service.Users.current\n            }),\n            this._data.date\n        );\n        this.status = status.status;\n        this.available_until = status.available_until;\n    }\n}\n","<div *ngIf=\"space\" [id]=\"space.id\" [class]=\"'space-info ' + quadrant\">\n    <div class=\"arrow\"></div>\n    <div class=\"details\">\n        <div class=\"name\">{{ space.name }}</div>\n        <div class=\"availability\">\n            <div name=\"status\" [class]=\"status_class\">{{ status }}</div>\n            <div name=\"available-until\" *ngIf=\"status_class !== 'not-bookable'\">{{ available_until }}</div>\n        </div>\n    </div>\n</div>","import {\n    Component,\n    OnInit,\n    Input,\n    OnChanges,\n    SimpleChanges,\n    ViewChild,\n    ElementRef\n} from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { catchError, debounceTime, distinctUntilChanged, switchMap, map } from 'rxjs/operators';\nimport { Observable, Subject, of } from 'rxjs';\n\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { User } from 'src/app/services/data/users/user.class';\nimport { Space } from 'src/app/services/data/spaces/space.class';\n\n// TODO: Add handling for role users. e.g. Fire Wardens, First Aiders\n// TODO: Add handling for searching for features\n// TODO: Add handling for searching for desks\n\n@Component({\n    selector: 'explore-search',\n    templateUrl: './search.component.html',\n    styleUrls: ['./search.component.scss']\n})\nexport class ExploreSearchComponent extends BaseDirective implements OnInit, OnChanges {\n    /** Type of data to show when searching */\n    @Input() public type: 'space' | 'user' | 'feature' | 'desk' | 'any';\n    /** Whether external changes are being processed */\n    @Input() public autofocus: boolean;\n    /** Display string for the placeholder of the search input */\n    @Input() public placeholder: string;\n    /** Whether search data is loading */\n    public loading: boolean;\n    /** Search filter value */\n    public search_str: string;\n    /** List of users from an API search */\n    public search_results$: Observable<(User | Space)[]>;\n    /** Post search and filtering list of items */\n    public results: (User | Space)[] = [];\n    /** Subject holding the value of the search */\n    public search$ = new Subject<string>();\n\n    /** Input field reference */\n    @ViewChild('input', { static: false }) private input_field: ElementRef<HTMLInputElement>;\n\n    constructor(\n        private _service: ApplicationService,\n        private _route: ActivatedRoute,\n        private _router: Router\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.subscription(\n            'route.params',\n            this._route.paramMap.subscribe(params => {\n                if (params.has('search_type')) {\n                    this.type = params.get('search_type') as any;\n                }\n            })\n        );\n        // Listen for input changes\n        this.search_results$ = this.search$.pipe(\n            debounceTime(400),\n            distinctUntilChanged(),\n            switchMap(query => {\n                this.loading = true;\n                return query.length >= 3\n                    ? (this._service.Users.query({\n                          q: query.slice(0, 3),\n                          cache: 60 * 1000\n                      }) as Promise<User[]>)\n                    : Promise.resolve([]);\n            }),\n            catchError(err => of([])),\n            map((users: User[]) => {\n                const spaces = this._service.Spaces.filter(_ => true);\n                const search = (this.search_str || '').toLowerCase();\n                const filter = item =>\n                    (item.name || '').toLowerCase().indexOf(search) >= 0 ||\n                    (item.email || '').toLowerCase().indexOf(search) >= 0;\n                let result_list = [];\n                if (this.type === 'space') {\n                    result_list = spaces;\n                } else if (this.type === 'user') {\n                    result_list = users;\n                } else {\n                    result_list = (spaces as any).concat(users);\n                }\n                this.loading = false;\n                return result_list.filter(filter);\n            })\n        );\n        // Process API results\n        this.subscription(\n            'search_results',\n            this.search_results$.subscribe(list => {\n                this.results = list;\n            })\n        );\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        /* istanbul ignore else */\n        if (changes.autofocus && this.autofocus) {\n            this.focusField();\n        }\n    }\n\n    public focusField() {\n        /* istanbul ignore else */\n        if (this.input_field && this.input_field.nativeElement) {\n            this.input_field.nativeElement.focus();\n        }\n    }\n\n    /**\n     * Update the selected item to display the location for on the map\n     * @param item Space or User to display location for\n     */\n    public selectOption(item: User | Space) {\n        if (item instanceof Space) {\n            this._router.navigate([], {\n                relativeTo: this._route,\n                queryParams: { space: item.id },\n                queryParamsHandling: 'merge'\n            });\n        } else {\n            this._router.navigate([], {\n                relativeTo: this._route,\n                queryParams: { user: item.email },\n                queryParamsHandling: 'merge'\n            });\n        }\n        this.search_str = item.name;\n    }\n}\n","<div class=\"searchbar\" *ngIf=\"type\" tabindex=\"0\" (focus)=\"focusField()\" (click)=\"focusField()\">\n    <div class=\"prefix\">\n        <app-icon [icon]=\"{ type: 'icon', class: 'material-icons', content: 'search' }\"></app-icon>\n    </div>\n    <div class=\"input\">\n        <input\n            #input\n            type=\"text\"\n            [(ngModel)]=\"search_str\"\n            (ngModelChange)=\"search$.next($event)\"\n            [matAutocomplete]=\"auto\"\n            [placeholder]=\"placeholder || 'Search...'\"\n        />\n    </div>\n    <div class=\"suffix\">\n        <mat-spinner *ngIf=\"loading\" diameter=\"32\"></mat-spinner>\n    </div>\n</div>\n<mat-autocomplete #auto=\"matAutocomplete\" (optionSelected)=\"selectOption($event.option.value)\">\n    <mat-option *ngFor=\"let option of results\" [value]=\"option\">\n        <div class=\"name\">{{ option.name }}</div>\n        <div class=\"email\">{{ option.level ? option.level.name : option.email }}</div>\n    </mat-option>\n</mat-autocomplete>\n","import { Component, Output, EventEmitter, OnInit, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { first } from 'rxjs/operators';\n\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { HashMap } from 'src/app/shared/utilities/types.utilities';\nimport { MapStatus } from './status.interfaces';\n\n@Component({\n    selector: '[desk-status]',\n    template: `\n        <ng-content></ng-content>\n        <div class=\"bindings\" *ngIf=\"system_id\">\n            <!-- BINDINGS -->\n            <i binding [(model)]=\"in_use\" [sys]=\"system_id\" mod=\"DeskManagement\" [bind]=\"zone\" (modelChange)=\"calculateStatus()\"></i>\n            <i binding [(model)]=\"id_list\" [sys]=\"system_id\" mod=\"DeskManagement\" [bind]=\"zone + ':desk_ids'\" (modelChange)=\"calculateStatus()\"></i>\n            <i binding [(model)]=\"reserved\" [sys]=\"system_id\" mod=\"DeskManagement\" [bind]=\"zone + ':reserved'\" (modelChange)=\"calculateStatus()\"></i>\n            <i binding [(model)]=\"occupied\" [sys]=\"system_id\" mod=\"DeskManagement\" [bind]=\"zone + ':occupied_count'\"></i>\n            <i binding [(model)]=\"free\" [sys]=\"system_id\" mod=\"DeskManagement\" [bind]=\"zone + ':free_count'\"></i>\n            <!-- REMOTE EXECUTIONS -->\n            <i binding [(model)]=\"checkin\" [sys]=\"system_id\" mod=\"DeskManagement\" exec=\"manual_checkin\" [params]=\"[checkin]\"></i>\n            <i binding [(model)]=\"cancel\" [sys]=\"system_id\" mod=\"DeskManagement\" exec=\"cancel_reservation\" [params]=\"[]\"></i>\n        </div>\n    `\n})\nexport class ExploreDeskStatusComponent extends BaseDirective implements OnChanges {\n    /** ID of the active level */\n    @Input() public zone: string;\n    /** ID of the desk to checkin */\n    @Input() public checkin: string;\n    /** Emitter for changes to the desk status */\n    @Output() public status = new EventEmitter<MapStatus[]>();\n    /** ID of the desk management system */\n    public system_id: string;\n    /** List of desks for the active level */\n    public id_list: string[];\n    /** List of desk IDs in use on the active level */\n    public in_use: string[];\n    /** List of desk IDs that are reserved on the active level */\n    public reserved: string[];\n    /** Number of occupied desks on the active level */\n    public occupied: number = 0;\n    /** Number of free desks on the active level */\n    public free: number = 0;\n    /** Mapping of colours to statuses */\n    public colour_map: HashMap<string> = {};\n    /** Toggle for cancelling desk reservations */\n    public cancel: boolean;\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.initialised.pipe(first(_ => _)).subscribe(() => {\n            this.colour_map = this._service.setting('app.explore.colors') || {};\n        });\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.zone) {\n            this.loadDesks();\n        }\n    }\n\n    public calculateStatus() {\n        const desk_list = this.id_list || [];\n        const status_list: MapStatus[] = [];\n        for (const desk_id of desk_list) {\n            const in_use = (this.in_use || []).find(id => id === desk_id);\n            const reserved = (this.reserved || []).find(id => id === desk_id);\n            const status = in_use ? 'unavailable' : reserved ? 'reserved' : 'available';\n            status_list.push({\n                id: desk_id,\n                styles: {\n                    fill: this.colour_map[`desk-${status}`],\n                    stroke: this.colour_map[`desk-${status}-stroke`],\n                },\n                status_id: status\n            });\n        }\n        this.status.emit(status_list);\n    }\n\n    private loadDesks() {\n        const level = this._service.Organisation.levelWithID(this.zone);\n        if (!level) { return ; }\n        const building = this._service.Organisation.buildings.find(bld => bld.id === level.building_id);\n        if (!building) { return; }\n        const desk_management = building.systems.desk_management;\n        if (!desk_management) { return; }\n        this.system_id = desk_management;\n    }\n}\n","import {\n    Component,\n    Input,\n    Output,\n    EventEmitter,\n    OnInit,\n    OnDestroy,\n    SimpleChanges,\n    OnChanges\n} from '@angular/core';\nimport { first } from 'rxjs/operators';\n\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { HashMap } from 'src/app/shared/utilities/types.utilities';\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\nimport { ExploreSpaceInfoComponent } from '../overlays/space-info/space-info.component';\nimport { MapStatus, MapListener, SpaceStatus } from './status.interfaces';\n\nimport * as dayjs from 'dayjs';\nimport { MatDialog } from '@angular/material/dialog';\nimport {\n    ExploreBookingModalComponent,\n    ExploreBookingModalData\n} from '../overlays/booking-modal/booking-modal.component';\nimport { MapFeature } from '@acaprojects/ngx-interactive-map/lib/helpers/map.interfaces';\n\n@Component({\n    selector: '[space-status]',\n    template: `\n        <div class=\"bindings\" *ngIf=\"space_list && is_today\">\n            <i\n                *ngFor=\"let space of space_list\"\n                binding\n                [sys]=\"space.id\"\n                mod=\"Bookings\"\n                bind=\"today\"\n                (modelChange)=\"processSpaceBookings(space, $event)\"\n            ></i>\n        </div>\n        <ng-content></ng-content>\n    `\n})\nexport class ExploreSpaceStatusComponent extends BaseDirective\n    implements OnInit, OnChanges, OnDestroy {\n    /** ID of the zone to grab the spaces */\n    @Input() public zone: string;\n    /** Updates the status based of the given time. Unix epoch in milliseconds */\n    @Input() public date: number;\n    /** Emitter for changes to the space status */\n    @Output() public status = new EventEmitter<MapStatus[]>();\n    /** Emitter for changes to the space status */\n    @Output() public listeners = new EventEmitter<MapListener[]>();\n    /** Emitter for changes to the space status */\n    @Output() public features = new EventEmitter<MapFeature[]>();\n    /** List of spaces to grab the statuses for */\n    public space_list: Space[] = [];\n    /** Mapping of spaces to active bookings */\n    public active_bookings: HashMap<Booking[]> = {};\n    /** Mapping of colours to statuses */\n    public colour_map: HashMap<string> = {};\n\n    /** Whether selected date time is the current day */\n    public get is_today() {\n        return dayjs().isSame(dayjs(this.date), 'd');\n    }\n\n    constructor(private _service: ApplicationService, private _dialog: MatDialog) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.initialised.pipe(first(_ => _)).subscribe(() => {\n            this.colour_map = this._service.setting('app.explore.colors') || {};\n            this.subscription(\n                'spaces',\n                this._service.Spaces.listen('list').subscribe(() => this.loadSpaces())\n            );\n            this.interval(\n                'update_status',\n                () => {\n                    this.updateSpaceBookings();\n                    this.calculateStatus();\n                },\n                60 * 1000\n            );\n        });\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.zone || changes.date) {\n            this.loadSpaces();\n        }\n        if (changes.zone) {\n            this.clearSpaces();\n        }\n    }\n\n    public ngOnDestroy() {\n        this.clearSpaces();\n    }\n\n    /**\n     * Determine the availability statuses for all the spaces in the set zone\n     */\n    public calculateStatus() {\n        this.timeout('process_statuses', () => {\n            const statuses: MapStatus[] = [];\n            for (const space of this.space_list) {\n                const status = this.getStatus(space, this.date);\n                const id =\n                    space.map_id.indexOf('area') < 0 ? `area-${space.map_id}-status` : space.map_id;\n                statuses.push({\n                    id,\n                    styles: {\n                        fill: this.colour_map[`space-${status}`] || '#000',\n                        opacity: 0.6\n                    },\n                    status_id: status\n                });\n            }\n            this.status.emit(statuses);\n        });\n    }\n\n    /**\n     * Get the status of the space at the set time\n     * @param space Space to get the status for\n     */\n    private getStatus(space: Space, datetime?: number): SpaceStatus {\n        if (!space.bookable) {\n            return 'not-bookable';\n        }\n        const bookings = this.active_bookings[space.id] || [];\n        const date = dayjs(datetime)\n            .startOf('m')\n            .second(1);\n        const current_booking = bookings.find(booking => {\n            const start = dayjs(booking.date).startOf('m');\n            const end = start.add(booking.duration, 'm');\n            return date.isAfter(start, 's') && date.isBefore(end, 'm');\n        });\n        if (current_booking) {\n            return 'unavailable';\n        }\n        const options = {\n            date: dayjs(this.date).valueOf(),\n            duration: 30,\n            host: this._service.Users.current\n        };\n        const rules = space.rulesFor(options);\n        if (rules.hide) {\n            return 'not-bookable';\n        } else if (!rules.auto_approve) {\n            return 'requestable';\n        }\n        return 'available';\n    }\n\n    /**\n     * Process raw booking data for the given space\n     * @param space Space associated with the bookings\n     * @param data List of booking data\n     */\n    public processSpaceBookings(space: Space, data: HashMap[]) {\n        this.timeout(\n            `space-${space.id}`,\n            () => {\n                const bookings = (data || []).map(\n                    bkn_data =>\n                        new Booking(this._service.Bookings, { ...bkn_data, room_ids: [space.id] })\n                );\n                this.active_bookings[space.id] = bookings;\n                this.calculateStatus();\n            },\n            10\n        );\n    }\n\n    /**\n     * Update the booking data for space on future dates\n     */\n    public updateSpaceBookings() {\n        /* istanbul ignore else */\n        if (this.is_today) {\n            return;\n        }\n        this.timeout(\n            'update_spaces',\n            () => {\n                const date = dayjs(this.date).startOf('d');\n                this._service.Spaces.query({\n                    from: date.unix(),\n                    to: date.endOf('d').unix(),\n                    show_declined: false,\n                    zone_ids: this.zone,\n                    cache: 10 * 1000\n                }).then(spaces => {\n                    spaces.forEach(space => this.processSpaceBookings(space, space.bookings));\n                });\n            },\n            50\n        );\n    }\n\n    /**\n     * Load listeners for space data\n     */\n    private loadSpaces() {\n        this.space_list = this._service.Spaces.filter(space => space.zones.indexOf(this.zone) >= 0);\n        const listeners: MapListener[] = [];\n        for (const space of this.space_list) {\n            const id =\n                space.map_id.indexOf('area') < 0 ? `area-${space.map_id}-status` : space.map_id;\n            listeners.push({\n                id,\n                event: 'mouseenter',\n                callback: () => this.showSpaceInfo(space)\n            });\n            listeners.push({\n                id,\n                event: 'mouseleave',\n                callback: () => this.features.emit([])\n            });\n            if (space.bookable) {\n                listeners.push({\n                    id,\n                    event: 'click',\n                    callback: () => this.openBookingModal(space)\n                });\n            }\n        }\n        this.listeners.emit(listeners);\n        this.updateSpaceBookings();\n        this.calculateStatus();\n    }\n\n    /**\n     * Clear current space and booking data\n     */\n    private clearSpaces() {\n        delete this.active_bookings;\n        this.active_bookings = {};\n    }\n\n    /**\n     * Update features to include space info for a space\n     * @param space Space to show details for\n     */\n    private showSpaceInfo(space: Space) {\n        const id = space.map_id.indexOf('area') < 0 ? `area-${space.map_id}-status` : space.map_id;\n        this.features.emit([\n            {\n                id,\n                coordinates: null,\n                content: ExploreSpaceInfoComponent,\n                data: {\n                    space,\n                    bookings: this.active_bookings[space.id],\n                    date: this.date\n                }\n            }\n        ]);\n    }\n\n    /**\n     * Open explore booking modal for the given space\n     * @param space Space to make booking for\n     */\n    private openBookingModal(space: Space) {\n        const status = this.getStatus(space, this.date);\n        if (status !== 'unavailable' && status !== 'not-bookable') {\n            this._dialog.open<ExploreBookingModalComponent, ExploreBookingModalData>(\n                ExploreBookingModalComponent,\n                {\n                    width: 'auto',\n                    height: 'auto',\n                    data: {\n                        date: this.date,\n                        space,\n                        bookings: this.active_bookings[space.id],\n                    }\n                }\n            );\n        } else {\n            this._service.notifyInfo(`${space.name} is unavailable at the selected time. Please select another space or time and try again.`);\n        }\n    }\n}\n","import {\n    Component,\n    OnInit,\n    Input,\n    Output,\n    EventEmitter,\n    ElementRef,\n    Renderer2,\n    ViewChild,\n} from '@angular/core';\n\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { Identity, Point } from 'src/app/shared/utilities/types.utilities';\n\nimport * as dayjs from 'dayjs';\nimport { eventToPoint } from 'src/app/shared/utilities/general.utilities';\n\nconst BLOCK_SIZE = 30;\nconst MINUTES_IN_DAY = 24 * 60;\n\n@Component({\n    selector: 'a-timeline',\n    templateUrl: './timeline.component.html',\n    styleUrls: ['./timeline.component.scss'],\n})\nexport class TimelineComponent extends BaseDirective implements OnInit {\n    /** Currently selected datetime */\n    @Input() public date: number;\n    /** Emitter for changes to the selected datetime */\n    @Output() public dateChange = new EventEmitter<number>();\n    /** List of time blocks to select */\n    public blocks: Identity[] = [];\n    /** Starting point for time move events */\n    private _start_position: Point;\n    /** Bounding box of the timeline container */\n    private _box: ClientRect;\n\n    /** Whether selected date time is the current day */\n    public get is_today() {\n        return dayjs().isSame(dayjs(this.date), 'd');\n    }\n\n    /** Offset of the current time from the start of the day */\n    public get offset() {\n        const date = dayjs();\n        const diff = date.diff(date.startOf('d'), 'm');\n        return (diff / MINUTES_IN_DAY) * 100;\n    }\n\n    /** Details of the currently selected datetime */\n    public get active_time(): Identity {\n        const date = dayjs(this.date);\n        const diff = date.diff(date.startOf('d'), 'm');\n        return {\n            id: date.isSame(dayjs(), 'd') ? 'Today' : date.format('DD MMM YYYY'),\n            name: date.format('h:mm A'),\n            left: (diff / MINUTES_IN_DAY) * 100,\n        };\n    }\n\n    @ViewChild('container', { static: true }) private _container: ElementRef<HTMLDivElement>;\n\n    constructor(private _renderer: Renderer2) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.blocks = this.generateBlocks();\n        this.interval('check_date', () => this.checkDate(), 15 * 1000);\n    }\n\n    /**\n     * Generate the display blocks for the timeline\n     */\n    public generateBlocks(): Identity[] {\n        const start = dayjs().startOf('d');\n        const end = start.endOf('d');\n        const blocks: Identity[] = [];\n        let current_time = start;\n        while (current_time.isBefore(end)) {\n            const is_hour = current_time.minute() === 0;\n            blocks.push({\n                id: current_time.format('HH:mm'),\n                name: is_hour ? current_time.format('h') : '',\n                is_hour,\n                left: (current_time.diff(start, 'm') / MINUTES_IN_DAY) * 100,\n            });\n            current_time = current_time.add(BLOCK_SIZE, 'm');\n        }\n        return blocks;\n    }\n\n    /**\n     * Change the date of the active date time\n     * @param amount Number of days to change by\n     */\n    public changeDate(amount: number = 1) {\n        let date = dayjs(this.date);\n        date = date.add(amount, 'd');\n        const now = dayjs();\n        this.date = date.isBefore(now, 'm') ? now.valueOf() : date.valueOf();\n        this.dateChange.emit(this.date);\n    }\n\n    public startMove(event: MouseEvent | TouchEvent) {\n        const position = eventToPoint(event);\n        this._start_position = position;\n        this._box = this._container.nativeElement.getBoundingClientRect();\n        const type = event instanceof MouseEvent ? 'mouse' : 'touch';\n        this.subscription(\n            'move',\n            this._renderer.listen('window', `${type}move`, (e) => this.onMove(e))\n        );\n        this.subscription(\n            'end',\n            this._renderer.listen('window', `${type === 'mouse' ? 'mouseup' : 'touchend'}`, (e) => {\n                this.unsub('move');\n                this.unsub('end');\n            })\n        );\n    }\n\n    public onMove(event: MouseEvent | TouchEvent) {\n        const position = eventToPoint(event);\n        const y_change = (this._start_position.x - position.x) / this._box.width;\n        const time_change = -Math.round(y_change * MINUTES_IN_DAY);\n        /* istanbul ignore else */\n        if (time_change !== 0) {\n            let old_date = dayjs(this.date);\n            let date = old_date;\n            date = date.add(time_change, 'm');\n            date = date.minute(Math.floor(Math.round(date.minute() / 5)) * 5);\n            this.date = date.valueOf();\n            this.dateChange.emit(this.date);\n            /* istanbul ignore else */\n            if (Math.abs(old_date.diff(date, 'm')) > 0) {\n                this._start_position = position;\n            }\n            this.checkDate();\n        }\n    }\n\n    /** Check that active datetime is not in the past */\n    private checkDate() {\n        const date = dayjs(this.date);\n        let now = dayjs();\n        now = now.minute(Math.floor(Math.ceil(now.minute() / 5)) * 5);\n        /* istanbul ignore else */\n        if (date.isBefore(now, 'm')) {\n            this.date = now.valueOf();\n            this.dateChange.emit(this.date);\n        }\n    }\n}\n","<div class=\"not-mobile\">\n    <div class=\"timeline\" explore #container>\n        <div\n            class=\"block\"\n            *ngFor=\"let item of blocks\"\n            [class.hour]=\"item.is_hour\"\n            [style.left]=\"item.left + '%'\"\n        >\n            <div class=\"text\">{{ item.name }}</div>\n            <div class=\"bar\"></div>\n        </div>\n    </div>\n    <div class=\"offset\" *ngIf=\"is_today\" [style.width]=\"offset + '%'\"></div>\n    <div class=\"active-time\" [style.left]=\"active_time.left + '%'\">\n        <div class=\"bar\"></div>\n        <div class=\"date\">\n            <button mat-icon-button [disabled]=\"is_today\" (tapped)=\"changeDate(-1)\">\n                <app-icon [icon]=\"{ class: 'material-icons', content: 'keyboard_arrow_left' }\"></app-icon>\n            </button>\n            <div class=\"text\" (mousedown)=\"startMove($event)\" (touchstart)=\"startMove($event)\">{{ active_time.id }}</div>\n            <button mat-icon-button (tapped)=\"changeDate()\">\n                <app-icon [icon]=\"{ class: 'material-icons', content: 'keyboard_arrow_right' }\"></app-icon>\n            </button>\n        </div>\n        <div class=\"time\" (mousedown)=\"startMove($event)\" (touchstart)=\"startMove($event)\">{{ active_time.name }}</div>\n        <div class=\"triangle\"></div>\n    </div>\n</div>\n<div class=\"pickers mobile-only\">\n    <a-date-field [(ngModel)]=\"date\" offset=\"top\" (ngModelChange)=\"dateChange.emit($event)\"></a-date-field>\n    <a-time-field [(ngModel)]=\"date\" (ngModelChange)=\"dateChange.emit($event)\"></a-time-field>\n</div>\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\nimport { Point } from 'src/app/shared/utilities/types.utilities';\n\n@Component({\n    selector: 'a-zoom-controls',\n    templateUrl: './zoom-controls.component.html',\n    styleUrls: ['./zoom-controls.component.scss']\n})\nexport class ZoomControlsComponent implements OnInit {\n    /** Current zoom level of the map */\n    @Input() public zoom: number;\n    /** Current center position of the map */\n    @Input() public position: Point;\n    /** Emitter for changes to the zoom value */\n    @Output() public zoomChange = new EventEmitter<number>();\n    /** Emitter for changes to the position */\n    @Output() public positionChange = new EventEmitter<Point>();\n\n    public min_zoom: number = 1;\n\n    public max_zoom: number = 10;\n\n    constructor() {}\n\n    public ngOnInit(): void {\n\n    }\n\n    public zoomIn() {\n        this.zoom = (this.zoom || this.min_zoom) * 1.2;\n        if (this.zoom > this.max_zoom) {\n            this.zoom = this.max_zoom;\n        }\n        this.zoomChange.emit(this.zoom);\n    }\n\n    public zoomOut() {\n        this.zoom = (this.zoom || this.min_zoom) * (1 / 1.2);\n        if (this.zoom < this.min_zoom) {\n            this.zoom = this.min_zoom;\n        }\n        this.zoomChange.emit(this.zoom);\n    }\n\n    public reset() {\n        this.zoom = this.min_zoom;\n        this.position = { x: 0.5, y: 0.5 };\n        this.zoomChange.emit(this.zoom);\n        this.positionChange.emit(this.position);\n    }\n}\n","<div class=\"zoom-control\">\n    <button mat-icon-button name=\"zoom-in\" (tapped)=\"zoomIn()\">\n        <app-icon [icon]=\"{ type: 'icon', class: 'material-icons', content: 'add' }\"></app-icon>\n    </button>\n    <button mat-icon-button name=\"zoom-out\" (tapped)=\"zoomOut()\">\n        <app-icon [icon]=\"{ type: 'icon', class: 'material-icons', content: 'remove' }\"></app-icon>\n    </button>\n    <button mat-icon-button name=\"reset\" (tapped)=\"reset()\">\n        <app-icon [icon]=\"{ type: 'icon', class: 'material-icons', content: 'replay' }\"></app-icon>\n    </button>\n</div>\n"]}