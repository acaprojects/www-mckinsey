{"version":3,"sources":["./src/app/shell/explore/components/map-overlay/map-overlay.template.html","./src/app/shell/explore/components/map-overlay/map-overlay.component.ts","./src/app/shell/explore/components/search/search.template.html","./src/app/shell/explore/components/search/search.component.ts","./src/app/shell/explore/components/timeline/timeline.component.html","./src/app/shell/explore/components/timeline/timeline.component.ts","./src/app/shell/explore/explore.template.html","./src/app/shell/explore/explore.component.ts","./src/app/shell/explore/explore.module.ts"],"names":[],"mappings":"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","file":"shell-explore-explore-module-ngfactory-es2015.js","sourcesContent":["<div class=\"container\" (window:tap)=\"tapWindow($event)\" (window:resize)=\"model.show = {}\">\n    <div class=\"bindings\" *ngIf=\"model.level && model.level.active\">\n        <i\n            binding\n            [(model)]=\"model.desks.free\"\n            (valueChange)=\"processRooms()\"\n            [sys]=\"model.system\"\n            mod=\"DeskManagement\"\n            [bind]=\"model.level.active.id + ':free_count'\"\n        ></i>\n        <i\n            binding\n            [(model)]=\"model.desks.count\"\n            (valueChange)=\"processRooms()\"\n            [sys]=\"model.system\"\n            mod=\"DeskManagement\"\n            [bind]=\"model.level.active.id + ':desk_count'\"\n        ></i>\n    </div>\n    <div class=\"zoom\">\n        <button mat-icon-button (touchrelease)=\"zoom(1.2)\">\n            <app-icon [icon]=\"{class: 'material-icons', content: 'add'}\"></app-icon>\n        </button>\n        <button\n            mat-icon-button\n            (touchrelease)=\"zoom(1 / 1.2)\"\n            [disabled]=\"!settings || !settings.zoom || settings.zoom <= 100\"\n        >\n            <app-icon [icon]=\"{class: 'material-icons', content: 'remove'}\"></app-icon>\n        </button>\n        <button mat-icon-button (touchrelease)=\"reset()\">\n            <app-icon [icon]=\"{class: 'material-icons', content: 'refresh'}\"></app-icon>\n        </button>\n    </div>\n    <div class=\"not-mobile\">\n        <div class=\"simple\" *ngIf=\"!model.old\">\n            <ng-container *ngFor=\"let item of model.options; let i = index\">\n                <button\n                    mat-button\n                    name=\"black inverse\"\n                    format=\"mini-action\"\n                    (touchrelease)=\"action(item)\"\n                    tooltip\n                    [(show)]=\"model.show[item.id]\"\n                    position=\"left\"\n                    [offset]=\"item.offset || 'start'\"\n                    [template]=\"model.template[item.id]\"\n                    (touchrelease)=\"item.template ? (model.show[item.id] = !model.show[item.id]) : ''\"\n                >\n                    <i *ngIf=\"item.icon\" [class]=\"item.icon.class\" [class.large]=\"item.large\"\n                        >{{ item.icon.value }}</i\n                    >\n                    <div class=\"number\" *ngIf=\"item.number\">{{ model.level?.active?.number }}</div>\n                </button>\n            </ng-container>\n        </div>\n        <div class=\"old-overlay\" *ngIf=\"model.old\">\n            <div\n                class=\"level\"\n                *ngIf=\"model.level && model.level.list && model.level.list.length\"\n                [class.push]=\"model.search === 'spaces' || model.search === 'people'\"\n            >\n                <dropdown\n                    klass=\"form\"\n                    [list]=\"model.buildings.names\"\n                    [(model)]=\"model.buildings.index\"\n                    (modelChange)=\"setBuilding(model.buildings.list[$event])\"\n                ></dropdown>\n                <dropdown\n                    klass=\"form\"\n                    [list]=\"model.level.names\"\n                    [(model)]=\"model.level.index\"\n                    (modelChange)=\"setLevel(model.level.list[$event])\"\n                ></dropdown>\n                <div\n                    class=\"show-state\"\n                    *ngIf=\"model.zones && model.zones.enabled && model.search !== 'people'\"\n                >\n                    <div class=\"text\">Zones</div>\n                    <div class=\"checkbox\">\n                        <toggle\n                            name=\"zones\"\n                            [(model)]=\"model.zones.show\"\n                            (modelChange)=\"updateState()\"\n                            type=\"ios\"\n                        ></toggle>\n                    </div>\n                </div>\n                <ng-container *ngTemplateOutlet=\"key_list\"></ng-container>\n                <div class=\"header-icon\" *ngIf=\"has_details\" (touchrelease)=\"viewBookingRules()\">\n                    <i class=\"material-icons\">info</i>\n                </div>\n            </div>\n            <div class=\"options info\">\n                <!-- <div\n                    class=\"btn info\"\n                    tooltip\n                    (click)=\"model.show.info = !model.show.info\"\n                    [(show)]=\"model.show.info\"\n                    position=\"left\"\n                    [template]=\"room_details\"\n                >\n                    <img src=\"assets/icon/info.svg\" />\n                </div> -->\n                <div class=\"btn\" *ngIf=\"!model.zones.enabled && model.zones.status\">\n                    <button\n                        mat-button\n                        *ngIf=\"!model.map_settings || (model.map_settings.settings !== false && model.zones.status)\"\n                        [name]=\"model.show.settings ? '' : 'black inverse'\"\n                        format=\"mini-action\"\n                        (touchrelease)=\"model.show.settings = !model.show.settings\"\n                        tooltip\n                        [(show)]=\"model.show.settings\"\n                        position=\"left\"\n                        offset=\"start\"\n                        [template]=\"map_settings\"\n                    >\n                        <i class=\"material-icons\">settings</i>\n                    </button>\n                    <ng-template #map_settings>\n                        <div class=\"settings\">\n                            <div class=\"item\">\n                                <div class=\"text\">Desk Status</div>\n                                <div class=\"checkbox\">\n                                    <toggle\n                                        name=\"zones\"\n                                        [(model)]=\"model.show.desks\"\n                                        (modelChange)=\"updateState()\"\n                                        type=\"ios\"\n                                    ></toggle>\n                                </div>\n                            </div>\n                            <div class=\"item\">\n                                <div class=\"text\">Room Status</div>\n                                <div class=\"checkbox\">\n                                    <toggle\n                                        name=\"zones\"\n                                        [(model)]=\"model.show.rooms\"\n                                        (modelChange)=\"updateState()\"\n                                        type=\"ios\"\n                                    ></toggle>\n                                </div>\n                            </div>\n                            <div class=\"item\">\n                                <div class=\"text\">Team Tables</div>\n                                <div class=\"checkbox\">\n                                    <toggle\n                                        name=\"zones\"\n                                        [(model)]=\"model.show.teams\"\n                                        (modelChange)=\"updateState()\"\n                                        type=\"ios\"\n                                    ></toggle>\n                                </div>\n                            </div>\n                            <div class=\"item\">\n                                <div class=\"text\">Zones</div>\n                                <div class=\"checkbox\">\n                                    <toggle\n                                        name=\"zones\"\n                                        [(model)]=\"model.zones.show\"\n                                        (modelChange)=\"updateState()\"\n                                        type=\"ios\"\n                                    ></toggle>\n                                </div>\n                            </div>\n                        </div>\n                    </ng-template>\n                </div>\n                <!-- <div class=\"btn\" *ngIf=\"!model.zones.enabled && model.zones.infourl == ''\">\n                    <button mat-button\n                        *ngIf=\"!model.map_settings || model.map_settings.info !== false\"\n                        [name]=\"model.show.info ? '' : 'black inverse'\"\n                        format=\"mini-action\"\n                        (touchrelease)=\"model.show.info = !model.show.info\"\n                        tooltip\n                        [(show)]=\"model.show.info\"\n                        position=\"right\"\n                        [template]=\"room_info\"\n                    >\n                        <i class=\"material-icons\">info</i>\n                        <img src=\"assets/icon/info.svg\">\n                    </button>\n                </div> -->\n                <div class=\"btn\" *ngIf=\"!model.zones.enabled && model.zones.filters\">\n                    <button\n                        mat-button\n                        *ngIf=\"!model.map_settings || model.map_settings.filters !== false\"\n                        [name]=\"model.show_filters ? '' : 'black inverse'\"\n                        format=\"mini-action\"\n                        (touchrelease)=\"model.show_filters = !model.show_filters\"\n                    >\n                        <i class=\"material-icons\">filter_list</i>\n                    </button>\n                </div>\n                <button\n                    mat-button\n                    name=\"black\"\n                    *ngIf=\"model.back\"\n                    format=\"mini-action\"\n                    (touchrelease)=\"back()\"\n                >\n                    <i class=\"material-icons\">arrow_back</i>\n                </button>\n            </div>\n        </div>\n        <ng-template #room_info>\n            <div class=\"room\" *ngIf=\"model.level && model.level.active && model.desks\">\n                <div class=\"item\" *ngIf=\"model.desks && model.desks.count\">\n                    <div class=\"text\">Desks free</div>\n                    <div\n                        class=\"value\"\n                        [class.low]=\"model.desks.percent > 75\"\n                        [class.medium]=\"model.desks.percent > 25 && model.desks.percent <= 75\"\n                        [class.high]=\"model.desks.percent <= 25\"\n                    >\n                        {{ model.desks.free }}\n                    </div>\n                    <div class=\"value\">&nbsp;of {{ model.desks.count }}</div>\n                </div>\n                <div class=\"item\" *ngIf=\"model.rooms && model.rooms.count\">\n                    <div class=\"text\">Spaces free</div>\n                    <div\n                        class=\"value\"\n                        [class.low]=\"model.rooms.percent > 75\"\n                        [class.medium]=\"model.rooms.percent > 25 && model.rooms.percent <= 75\"\n                        [class.high]=\"model.rooms.percent <= 25\"\n                    >\n                        {{ model.rooms.free }}\n                    </div>\n                    <div class=\"value\">&nbsp;of {{ model.rooms.count }}</div>\n                </div>\n            </div>\n        </ng-template>\n        <ng-template #room_info>\n            <div class=\"room\" *ngIf=\"model.level && model.level.active && model.desks\">\n                <div class=\"item\">\n                    <div class=\"text\"># of desks</div>\n                    <div class=\"value\">{{ model.desks.count || '0' }}</div>\n                </div>\n                <div class=\"item\">\n                    <div class=\"text\">Free desks</div>\n                    <div\n                        class=\"value\"\n                        [class.low]=\"model.desks.free > 50\"\n                        [class.medium]=\"model.desks.free > 25 && model.desks.free <= 25\"\n                        [class.high]=\"model.desks.free <= 25\"\n                    >\n                        {{ model.desks.free || '0' }}\n                    </div>\n                </div>\n            </div>\n        </ng-template>\n\n        <ng-template #room_details>\n            <div class=\"room\" *ngIf=\"model.level && model.level.active\">\n                <div class=\"item\">\n                    <div class=\"text\"># of Rooms</div>\n                    <div class=\"value\">{{ model.rooms.count || '0' }}</div>\n                </div>\n                <div class=\"item\">\n                    <div class=\"text\">Free Rooms</div>\n                    <div\n                        class=\"value\"\n                        [class.low]=\"model.desks.free > 50\"\n                        [class.medium]=\"model.desks.free > 25 && model.desks.free <= 25\"\n                        [class.high]=\"model.desks.free <= 25\"\n                    >\n                        {{ model.rooms.free || '0' }}\n                    </div>\n                </div>\n            </div>\n        </ng-template>\n        <ng-template #key_list>\n            <div class=\"key-list\">\n                <ng-container *ngFor=\"let type of model.keys.types\">\n                    <div class=\"divider\" *ngIf=\"model.keys.types.length > 1\">\n                        <div class=\"bar\"></div>\n                        <div class=\"type\">{{ type }}</div>\n                        <div class=\"bar\"></div>\n                    </div>\n                    <div class=\"item\" *ngFor=\"let key of model.keys.groups[type]\">\n                        <div\n                            class=\"circle \"\n                            style=\"width:2em\"\n                            [style.background-color]=\"key.color\"\n                            [class.icon]=\"key.icon || key.image\"\n                        >\n                            <div class=\"icon\" *ngIf=\"key.icon || key.image\">\n                                <div\n                                    *ngIf=\"key.image\"\n                                    class=\"image\"\n                                    [style.background-image]=\"'url(' + key.image + ')'\"\n                                ></div>\n                                <i *ngIf=\"key.icon\" [class]=\"key.icon.class\"\n                                    >{{ key.icon.value }}</i\n                                >\n                            </div>\n                        </div>\n                        <div class=\"name\">{{ key.name }}</div>\n                    </div>\n                </ng-container>\n            </div>\n        </ng-template>\n    </div>\n    <div class=\"mobile\">\n        <div class=\"option-list mobile-only\" [class.show]=\"model.show_menu\">\n            <div class=\"group\">\n                <ng-container *ngFor=\"let item of model.options; let i = index\">\n                    <button\n                        mat-button\n                        [name]=\"'black inverse no-margin ' + item.class\"\n                        format=\"mini-action\"\n                        (touchrelease)=\"action(item)\"\n                        tooltip\n                        [(show)]=\"model.show[item.id + '_mobile']\"\n                        position=\"right\"\n                        [offset]=\"item.offset || 'start'\"\n                        [template]=\"model.template[item.id]\"\n                        [style.transform]=\"model.show_menu ? 'translateY(' + 2.5 * (i + 1) + 'em)' : ''\"\n                        (touchrelease)=\"item.template ? (model.show[item.id + '_mobile'] = !model.show[item.id + '_mobile']) : ''\"\n                    >\n                        <i\n                            *ngIf=\"item.icon && !item.imgSrc\"\n                            [class]=\"item.icon.class\"\n                            [class.large]=\"item.large\"\n                            >{{ item.icon.value }}</i\n                        >\n                        <img\n                            *ngIf=\"!item.icon && item.imgSrc\"\n                            style=\"width:15%\"\n                            [src]=\"item.imgSrc\"\n                        />\n                        <div class=\"number\" *ngIf=\"item.number\">\n                            {{ model.level?.active?.number }}\n                        </div>\n                    </button>\n                </ng-container>\n            </div>\n            <button\n                mat-button\n                name=\"black inverse no-margin\"\n                format=\"action\"\n                (touchrelease)=\"model.show_menu = !model.show_menu\"\n            >\n                <i class=\"material-icons\">{{ model.show_menu ? 'add' : 'more_vert' }}</i>\n            </button>\n        </div>\n        <div\n            class=\"header-icon fixed mobile-only\"\n            *ngIf=\"has_details\"\n            (touchrelease)=\"viewBookingRules()\"\n        >\n            <i class=\"material-icons\">info</i>\n        </div>\n    </div>\n\n    <div class=\"filters\" [class.show]=\"model.show_filters\">\n        <div class=\"header\">\n            <div class=\"heading\">Filter zones</div>\n            <div class=\"close\" (touchrelease)=\"model.show_filters = false\">\n                <div class=\"material-icons\">close</div>\n            </div>\n        </div>\n        <div class=\"body\">\n            <div class=\"item\" *ngFor=\"let item of model.level.active.map.features\">\n                <checkbox [(model)]=\"item.active\" [label]=\"item.name\"></checkbox>\n            </div>\n        </div>\n        <div class=\"footer\">\n            <button mat-button name=\"inverse\" (touchrelease)=\"applyFilters()\">Apply filters</button>\n        </div>\n    </div>\n</div>\n","\nimport { Component, Input, OnInit, ViewChild, TemplateRef, OnChanges } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\n\nimport { AppService } from '../../../../services/app.service';\nimport { ILevel, IBuilding } from '../../../../services/data/buildings.service';\nimport { BaseDirective } from '../../../../shared/globals/base.directive';\nimport { BookingRulesModalComponent } from '../../../../overlays/booking-rules-modal/booking-rules-modal.component';\nimport { MapFilterModalComponent } from '../../../../overlays/map-filter-modal/map-filter-modal.component';\nimport { ItemPickModalComponent, ItemPickModalData } from '../../../../overlays/item-pick-modal/item-pick-model.component';\n\n@Component({\n    selector: 'explore-map-overlay',\n    templateUrl: './map-overlay.template.html',\n    styleUrls: ['./map-overlay.styles.scss']\n})\nexport class ExploreMapOverlayComponent extends BaseDirective implements OnInit, OnChanges {\n    @Input() change: boolean;\n    /** Whether it has bookings details */\n    public has_details: boolean;\n\n    public model: any = {};\n    public settings: any = {};\n\n    @ViewChild('room_info', { static: true }) private room_info: TemplateRef<any>;\n    @ViewChild('key_list', { static: true }) private key_list: TemplateRef<any>;\n\n    constructor(private service: AppService, private _dialog: MatDialog) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.service.Buildings.listen((bld) => {\n\n            if (bld) {\n                this.model.bld = bld;\n                this.has_details = !!bld.booking_details;\n                this.model.system = bld.systems.desks;\n                this.loadLevels();\n\n            }\n        });\n        this.loadbuildings();\n        this.model.desks = {};\n        this.model.show = {};\n\n\n\n        // this.model.buildingidList=this.model.buildings.filter((i)=> i.name);\n        this.model.keys\n        this.model.template = {\n            room: this.room_info,\n            keys: this.key_list\n        };\n        // this.model.options = [\n        //     { id: 'level', name: 'Level Select', large: true, icon: { class: 'material-icons', value: 'layers' }, number: true, action: 'pickLevel' },\n        //     { id: 'keys', name: 'Keys', icon: { class: 'material-icons', value: 'vpn_key' }, template: true },\n        //     { id: 'settings', name: 'Map Settings', icon: { class: 'material-icons', value: 'settings' }, action: 'updateSettings' },\n        //     { id: 'filters', name: 'Map Filters', icon: { class: 'material-icons', value: 'filter_list' }, action: 'showFilters' },\n        //     { id: 'room', name: 'Room Info', icon: { class: 'material-icons', value: 'info' }, offset: 'middle', template: true }\n        // ];\n\n        this.model.options = [\n            { id: 'building', name: 'Building Select', icon: { class: 'material-icons', value: 'location_city' }, action: 'pickBuilding' },\n            { id: 'level', name: 'Level Select', large: true, icon: { class: 'material-icons', value: 'layers' }, number: true, action: 'pickLevel' },\n            { id: 'keys', name: 'Keys', icon: { class: 'material-icons', value: 'vpn_key' }, template: true },\n            // { id: 'room', name: 'Room Info', icon: { class: 'mobile-menu-info' }, offset: 'middle', template: true }\n            // { id: 'room', name: 'Room Info', imgSrc: 'assets/icon/info.svg', offset: 'middle', template: true }\n        ];\n        this.model.rooms = {};\n        this.init();\n        this.setTemplates();\n    }\n\n    public ngOnChanges(changes: any) {\n        if (changes.change) {\n            setTimeout(() => {\n                this.model.rooms.list = this.service.Rooms.list();\n                this.processRooms();\n            }, 100);\n        }\n    }\n\n    public setTemplates() {\n        if (!this.room_info || !this.key_list) {\n            return setTimeout(() => this.setTemplates(), 500);\n        }\n        this.model.template.room = this.room_info;\n        this.model.template.keys = this.key_list;\n        this.subscription('explore_lvl', this.service.listen('EXPLORE.level', (value) => this.setLevelByID(value, false)));\n        this.subscription('explore_search', this.service.listen('EXPLORE.search', (value) => this.model.search = value));\n    }\n\n    public tapWindow(e: any) {\n        this.model.keys.show = (this.model.keys ? false : this.model.keys);\n    }\n\n    public init() {\n        if (!this.service.Settings.setup) {\n            return setTimeout(() => this.init(), 500);\n        }\n        this.model.map_settings = this.service.Settings.get('app.map') || {};\n        this.model.keys = {};\n        this.model.keys.groups = this.model.map_settings.keys || {};\n        this.model.keys.types = Object.keys(this.model.keys.groups);\n        this.model.zones = {};\n        this.model.zones.enabled = this.service.Settings.get('app.zones.enabled');\n        this.model.zones.toggle = this.service.Settings.get('app.zones.toggle');\n        this.model.settings = this.service.Settings.get('app.explore') || {};\n        this.subscription('bld', this.service.Buildings.listen((bld) => bld ? this.setBuilding(bld, false) : null));\n        if (this.model.zones.enabled && this.model.zones.toggle) {\n            this.model.keys.types = [this.model.zones.toggle];\n        }\n        if (this.model.keys) {\n            this.model.keys.list = (this.model.keys.groups.room || []).concat(this.model.keys.groups.general || []);\n        }\n        // Remove keys option if there are no keys to display\n        if ((!this.model.keys.types || this.model.keys.types.length <= 0) && (!this.model.keys.list || this.model.keys.list.length <= 0)) {\n            for (const opt of this.model.options) {\n                if (opt.id === 'keys') {\n                    this.model.options.splice(this.model.options.indexOf(opt), 1);\n                    break;\n                }\n            }\n        }\n        if (this.model.map_settings && this.model.map_settings.settings === false) {\n            for (const opt of this.model.options) {\n                if (opt.id === 'settings') {\n                    this.model.options.splice(this.model.options.indexOf(opt), 1);\n                    break;\n                }\n            }\n        }\n        if (this.model.map_settings && this.model.map_settings.info === false) {\n            for (const opt of this.model.options) {\n                if (opt.id === 'room') {\n                    this.model.options.splice(this.model.options.indexOf(opt), 1);\n                    break;\n                }\n            }\n        }\n        this.settings = { zoom: 0 };\n        this.model.old = this.service.Settings.get('app.explore.old_overlay');\n        this.service.set('EXPLORE.settings', this.settings);\n        this.subscription('rooms', this.service.Rooms.listen('room_list', () => {\n            this.model.rooms.list = this.service.Rooms.list();\n            this.processRooms();\n        }));\n        this.initOld();\n    }\n\n    public initOld() {\n        this.subscription('exp_show_dsks', this.service.listen('EXPLORE.show.desks', (state) => {\n            this.model.show.desks = state;\n        }));\n        this.subscription('exp_show_rms', this.service.listen('EXPLORE.show.rooms', (state) => {\n            this.model.show.rooms = state;\n        }));\n        this.subscription('exp_show_tms', this.service.listen('EXPLORE.show.teams', (state) => {\n            this.model.show.teams = state;\n        }));\n        this.subscription('exp_show_zns', this.service.listen('EXPLORE.show.zones', (state) => {\n            this.model.zones.show = state;\n        }));\n    }\n\n    public loadLevels() {\n        this.model.level = { list: [] };\n        if (this.model.bld) {\n            this.model.level.list = this.model.bld.levels;\n            this.model.level.names = [];\n            for (const lvl of this.model.level.list) {\n                this.model.level.names.push(lvl.name);\n            }\n\n            this.setLevel(this.model.level.list[0]);\n        }\n    }\n\n    public loadbuildings() {\n        this.model.buildings = { }\n        this.model.buildings.list = this.service.Buildings.list() || [];\n        this.model.buildings.names = this.model.buildings.list.map((i) => `${i.code} - ${i.name}${i.address ? ' - ' + i.address : ''}`);\n        let saved_building;\n        if (localStorage) {\n            const id = localStorage.getItem('STAFF.map.building') || '';\n            if (id) {\n                saved_building = this.model.buildings.list.find(i => i.id === id);\n            }\n        };\n        if (saved_building) {\n            this.setBuilding(saved_building);\n        } else {\n            this.setBuilding(this.service.Buildings.current());\n        }\n    }\n\n    public setBuildingByID(id: string, emit: boolean = true) {\n        if (id && this.model.buildings && this.model.bld) {\n            for (const bld of this.model.buildings.list) {\n                if (bld.id === id) {\n                    this.setBuilding(bld, emit);\n                    return bld;\n                }\n            }\n        }\n        return null;\n    }\n    public setLevelByID(id: string, emit: boolean = true) {\n        if (id && this.model.level && this.model.level.list) {\n            for (const lvl of this.model.level.list) {\n                if (lvl.id === id) {\n                    this.setLevel(lvl, emit);\n                    return lvl;\n                }\n            }\n        }\n        return null;\n    }\n\n    public setBuilding(bld: IBuilding, post: boolean = true) {\n        this.model.buildings.active = bld;\n        //this.model.bld would hold the value of current building in picture\n        this.model.bld = bld;\n        this.has_details = !!bld.booking_details;\n        this.loadLevels();\n        // this.model.system = bld.systems.desks;\n        this.model.buildings.index = this.model.buildings.list.indexOf(bld);\n        if (localStorage) {\n            localStorage.setItem('STAFF.map.building', bld.id);\n        }\n        if (post) {\n            this.service.Buildings.set(bld.id, false);\n        }\n\n    }\n    public setLevel(lvl: ILevel, emit: boolean = true) {\n        if (lvl && this.model.level && this.model.level.list && this.model.level.list.indexOf(lvl) >= 0) {\n            const previous_lvl = this.model.level.active;\n            this.model.level.active = lvl;\n            this.model.level.index = this.model.level.list.indexOf(lvl);\n            if (emit && (!previous_lvl || previous_lvl.id !== lvl.id)) {\n                this.service.set('EXPLORE.level', lvl.id);\n            }\n            this.processRooms();\n        }\n    }\n\n    public pickLevel() {\n        if (this.model.level && this.model.level.list) {\n            const lvl = this.model.level.active;\n            const ref = this._dialog.open<ItemPickModalComponent, ItemPickModalData>(ItemPickModalComponent, {\n                data: {\n                    name: 'Level',\n                    options: this.model.level.list,\n                    selected: [lvl]\n                }\n            });\n            ref.afterClosed().subscribe(() => {\n                this.setLevelByID(`${ref.componentInstance.selected[0].id}`);\n                this.model.show_menu = false;\n            });\n        }\n    }\n\n    public pickBuilding() {\n        if (this.model.buildings) {\n            const bld = this.model.buildings.active;\n            const ref = this._dialog.open<ItemPickModalComponent, ItemPickModalData>(ItemPickModalComponent, {\n                data: {\n                    name: 'Building',\n                    options: this.model.buildings.list,\n                    selected: [bld]\n                }\n            });\n            ref.afterClosed().subscribe(() => {\n                this.setBuildingByID(`${ref.componentInstance.selected[0].id}`);\n                this.model.show_menu = false;\n            });\n        }\n    }\n\n    public processRooms() {\n        if (this.model.rooms && this.model.rooms.list) {\n              this.model.rooms.count = 0;\n            this.model.rooms.free = 0;\n            for (const rm of this.model.rooms.list) {\n                               if (rm.level && rm.level.id === this.model.level.active.id && rm.bookable) {\n                                    this.model.rooms.count++;\n\n                    if (!rm.in_use) {\n                        this.model.rooms.free++;\n\n                    }\n                }\n            }\n            this.model.rooms.percent = (this.model.rooms.free / (this.model.rooms.count || 1)) * 100;\n        }\n\n        if (this.model.desks) {\n            this.model.desks.percent = ((this.model.desks.free || 0) / (this.model.desks.count || 1)) * 100;\n        }\n    }\n\n    public updateSettings() {\n        const ref = this._dialog.open(MapFilterModalComponent, {});\n        ref.afterClosed().subscribe(() => {\n            this.model.show_menu = false;\n            this.model.show_filters = false;\n        });\n    }\n\n    public showFilters() {\n        this.model.show_filters = !this.model.show_filters;\n    }\n\n    public updateState() {\n        this.service.set('EXPLORE.show.desks', this.model.show.desks);\n        this.service.set('EXPLORE.show.rooms', this.model.show.rooms);\n        this.service.set('EXPLORE.show.teams', this.model.show.teams);\n        if (this.model.zones) {\n            this.service.set('EXPLORE.show.zones', this.model.zones.show);\n        }\n        this.service.set('EXPLORE.filters', !this.service.get('EXPLORE.filters'));\n    }\n\n    public action(item: any) {\n        if (item.action && this[item.action] instanceof Function) {\n            this[item.action]();\n        }\n    }\n\n    public toggle(name: string, mobile: boolean = false) {\n        const key = `${name}${mobile ? '_mobile' : ''}`;\n        setTimeout(() => {\n            if (this.model[name]) {\n                this.model[name].show = !this.model[name].show;\n            } else {\n                this.model.show[key] = !this.model.show[key];\n            }\n        }, 300);\n    }\n\n    public zoom(value) {\n        const zoom = Math.max(100, ((this.settings.zoom || 100)) * value);\n        if (!this.settings) { this.settings = {}; }\n        this.settings.zoom = zoom;\n        this.postSettings();\n    }\n\n    public reset() {\n        if (!this.settings) { this.settings = {}; }\n        this.settings.zoom = 100;\n        this.settings.center = { x: .5, y: .5 };\n        this.postSettings();\n    }\n\n    public applyFilters() {\n        const zones = this.model.level.active.map.features;\n        const hide: string[] = [];\n        for (const z of zones) {\n            if (!z.active) { hide.push(z.id); }\n        }\n        this.service.set('EXPLORE.map.hide', hide.length === zones.length ? [] : hide);\n        this.model.show_filters = false;\n    }\n\n    public postSettings() {\n        this.settings = JSON.parse(JSON.stringify(this.settings));\n        this.service.set('EXPLORE.settings', this.settings);\n    }\n\n    /**\n     * Open booking rules modal\n     */\n    public viewBookingRules() {\n        this._dialog.open(BookingRulesModalComponent, {\n            data: {\n                building: this.model.bld,\n                from_map: true\n            }\n        });\n    }\n\n}\n","<div class=\"container\" [class.route]=\"model.route\">\n    <div class=\"tapzone\" (window:tap)=\"updateShow()\"></div>\n    <div class=\"search\" [class.show]=\"model.show\">\n        <div class=\"header\" [class.banner]=\"model.show && model.banner\" [class.roles]=\"model.banner_roles\">\n            <div class=\"banner-roles\" *ngIf=\"model.banner_roles\">\n                <div class=\"role\" *ngFor=\"let r of model.role.list; let i = index\">\n                    <button mat-button [name]=\"model.role.active === i ? 'wide banner inverse' : 'wide banner'\" (touchrelease)=\"(model.role.active === i ? model.role.active = -1 : model.role.active = i); filter(true)\">\n                        <div class=\"icon\" *ngIf=\"r.icon || r.image\">\n                            <i *ngIf=\"r.icon\" [class]=\"r.icon.class\">{{r.icon.value}}</i>\n                            <img *ngIf=\"r.image\" [src]=\"r.image\" [alt]=\"r.name\">\n                        </div>\n                        <div class=\"text\">{{r.name}}</div>\n                    </button>\n                </div>\n            </div>\n            <div class=\"field\">\n                <searchbar [dictation]=\"false\" [(filter)]=\"model.search\" (filterChange)=\"filter()\" (focus)=\"item = null; model.focus = true; updateShow()\" (blur)=\"model.focus = false; updateShow()\"\n                    [placeholder]=\"model.search_type === 'people' ? 'Search for people...' : (model.search_type === 'spaces' ? 'Search for spaces...' : 'Search...')\">\n                    <div class=\"close\" *ngIf=\"model.search_type !== 'spaces' && !model.banner_roles && model.role && model.role.list && model.role.list.length > 0 && (!model.settings || !model.settings.banner || model.settings.banner.people !== 'roles')\"\n                        (touchrelease)=\"model.show_roles = true\" tooltip [(show)]=\"model.show_roles\" [template]=\"rolelist\"\n                        offset=\"end\">\n                        <i center class=\"material-icons\" [class.active]=\"(model.role.active || model.role.active === 0) && model.role.active !== -1\">filter_list</i>\n                        <ng-template #rolelist>\n                            <div class=\"role-list\" *ngIf=\"model.role.list && model.role.list.length > 0\">\n                                <div class=\"header\">Select Role</div>\n                                <div class=\"role\">\n                                    <button mat-button [name]=\"model.role.active === undefined || model.role.active === -1 ? 'wide' : 'wide inverse'\"\n                                        (touchrelease)=\"model.role.active = -1; model.show_roles = false; filter()\">\n                                        <div class=\"text\">None</div>\n                                    </button>\n                                </div>\n                                <div class=\"role\" *ngFor=\"let r of model.role.list; let i = index\">\n                                    <button mat-button [name]=\"model.role.active === i ? 'wide' : 'wide inverse'\" (touchrelease)=\"(model.role.active === i ? model.role.active = -1 : model.role.active = i); model.show_roles = false; filter()\">\n                                        <div class=\"icon\" *ngIf=\"r.icon || r.image\">\n                                            <i *ngIf=\"r.icon\" [class]=\"r.icon.class\">{{r.icon.value}}</i>\n                                            <img *ngIf=\"r.image\" [src]=\"r.image\" [alt]=\"r.name\">\n                                        </div>\n                                        <div class=\"text\">{{r.name}}</div>\n                                    </button>\n                                </div>\n                            </div>\n                        </ng-template>\n                    </div>\n                </searchbar>\n            </div>\n        </div>\n        <div class=\"body\">\n            <div class=\"list\" *ngIf=\"!model.loading && model.inited\">\n                <ng-container *ngIf=\"filtered_items\">\n                    <cdk-virtual-scroll-viewport class=\"list\" itemSize=\"90\">\n                        <ng-container *cdkVirtualFor=\"let item of filtered_items\">\n                            <div class=\"user\">\n                                <div class=\"item details\">\n                                    <div class=\"name\">{{item.name}}</div>\n                                    <div class=\"email\" *ngIf=\"!item.level\">\n                                        <a [href]=\"'mailto:' + item.email\">{{item.email}}</a>\n                                    </div>\n                                    <div class=\"email\" *ngIf=\"item.level\">{{item.level?.name}}</div>\n                                </div>\n                                <div class=\"item info\" *ngIf=\"item.location\">\n                                    <div class=\"loc\" *ngIf=\"item.location.fixed\">\n                                        {{item.location.name}}\n                                    </div>\n                                    <app-icon [icon]=\"{ class: 'material-icons', content: item.location ? (item.location.fixed ? 'room' :\n                                    'wifi') : '' }\"></app-icon>\n                                    <div class=\"details\" *ngIf=\"item.location.display\">\n                                        <div class=\"name\">{{item.location.display.building}}</div>\n                                        <div class=\"email\">\n                                            {{item.location.display.level}}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"item opts\">\n                                    <button mat-button name=\"red\" (touchrelease)=\"find(item)\">\n                                        <div>Find</div>\n                                    </button>\n                                    <button mat-button name=\"red\" *ngIf=\"item.level && model.settings.control && item.support_url\" (touchrelease)=\"control(item)\">\n                                        <div>Control</div>\n                                    </button>\n                                    <button mat-button (touchrelease)=\"call(item)\" [disabled]=\"item.phone === -1\" *ngIf=\"!item.level\">\n                                        <div class=\"text\" *ngIf=\"!item.loading\">Contact</div>\n                                        <div class=\"icon\" *ngIf=\"item.loading\">\n                                            <spinner type=\"circle-ring\" color=\"#fff\"></spinner>\n                                        </div>\n                                    </button>\n                                </div>\n                            </div>\n                        </ng-container>\n                    </cdk-virtual-scroll-viewport>\n                </ng-container>\n            </div>\n            <div class=\"no-item center\" *ngIf=\"(model.loading || (!filtered_items || filtered_items.length <= 0) || !model.inited)\">\n                <div class=\"icon\">\n                    <spinner *ngIf=\"model.loading\" type=\"circle-ring\" color=\"#999\"></spinner>\n                    <i *ngIf=\"!model.loading\" class=\"material-icons\">{{model.search && model.search.length >=\n                        model.min_search ? 'close' : 'keyboard'}}</i>\n                </div>\n                <div class=\"text\">\n                    {{model.loading ? 'Searching...' : (model.search && model.search.length >= model.min_search ? 'No\n                    matches found' : 'Type\n                    above to search')}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","\nimport { Component, EventEmitter, Input, Output, ViewChild, ElementRef, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router, NavigationStart, NavigationEnd } from '@angular/router';\n\nimport { AppService } from '../../../../services/app.service';\nimport { Utils } from '../../../../shared/utility.class';\nimport { IUser } from '../../../../services/data/users.service';\nimport { IRoom } from '../../../../services/data/rooms.service';\nimport { BaseDirective } from '../../../../shared/globals/base.directive';\n\n@Component({\n    selector: 'explore-search',\n    templateUrl: './search.template.html',\n    styleUrls: ['./search.styles.scss'],\n})\nexport class ExploreSearchComponent extends BaseDirective implements OnInit {\n    @Input() public item: any = null;\n    @Output() public itemChange: any = new EventEmitter();\n    public model: any = {};\n    public filtered_items: any[] = [];\n\n    @ViewChild('input', { static: false }) private input: ElementRef;\n\n    private timers: any = {};\n\n    constructor(private service: AppService, private route: ActivatedRoute, private router: Router) {\n        super();\n    }\n\n    public ngOnInit() {\n        const win = self as any;\n        this.model.loaded = false;\n        this.model.speech = !!(win.SpeechRecognition || win.webkitSpeechRecognition);\n        this.model.settings = {};\n        this.subscription('users', this.service.Users.listen('user_list', (list) => {\n            this.model.user_list = list || [];\n            this.model.user_list.sort((a, b) => a.name.localeCompare(b.name));\n            this.filter();\n        }));\n        this.subscription('rooms', this.service.Rooms.listen('room_list', () => {\n            this.model.room_list = this.service.Rooms.list();\n        }));\n\n        this.subscription('bld', this.service.Buildings.listen((bld) => {\n            if (bld) {\n                this.model.search = '';\n                this.model.room_list = this.service.Rooms.list();\n                this.filter();\n            }\n        }));\n        this.subscription('query', this.route.queryParamMap.subscribe((params) => {\n            if (params.has('role')) {\n                this.model.role_param = params.get('role');\n                this.initRole();\n            }\n        }));\n        this.subscription('route', this.route.paramMap.subscribe((params) => {\n            if (params.has('search')) {\n                this.model.search_type = params.get('search');\n                this.updateShow();\n                this.filter();\n            }\n        }));\n        // Clear results when route changes\n        this.subscription('routing', this.router.events.subscribe((event) => {\n            if (event instanceof NavigationStart) {\n                this.filtered_items = [];\n                this.model.search = '';\n                this.service.set('BANNER.block_height', 0);\n            } else if (event instanceof NavigationEnd) {\n                this.updateShow();\n            }\n        }));\n        this.init();\n    }\n\n    public init() {\n        const bld = this.service.Buildings.current();\n        if (!this.service.Settings.setup || !bld) {\n            return setTimeout(() => this.init(), 500);\n        }\n        this.model.route = this.service.Settings.get('app.style.popout');\n        this.model.min_search = this.service.Settings.get('app.people_min_char') || 0;\n        this.model.settings = this.service.Settings.get('app.explore') || {};\n        this.model.role = {\n            details: this.service.Settings.get('app.roles'),\n            list: [],\n            active: -1\n        };\n        if (bld.roles) {\n            for (const role in bld.roles) {\n                if (bld.roles.hasOwnProperty(role)) {\n                    this.model.role.list.push({\n                        id: role,\n                        name: role.split('-').join(' '),\n                        icon: this.model.role.details ? this.model.role.details[role] : null,\n                        users: bld.roles[role]\n                    });\n                }\n            }\n        }\n        this.filter();\n        this.updateShow();\n        this.model.inited = true;\n    }\n\n    public initRole() {\n        if (this.model.role_param && this.model.role && this.model.role.list) {\n            for (const i of this.model.role.list) {\n                if (i.id === this.model.role_param) {\n                    this.model.role.active = this.model.role.list.indexOf(i);\n                    this.filter();\n                    break;\n                }\n            }\n        } else if (!this.model.role || !this.model.role.list) {\n            setTimeout(() => this.initRole(), 500);\n        }\n    }\n\n    /**\n     * Update list of filtered items\n     */\n    public filter(focused: boolean = false) {\n        if (!this.model.settings) { return; }\n        this.model.loading = true;\n        this.timeout('loading', () => this.model.loading = false, 310);\n        // Prevent deselection o\n        if (focused && this.input && this.input.nativeElement) {\n            this.input.nativeElement.focus();\n            this.model.focus = true;\n            this.updateShow();\n        }\n        if (this.timers.search) {\n            clearTimeout(this.timers.search);\n            this.timers.search = null;\n        }\n        this.timeout('filter', () => {\n            this.clearTimeout('loading');\n            this.model.loading = true;\n            if (this.model.search_type === 'spaces') {\n                // Only return rooms/spaces\n                this.filterRooms().then((rooms: IRoom[]) => {\n                    this.filtered_items = rooms;\n                    this.filtered_items.sort((a, b) => a.name.localeCompare(b.name));\n                    return (this.model.loading = false);\n                });\n            } else if (this.model.search_type === 'people') {\n                // Only return people\n                this.filterUsers().then((users: IUser[]) => {\n                    this.filtered_items = users;\n                    return (this.model.loading = false);\n                });\n            } else {\n                // Return both spaces and people\n                this.filterUsers().then((users: IUser[]) => {\n                    const role = this.model.role;\n                    if (role && role.active >= 0) {\n                        this.filtered_items = users;\n                        return (this.model.loading = false);\n                    } else {\n                        this.filterRooms().then((rooms: IRoom[]) => {\n                            this.filtered_items = ((users || []) as any[]).concat(rooms);\n                            this.filtered_items.sort((a, b) => a.name.localeCompare(b.name));\n                            return (this.model.loading = false);\n                        });\n                    }\n                });\n            }\n        });\n    }\n\n    /**\n     * Promise of filtered users\n     */\n    public filterUsers() {\n        return new Promise((resolve) => {\n            const search = (this.model.search || '').toLowerCase();\n            const role = this.model.role;\n            if ((search && search.length >= this.model.min_search) || (role && role.active >= 0) || !this.model.min_search) {\n                let users: IUser[] = [];\n                // Get filtered users\n                if (role && role.active >= 0) {\n                    users = this.service.Users.getFilteredUsers(search, role.list[role.active].users);\n                    resolve(users);\n                } else if (!this.model.min_search && this.model.user_list && this.model.user_list.length > 0) {\n                    users = this.service.Users.getFilteredUsers(search, this.model.user_list);\n                    resolve(users);\n                } else {\n                    const request_id = Math.floor(Math.random() * 899999 + 100000);\n                    this.model.request_id = request_id;\n                    this.service.Users.query({ q: search, limit: 50 })\n                        .then((list) => {\n                            if (request_id === this.model.request_id) {\n                                users = this.service.Users.getFilteredUsers(search, list);\n                                resolve(users);\n                            }\n                        }, () => resolve(users));\n                }\n            } else {\n                resolve([]);\n            }\n        });\n    }\n\n    /**\n     * Promise of filtered spaces\n     */\n    public filterRooms() {\n        return new Promise((resolve) => {\n            const search = (this.model.search || '').toLowerCase();\n            const list = [];\n            for (const item of this.model.room_list) {\n                list.push({\n                    id: item.id,\n                    prefix: item.prefix,\n                    bookable: item.bookable,\n                    map_id: item.map_id,\n                    name: item.name,\n                    level: item.level\n                });\n            }\n            const bld = this.service.Buildings.current();\n            if (bld && bld.map && bld.map.searchables) {\n                for (const level in bld.map.searchables) {\n                    if (bld.map.searchables.hasOwnProperty(level)) {\n                        for (const name in bld.map.searchables[level]) {\n                            if (bld.map.searchables[level].hasOwnProperty(name)) {\n                                const lvl = this.service.Buildings.getLevel(level);\n                                list.push({ map_id: bld.map.searchables[level][name], name, level: lvl, prefix: false });\n                            }\n                        }\n                    }\n                }\n            }\n            if (!search) {\n                return resolve(list);\n            }\n            const rooms: IRoom[] = [];\n            for (const rm of list) {\n                if (((rm.name || '').toLowerCase().indexOf(search) >= 0 ||\n                    (rm.level && (rm.level.name || '').toLowerCase().indexOf(search) >= 0)) && rm.searchable !== false) {\n                    rooms.push(rm);\n                }\n            }\n            resolve(rooms);\n        });\n    }\n\n    /**\n     * Post item to find on map\n     * @param item Displayed item selected by the user\n     */\n    public find(item: any) {\n        this.item = item;\n        this.model.search = item.name;\n        this.model.focus = false;\n        this.model.dictate = false;\n        if (this.input && this.input.nativeElement) {\n            this.input.nativeElement.blur();\n        }\n        this.itemChange.emit(item);\n        this.updateShow();\n    }\n\n    /**\n     * Open telephone URL for item\n     * @param item Displayed item selected by the user\n     */\n    public call(item: any) {\n        item.loading = true;\n        let phone = '';\n        item.phone = -1;\n        if (!item.phone || item.phone === -1) {\n            // Load user phone number from API\n            this.service.Users.show(item.email).then((person) => {\n                if (person && person.phone) {\n                    phone = Utils.removeChars(person.phone, ' ()_-');\n                    location.href = `tel:${phone}`;\n                } else {\n                    item.phone = -1;\n                }\n                item.loading = false;\n            }, () => item.phone = -1);\n        } else {\n            phone = Utils.removeChars(item.phone, ' ()_-');\n            location.href = `tel:${phone}`;\n            item.loading = false;\n        }\n    }\n    /**\n     * Open support URL for the selected item\n     * @param item Selected item\n     */\n    public control(item) {\n        if (item.support_url) {\n            window.open(item.support_url, 'blank_');\n        }\n    }\n\n    /**\n     * Close the search and clear the selected item\n     */\n    public close() {\n        this.model.search = '';\n        this.item = null;\n        this.model.role.active = -1;\n        this.filter();\n        if (this.input && this.input.nativeElement) {\n            this.input.nativeElement.blur();\n        }\n        this.itemChange.emit(this.item);\n    }\n\n    /**\n     * Activate dictation search\n     */\n    public startDictation() {\n        if (!this.input) { return; }\n        if (this.model.recognition) {\n            this.model.recognition.stop();\n            this.model.dictate = false;\n            this.model.recognition = null;\n            return;\n        }\n        const win = self as any;\n        const Speech: any = win.SpeechRecognition || win.webkitSpeechRecognition;\n        if (Speech) {\n            this.model.recognition = new Speech();\n\n            this.model.recognition.continuous = false;\n            this.model.recognition.interimResults = false;\n\n            this.model.recognition.lang = 'en-US';\n            this.model.recognition.start();\n            this.model.dictate = true;\n\n            this.model.recognition.onresult = (e: any) => {\n                // Update search field with dictation result\n                this.input.nativeElement.value = e.results[0][0].transcript;\n                this.model.search = e.results[0][0].transcript;\n                this.model.recognition.stop();\n                this.filter();\n                this.model.dictate = false;\n            };\n\n            this.model.recognition.onerror = (e: any) => {\n                this.model.recognition.stop();\n                this.model.dictate = false;\n            };\n        }\n    }\n\n    public updateShow() {\n        this.timeout('update_show', () => {\n            const people = (!this.item && this.model.role.active !== -1) || (this.model.search_type === 'people' && !this.item);\n            this.model.show = people || this.model.focus || this.model.dictate;\n            this.model.banner = this.model.settings && this.model.settings.banner && this.model.settings.banner.search;\n            const r = this.model.role && this.model.role.list && this.model.role.list.length > 0;\n            this.model.banner_roles = this.model.banner && this.model.settings.banner.roles && this.model.search_type !== 'spaces' && r;\n            if (this.model.show && this.model.banner) {\n                const h = this.model.banner_roles ? 6.5 : 4;\n                this.service.set('BANNER.block_height', h);\n            } else {\n                this.service.set('BANNER.block_height', 0);\n            }\n        }, 500);\n    }\n}\n","<div class=\"explore-timeline\" #container (window:resize)=\"resize()\">\n    <div class=\"block-list\" *ngIf=\"blocks && blocks.length > 0\">\n        <div\n            class=\"block\"\n            *ngFor=\"let item of blocks\"\n            [class.show]=\"item.show || item.hour\"\n            [class.in-use]=\"item.in_use\"\n            (touchrelease)=\"set(item.offset)\"\n        >\n            <div class=\"hour\" *ngIf=\"item.hour\">{{ item.hour }}</div>\n            <div class=\"bar\" [class.hour]=\"item.hour\"></div>\n        </div>\n    </div>\n    <div class=\"expired\" *ngIf=\"date_offset <= 0\" [style.width]=\"(expired_length / duration) * 100 + '%'\"></div>\n    <div class=\"active\" [style.left]=\"(((date_offset > 0 ? 0 : expired_length) + (selected_offset || 0)) / duration) * 100 + '%'\">\n        <div class=\"line\">\n            <div class=\"arrow\"></div>\n            <div class=\"time-details\" (touchstart)=\"grab($event)\" (mousedown)=\"grab($event)\">{{ display_time }}</div>\n            <div class=\"date-details\" (touchstart)=\"grab($event)\" (mousedown)=\"grab($event)\">\n                <button mat-icon-button [class.disabled]=\"date_offset <= 0\" (touchrelease)=\"changeDate(-1);\">\n                    <app-icon [icon]=\"{class: 'material-icons', content: 'keyboard_arrow_left'}\"></app-icon>\n                </button>\n                <div class=\"text\">{{ display_date || 'Today' }}</div>\n                <button mat-icon-button (touchrelease)=\"changeDate();\">\n                    <app-icon [icon]=\"{class: 'material-icons', content: 'keyboard_arrow_right'}\"></app-icon>\n                </button>\n            </div>\n            <div class=\"top-arrow\"></div>\n        </div>\n    </div>\n</div>\n","import {\n    Component,\n    OnInit,\n    Input,\n    ViewChild,\n    ElementRef,\n    AfterViewInit,\n    Renderer2,\n    OnDestroy,\n    Output,\n    EventEmitter\n} from '@angular/core';\n\nimport { BaseDirective } from '../../../../shared/globals/base.directive';\nimport { IBooking } from '../../../../services/data/bookings.service';\n\nimport * as dayjs from 'dayjs';\n\ninterface ITimelineBlock {\n    /** Block time as ms since UTC epoch */\n    value: number;\n    /** Whether to show block divider */\n    show: boolean;\n    /** Hour of the day represented by this time block */\n    hour: number;\n    /** Number of minutes from the expired length time */\n    offset: number;\n    /** Whether block is in use or not */\n    in_use: boolean;\n}\n\n@Component({\n    selector: 'explore-timeline',\n    templateUrl: './timeline.component.html',\n    styleUrls: ['./timeline.component.scss']\n})\nexport class ExploreTimelineComponent extends BaseDirective\n    implements OnInit, AfterViewInit, OnDestroy {\n    /** Amount of time to display on the timeline */\n    @Input() public duration = 12 * 60;\n    /** Size of each time block */\n    @Input() public block_size = 30;\n    /** Time offset in minutes which is displayed before the current time marker */\n    @Input() public expired_length = 2 * 60;\n    /** Events occuring on the timeline */\n    @Input() public events: IBooking[] = [];\n    /** Emitter for changes to the selected time */\n    @Output() public time = new EventEmitter<number>();\n\n    /** List of time blocks to display on the DOM */\n    public blocks: ITimelineBlock[] = [];\n    /** Active time */\n    public selected_time: number;\n    /** Offset of the selected time from the current time in minutes */\n    public selected_offset = 0;\n    /** Offset of the selected time from the current time in days */\n    public date_offset = 0;\n    /** Modulus 5 for the minutes of the current time  */\n    public modulo: number;\n    /** Display value of the selected time */\n    public display_time: string;\n    /** Display value of the selected date */\n    public display_date: string;\n    /** Display value of the selected date */\n    public display_value: number;\n\n    /** Bounding box for the root element of the component */\n    private cntr_box: ClientRect;\n    /** Listener for grab move events */\n    private _move_listener: () => void;\n    /** Listener for grab end events */\n    private _release_listener: () => void;\n\n    @ViewChild('container', { static: true }) public container: ElementRef<HTMLDivElement>;\n\n    constructor(private renderer: Renderer2) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.generateTimelineBlocks();\n        this.selected_offset = 0;\n        this.date_offset = 0;\n        const start = dayjs()\n            .add(this.selected_offset, 'm')\n            .add(this.date_offset, 'd')\n            .startOf('m');\n        start.minute(Math.ceil(start.minute() / 5) * 5);\n        this.display_time = start.format('h:mm a');\n        this.display_date = start.isSame(dayjs(), 'd') ? 'Today' : start.format('DD MMM YYYY');\n        this.display_value = start.valueOf();\n        this.interval('expired', () => this.generateTimelineBlocks(), 60 * 1000);\n    }\n\n    public ngAfterViewInit(): void {\n        this.resize();\n    }\n\n    public ngOnDestroy(): void {\n        this.handleRelease();\n    }\n\n    /** Length of the shown timeline in minutes */\n    public get length(): number {\n        return this.duration + this.block_size;\n    }\n\n    /**\n     * Generate time blocks to display\n     */\n    private generateTimelineBlocks(): void {\n        let now = dayjs()\n            .add(this.date_offset, 'd')\n            .startOf('m');\n        if (this.date_offset) {\n            now.hour(7).minute(0);\n        }\n        now = now.minute(Math.round(now.minute() / 5) * 5);\n        const start = dayjs(now).subtract(this.date_offset ? 30 : this.expired_length || 120, 'm');\n        const end = start.add(this.duration || 720, 'm');\n        let date = dayjs(start);\n        delete this.blocks;\n        this.blocks = [];\n        while (date.isBefore(end, 'm')) {\n            this.blocks.push({\n                value: date.valueOf(),\n                show: date.minute() % ((this ? this.block_size : null) || 30) === 0,\n                hour: date.minute() === 0 ? (date.hour() % 12 === 0 ? 12 : date.hour() % 12) : null,\n                offset: date.diff(now, 'm'),\n                in_use: false\n            });\n            date = date.add(5, 'm');\n        }\n        this.updateSelected();\n    }\n\n    /**\n     * Handle click and touch events on timeline\n     * @param event Touch or Click event on timeline\n     */\n    public selectTime(event: MouseEvent | TouchEvent): void {\n        const center = {\n            x: event instanceof MouseEvent ? event.clientX : event.touches[0].clientX,\n            y: event instanceof MouseEvent ? event.clientY : event.touches[0].clientY\n        };\n        if (!this.cntr_box) {\n            this.cntr_box = this.container.nativeElement.getBoundingClientRect();\n        }\n        const offset = this.date_offset ? 0 : this.expired_length / this.duration;\n        const percent = (center.x - this.cntr_box.left) / this.cntr_box.width - offset;\n        const length =\n            Math.ceil((this.duration - (this.date_offset ? 0 : this.expired_length) - 30) / 5) * 5;\n        this.selected_offset = Math.min(\n            length,\n            Math.max(this.date_offset ? 30 : 0, this.duration * percent)\n        );\n        const now = dayjs().startOf('m');\n        if (this.date_offset) {\n            now.hour(7)\n                .minute(0)\n                .subtract(30, 'm');\n        }\n        const start = dayjs(now)\n            .add(this.selected_offset, 'm')\n            .add(this.date_offset, 'd');\n        start.minute(Math.ceil(start.minute() / 5) * 5);\n        this.selected_time = start.valueOf();\n        this.display_time = start.format('h:mm a');\n        this.display_date = start.isSame(dayjs(), 'd') ? 'Today' : start.format('DD MMM YYYY');\n        this.time.emit(start.startOf('m').valueOf());\n    }\n\n    /**\n     * Updates the selected offset\n     * @param offset New offset value\n     */\n    public set(offset: number): void {\n        this.selected_offset = Math.min(\n            this.duration - (this.date_offset ? 0 : this.expired_length) - 30,\n            Math.max(this.date_offset ? 30 : 0, offset)\n        );\n        const now = dayjs().startOf('m');\n        if (this.date_offset) {\n            now.hour(7).minute(0);\n        }\n        const start = dayjs(now)\n            .add(this.selected_offset, 'm')\n            .add(this.date_offset, 'd');\n        start.minute(Math.ceil(start.minute() / 5) * 5);\n        this.selected_time = start.valueOf();\n        this.display_time = start.format('h:mm a');\n        this.display_date = start.isSame(dayjs(), 'd') ? 'Today' : start.format('DD MMM YYYY');\n        this.time.emit(start.startOf('m').valueOf());\n    }\n\n    /**\n     * Change the selected date of the timeline\n     * @param offset Offset to change the select date by in number of days\n     */\n    public changeDate(offset: number = 1): void {\n        this.clearTimeout('grab');\n        this.date_offset += offset;\n        let new_offset = this.selected_offset;\n        if (this.date_offset === 1 && offset > 0) {\n            new_offset = this.expired_length + this.selected_offset;\n        } else if (this.date_offset === 0 && offset < 0) {\n            new_offset = this.selected_offset - this.expired_length;\n        }\n        this.set(new_offset);\n        this.generateTimelineBlocks();\n    }\n\n    /**\n     * Update bounding boxes after viewport change\n     */\n    public resize(): void {\n        if (this.container) {\n            this.cntr_box = this.container.nativeElement.getBoundingClientRect();\n        }\n    }\n\n    /**\n     * Event callback for mousedown/touchstart events of the selected time elements\n     * @param event Thrown event\n     */\n    public grab(event: MouseEvent | TouchEvent): void {\n        this.timeout(\n            'grab',\n            () => {\n                this.handleRelease();\n                if (!this.cntr_box) {\n                    this.cntr_box = this.container.nativeElement.getBoundingClientRect();\n                }\n                if (event instanceof MouseEvent) {\n                    this._move_listener = this.renderer.listen('window', 'mousemove', e =>\n                        this.handleMove(e)\n                    );\n                    this._release_listener = this.renderer.listen('window', 'mouseup', _ =>\n                        this.handleRelease()\n                    );\n                } else {\n                    this._move_listener = this.renderer.listen('window', 'touchmove', e =>\n                        this.handleMove(e)\n                    );\n                    this._release_listener = this.renderer.listen('window', 'touchend', _ =>\n                        this.handleRelease()\n                    );\n                }\n            },\n            10\n        );\n    }\n\n    /**\n     * Handle moving after grab event\n     * @param event\n     */\n    private handleMove(event: MouseEvent | TouchEvent): void {\n        this.selectTime(event);\n    }\n\n    /**\n     * Handle end of grab event\n     */\n    private handleRelease(): void {\n        if (this._move_listener) {\n            this._move_listener();\n            this._move_listener = null;\n        }\n        if (this._release_listener) {\n            this._release_listener();\n            this._release_listener = null;\n        }\n    }\n\n    /**\n     * Update the percentage of the day that has expired\n     */\n    private updateSelected(): void {\n        const now = dayjs().add(this.date_offset, 'd');\n        if (this.date_offset) {\n            now.hour(7).minute(0);\n        }\n        const diff = dayjs(this.selected_time).diff(now, 'm');\n        if (diff < 0) {\n            const start = dayjs(now).startOf('m');\n            start.minute(Math.ceil(start.minute() / 5) * 5);\n            this.selected_time = start.valueOf();\n            this.display_time = start.format('h:mm a');\n            this.display_date = start.isSame(dayjs(), 'd') ? 'Today' : start.format('DD MMM YYYY');\n            this.display_value = start.valueOf();\n            start.minute(Math.ceil(start.minute() / 5) * 5);\n            this.time.emit(start.valueOf());\n        }\n        this.selected_offset = Math.min(\n            this.duration - (this.date_offset ? 0 : this.expired_length) - 30,\n            Math.max(this.date_offset ? 30 : 0, diff)\n        );\n    }\n}\n","<div class=\"container\">\n    <div class=\"topbar\">\n        <div class=\"search\">\n            <!-- <space-search *ngIf=\"model.search === 'spaces'\" [(model)]=\"model.found_item\" (modelChange)=\"focusSpace($event)\"></space-search>\n            <people-search *ngIf=\"model.search === 'people'\" [(model)]=\"model.found_user\" (modelChange)=\"focusUser($event)\"></people-search> -->\n            <explore-search *ngIf=\"model.search\" [(item)]=\"model.found_item\" (itemChange)=\"focus($event)\"></explore-search>\n        </div>\n    </div>\n    <div class=\"map-space\">\n        <div class=\"bindings\">\n            <div class=\"desks\" *ngIf=\"model.desks && model.level && model.level.active\">\n                <!-- DESK BINDINGS -->\n                <i binding [(model)]=\"model.desks.in_use\" [sys]=\"model.system\" mod=\"DeskManagement\" (modelChange)=\"updateListeners()\" [bind]=\"model.level.active.id\"></i>\n                <i binding [(model)]=\"model.desks.reserved\" [sys]=\"model.system\" mod=\"DeskManagement\" (modelChange)=\"updateStyles()\" [bind]=\"model.level.active.id + ':reserved'\"></i>\n                <i binding *ngIf=\"model.user\" [(model)]=\"model.desks.user\" [sys]=\"model.system\" mod=\"DeskManagement\" (modelChange)=\"updateStyles()\"\n                    [bind]=\"model.user.win_id\"></i>\n                <i binding [(model)]=\"model.desks.list\" [sys]=\"model.system\" mod=\"DeskManagement\" (modelChange)=\"updateStyles()\" [bind]=\"model.level.active.id + ':desk_ids'\"></i>\n                <i binding [(model)]=\"model.desks.usage\" [sys]=\"model.system\" mod=\"DeskManagement\" [bind]=\"model.level.active.id + ':occupied_count'\"></i>\n                <i binding [(model)]=\"model.desks.free\" [sys]=\"model.system\" mod=\"DeskManagement\" [bind]=\"model.level.active.id + ':free_count'\"></i>\n                <i binding [(model)]=\"model.desks.count\" [sys]=\"model.system\" mod=\"DeskManagement\" [bind]=\"model.level.active.id + ':desk_count'\"></i>\n                <!-- DESK EXECUTES -->\n                <i binding [model]=\"model.desks.checkin\" [sys]=\"model.system\" mod=\"DeskManagement\" exec=\"manual_checkin\" [params]=\"[model.desks.id]\"></i>\n                <i binding [model]=\"model.desks.cancel\" [sys]=\"model.system\" mod=\"DeskManagement\" exec=\"cancel_reservation\" [params]=\"[]\"></i>\n            </div>\n            <div class=\"bookings\" *ngIf=\"model.rooms\">\n                <!-- ROOM BOOKINGS BINDINGS -->\n                <ng-container *ngFor=\"let room of model.rooms\">\n                    <i binding [(model)]=\"room.raw_bookings\" (modelChange)=\"processBookings(room)\" [sys]=\"room.id\" mod=\"Bookings\" bind=\"today\"></i>\n                </ng-container>\n            </div>\n            <div class=\"zones\" *ngIf=\"model.zones && model.level && model.level.active\">\n                <i binding [(model)]=\"model.zone_usage\" (modelChange)=\"updateStyles()\" [sys]=\"model.system\" mod=\"FloorManagement\" [bind]=\"model.level.active.id\"></i>\n            </div>\n        </div>\n        <div class=\"map\">\n            <map [(zoom)]=\"model.map.zoom\" (zoomChange)=\"updateZoom()\" [(center)]=\"model.map.center\" [src]=\"model.map.src\" [poi]=\"model.map.poi\" [styles]=\"model.map.styles\" [listeners]=\"model.map.listeners\"\n                 [focus]=\"model.map.focus\" (event)=\"check($event)\">\n            </map>\n        </div>\n        <div class=\"level mobile-only\" *ngIf=\"!(model.found_user && (!model.found_user.location || (!model.found_user.location.map_id && !model.found_user.location.x && !model.found_user.location.y)))\">\n            <div *ngIf=\"model.level && model.level.active\">\n                {{model.found_user && model.found_user.external && model.found_user.location && model.found_user.location.building ? model.found_user.location.building.name + ' - ' : ''}}{{model.level.active?.name}}\n            </div>\n        </div>\n        <div class=\"level not-mobile\" [class.old]=\"!model.old\" *ngIf=\"model.found_user && model.found_user.location && model.found_user.external\">\n            <div *ngIf=\"model.level && model.level.active\">\n                {{model.found_user.location?.building?.name}} - {{model.level.active?.name}}\n            </div>\n        </div>\n        <div class=\"not-located\" *ngIf=\"model.found_user\">\n            <ng-container *ngIf=\"!model.found_user.location || (!model.found_user.location.map_id && !model.found_user.location.x && !model.found_user.location.y)\">\n                <div *ngIf=\"!model.found_user.external\"><div>{{model.found_user.name}}</div>&nbsp;<div>is currently not locatable</div></div>\n                <div *ngIf=\"model.found_user.external\"><div>{{model.found_user.name}}</div>&nbsp;<div>is located in another building</div></div>\n            </ng-container>\n            <ng-container *ngIf=\"!(!model.found_user.location || (!model.found_user.location.map_id && !model.found_user.location.x && !model.found_user.location.y)) && model.found_user.pin_error\">\n                <div>{{model.found_user.name}} is located on {{model.level.active?.name}}</div>\n            </ng-container>\n        </div>\n        <explore-map-overlay [change]=\"model.change\"></explore-map-overlay>\n    </div>\n    <div class=\"timeline\">\n        <explore-timeline (time)=\"timeChange($event)\"></explore-timeline>\n    </div>\n</div>","\nimport { MapPinComponent, MapRangeComponent } from '@acaprojects/ngx-widgets';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router, NavigationEnd, NavigationStart } from '@angular/router';\nimport { MatDialog } from '@angular/material/dialog';\n\nimport { AppService } from '../../services/app.service';\nimport { ILevel } from '../../services/data/buildings.service';\n\nimport * as dayjs from 'dayjs';\nimport { RoomInfoComponent } from '../../shared/components/room-info/room-info.component';\nimport { BaseDirective } from '../../shared/globals/base.directive';\nimport { DeskInfoComponent } from '../../shared/components/desk-info/desk-info.component';\nimport { IRoom } from '../../services/data/rooms.service';\nimport { rulesForSpace } from '../../shared/utilities/booking.utilities';\nimport { Utils } from '../../shared/utility.class';\nimport { IBooking } from '../../services/data/bookings.service';\nimport { ExploreBookingModalComponent } from '../../overlays/explore-booking-modal/explore-booking-modal.component';\n\n@Component({\n    selector: 'app-explore',\n    templateUrl: './explore.template.html',\n    styleUrls: ['./explore.styles.scss']\n})\nexport class ExploreComponent extends BaseDirective implements OnInit {\n    public model: any = [];\n\n    public show_time: number;\n\n    constructor(private route: ActivatedRoute, private router: Router, private service: AppService, private _dialog: MatDialog) {\n        super();\n        this.model.setting_list = [\n            { id: 'desks', name: 'Desks Status' },\n            { id: 'rooms', name: 'Rooms Status' },\n            { id: 'teams', name: 'Team Tables' },\n            { id: 'zones', name: 'Zones Status' }\n        ];\n    }\n\n    public ngOnInit() {\n        this.show_time = undefined;\n        this.subscription('router', this.router.events.subscribe((e) => {\n            if (e instanceof NavigationStart) {\n                this.service.set('APP.swipe_disabled', e.url.indexOf('explore') >= 0);\n            } else if (e instanceof NavigationEnd) {\n                if (this.model.zones) {\n                    this.model.zones.show = false;\n                }\n                if (this.model.map) {\n                    this.model.map.zoom = 100;\n                    this.model.map.center = { x: .5, y: .5 };\n                }\n                this.clear();\n                this.update();\n            }\n        }));\n        this.subscription('params', this.route.paramMap.subscribe((params) => {\n            if (params.has('search')) {\n                this.model.search = params.get('search');\n            }\n        }));\n        this.service.set('BANNER.block_height', 0);\n        this.subscription('query', this.route.queryParamMap.subscribe((params) => {\n            if (params.has('room_id')) { this.focusOnRoom(params.get('room_id')); }\n            if (params.has('level')) { this.setLevelByID(params.get('level')); }\n            if (params.has('level_id')) { this.setLevelByID(params.get('level_id')); }\n            if (params.has('back')) { this.model.back = params.get('back'); }\n        }));\n        this.subscription('user', this.service.Users.listen('user', (item) => this.model.user = item));\n        this.model.map = {};\n        this.model.show = { rooms: true, desks: true };\n        this.model.map.poi = [];\n        this.model.desks = {};\n        this.model.zones = {};\n        this.model.settings = {};\n        this.service.set('EXPLORE.show.desks', this.model.show.desks);\n        this.service.set('EXPLORE.show.rooms', this.model.show.rooms);\n        this.subscription('exp_filter', this.service.listen('EXPLORE.filters', () => this.update()));\n        this.subscription('exp_features', this.service.listen('EXPLORE.map.hide', (a) => {\n            this.update();\n        }));\n        this.subscription('exp_settings', this.service.listen('EXPLORE.settings', (value) => this.updateSettings(value)));\n        this.subscription('exp_level', this.service.listen('EXPLORE.level', (value) => this.setLevelByID(value)));\n        this.model.colours = { rooms: {}, desks: {}, zones: {} };\n        if (this.model.keys) {\n            this.model.keys.show = false;\n        }\n        this.clear();\n        this.interval('time-update', () => {\n            this.timeChange(this.show_time);\n        }, 60 * 1000);\n        this.service.set('APP.swipe_disabled', true);\n        this.subscription('building', this.service.Buildings.listen((bld) => {\n            if (bld) {\n                this.timeout('set_building', () => {\n                    bld = this.service.Buildings.current();\n                    const active = this.model.level ? this.model.level.active : null;\n                    this.model.level = {};\n                    this.model.system = bld.systems.desks;\n                    this.model.focus_user = null;\n                    this.model.found_room = null;\n                    this.model.info = null;\n                    this.model.level.list = bld.levels;\n                    this.model.rooms = this.service.Rooms.list();\n                    this.model.room_pin = null;\n                    if (this.model.level.list) {\n                        this.model.level.names = [];\n                        for (const level of this.model.level.list) {\n                            this.model.level.names.push(level.name);\n                        }\n                        let lvl = null;\n                        if (active) { lvl = this.setLevelByID(active.id); }\n                        if (!lvl && this.model.level.list.length > 0) {\n                            this.setLevel(this.model.level.list[0]);\n                        }\n                    }\n                    if (this.model.found_user) {\n                        this.focusUser(this.model.found_user);\n                    }\n                    this.update();\n                });\n            }\n        }));\n        this.init();\n    }\n\n    public init() {\n        if (!this.service.ready()) {\n            this.timeout('init', () => this.init(), 500);\n        }\n        this.model.colours = {};\n        this.model.colours.rooms = this.service.Settings.get('app.colors.rooms') || {};\n        this.model.colours.desks = this.service.Settings.get('app.colors.desks') || {};\n        this.model.colours.zones = this.service.Settings.get('app.colors.zones') || {};\n        this.model.keys = this.service.Settings.get('app.map_keys') || {};\n        this.model.keys.types = Object.keys(this.model.keys);\n        this.model.zones.enabled = this.service.Settings.get('app.zones.enabled');\n        this.model.zones.toggle = this.service.Settings.get('app.zones.toggle');\n        this.model.settings = this.service.Settings.get('app.explore') || {};\n        this.model.old = this.service.Settings.get('app.explore.old_overlay');\n        if (this.model.zones.enabled && this.model.zones.toggle) {\n            this.model.keys.types = [this.model.zones.toggle];\n        }\n        if (this.model.keys) {\n            this.model.keys.list = (this.model.keys.room || []).concat(this.model.keys.general || []);\n        }\n        this.subscription('rooms', this.service.Rooms.listen('list', () => {\n            this.model.rooms = this.service.Rooms.list();\n            this.update();\n        }));\n        this.model.map_bookable = this.service.Settings.get('app.map.bookings');\n        this.interval('rooms', () => this.updateRoomState(), 25 * 1000);\n        this.service.Analytics.screen('Explore');\n        this.service.Analytics.page(`/explore${this.model.search ? '/' + this.model.search : ''}`);\n        this.timeout('zoom', () => this.model.zoom += 1, 300);\n    }\n\n    public focusOnRoom(id: string, tries: number = 0) {\n        if (tries > 10) { return; }\n        if (this.model.rooms && this.model.rooms.length > 0) {\n            for (const rm of this.model.rooms) {\n                if (rm.id === id) {\n                    this.focusSpace(rm);\n                    break;\n                }\n            }\n        } else {\n            this.timeout('focus_room', () => this.focusOnRoom(id, tries++), 300 * tries++);\n        }\n    }\n\n    public toggle(name: string) {\n        this.timeout(`toggle_${name}`, () => this.model[name].show = !this.model[name].show, 100);\n    }\n\n    public setLevelByID(id: string, emit: boolean = true) {\n        if (id && this.model.level && this.model.level.list) {\n            for (const lvl of this.model.level.list) {\n                if (lvl.id === id) {\n                    this.setLevel(lvl, emit);\n                    return lvl;\n                }\n            }\n        }\n        return null;\n    }\n\n    public setLevel(lvl: ILevel, emit: boolean = true, force: boolean = false) {\n        if (lvl && ((this.model.level && this.model.level.list && this.model.level.list.indexOf(lvl) >= 0) || force)) {\n            const previous_lvl = this.model.level.active;\n            this.model.level.active = lvl;\n            this.model.level.index = this.model.level.list.indexOf(lvl);\n            this.model.map.src = lvl.map_url;\n            this.model.room_pin = null;\n            this.model.map.focus = null;\n            this.update();\n            if (emit && (!previous_lvl || previous_lvl.id !== lvl.id)) {\n                this.service.set('EXPLORE.level', lvl.id);\n            }\n        }\n    }\n\n    public updateLevel() {\n        for (const lvl of this.model.level.list) {\n            if (this.model.map.src === lvl.map_url) {\n                this.model.level.active = lvl;\n                break;\n            }\n        }\n        this.update();\n    }\n\n    public updateSettings(settings: any) {\n        this.model.map.zoom = settings && settings.zoom !== undefined ? settings.zoom : this.model.map.zoom;\n        this.model.map.center = settings && settings.center !== undefined ? settings.center : this.model.map.center;\n        if (settings && settings.center) { delete settings.center; }\n        this.update();\n    }\n\n    public updateRoomState() {\n        if (this.model.rooms) {\n            for (const rm of this.model.rooms) {\n                this.processBookings(rm, false);\n            }\n            this.update();\n        }\n    }\n\n    public processBookings(room: any, update: boolean = true) {\n        if (room.raw_bookings) {\n            delete room.bookings;\n            this.service.Rooms.processRoom(room);\n            if (update) { this.update(); }\n            this.model.change = !this.model.change;\n        }\n    }\n\n    public updateZoom() {\n        const settings = this.service.get('EXPLORE.settings');\n        settings.zoom = this.model.map.zoom;\n        this.service.set('EXPLORE.settings', settings);\n    }\n\n    public update() {\n        if (this.model.zones && this.model.show) {\n            this.model.zones.show = this.model.show.zones;\n        }\n        if (!this.model.show) { this.model.show = {}; }\n        this.model.show.desks = this.service.get('EXPLORE.show.desks');\n        this.model.show.rooms = this.service.get('EXPLORE.show.rooms');\n        this.model.show.teams = this.service.get('EXPLORE.show.teams');\n        if (this.model.zones && this.model.zones.enabled) {\n            this.model.zones.show = this.service.get('EXPLORE.show.zones');\n            if (this.model.zones.toggle) {\n                this.model.keys.types = [this.model.zones.show ? 'zone' : this.model.zones.toggle];\n            }\n        }\n        this.updateListeners();\n    }\n\n    public updateState() {\n        if (this.model.show) {\n            this.service.set('EXPLORE.show.desks', this.model.show.desks);\n            this.service.set('EXPLORE.show.rooms', this.model.show.rooms);\n            this.service.set('EXPLORE.show.teams', this.model.show.teams);\n        }\n        if (this.model.zones) {\n            this.service.set('EXPLORE.show.zones', this.model.zones.show);\n        }\n        this.update();\n    }\n\n    public updateListeners() {\n        this.timeout('update_listeners', () => {\n            this.model.map.listeners = [];\n            if (this.model.rooms && this.model.level && this.model.level.active && this.model.level.active.id) {\n                const active_rooms = this.model.rooms.filter(i => i.zones.indexOf(this.model.level.active.id) >= 0);\n                for (const room of active_rooms) {\n                    this.model.map.listeners.push({\n                        id: `area-${room.map_id}-status`, event: 'mouseenter', callback: () => {\n                            this.timeout('mouseenter', () => {\n                                this.model.info = room;\n                                this.updatePointsOfInterest();\n                            }, 50);\n                    }});\n                    this.model.map.listeners.push({ id: `area-${room.map_id}-status`, event: 'mouseleave', callback: () => {\n                        this.timeout('mouseleave', () => {\n                            this.model.info = null;\n                            this.updatePointsOfInterest();\n                        }, 50);\n                    }});\n                    if (room.bookable) {\n                        const callback = () => {\n                            this.model.selected = null;\n                            this.model.display = null;\n                            this.book(room);\n                        };\n                        this.model.map.listeners.push({ id: `area-${room.map_id}-status`, event: 'mouseup', callback});\n                        this.model.map.listeners.push({ id: `area-${room.map_id}-status`, event: 'touchend', callback});\n                    }\n                }\n            }\n            if (this.model.desks && this.model.desks.in_use) {\n                for (const desk of this.model.desks.in_use) {\n                    this.model.map.listeners.push({ id: `${desk}`, event: 'mouseenter', callback: () => this.setDesk(desk) });\n                    this.model.map.listeners.push({ id: `${desk}`, event: 'mouseleave', callback: () => this.setDesk(null) });\n                }\n                for (const desk of (this.model.desks.reserved || [])) {\n                    this.model.map.listeners.push({ id: `${desk}`, event: 'mouseenter' , callback: () => this.setDesk(desk) });\n                    this.model.map.listeners.push({ id: `${desk}`, event: 'mouseleave' , callback: () => this.setDesk(null) });\n                }\n            }\n            this.model.desk = null;\n            this.updateStyles();\n            this.updatePointsOfInterest();\n        });\n    }\n\n    public setDesk(desk) {\n        this.model.desk = desk;\n        this.updatePointsOfInterest();\n    }\n\n    public updateStyles() {\n        this.timeout('styles', () => {\n            this.model.style = {};\n            this.model.map.styles = {};\n            this.model.style.general = {};\n            this.updateRoomStyles();\n            this.updateDeskStyles();\n            this.updateZoneStyles();\n            this.updateFeatureStyles();\n            for (const k in this.model.style) {\n                if (this.model.style.hasOwnProperty(k) && this.model.style[k]) {\n                    for (const i in this.model.style[k]) {\n                        if (this.model.style[k].hasOwnProperty(i)) {\n                            this.model.map.styles[i] = this.model.style[k][i];\n                        }\n                    }\n                }\n            }\n            this.clearTimeout('styles');\n        });\n    }\n\n    public updateRoomStyles() {\n        this.model.style.rooms = {};\n        if (!this.model.show.rooms) {\n            this.model.style.rooms[`[id$=\"-status\"]`] = { opacity: '0' };\n            return;\n        }\n        const now = dayjs(this.show_time);\n        const bld = this.service.Buildings.current();\n        const colours = this.model.colours.rooms || {}\n        if (this.model.rooms && this.model.rooms.length > 0) {\n            const active_rooms = this.model.rooms.filter(i => i.zones.indexOf(this.model.level.active.id) >= 0);\n            for (const room of active_rooms) {\n                let color = this.model.colours.rooms['not-bookable'] || '#ccc';\n                const block = this.service.Bookings.getNextFreeBlock(room.bookings, now.valueOf(), 2);\n                const rules = rulesForSpace({\n                    user: this.service.Users.current(),\n                    space: room,\n                    time: now.valueOf(),\n                    duration: 60,\n                    rules: bld.booking_rules\n                });\n                // Check booking rules\n                if (rules) {\n                    room.book_type = rules.auto_approve ? 'Book' : 'Request';\n                }\n                const in_use = block && dayjs(block.start).isAfter(now);\n                if (room.bookable && !rules.hide) {\n                    color = in_use\n                        ? colours['unavailable'] || '#E53935'\n                        : (room.book_type === 'Request'\n                            ? colours['pending'] || '#fbc02d'\n                            : colours['available'] || '#4CAF50');\n                }\n                this.model.style.rooms[`#area-${room.map_id}-status`] = {\n                    fill: color,\n                    opacity: '0.8',\n                };\n            }\n\n        } else {\n            this.timeout('room_styles', () => this.updateRoomStyles());\n        }\n    }\n\n    public updateDeskStyles() {\n        this.model.style.desks = {};\n        const colours = this.model.colours.desks || {};\n        if (!this.model.show.desks) {\n            this.model.style.desks[`[id^=\"table-\"]`] = {\n                fill: colours['not-bookable-fill'] || '#fff',\n                stroke: colours['not-bookable-stroke'] || '#ccc'\n            };\n            return;\n        }\n        if (this.model.found_user && this.model.found_user.location && this.model.found_user.location.fixed) {\n            const loc = this.model.found_user.location;\n            this.model.style.desks[`#${loc.map_id}`] = {\n                fill: colours['unavailable-fill'] || '#fff',\n                stroke: colours['unavailable-stroke'] || '#ccc'\n            };\n        }\n        if (this.model.desks) {\n            const u_desk = this.model.desks.user;\n            const list = this.model.desks.in_use || [];\n            const reserved = this.model.desks.reserved;\n            if (this.model.desks.list) {\n                for (const label of this.model.desks.list) {\n                    if (label) {\n                        const desk = `${label}`;\n                        const desk_obj = {\n                            level: this.model.active,\n                            id: desk,\n                            name: `Desk ${label.split('-')[1]}`,\n                        };\n                        const is_reserved = reserved && reserved.indexOf(label) >= 0;\n                        const in_use = list && list.indexOf(label) >= 0;\n                        const users_desk = u_desk && u_desk.connected && u_desk.desk_id === label;\n                        this.model.style.desks[`#${desk}`] = {\n                            fill: colours['available-fill'] || '#4CAF50',\n                            stroke: colours['available-stroke'] || '#4CAF50'\n                        };\n                        if (in_use || is_reserved) {\n                            const type = users_desk ? 'user' : (is_reserved ? 'reserved' :  'unavailable');\n                            this.model.style.desks[`#${desk}`].fill = colours[`${type}-fill`] || colours['unavailable-fill'] || '#fff';\n                            this.model.style.desks[`#${desk}`].stroke = colours[`${type}-stroke`] || colours['unavailable-stroke'] || '#ccc';\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    public updateZoneStyles() {\n        this.model.style.zones = {};\n        const colors = this.model.colours.zones || {};\n        const lvl = this.model.level.active;\n        if (!this.model.zones || !this.model.zones.enabled || !this.model.zones.show) {\n            this.model.style.zones['#Zones'] = { opacity: '0' };\n        }\n        if (this.model.colours && this.model.level && lvl) {\n            this.model.style.zones['[id^=\"zone\"]'] = {\n                fill: colors[lvl.defaults.zone] || colors.default || '#317c36'\n            };\n        }\n        if (this.model.zone_usage) {\n            for (const zone in this.model.zone_usage) {\n                if (this.model.zone_usage.hasOwnProperty(zone)) {\n                    const min_percent = lvl.defaults.zone_min || 0;\n                    const zone_usage = (this.model.zone_usage[zone].people_count / this.model.zone_usage[zone].capacity) * 100;\n                    const percent = Math.max(min_percent, zone_usage);\n\n                    const fill = percent < 40 ? colors.low || '#317c36' : (percent < 75 ? colors.medium || '#f4a81d' : colors.high || '#cd212e');\n                    this.model.map.styles[`#${zone}`] = { fill };\n                    this.model.map.styles[`#${zone}-status`] = { fill };\n                }\n            }\n        }\n    }\n\n    public updateFeatureStyles() {\n        this.model.style.features = {};\n        const hidden_features = this.service.get('EXPLORE.map.hide') || [];\n        for (const id of hidden_features) {\n            this.model.style.features[`#${id}`] = { opacity: '0' };\n        }\n    }\n\n    public book(room: IRoom) {\n        let opened = false;\n        this.timeout('opened', () => opened = true);\n        const date = dayjs(this.show_time);\n        const bld: any = this.service.Buildings.list().find(i => i.id === room.level.bld_id) || {};\n        const rules = rulesForSpace({\n            user: this.service.Users.current(),\n            space: room,\n            time: date.valueOf(),\n            duration: 60,\n            rules: bld.booking_rules\n        });\n        // Check booking rules\n        if (rules) {\n            if (rules.hide) {\n                this.service.notifyInfo(`You do not have permission to book room \"${room.name}\"`);\n                return;\n            }\n            room.book_type = rules.auto_approve ? 'Book' : 'Request';\n        }\n        const current: IBooking = room.bookings.find(booking => {\n            const day = dayjs(booking.date);\n            return date.isAfter(day, 's') && date.isBefore(day.add(booking.duration, 'm'), 'm');\n        });\n        if (current && current.all_day) {\n            return this.service.notifyInfo('The selected room is booked all day. Please select another date from the timeline and try again.');\n        }\n        const ref = this._dialog.open(ExploreBookingModalComponent, {\n            data: {\n                space: room,\n                date: this.show_time\n            }\n        });\n        ref.componentInstance.event.subscribe((event) => {\n            if (event.reason === 'done' && event.metadata === 'new') {\n                localStorage.setItem('STAFF.booking_form', JSON.stringify({\n                    id: 'ad-hoc',\n                    room: [{\n                        ...room,\n                        bookings: [],\n                        current: null,\n                        next: null,\n                        raw_bookings: []\n                    }],\n                    date: this.show_time\n                }));\n                this.service.navigate(['/book']);\n                ref.close();\n            }\n        });\n    }\n\n    public check(e: any) {\n        if (e.type === 'warning' && this.model.found_user && this.model.found_user.location &&\n                this.model.found_user.location.map_id && e.msg.indexOf(this.model.found_user.location.map_id) >= 0) {\n            this.model.found_user.pin_error = true;\n        }\n    }\n\n    public focus(item: any) {\n        this.model.map.zoom = 100;\n        this.model.map.center = { x: .5, y: .5 };\n        if (item.type) {\n            this.focusUser(item);\n        } else {\n            this.focusSpace(item);\n        }\n    }\n\n    public focusUser(user: any) {\n        if (user) {\n            this.model.found_item = null;\n            this.model.focus_room = null;\n            if (user.type === 'role') {\n                this.updatePointsOfInterest();\n                this.service.Users.show(user.email).then((u) => {\n                    this.locate(u);\n                }, (err) => null);\n            } else {\n                this.locate(user);\n            }\n        }\n    }\n\n    public locate(user) {\n        user.location = null;\n        this.model.found_user = user;\n        this.service.Users.location(user.id, user.win_id).then((location) => {\n            this.model.found_user.location = location;\n            let found = false;\n            const bld = this.service.Buildings.current();\n            // Cross building location finding is enabled\n            if (this.model.settings.cblf) {\n                const level: ILevel = this.service.Buildings.getLevel(location.level);\n                if (level) {\n                    for (const lvl of (bld ? bld.levels : this.model.level.list)) {\n                        if (level.id === lvl.id) {\n                            this.setLevel(lvl);\n                            found = true;\n                            break;\n                        }\n                    }\n                    // Level is in another building\n                    if (!found) {\n                        this.setLevel(level, false, true);\n                        this.model.found_user.location.building = this.service.Buildings.get(level.bld_id);\n                        this.model.found_user.external = true;\n                        found = true;\n                    }\n                }\n            } else { // Only locate users in the current building\n                for (const lvl of (bld ? bld.levels : this.model.level.list)) {\n                    if (location.level === lvl.id) {\n                        this.setLevel(lvl);\n                        found = true;\n                        break;\n                    }\n                }\n            }\n            if (found) {\n                this.model.map.focus = {\n                    coordinates: !location.fixed ? { x: location.x, y: location.y } : null,\n                    id: location.map_id,\n                    zoom: 0,\n                };\n            } else {\n                this.model.found_user.location = null;\n                this.model.found_user.external = true;\n            }\n            this.updatePointsOfInterest();\n            this.timeout('focus', () => this.model.map.zoom = 100);\n        }, (err) => {\n            this.model.found_user.location = null;\n            this.updatePointsOfInterest();\n        });\n    }\n\n    public focusSpace(item: any) {\n        if (!this.model || !this.model.level || !this.model.level.list || !item) {\n            return;\n        }\n        const focus = `${item.prefix === false ? '' : 'area-'}${item.map_id}${item.bookable ? '-status' : '-status'}`;\n        const lvl = item.level;\n        if (lvl) {\n            for (const level of this.model.level.list) {\n                if (lvl.id === level.id) {\n                    this.setLevel(level);\n                    this.timeout('focus_space', () => this.model.map.focus = { id: focus, zoom: 150 }, 100);\n                    break;\n                }\n            }\n            this.timeout('update_space', () => {\n                this.model.found_user = null;\n                this.model.focus_room = item;\n                this.updatePointsOfInterest();\n            }, 20);\n        }\n    }\n\n    public clear() {\n        this.model.found_item = null;\n        this.model.focus_room = null;\n        this.model.found_user = null;\n        this.model.info = null;\n        this.updatePointsOfInterest();\n    }\n\n    public updatePointsOfInterest() {\n        this.timeout('poi', () => {\n            this.model.map.poi = [];\n            this.model.toggle = !this.model.toggle;\n            if (this.model.found_user && this.model.found_user.location && this.model.found_user.location.level) {\n                if (this.model.found_user.location.level === this.model.level.active.id) {\n                    const loc = this.model.found_user.location;\n                    this.model.map.poi.push({\n                        id: loc.map_id || `person-${this.model.found_user.id}`,\n                        content: loc.fixed ? MapPinComponent : MapRangeComponent,\n                        coordinates: !loc.fixed ? { x: loc.x, y: loc.y } : null,\n                        data: { text: `${this.model.found_user.name} is here`, back: '#F44336', diameter: loc.confidence * 2 }\n                    });\n                }\n            }\n            if (this.model.info) {\n                const room: IRoom = this.model.info;\n                const today = dayjs(this.show_time).endOf('m');\n                const bookings = room.bookings.filter(b => dayjs(b.date).isSame(today, 'd') || b.all_day);\n                const block = this.service.Bookings.getNextFreeBlock(bookings, today.valueOf(), 2);\n                const current = bookings.find(b => {\n                    const start = dayjs(b.date).subtract(b.setup, 's');\n                    const end = dayjs(b.date).add(b.duration, 'm').add(b.breakdown, 's');\n                    return today.isAfter(start, 's') && today.isBefore(end, 's');\n                });\n                const next = bookings.find(b => today.isBefore(dayjs(b.date), 'm'));\n                const endOfDay = dayjs(this.show_time).endOf('d');\n                const bld = this.service.Buildings.current();\n                if (current && block && block.start !== -1) {\n                    this.model.selected_time = `Booked until ${dayjs(block.start).format('h:mmA')}`;\n                    if (current.all_day || current.duration > 23 * 60) {\n                        this.model.selected_time = 'Booked all day';\n                    }\n                } else if (current) {\n                    this.model.selected_time = `Booked until ${current.display.end}`;\n                    if (current.all_day || current.duration > 23 * 60) {\n                        this.model.selected_time = 'Booked all day';\n                    }\n                } else if (block && block.end >= 0 && dayjs(block.end).isSame(endOfDay, 'm')) {\n                    const end = dayjs(block.end);\n                    const dur = Math.floor(end.diff(today, 'm'));\n                    this.model.selected_time = `Free until ${end.format('h:mmA')}`;\n                    if (dur < 30) {\n                        if (block.end < 0 || !dayjs(block.end).isSame(endOfDay, 'm')) {\n                            this.model.selected_time += `<br>Next available at tomorrow`;\n                        } else {\n                            const next_blk = this.service.Bookings.getNextFreeBlock(bookings, block.end);\n                            this.model.selected_time += `<br>Next available at ${dayjs(next_blk.start).format('h:mmA')}`;\n                        }\n                    }\n                } else if (!current && next && block) {\n                    this.model.selected_time = `Free until ${dayjs(block.end).format('h:mmA')}`;\n                    const next_blk = this.service.Bookings.getNextFreeBlock(bookings, next.date);\n                    if (block.start > 0) {\n                        this.model.selected_time += `<br>Next available at ${dayjs(next_blk.start).format('h:mmA')}`;\n                    }\n                } else {\n                    this.model.selected_time = `Free today`;\n                }\n                const rules = rulesForSpace({\n                    user: this.service.Users.current(),\n                    space: room,\n                    time: today.valueOf(),\n                    duration: 60,\n                    rules: bld.booking_rules\n                });\n                if (!rules.auto_approve){\n                    this.model.selected_time += `<br>Available by request`;\n                }\n                this.model.display = null;\n                this.model.map.poi.push({\n                    id: `area-${room.map_id}-status`,\n                    content: RoomInfoComponent,\n                    data: {\n                        room: { ...room, bookable: room.bookable && !rules.hide },\n                        display: { time: this.model.selected_time },\n                        available: !current\n                    }\n                });\n            }\n            if (this.model.desk) {\n                this.model.map.poi.push({\n                    id: this.model.desk,\n                    content: DeskInfoComponent,\n                    data: {\n                        system: this.model.system,\n                        desk_id: this.model.desk\n                    }\n                });\n            }\n            if (this.model.focus_room && this.model.focus_room.level.id === this.model.level.active.id) {\n                const rm = this.model.focus_room;\n                this.model.map.poi.push({\n                    id: `${rm.prefix === false ? '' : 'area-'}${rm.map_id}${rm.bookable ? '-status' : '-status'}`,\n                    prefix: 'pin',\n                    content: MapPinComponent,\n                    data: {\n                        back: this.model.colours.rooms.pin || '#03A9F4',\n                        text: this.model.focus_room.name\n                    }\n                });\n            }\n            this.clearTimeout('poi');\n        });\n    }\n\n    public back() {\n        if (this.model.back) {\n            this.service.navigate(this.model.back);\n        } else {\n            this.service.back();\n        }\n    }\n\n\n    /**\n     * Callback for changes to the selected time on the timeline\n     * @param time New time value\n     */\n    public timeChange(time: number) {\n        this.timeout('time_change', () => {\n            this.show_time = time;\n            const now = dayjs();\n            if (!dayjs(this.show_time).isSame(now, 'd')) {\n                const date = dayjs(this.show_time).startOf('d');\n                const end = dayjs(date).endOf('d');\n                this.service.Rooms.query({\n                    from: date.unix(),\n                    to: end.unix(),\n                    zone_ids: this.model.level.active.id,\n                    show_declined: false\n                }).then((rooms) => {\n                    for (const space of rooms) {\n                        const match = this.model.rooms.find(i => i.id === space.id);\n                        if (match) {\n                            const old_bookings = (match.raw_bookings || []).filter(i => {\n                                const start = dayjs(i.date);\n                                return !start.isAfter(date, 's') && start.isBefore(end, 's');\n                            });\n                            const bookings = Utils.unique([...(space.bookings || []), ...old_bookings], 'id');\n                            match.raw_bookings = bookings;\n                            this.processBookings(match);\n                        }\n                    }\n                    this.updateStyles();\n                });\n            }\n            this.updateStyles();\n        }, 100);\n    }\n}\n","\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { WidgetsModule } from '@acaprojects/ngx-widgets';\nimport { ComposerModule } from '@acaprojects/ngx-composer';\nimport { RouterModule } from '@angular/router';\n\nimport { ScrollingModule } from '@angular/cdk/scrolling';\n\nimport { ROUTES } from './explore.routes';\nimport { SharedComponentModule } from '../../shared/components/shared.module';\n\nimport { ExploreComponent } from './explore.component';\nimport { ExploreMapOverlayComponent } from './components/map-overlay/map-overlay.component';\nimport { ExploreSearchComponent } from './components/search/search.component';\nimport { ExploreTimelineComponent } from './components/timeline/timeline.component';\n\nconst COMPONENTS: any = [\n    ExploreComponent,\n    ExploreMapOverlayComponent,\n    ExploreSearchComponent,\n    ExploreTimelineComponent\n];\n\n@NgModule({\n    declarations: [\n        ...COMPONENTS\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        WidgetsModule,\n        ComposerModule,\n        RouterModule.forChild(ROUTES),\n        SharedComponentModule,\n        ScrollingModule\n    ],\n    exports: [\n        ...COMPONENTS\n    ]\n})\nexport class AppExploreModule { }\n"],"sourceRoot":"webpack:///"}