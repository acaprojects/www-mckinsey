{"version":3,"sources":["./src/app/shell/reports/report-display/report-display.component.ts","./src/app/shell/reports/report-display/report-display.component.html","./src/app/shell/reports/report-table/report-table.component.ts","./src/app/shell/reports/report-table/report-table.component.html","./src/app/shell/reports/reports.component.ts","./src/app/shell/reports/reports.component.html","./src/app/shell/reports/reports.module.ts"],"names":[],"mappings":"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","file":"shell-reports-reports-module-es2015.js","sourcesContent":["import { Component, OnInit, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { first } from 'rxjs/operators';\n\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Building } from 'src/app/services/data/organisation/building.class';\nimport { ReportDetails } from '../reports.component';\nimport { Report } from 'src/app/services/data/reports/report.class';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'a-report-display',\n    templateUrl: './report-display.component.html',\n    styleUrls: ['./report-display.component.scss'],\n})\nexport class ReportDisplayComponent implements OnInit, OnChanges {\n    /** Details about the report being requested */\n    @Input() public report: ReportDetails;\n    /** Start date for the generated report */\n    public start_date: number = dayjs().startOf('d').valueOf();\n    /** End date for the generated report */\n    public end_date: number = dayjs().endOf('d').valueOf();\n    /** List of report data entries */\n    public report_data: Report;\n    /** Whether report data is loading */\n    public loading: boolean;\n    /** List of selected locations */\n    public locations: Building[];\n\n    /** List of available buildings */\n    public get buildings(): Building[] {\n        return this._service.Organisation.buildings;\n    }\n\n    constructor(private _service: ApplicationService) {}\n\n    public ngOnInit(): void {\n        this._service.Organisation.initialised.pipe(first(_ => _)).subscribe(() => {\n            this.locations = [this._service.Organisation.building];\n        })\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        /* istanbul ignore else */\n        if (changes.report) {\n            this.report_data = null;\n        }\n    }\n\n    /**\n     * Generate report\n     */\n    public generateReport() {\n        /* istanbul ignore else */\n        if (this.report) {\n            this.loading = true;\n            this.report_data = null;\n            this._service.Reports.show(this.report.id, {\n                date: dayjs(this.start_date).format('YYYY-MM-DD'),\n                start_date: Math.floor(this.start_date / 1000),\n                end_date: Math.floor(this.end_date / 1000),\n                zone_ids: this.locations.map((i) => i.id).join(','),\n            }).then(\n                (report) => {\n                    this.loading = false;\n                    this.report_data = new Report({ ...report, type: this.report.id });\n                },\n                (err) => {\n                    this.loading = false;\n                    this._service.notifyError(\n                        `Error generating report. Error: ${err.message || err}`\n                    );\n                }\n            );\n        }\n    }\n\n    public downloadReport() {\n        /* istanbul ignore else */\n        if (this.report_data) {\n            const date = dayjs(this.start_date).format('YYYY-MM-DD');\n            this.report_data.downloadCSV(\n                `${this.report.name.split(' ').join('_').toLowerCase()}+${date}.csv`\n            );\n        }\n    }\n}\n","<div class=\"header\">\n    <div class=\"period\">\n        <div class=\"field\">\n            <label for=\"start-date\">Start Date</label>\n            <a-date-field\n                name=\"start-date\"\n                [(ngModel)]=\"start_date\"\n                [from]=\"end_date / 10\"\n                [to]=\"end_date\"\n            ></a-date-field>\n        </div>\n        <div class=\"gap\">to</div>\n        <div class=\"field\">\n            <label for=\"end-date\">End Date</label>\n            <a-date-field\n                name=\"end-date\"\n                [(ngModel)]=\"end_date\"\n                [from]=\"start_date\"\n                [to]=\"start_date * 10\"\n            ></a-date-field>\n        </div>\n    </div>\n    <div class=\"location dark-mode\">\n        <mat-form-field appearance=\"outline\" *ngIf=\"buildings && buildings.length > 1\">\n            <mat-select name=\"locations\" [(ngModel)]=\"locations\" multiple>\n                <mat-select-trigger>\n                    {{ locations ? locations[0]?.name : '' }}\n                    <span *ngIf=\"locations?.length > 1\" class=\"selection\">\n                        (+{{ locations.length - 1 }}\n                        {{ locations?.length === 2 ? 'other' : 'others' }})\n                    </span>\n                </mat-select-trigger>\n                <mat-option *ngFor=\"let building of buildings\" [value]=\"building\">\n                    <div class=\"option\">\n                        <div class=\"code\">{{ building.code }}</div>\n                        <div class=\"name\">{{ building.name }}</div>\n                    </div>\n                </mat-option>\n            </mat-select>\n        </mat-form-field>\n    </div>\n    <div class=\"actions\">\n        <button mat-button name=\"generate\" [disabled]=\"loading\" (tapped)=\"generateReport()\">\n            <span *ngIf=\"!loading; else gen_loader\">Generate</span>\n            <ng-template #gen_loader><mat-spinner diameter=\"32\"></mat-spinner></ng-template>\n        </button>\n        <button mat-button name=\"download\" [disabled]=\"!report_data\" (tapped)=\"downloadReport()\">Download</button>\n    </div>\n</div>\n<div class=\"display\">\n    <ng-container *ngIf=\"!loading; else load_state\">\n        <ng-container *ngIf=\"report_data && report_data.data.length; else empty_state\">\n            <a-report-table [list]=\"report_data.data || []\" [details]=\"report\"></a-report-table>\n        </ng-container>\n    </ng-container>\n</div>\n<ng-template #empty_state>\n    <div class=\"info-block center\">\n        <div class=\"icon\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'arrow_upward' }\"></app-icon>\n        </div>\n        <div class=\"text\">\n            {{\n                report_data ? 'No entries for selected date' : 'Press generate above to view report'\n            }}\n        </div>\n    </div>\n</ng-template>\n<ng-template #load_state>\n    <div class=\"info-block center\">\n        <div class=\"icon\">\n            <mat-spinner diameter=\"32\"></mat-spinner>\n        </div>\n        <div class=\"text\">Loading report...</div>\n    </div>\n</ng-template>\n","import { Component, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { HashMap } from 'src/app/shared/utilities/types.utilities';\nimport { ReportDetails } from '../reports.component';\n\n@Component({\n    selector: 'a-report-table',\n    templateUrl: './report-table.component.html',\n    styleUrls: ['./report-table.component.scss'],\n})\nexport class ReportTableComponent implements OnChanges {\n    /** List of report table data */\n    @Input() public list: HashMap[] = [];\n    /** Map of details for report */\n    @Input() public details: ReportDetails;\n\n    public fields: string[] = [];\n\n    public ngOnChanges(changes: SimpleChanges) {\n        /* istanbul ignore else */\n        if (changes.list && this.list && this.list.length) {\n            this.fields = Object.keys(this.list[0]).filter(i => this.details.hide_fields.indexOf(i) < 0);\n        }\n    }\n}\n","<table cdk-table [dataSource]=\"list\">\n    <!-- Position Column -->\n    <ng-container *ngFor=\"let key of fields\" [cdkColumnDef]=\"key\">\n        <th cdk-header-cell [attr.name]=\"key\" *cdkHeaderCellDef>{{ key }}</th>\n        <td cdk-cell [attr.name]=\"key\" *cdkCellDef=\"let element\">{{ element[key] }}</td>\n    </ng-container>\n\n    <tr cdk-header-row *cdkHeaderRowDef=\"fields\"></tr>\n    <tr cdk-row *cdkRowDef=\"let row; columns: fields\"></tr>\n</table>\n","import { Component, OnInit } from '@angular/core';\nimport { ApplicationIcon } from 'src/app/shared/utilities/settings.interfaces';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { BaseDirective } from 'src/app/shared/base.directive';\n\nexport interface ReportDetails {\n    /** ID associated with the report */\n    id: string;\n    /** Name of the report */\n    name: string;\n    /** Shortened name of the report */\n    short_name: string;\n    /** More details about the report */\n    description: string;\n    /** Fields to hide on the UI */\n    hide_fields: string[];\n    /** Icon to display for report */\n    icon: ApplicationIcon;\n}\n\n@Component({\n    selector: 'a-reports',\n    templateUrl: './reports.component.html',\n    styleUrls: ['./reports.component.scss'],\n})\nexport class ReportsComponent extends BaseDirective implements OnInit {\n    /** Currently selected date */\n    public date: string;\n    /** ID of the active report */\n    public active_report: string;\n    /** List of available reports to display */\n    public readonly reports: ReportDetails[] = [\n        {\n            id: 'bookings',\n            name: 'Aggregate Bookings Report',\n            short_name: 'Bookings',\n            description: 'Generate comprehensive report on various aspects of bookings',\n            hide_fields: ['room_email'],\n            icon: { type: 'img', src: 'assets/img/report-booking.svg' }\n        },\n        {\n            id: 'catering',\n            name: 'Aggregate Charge Back Report',\n            short_name: 'Catering',\n            description: 'View confirmed catering report or mark up unconfirmed catering',\n            hide_fields: ['room_email'],\n            icon: { type: 'icon', class: 'material-icons', content: 'room_service' }\n        },\n    ];\n\n    public get the_report(): ReportDetails {\n        return this.reports.find(report => report.id === this.active_report);\n    }\n\n    constructor(private _route: ActivatedRoute, private _router: Router) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.subscription('route.params', this._route.paramMap.subscribe((params) => {\n            if (params.has('report')) {\n                this.active_report = params.get('report');\n            }\n        }));\n    }\n\n    public updateReport() {\n        this._router.navigate(['/reports', this.active_report]);\n    }\n}\n","<div class=\"reports\">\n    <a-sidebar></a-sidebar>\n    <div class=\"group\">\n        <a-topbar-header [(date)]=\"date\">\n            <div class=\"topbar\" *ngIf=\"active_report\">\n                <mat-form-field *ngIf=\"reports && reports.length > 1\" appearance=\"outline\">\n                    <mat-select [(ngModel)]=\"active_report\" (ngModelChange)=\"updateReport()\">\n                        <mat-option *ngFor=\"let report of reports\" [value]=\"report.id\">\n                            {{ report.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n        </a-topbar-header>\n        <main>\n            <div class=\"options\" *ngIf=\"!active_report; else report_display\">\n                <a\n                    class=\"card\"\n                    mat-button\n                    *ngFor=\"let report of reports\"\n                    [routerLink]=\"['/reports', report.id]\"\n                >\n                    <div class=\"content\">\n                        <div class=\"icon\">\n                            <app-icon [icon]=\"report.icon\"></app-icon>\n                        </div>\n                        <h3>{{ report.short_name }}</h3>\n                        <div class=\"details\">\n                            <div class=\"desc\">{{ report.description }}</div>\n                            <app-icon\n                                [icon]=\"{\n                                    class: 'material-icons',\n                                    content: 'keyboard_arrow_right'\n                                }\"\n                            ></app-icon>\n                        </div>\n                    </div>\n                </a>\n            </div>\n        </main>\n    </div>\n</div>\n<ng-template #report_display>\n    <a-report-display [report]=\"the_report\">\n    </a-report-display>\n</ng-template>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Route, RouterModule } from '@angular/router';\n\nimport { ReportsComponent } from './reports.component';\nimport { SharedContentModule } from 'src/app/shared/shared.module';\nimport { ReportDisplayComponent } from './report-display/report-display.component';\nimport { ReportTableComponent } from './report-table/report-table.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: ReportsComponent },\n    { path: ':report', component: ReportsComponent },\n    { path: '**', redirectTo: '' }\n];\n\n@NgModule({\n  declarations: [ReportsComponent, ReportDisplayComponent, ReportTableComponent],\n  imports: [CommonModule, FormsModule, RouterModule.forChild(ROUTES), SharedContentModule]\n})\nexport class ReportsModule { }\n"],"sourceRoot":"webpack:///"}