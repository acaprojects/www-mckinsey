{"version":3,"sources":["webpack:///node_modules/blob-util/dist/blob-util.es.js","webpack:///src/app/shell/catering/catering.component.ts","webpack:///src/app/shell/catering/catering.component.html","webpack:///src/app/shell/catering/catering.module.ts","webpack:///src/app/shell/catering/menu/item-list/item-list.component.ts","webpack:///src/app/shell/catering/menu/item-list/item-list.component.html","webpack:///src/app/shell/catering/menu/item/item.component.ts","webpack:///src/app/shell/catering/menu/item/item.component.html","webpack:///src/app/shell/catering/menu/menu.component.ts","webpack:///src/app/shell/catering/menu/menu.component.html","webpack:///src/app/shell/catering/orders/item/item.component.html","webpack:///src/app/shell/catering/orders/item/item.component.ts","webpack:///src/app/shell/catering/orders/orders.component.ts","webpack:///src/app/shell/catering/orders/orders.component.html","webpack:///src/app/shell/catering/overlays/category-modal/category-modal.component.ts","webpack:///src/app/shell/catering/overlays/category-modal/category-modal.component.html","webpack:///src/app/shell/catering/overlays/group-modal/group-modal.component.ts","webpack:///src/app/shell/catering/overlays/group-modal/group-modal.component.html","webpack:///src/app/shell/catering/overlays/item-modal/item-modal.component.ts","webpack:///src/app/shell/catering/overlays/item-modal/item-modal.component.html","webpack:///src/app/shell/catering/overlays/order-details-modal/booking-details/booking-details.component.ts","webpack:///src/app/shell/catering/overlays/order-details-modal/booking-details/booking-details.component.html","webpack:///src/app/shell/catering/overlays/order-details-modal/items/items.component.ts","webpack:///src/app/shell/catering/overlays/order-details-modal/items/items.component.html","webpack:///src/app/shell/catering/overlays/order-details-modal/messages/messages.component.html","webpack:///src/app/shell/catering/overlays/order-details-modal/messages/messages.component.ts","webpack:///src/app/shell/catering/overlays/order-details-modal/order-details-modal.component.html","webpack:///src/app/shell/catering/overlays/order-details-modal/order-details-modal.component.ts"],"names":["loadImage","src","crossOrigin","Promise","resolve","reject","img","Image","onload","onerror","imgToCanvas","canvas","document","createElement","width","height","context","getContext","drawImage","createBlob","parts","properties","type","Blob","e","name","Builder","BlobBuilder","MSBlobBuilder","MozBlobBuilder","WebKitBlobBuilder","builder","i","length","append","getBlob","createObjectURL","blob","URL","webkitURL","revokeObjectURL","url","blobToBinaryString","reader","FileReader","hasBinaryString","readAsBinaryString","onloadend","result","arrayBufferToBinaryString","readAsArrayBuffer","base64StringToBlob","base64","binaryStringToArrayBuffer","atob","binaryStringToBlob","binary","btoa","blobToBase64String","then","dataURLToBlob","dataURL","match","replace","buff","blobToDataURL","base64String","imgSrcToDataURL","quality","toDataURL","canvasToBlob","toBlob","imgSrcToBlob","arrayBufferToBlob","buffer","blobToArrayBuffer","ArrayBuffer","bytes","Uint8Array","byteLength","String","fromCharCode","buf","arr","charCodeAt","CateringComponent","_route","category","subscription","paramMap","subscribe","params","has","page","get","selector","templateUrl","styleUrls","ROUTES","path","component","redirectTo","CateringModule","forChild","declarations","imports","CateringMenuItemListComponent","_dialog","_service","changes","openGroupModal","group","parent_id","id","zones","building","ref","open","data","parent","componentInstance","event","reason","index","items","findIndex","item","metadata","splice","push","Organisation","CateringMenuItemComponent","title","content","icon","action","loading","openItemModal","deleteItem","animations","$event","stopPropagation","CateringMenuComponent","catering_menu","filtered_menu","state","listen","_","loadCateringMenu","search","filter","openCategoryModal","Menu","query","zone_id","menu","map","emit","err","notifyError","message","list","CateringOrdersItemComponent","statuses","colour","order","active_status","status","booking","catering","storePendingChange","save","maxHeight","maxWidth","toLowerCase","forEach","indexOf","find","Spaces","location_id","viewOrderDetails","CateringOrdersComponent","orders","filtered_orders","available_spaces","search$","initialised","pipe","next","date","space","initBookings","interval","unix","queryParamMap","view_id","details","localStorage","getItem","booking_details","JSON","parse","removeItem","undefined","sub_item","sub_sub_item","search_results$","startOf","zone_ids","available_from","available_to","endOf","space_list","bookings","booking_date","concat","sort","a","b","delivery_time","isSame","format","CateringCategoryModalComponent","_upload_manager","_dialog_ref","_data","form","required","description","image_path","markAllAsTouched","valid","toJSON","value","request","CateringCategories","update","add","close","target","files","fileReader","addEventListener","uploading","arrayBuffer","upload","file_name","uploads","complete","error","access_url","controls","setValue","clearInterval","submit","CateringGroupModalComponent","types","catering_type","must_select","unit_price","minimum_quantity","maximum_quantity","order_anytime","out_of_stock","CateringItemModalComponent","supplier_cost","allergy","CateringItems","OrderBookingDetailsComponent","setItem","stringify","storeBooking","OrderDetailsItemsComponent","OrderDetailsNotesComponent","bookingChange","new_note","user","Users","current","notes","valueOf","author","order_id","time","new_booking","note","addNote","OrderDetailsModalComponent","handleChange","changeEvents","bkn","deliver_at_time"],"mappings":"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AGPC,mBAAS,EAAE,CAAC,2BAAD;AAHJ,S;AAKmB,Q;;;;;;;;;;;;;;;;;;;;;;AEV9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AA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","file":"shell-catering-catering-module-es5.js","sourcesContent":["// TODO: including these in blob-util.ts causes typedoc to generate docs for them,\n// even with --excludePrivate ¯\\_(ツ)_/¯\n/** @private */\nfunction loadImage(src, crossOrigin) {\n    return new Promise(function (resolve, reject) {\n        var img = new Image();\n        if (crossOrigin) {\n            img.crossOrigin = crossOrigin;\n        }\n        img.onload = function () {\n            resolve(img);\n        };\n        img.onerror = reject;\n        img.src = src;\n    });\n}\n/** @private */\nfunction imgToCanvas(img) {\n    var canvas = document.createElement('canvas');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    // copy the image contents to the canvas\n    var context = canvas.getContext('2d');\n    context.drawImage(img, 0, 0, img.width, img.height, 0, 0, img.width, img.height);\n    return canvas;\n}\n\n/* global Promise, Image, Blob, FileReader, atob, btoa,\n   BlobBuilder, MSBlobBuilder, MozBlobBuilder, WebKitBlobBuilder, webkitURL */\n/**\n * Shim for\n * [`new Blob()`](https://developer.mozilla.org/en-US/docs/Web/API/Blob.Blob)\n * to support\n * [older browsers that use the deprecated `BlobBuilder` API](http://caniuse.com/blob).\n *\n * Example:\n *\n * ```js\n * var myBlob = blobUtil.createBlob(['hello world'], {type: 'text/plain'});\n * ```\n *\n * @param parts - content of the Blob\n * @param properties - usually `{type: myContentType}`,\n *                           you can also pass a string for the content type\n * @returns Blob\n */\nfunction createBlob(parts, properties) {\n    parts = parts || [];\n    properties = properties || {};\n    if (typeof properties === 'string') {\n        properties = { type: properties }; // infer content type\n    }\n    try {\n        return new Blob(parts, properties);\n    }\n    catch (e) {\n        if (e.name !== 'TypeError') {\n            throw e;\n        }\n        var Builder = typeof BlobBuilder !== 'undefined'\n            ? BlobBuilder : typeof MSBlobBuilder !== 'undefined'\n            ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined'\n            ? MozBlobBuilder : WebKitBlobBuilder;\n        var builder = new Builder();\n        for (var i = 0; i < parts.length; i += 1) {\n            builder.append(parts[i]);\n        }\n        return builder.getBlob(properties.type);\n    }\n}\n/**\n * Shim for\n * [`URL.createObjectURL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL.createObjectURL)\n * to support browsers that only have the prefixed\n * `webkitURL` (e.g. Android <4.4).\n *\n * Example:\n *\n * ```js\n * var myUrl = blobUtil.createObjectURL(blob);\n * ```\n *\n * @param blob\n * @returns url\n */\nfunction createObjectURL(blob) {\n    return (typeof URL !== 'undefined' ? URL : webkitURL).createObjectURL(blob);\n}\n/**\n * Shim for\n * [`URL.revokeObjectURL()`](https://developer.mozilla.org/en-US/docs/Web/API/URL.revokeObjectURL)\n * to support browsers that only have the prefixed\n * `webkitURL` (e.g. Android <4.4).\n *\n * Example:\n *\n * ```js\n * blobUtil.revokeObjectURL(myUrl);\n * ```\n *\n * @param url\n */\nfunction revokeObjectURL(url) {\n    return (typeof URL !== 'undefined' ? URL : webkitURL).revokeObjectURL(url);\n}\n/**\n * Convert a `Blob` to a binary string.\n *\n * Example:\n *\n * ```js\n * blobUtil.blobToBinaryString(blob).then(function (binaryString) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the binary string\n */\nfunction blobToBinaryString(blob) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        var hasBinaryString = typeof reader.readAsBinaryString === 'function';\n        reader.onloadend = function () {\n            var result = reader.result || '';\n            if (hasBinaryString) {\n                return resolve(result);\n            }\n            resolve(arrayBufferToBinaryString(result));\n        };\n        reader.onerror = reject;\n        if (hasBinaryString) {\n            reader.readAsBinaryString(blob);\n        }\n        else {\n            reader.readAsArrayBuffer(blob);\n        }\n    });\n}\n/**\n * Convert a base64-encoded string to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.base64StringToBlob(base64String);\n * ```\n * @param base64 - base64-encoded string\n * @param type - the content type (optional)\n * @returns Blob\n */\nfunction base64StringToBlob(base64, type) {\n    var parts = [binaryStringToArrayBuffer(atob(base64))];\n    return type ? createBlob(parts, { type: type }) : createBlob(parts);\n}\n/**\n * Convert a binary string to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.binaryStringToBlob(binaryString);\n * ```\n *\n * @param binary - binary string\n * @param type - the content type (optional)\n * @returns Blob\n */\nfunction binaryStringToBlob(binary, type) {\n    return base64StringToBlob(btoa(binary), type);\n}\n/**\n * Convert a `Blob` to a binary string.\n *\n * Example:\n *\n * ```js\n * blobUtil.blobToBase64String(blob).then(function (base64String) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the binary string\n */\nfunction blobToBase64String(blob) {\n    return blobToBinaryString(blob).then(btoa);\n}\n/**\n * Convert a data URL string\n * (e.g. `'data:image/png;base64,iVBORw0KG...'`)\n * to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.dataURLToBlob(dataURL);\n * ```\n *\n * @param dataURL - dataURL-encoded string\n * @returns Blob\n */\nfunction dataURLToBlob(dataURL) {\n    var type = dataURL.match(/data:([^;]+)/)[1];\n    var base64 = dataURL.replace(/^[^,]+,/, '');\n    var buff = binaryStringToArrayBuffer(atob(base64));\n    return createBlob([buff], { type: type });\n}\n/**\n * Convert a `Blob` to a data URL string\n * (e.g. `'data:image/png;base64,iVBORw0KG...'`).\n *\n * Example:\n *\n * ```js\n * var dataURL = blobUtil.blobToDataURL(blob);\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the data URL string\n */\nfunction blobToDataURL(blob) {\n    return blobToBase64String(blob).then(function (base64String) {\n        return 'data:' + blob.type + ';base64,' + base64String;\n    });\n}\n/**\n * Convert an image's `src` URL to a data URL by loading the image and painting\n * it to a `canvas`.\n *\n * Note: this will coerce the image to the desired content type, and it\n * will only paint the first frame of an animated GIF.\n *\n * Examples:\n *\n * ```js\n * blobUtil.imgSrcToDataURL('http://mysite.com/img.png').then(function (dataURL) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * ```js\n * blobUtil.imgSrcToDataURL('http://some-other-site.com/img.jpg', 'image/jpeg',\n *                          'Anonymous', 1.0).then(function (dataURL) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param src - image src\n * @param type - the content type (optional, defaults to 'image/png')\n * @param crossOrigin - for CORS-enabled images, set this to\n *                                         'Anonymous' to avoid \"tainted canvas\" errors\n * @param quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns Promise that resolves with the data URL string\n */\nfunction imgSrcToDataURL(src, type, crossOrigin, quality) {\n    type = type || 'image/png';\n    return loadImage(src, crossOrigin).then(imgToCanvas).then(function (canvas) {\n        return canvas.toDataURL(type, quality);\n    });\n}\n/**\n * Convert a `canvas` to a `Blob`.\n *\n * Examples:\n *\n * ```js\n * blobUtil.canvasToBlob(canvas).then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * Most browsers support converting a canvas to both `'image/png'` and `'image/jpeg'`. You may\n * also want to try `'image/webp'`, which will work in some browsers like Chrome (and in other browsers, will just fall back to `'image/png'`):\n *\n * ```js\n * blobUtil.canvasToBlob(canvas, 'image/webp').then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param canvas - HTMLCanvasElement\n * @param type - the content type (optional, defaults to 'image/png')\n * @param quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns Promise that resolves with the `Blob`\n */\nfunction canvasToBlob(canvas, type, quality) {\n    if (typeof canvas.toBlob === 'function') {\n        return new Promise(function (resolve) {\n            canvas.toBlob(resolve, type, quality);\n        });\n    }\n    return Promise.resolve(dataURLToBlob(canvas.toDataURL(type, quality)));\n}\n/**\n * Convert an image's `src` URL to a `Blob` by loading the image and painting\n * it to a `canvas`.\n *\n * Note: this will coerce the image to the desired content type, and it\n * will only paint the first frame of an animated GIF.\n *\n * Examples:\n *\n * ```js\n * blobUtil.imgSrcToBlob('http://mysite.com/img.png').then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * ```js\n * blobUtil.imgSrcToBlob('http://some-other-site.com/img.jpg', 'image/jpeg',\n *                          'Anonymous', 1.0).then(function (blob) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param src - image src\n * @param type - the content type (optional, defaults to 'image/png')\n * @param crossOrigin - for CORS-enabled images, set this to\n *                                         'Anonymous' to avoid \"tainted canvas\" errors\n * @param quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns Promise that resolves with the `Blob`\n */\nfunction imgSrcToBlob(src, type, crossOrigin, quality) {\n    type = type || 'image/png';\n    return loadImage(src, crossOrigin).then(imgToCanvas).then(function (canvas) {\n        return canvasToBlob(canvas, type, quality);\n    });\n}\n/**\n * Convert an `ArrayBuffer` to a `Blob`.\n *\n * Example:\n *\n * ```js\n * var blob = blobUtil.arrayBufferToBlob(arrayBuff, 'audio/mpeg');\n * ```\n *\n * @param buffer\n * @param type - the content type (optional)\n * @returns Blob\n */\nfunction arrayBufferToBlob(buffer, type) {\n    return createBlob([buffer], type);\n}\n/**\n * Convert a `Blob` to an `ArrayBuffer`.\n *\n * Example:\n *\n * ```js\n * blobUtil.blobToArrayBuffer(blob).then(function (arrayBuff) {\n *   // success\n * }).catch(function (err) {\n *   // error\n * });\n * ```\n *\n * @param blob\n * @returns Promise that resolves with the `ArrayBuffer`\n */\nfunction blobToArrayBuffer(blob) {\n    return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        reader.onloadend = function () {\n            var result = reader.result || new ArrayBuffer(0);\n            resolve(result);\n        };\n        reader.onerror = reject;\n        reader.readAsArrayBuffer(blob);\n    });\n}\n/**\n * Convert an `ArrayBuffer` to a binary string.\n *\n * Example:\n *\n * ```js\n * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)\n * ```\n *\n * @param buffer - array buffer\n * @returns binary string\n */\nfunction arrayBufferToBinaryString(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var length = bytes.byteLength;\n    var i = -1;\n    while (++i < length) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return binary;\n}\n/**\n * Convert a binary string to an `ArrayBuffer`.\n *\n * ```js\n * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)\n * ```\n *\n * @param binary - binary string\n * @returns array buffer\n */\nfunction binaryStringToArrayBuffer(binary) {\n    var length = binary.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    var i = -1;\n    while (++i < length) {\n        arr[i] = binary.charCodeAt(i);\n    }\n    return buf;\n}\n\nexport { createBlob, createObjectURL, revokeObjectURL, blobToBinaryString, base64StringToBlob, binaryStringToBlob, blobToBase64String, dataURLToBlob, blobToDataURL, imgSrcToDataURL, canvasToBlob, imgSrcToBlob, arrayBufferToBlob, blobToArrayBuffer, arrayBufferToBinaryString, binaryStringToArrayBuffer };\n","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { BaseDirective } from 'src/app/shared/base.directive';\n\n@Component({\n    selector: 'app-catering',\n    templateUrl: './catering.component.html',\n    styleUrls: ['./catering.component.scss']\n})\nexport class CateringComponent extends BaseDirective implements OnInit {\n    /** Currently selected date */\n    public date: string;\n    /** Name of the page to display */\n    public page: string;\n    /** Filter string for searching */\n    public search_str: string;\n    /** Toggle for new category modal */\n    public category: number = 0;\n    /** Toggle for new package modal */\n    public package: number = 0;\n    /** Number of categories being displayed */\n    public length: number;\n\n    constructor(private _route: ActivatedRoute) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.category = 0;\n        this.subscription('route.params', this._route.paramMap.subscribe((params) => {\n            if (params.has('page')) {\n                this.page = params.get('page');\n            }\n        }));\n    }\n}\n","<div class=\"catering\">\n    <a-sidebar></a-sidebar>\n    <div class=\"group\">\n        <a-topbar-header [(date)]=\"date\">\n            <div class=\"input-wrapper\" *ngIf=\"page\">\n                <mat-form-field [class.rounded]=\"true\" appearance=\"outline\">\n                    <app-icon [icon]=\"{ class: 'material-icons', content: 'search' }\" matPrefix></app-icon>\n                    <input matInput [(ngModel)]=\"search_str\" name=\"visitor-name\" placeholder=\"Search...\" />\n                    <button mat-icon-button matSuffix *ngIf=\"search_str\" (tapped)=\"search_str = ''\">\n                        <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n                    </button>\n                </mat-form-field>\n            </div>\n            <button mat-button *ngIf=\"page === 'menu'\" (tapped)=\"category = category + 1\">New Category</button>\n            <button mat-button *ngIf=\"page === 'menu' && length\" (tapped)=\"package = package + 1\">Add sub-category</button>\n        </a-topbar-header>\n        <main>\n            <ng-container [ngSwitch]=\"page\">\n                <ng-container *ngSwitchCase=\"'menu'\">\n                    <a-catering-menu [search]=\"search_str\" [category]=\"category\" [package]=\"package\" (length)=\"length=$event\"></a-catering-menu>\n                </ng-container>\n                <ng-container *ngSwitchCase=\"'orders'\">\n                    <a-catering-orders [date]=\"date\" [search]=\"search_str\"></a-catering-orders>\n                </ng-container>\n                <ng-container *ngSwitchDefault>\n                    <div class=\"options\">\n                        <a class=\"card\" mat-button [routerLink]=\"['/catering', 'menu']\">\n                            <div class=\"content\">\n                                <div\n                                    class=\"img\"\n                                    [style.background]=\"\n                                        'linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(assets/img/menus.jpg)'\n                                            | safe: 'style'\n                                    \"\n                                >\n                                    <h2>Menus and Pricing</h2>\n                                </div>\n                                <div class=\"desc\">View and edit menus and pricing</div>\n                            </div>\n                        </a>\n                        <a class=\"card\" mat-button [routerLink]=\"['/catering', 'orders']\">\n                            <div class=\"content\">\n                                <div\n                                    class=\"img\"\n                                    [style.background]=\"\n                                        'linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(assets/img/orders.jpg)'\n                                            | safe: 'style'\n                                    \"\n                                >\n                                    <h2>Catering Orders</h2>\n                                </div>\n                                <div class=\"desc\">\n                                    View catering orders and their statuses upon arrival\n                                </div>\n                            </div>\n                        </a>\n                    </div>\n                </ng-container>\n            </ng-container>\n        </main>\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Route, RouterModule } from '@angular/router';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { CateringComponent } from './catering.component';\nimport { SharedContentModule } from 'src/app/shared/shared.module';\nimport { CateringOrdersComponent } from './orders/orders.component';\nimport { CateringMenuComponent } from './menu/menu.component';\nimport { CateringMenuItemListComponent } from './menu/item-list/item-list.component';\nimport { CateringMenuItemComponent } from './menu/item/item.component';\nimport { CateringCategoryModalComponent } from './overlays/category-modal/category-modal.component';\nimport { CateringGroupModalComponent } from './overlays/group-modal/group-modal.component';\nimport { CateringItemModalComponent } from './overlays/item-modal/item-modal.component';\nimport { CateringOrdersItemComponent } from './orders/item/item.component';\nimport { OrderDetailsModalComponent } from './overlays/order-details-modal/order-details-modal.component';\nimport { OrderDetailsItemsComponent } from './overlays/order-details-modal/items/items.component';\nimport { OrderBookingDetailsComponent } from './overlays/order-details-modal/booking-details/booking-details.component';\nimport { OrderDetailsNotesComponent } from './overlays/order-details-modal/messages/messages.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: CateringComponent },\n    { path: ':page', component: CateringComponent },\n    { path: '**', redirectTo: '' },\n];\n\n@NgModule({\n    declarations: [\n        CateringComponent,\n        CateringOrdersComponent,\n        CateringMenuComponent,\n        CateringMenuItemListComponent,\n        CateringMenuItemComponent,\n        CateringCategoryModalComponent,\n        CateringGroupModalComponent,\n        CateringItemModalComponent,\n        CateringOrdersItemComponent,\n        OrderDetailsModalComponent,\n        OrderDetailsItemsComponent,\n        OrderBookingDetailsComponent,\n        OrderDetailsNotesComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        ReactiveFormsModule,\n        RouterModule.forChild(ROUTES),\n        SharedContentModule,\n    ],\n})\nexport class CateringModule {}\n","import { Component, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\n\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\nimport { CateringGroupModalComponent } from '../../overlays/group-modal/group-modal.component';\nimport { Building } from 'src/app/services/data/organisation/building.class';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { DialogEvent } from 'src/app/shared/utilities/types.utilities';\n\n@Component({\n    selector: 'a-catering-menu-item-list',\n    templateUrl: './item-list.component.html',\n    styleUrls: ['./item-list.component.scss'],\n})\nexport class CateringMenuItemListComponent extends BaseDirective implements OnChanges {\n    /** Category to display details for */\n    @Input() public category: CateringCategory;\n    /** Toggle for new groups */\n    @Input() public package: number;\n\n    /** Currently active building */\n    public get building(): Building {\n        return this._service.Organisation.building;\n    }\n\n    constructor(private _dialog: MatDialog, private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        /* istanbul ignore else */\n        if (changes.package && this.package) {\n            this.openGroupModal();\n        }\n    }\n\n    public openGroupModal(group?: CateringCategory) {\n        /* istanbul ignore else */\n        if (!group) {\n            group = new CateringCategory({\n                parent_id: this.category.id,\n                zones: [this.building.id],\n            });\n        }\n        const ref = this._dialog.open(CateringGroupModalComponent, {\n            data: { group, parent: this.category },\n        });\n        this.subscription(\n            'category_modal',\n            ref.componentInstance.event.subscribe((event: DialogEvent) => {\n                /* istanbul ignore else */\n                if (event.reason === 'done') {\n                    const index = this.category.items.findIndex(\n                        (item) => event.metadata.id === item.id\n                    );\n                    if (index >= 0) {\n                        (this.category.items as any[]).splice(index, 1, event.metadata);\n                    } else {\n                        (this.category.items as any[]).push(event.metadata);\n                    }\n                }\n            })\n        );\n    }\n}\n","<div class=\"list\">\n    <ng-container *ngIf=\"category && category.items && category.items.length; else empty_state\">\n        <div class=\"item\" *ngFor=\"let item of category.items\">\n            <a-catering-menu-item [parent]=\"category\" [item]=\"item\"></a-catering-menu-item>\n        </div>\n    </ng-container>\n</div>\n<ng-template #empty_state>\n    <div class=\"info-block center\">\n        <div class=\"icon\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n        </div>\n        <div class=\"text\">No packages or sub-categories for {{ category.name }}</div>\n    </div>\n</ng-template>\n","import { Component, OnInit, Input, SimpleChanges } from '@angular/core';\n\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\nimport { ANIMATION_SHOW_CONTRACT_EXPAND } from 'src/app/shared/globals/angular-animations';\nimport { MatDialog } from '@angular/material/dialog';\nimport { CateringGroupModalComponent } from '../../overlays/group-modal/group-modal.component';\nimport { CateringItem } from 'src/app/services/data/catering/catering-item.class';\nimport { ConfirmModalComponent } from 'src/app/overlays/confirm-modal/confirm-modal.component';\nimport { CateringComponent } from '../../catering.component';\nimport { DialogEvent } from 'src/app/shared/utilities/types.utilities';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Building } from 'src/app/services/data/organisation/building.class';\nimport { CateringItemModalComponent } from '../../overlays/item-modal/item-modal.component';\n\n@Component({\n    selector: 'a-catering-menu-item',\n    templateUrl: './item.component.html',\n    styleUrls: ['./item.component.scss'],\n    animations: [ANIMATION_SHOW_CONTRACT_EXPAND],\n})\nexport class CateringMenuItemComponent {\n    /** Whether item is a child of another */\n    @Input() public subitem: boolean;\n    /** Item to display */\n    @Input() public item: CateringCategory;\n\n    @Input() public parent: CateringCategory;\n    /** Current symbol for the selected space */\n    @Input() public symbol: string;\n    /** Whether item should be disabled if not available anytime */\n    @Input() public disabled: boolean;\n    /** Whether to show children items */\n    public show_children: boolean;\n\n    /** Currently active building */\n    public get building(): Building {\n        return this._service.Organisation.building;\n    }\n\n    constructor(private _dialog: MatDialog, private _service: ApplicationService) {}\n\n    public openGroupModal(group?: CateringCategory) {\n        /* istanbul ignore else */\n        if (!group) {\n            group = new CateringCategory({ parent_id: this.item.id, zones: [this.building.id] });\n        }\n        this._dialog.open(CateringGroupModalComponent, {\n            data: { group, parent: group.id ? this.parent : this.item },\n        });\n    }\n\n    public openItemModal(item?: CateringItem) {\n        /* istanbul ignore else */\n        if (!item) {\n            item = new CateringItem({ parent_id: this.item.id });\n        }\n        this._dialog.open(CateringItemModalComponent, {\n            data: { item, parent: item.id ? this.parent : this.item },\n        });\n    }\n\n    public deleteItem() {\n        const type =\n            this.item instanceof CateringComponent\n                ? this.item.package\n                    ? 'Package'\n                    : 'Sub-category'\n                : 'Item';\n        const ref = this._dialog.open(ConfirmModalComponent, {\n            data: {\n                title: `Delete catering ${type}`,\n                content: `Are you sure you want to delete the catering ${type} \"${\n                    this.item.name\n                }\"?<br />${\n                    this.item instanceof CateringCategory\n                        ? 'Any children items or groups will be <strong>immediately</strong> deleted'\n                        : ''\n                }`,\n                icon: { type: 'icon', class: 'material-icons', content: 'delete' },\n                action: 'Ok',\n            },\n        });\n        ref.componentInstance.event.subscribe((event: DialogEvent) => {\n            /* istanbul ignore else */\n            if (event.reason === 'done') {\n                ref.componentInstance.loading = `Deleting ${type}...`;\n            }\n        });\n    }\n}\n","<div\n    class=\"catering-item\"\n    *ngIf=\"item\"\n    [class.subitem]=\"subitem\"\n>\n    <div\n        class=\"image\"\n        *ngIf=\"!subitem\"\n        [style.background-image]=\"'url(' + item.image_path + ')'\"\n    ></div>\n    <div class=\"details\">\n        <div class=\"name\">{{ item.name }}</div>\n        <div class=\"description\">{{ item.package ? '[Package] ' : '' }}{{ item.description }}</div>\n        <div class=\"options\">\n            <div class=\"option price mobile-only\" *ngIf=\"item.unit_price\">\n                {{ item.unit_price / 100 | currency: symbol }}\n            </div>\n            <div\n                class=\"option\"\n                *ngIf=\"item.package && item.items.length && !item.must_select\"\n            >\n                Contains {{ item.items.length }} item{{ item.items.length === 1 ? '' : 's' }}\n            </div>\n            <div\n                class=\"option\"\n                *ngIf=\"item.package && item.must_select && item.amount > 0\"\n            >\n                <span class=\"not-mobile\">Selected </span>{{ item.must_select }} opt<span\n                    class=\"not-mobile\"\n                    >ion</span\n                >{{ item.items.length === 1 ? '' : 's' }}\n            </div>\n        </div>\n    </div>\n    <div class=\"option price not-mobile\" *ngIf=\"item.unit_price\">\n        {{ item.unit_price / 100 | currency: symbol }}\n    </div>\n    <button mat-icon-button name=\"more\" [matMenuTriggerFor]=\"appMenu\">\n        <app-icon [icon]=\"{ class:'material-icons', content: 'more_vert'}\"></app-icon>\n    </button>\n    <button\n        mat-icon-button\n        name=\"show-children\"\n        [class.hide]=\"!(item.items && item.items.length)\"\n        (tapped)=\"show_children = !show_children\"\n    >\n        <app-icon\n            [icon]=\"{\n                class: 'material-icons',\n                content: show_children ? 'keyboard_arrow_up' : 'keyboard_arrow_down'\n            }\"\n        ></app-icon>\n    </button>\n</div>\n<div class=\"children\" [@show]=\"show_children ? 'show' : 'hide'\">\n    <a-catering-menu-item\n        *ngFor=\"let sub_item of item.items\"\n        [subitem]=\"true\"\n        [symbol]=\"symbol\"\n        [parent]=\"item\"\n        [item]=\"sub_item\"\n    ></a-catering-menu-item>\n</div>\n<mat-menu #appMenu=\"matMenu\">\n    <ng-container *ngIf=\"item.items\">\n        <button mat-menu-item name=\"add-group\" (tapped)=\"openGroupModal()\">\n            <div class=\"group\">\n                <app-icon [icon]=\"{ class:'material-icons', content: 'add'}\"></app-icon>\n                <div class=\"text\">Add Group</div>\n            </div>\n        </button>\n        <button mat-menu-item name=\"add-item\" (tapped)=\"openItemModal()\">\n            <div class=\"group\">\n                <app-icon [icon]=\"{ class:'material-icons', content: 'add'}\"></app-icon>\n                <div class=\"text\">Add Item</div>\n            </div>\n        </button>\n    </ng-container>\n    <button mat-menu-item name=\"edit\" (tapped)=\"item.items ? openGroupModal(item) : openItemModal(item)\">\n        <div class=\"group\">\n            <app-icon [icon]=\"{ class:'material-icons', content: 'edit'}\"></app-icon>\n            <div class=\"text\">Edit {{ item.items ? (item.package ? 'Package' : 'Sub-category') : 'item' }}</div>\n        </div>\n    </button>\n    <button mat-menu-item name=\"delete\" class=\"delete\" (tapped)=\"deleteItem()\">\n        <div class=\"group\">\n            <app-icon [icon]=\"{ class:'material-icons', content: 'delete'}\"></app-icon>\n            <div class=\"text\">Delete {{ item.items ? (item.package ? 'Package' : 'Sub-category') : 'item' }}</div>\n        </div>\n    </button>\n</mat-menu>\n","import { Component, OnInit, Input, SimpleChanges, EventEmitter, Output } from '@angular/core';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Building } from 'src/app/services/data/organisation/building.class';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\nimport { MatDialog } from '@angular/material/dialog';\nimport { CateringCategoryModalComponent } from '../overlays/category-modal/category-modal.component';\nimport { HashMap, DialogEvent } from 'src/app/shared/utilities/types.utilities';\n\n@Component({\n    selector: 'a-catering-menu',\n    templateUrl: './menu.component.html',\n    styleUrls: ['./menu.component.scss'],\n})\nexport class CateringMenuComponent extends BaseDirective implements OnInit {\n    /** Filter string for catering items */\n    @Input() public search: string;\n    /** Opens new category modal on change */\n    @Input() public category: number;\n    /** Opens new category modal on change */\n    @Input() public package: number;\n    /** Emitter for changes to the length of catering categories */\n    @Output() public length = new EventEmitter<number>();\n    /** List of top level catering categories */\n    public catering_menu: CateringCategory[] = [];\n    /** Filtered list of top level catering categories */\n    public filtered_menu: CateringCategory[] = [];\n    /** Whether menu details are being loaded */\n    public loading: boolean;\n    /** Index of the active tab */\n    public index: number = 0;\n    /** Map of indexes to package open state */\n    public state: HashMap<number> = {};\n\n    /** Currently active building */\n    public get building(): Building {\n        return this._service.Organisation.building;\n    }\n\n    constructor(private _service: ApplicationService, private _dialog: MatDialog) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.subscription(\n            'building',\n            this._service.Organisation.listen('active_building').subscribe((_) => {\n                this.index = 0;\n                this.catering_menu = [];\n                this.filtered_menu = [];\n                this.loadCateringMenu();\n            })\n        );\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.search) {\n            this.filtered_menu = this.filter(this.catering_menu);\n        }\n        if (changes.category && this.category) {\n            this.openCategoryModal();\n        }\n        if (changes.package) {\n            this.state[this.index] = this.package;\n        }\n    }\n\n    public openCategoryModal(category?: CateringCategory) {\n        /* istanbul ignore else */\n        if (!category) {\n            category = new CateringCategory({ zones: [this.building.id] });\n        }\n        const ref = this._dialog.open(CateringCategoryModalComponent, { data: { category } });\n        this.subscription('category_modal', ref.componentInstance.event.subscribe((event: DialogEvent) => {\n            /* istanbul ignore else */\n            if (event.reason === 'done') {\n                const index = this.catering_menu.findIndex(item => event.metadata.id === item.id);\n                if (index >= 0) {\n                    this.catering_menu.splice(index, 1, event.metadata);\n                    this.index = index;\n                } else {\n                    this.index = this.catering_menu.length;\n                    this.catering_menu.push(event.metadata);\n                }\n            }\n        }));\n\n    }\n\n    private loadCateringMenu(): void {\n        /* istanbul ignore else */\n        if (this.building) {\n            this.loading = true;\n            this._service.Menu.query({ zone_id: this.building.id }).then(\n                (menu: any[]) => {\n                    this.catering_menu = (menu || []).map((item) => new CateringCategory(item));\n                    this.length.emit(this.catering_menu.length);\n                    this.filtered_menu = this.filter(this.catering_menu);\n                    this.loading = false;\n                },\n                (err) => {\n                    this._service.notifyError(\n                        `Error loading menu for ${this.building.name}. Error: ${err.message | err}`,\n                        'Retry',\n                        () => this.loadCateringMenu()\n                    );\n                    this.loading = false;\n                }\n            );\n        }\n    }\n\n    /** Filter the list of catering items */\n    private filter(list: CateringCategory[]) {\n        return list;\n    }\n}\n","<div class=\"menu page dark-mode\">\n    <ng-container *ngIf=\"!loading; else load_state\">\n        <mat-tab-group *ngIf=\"filtered_menu && filtered_menu.length; else empty_state\" [(selectedIndex)]=\"index\">\n            <mat-tab *ngFor=\"let category of filtered_menu; let i = index\">\n                <ng-template mat-tab-label>\n                    <div class=\"tab-label\">\n                        <div class=\"label\">{{category?.name}}</div>\n                        <button mat-icon-button name=\"edit\" (click)=\"$event.stopPropagation()\" (tapped)=\"openCategoryModal(category)\">\n                            <app-icon [icon]=\"{ class: 'material-icons', content: 'edit' }\"></app-icon>\n                        </button>\n                    </div>\n                </ng-template>\n                <a-catering-menu-item-list [package]=\"state[i]\" [category]=\"category\"></a-catering-menu-item-list>\n            </mat-tab>\n        </mat-tab-group>\n    </ng-container>\n</div>\n<ng-template #load_state>\n    <div class=\"info-block center\">\n        <div class=\"icon\">\n            <mat-spinner diameter=\"32\"></mat-spinner>\n        </div>\n        <div class=\"text\">Loading menu for {{ building.name }}</div>\n    </div>\n</ng-template>\n<ng-template #empty_state>\n    <div class=\"info-block center\">\n        <div class=\"icon\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n        </div>\n        <div class=\"text\">No menu categories for {{ building.name }}</div>\n    </div>\n</ng-template>\n","<div class=\"order\" [class.showing]=\"show_items || search\">\n    <div class=\"details\" [class.showing]=\"show_items\" [class.not-match]=\"search\">\n        <div class=\"icon\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'room_service' }\"></app-icon>\n        </div>\n        <div class=\"time\">{{ order.deliver_at_time }}</div>\n        <div class=\"location\">{{ order.location || space?.name }}</div>\n        <div class=\"host\">{{ order.booking?.organiser.name }}</div>\n        <div class=\"package-type\">\n            <ng-container *ngIf=\"order.kitchen\"><span>(K)</span> Kitchen<br /></ng-container>\n            <ng-container *ngIf=\"order.pantry\"><span>(P)</span> Pantry</ng-container>\n        </div>\n        <div class=\"status\">\n            <mat-form-field\n                class=\"rounded visible\"\n                appearance=\"outline\"\n                *ngIf=\"statuses && statuses.length > 1\"\n            >\n                <mat-select\n                    #select\n                    [(value)]=\"active_status\"\n                    (valueChange)=\"updateStatus()\"\n                    placeholder=\"New Order\"\n                    [disabled]=\"loading\"\n                >\n                    <mat-select-trigger>\n                        <div class=\"group\">\n                            <div class=\"icon\">\n                                <div\n                                    class=\"wrapper\"\n                                    [style.backgroundColor]=\"loading ? '#eee' : status_details?.colour\"\n                                >\n                                    <app-icon *ngIf=\"!loading\" [icon]=\"status_details?.icon\"></app-icon>\n                                    <mat-spinner *ngIf=\"loading\" diameter=\"16\"></mat-spinner>\n                                </div>\n                            </div>\n                            <div class=\"text\">{{ status_details?.name }}</div>\n                        </div>\n                    </mat-select-trigger>\n                    <mat-option *ngFor=\"let status of statuses\" [value]=\"status.id\">\n                        <div class=\"group\">\n                            <div class=\"text\">{{ status.name }}</div>\n                            <div class=\"colour\" [style.backgroundColor]=\"status.colour\"></div>\n                        </div>\n                    </mat-option>\n                </mat-select>\n            </mat-form-field>\n        </div>\n        <button mat-icon-button name=\"view\" (tapped)=\"viewOrderDetails()\">\n            <app-icon\n                [icon]=\"{\n                    class: 'material-icons',\n                    content: 'visibility'\n                }\"\n            ></app-icon>\n        </button>\n        <div class=\"more\">\n            <button mat-icon-button name=\"more\" (tapped)=\"show_items = !show_items\">\n                <app-icon\n                    [icon]=\"{\n                        class: 'material-icons',\n                        content: show_items ? 'keyboard_arrow_down' : 'keyboard_arrow_right'\n                    }\"\n                ></app-icon>\n            </button>\n        </div>\n    </div>\n    <div class=\"list\" [@show]=\"show_items || search ? 'show' : 'hide'\">\n        <div class=\"bar\"></div>\n        <div class=\"item\" *ngFor=\"let item of order.items\" [class.not-match]=\"search && !search_matches[item.id]\">\n            <div class=\"icon\">\n                <app-icon [icon]=\"{ class: 'material-icons', content: 'local_pizza' }\"></app-icon>\n            </div>\n            <div class=\"item-details\">\n                <div class=\"name\">{{ item.name }}</div>\n                <div class=\"quanity\">x {{ item.amount }}</div>\n            </div>\n            <div class=\"bar\"></div>\n        </div>\n    </div>\n</div>\n","import { Component, OnInit, Input, SimpleChanges, OnChanges } from '@angular/core';\n\nimport {\n    CateringOrder,\n    CateringOrderStatus,\n} from 'src/app/services/data/catering/catering-order.class';\nimport { ANIMATION_SHOW_CONTRACT_EXPAND } from 'src/app/shared/globals/angular-animations';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { Identity, HashMap } from 'src/app/shared/utilities/types.utilities';\nimport { MatDialog } from '@angular/material/dialog';\nimport { OrderDetailsModalComponent } from '../../overlays/order-details-modal/order-details-modal.component';\n\n@Component({\n    selector: 'a-catering-orders-item',\n    templateUrl: './item.component.html',\n    styleUrls: ['./item.component.scss'],\n    animations: [ANIMATION_SHOW_CONTRACT_EXPAND],\n})\nexport class CateringOrdersItemComponent implements OnChanges {\n    /** Catering order details to display */\n    @Input() public order: CateringOrder;\n    /** Search filter string */\n    @Input() public search: string;\n    /** Whether order items should be shown */\n    public show_items: boolean;\n    /** Actively selected status */\n    public active_status: CateringOrderStatus;\n    /** Whether status is being updated */\n    public loading: boolean;\n\n    public get search_matches(): HashMap<boolean> {\n        const map = {};\n        const filter = this.search.toLowerCase();\n        this.order.items.forEach(item => {\n            map[item.id] = item.name.toLowerCase().indexOf(filter) >= 0;\n        });\n        return map;\n    }\n\n    public statuses: Identity[] = [\n        { id: 'accepted', name: 'Accepted', icon: { class: 'custom-accepted' }, colour: '#3996B6' },\n        {\n            id: 'preparing',\n            name: 'Preparing',\n            icon: { class: 'custom-preparing' },\n            colour: '#E7536B',\n        },\n        { id: 'ready', name: 'Ready', icon: { class: 'custom-ready' }, colour: '#FFD028' },\n        {\n            id: 'delivered',\n            name: 'Delivered',\n            icon: { class: 'custom-delivered' },\n            colour: '#75BB43',\n        },\n        {\n            id: 'cancelled',\n            name: 'Cancelled',\n            icon: { class: 'custom-cancelled' },\n            colour: '#747474',\n        },\n    ];\n\n    /** Details for the active status */\n    public get status_details(): Identity {\n        return this.statuses.find((status) => status.id === this.active_status) || ({} as any);\n    }\n\n    public get space(): Space {\n        return this._service.Spaces.find(this.order.location_id);\n    }\n\n    constructor(private _service: ApplicationService, private _dialog: MatDialog) {}\n\n    public ngOnChanges(changes: SimpleChanges) {\n        /* istanbul ignore else */\n        if (changes.order && this.order) {\n            this.active_status = this.order.status;\n        }\n    }\n\n    /** Update the status of the order in the booking */\n    public async updateStatus(): Promise<void> {\n        const booking = this.order.booking;\n        /* istanbul ignore else */\n        if (booking) {\n            this.loading = true;\n            const catering = [...booking.catering];\n            catering.splice(\n                catering.findIndex((order) => order.id === this.order.id),\n                1,\n                new CateringOrder({ ...this.order, status: this.active_status })\n            );\n            booking.storePendingChange('catering', catering);\n            await booking.save().catch((err) => {\n                this._service.notifyError(\n                    `Error updating order status. Error: ${err.message || err}`\n                );\n                this.active_status = this.order.status;\n                this.loading = false;\n            });\n            this.loading = false;\n        }\n    }\n\n    /** Open modal to view catering order details */\n    public viewOrderDetails(): void {\n        this._dialog.open(OrderDetailsModalComponent, {\n            maxHeight: '95vh',\n            maxWidth: '95vw',\n            data: {\n                order: this.order,\n                booking: this.order.booking\n            }\n        });\n    }\n}\n","import { Component, OnInit, Input, SimpleChanges, OnChanges } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Observable, Subject, of } from 'rxjs';\nimport {\n    debounceTime,\n    distinctUntilChanged,\n    switchMap,\n    catchError,\n    map,\n    first,\n} from 'rxjs/operators';\n\nimport { CateringOrder } from 'src/app/services/data/catering/catering-order.class';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { Building } from 'src/app/services/data/organisation/building.class';\nimport { unique } from 'src/app/shared/utilities/general.utilities';\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\nimport { OrderDetailsModalComponent } from '../overlays/order-details-modal/order-details-modal.component';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'a-catering-orders',\n    templateUrl: './orders.component.html',\n    styleUrls: ['./orders.component.scss'],\n})\nexport class CateringOrdersComponent extends BaseDirective implements OnInit, OnChanges {\n    /** Search filter string */\n    @Input() public search: string = '';\n    /** Currently selected date */\n    @Input() public date: number;\n    /** List of catering orders for the selected date */\n    public orders: CateringOrder[] = [];\n    /** List of catering orders for the selected date */\n    public filtered_orders: CateringOrder[] = [];\n    /** Whether catering orders are loading */\n    public loading: boolean;\n    /** List of space IDs for active building */\n    public available_spaces: string[] = [];\n    /** List of items from an API search */\n    public search_results$: Observable<CateringOrder[]>;\n    /** Subject holding the value of the search */\n    public readonly search$ = new Subject<string>();\n\n    /** Display string for the currenly selected date */\n    public get date_display(): string {\n        const date = dayjs(this.date);\n        return dayjs().isSame(date, 'd') ? 'Today' : date.format('DD MMM YYYY');\n    }\n\n    /** Active building */\n    public get building(): Building {\n        return this._service.Organisation.building;\n    }\n\n    constructor(\n        private _service: ApplicationService,\n        private _route: ActivatedRoute,\n        private _dialog: MatDialog\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.Spaces.initialised.pipe(first((_) => _)).subscribe(() => {\n            this.subscription(\n                'building',\n                this._service.Organisation.listen('active_building').subscribe(() => {\n                    this.search$.next(`${this.date}|${this.building.id}`);\n                    this.available_spaces = this._service.Spaces.filter(\n                        (space) => space.zones.indexOf(this.building.id) >= 0\n                    ).map((i) => i.id);\n                })\n            );\n            this.available_spaces = this._service.Spaces.filter(\n                (space) => space.zones.indexOf(this.building.id) >= 0\n            ).map((i) => i.id);\n            this.initBookings();\n            this.interval(\n                'update_bookings',\n                () => this.search$.next(`${this.date}|${this.building.id}|${dayjs().unix()}`),\n                30 * 1000\n            );\n            this.search$.next(`${this.date}|${this.building.id}|${dayjs().unix()}`);\n            this.subscription(\n                'route.query',\n                this._route.queryParamMap.subscribe((params) => {\n                    /* istanbul ignore else */\n                    if (params.has('view')) {\n                        const view_id = params.get('view');\n                        const details = localStorage.getItem('CONCIERGE.view_order');\n                        const booking_details = localStorage.getItem('CONCIERGE.view_booking');\n                        /* istanbul ignore else */\n                        if (details) {\n                            const booking = new Booking(\n                                JSON.parse(booking_details)\n                            );\n                            const order = new CateringOrder(JSON.parse(details));\n                            order.booking = booking;\n                            this.viewOrderDetails(order);\n                            localStorage.removeItem('CONCIERGE.view_order');\n                            localStorage.removeItem('CONCIERGE.view_booking');\n                        }\n                    }\n                })\n            );\n        });\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        /* istanbul ignore else */\n        if (changes.date && this.building) {\n            this.search$.next(`${this.date}|${this.building.id}`);\n        }\n        /* istanbul ignore else */\n        if (changes.search) {\n            this.filtered_orders = this.filter(this.orders, this.search);\n        }\n    }\n\n    /* istanbul ignore next */\n    public trackByFn(index: number, order: CateringOrder) {\n        return order ? order.id : undefined;\n    }\n\n    /** Open modal to view catering order details */\n    public viewOrderDetails(order: CateringOrder): void {\n        this._dialog.open(OrderDetailsModalComponent, {\n            maxHeight: '95vh',\n            maxWidth: '95vw',\n            data: {\n                order: order,\n                booking: order.booking,\n            },\n        });\n    }\n\n    /**\n     * Filter list to find matching items\n     * @param list List of orders to filter\n     * @param search Filter string\n     */\n    private filter(list: CateringOrder[], search: string = '') {\n        const filter = search.toLowerCase();\n        return list.filter((order) => {\n            return order.items.find(\n                (item: CateringCategory) =>\n                    item.name.toLowerCase().indexOf(filter) >= 0 ||\n                    (item.items &&\n                        item.items.find((sub_item: CateringCategory) => {\n                            return (\n                                sub_item.name.toLowerCase().indexOf(filter) >= 0 ||\n                                (sub_item.items &&\n                                    sub_item.items.find((sub_sub_item) => {\n                                        return sub_sub_item.name.toLowerCase().indexOf(filter) >= 0;\n                                    }))\n                            );\n                        }))\n            );\n        });\n    }\n\n    private initBookings() {\n        // Listen for input changes\n        this.search_results$ = this.search$.pipe(\n            debounceTime(100),\n            distinctUntilChanged(),\n            switchMap((_) => {\n                this.loading = true;\n                const date = dayjs(this.date).startOf('d');\n                return this._service.Spaces.query({\n                    zone_ids: this.building.id,\n                    available_from: date.unix(),\n                    available_to: date.endOf('d').unix(),\n                });\n            }),\n            catchError((_) => of([])),\n            map((space_list: Space[]) => {\n                let orders: CateringOrder[] = [];\n                space_list.forEach((space) => {\n                    space.bookings.forEach((booking) => {\n                        const catering = booking.catering;\n                        catering.forEach((order) => {\n                            (order as any).booking_date = booking.date;\n                            order.booking = booking;\n                        });\n                        orders = orders.concat(booking.catering);\n                    });\n                });\n                orders = unique(orders, 'id');\n                orders = orders.filter(\n                    (order) => this.available_spaces.indexOf(order.location_id) >= 0\n                );\n                orders.sort(\n                    (a, b) =>\n                        a.booking_date +\n                        a.delivery_time * 60 * 1000 -\n                        (b.booking_date + b.delivery_time * 60 * 1000)\n                );\n                return orders;\n            })\n        );\n        // Process API results\n        this.subscription(\n            'search_results',\n            this.search_results$.subscribe((list) => {\n                this.loading = false;\n                this.orders = list;\n                this.filtered_orders = this.filter(list, this.search);\n            })\n        );\n    }\n}\n","<div class=\"loader\" *ngIf=\"loading\">\n    <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n</div>\n<div class=\"heading\">\n    <div class=\"icon\"></div>\n    <div class=\"time\">Time</div>\n    <div class=\"location\">Location</div>\n    <div class=\"host\">Host</div>\n    <div class=\"types\">Package Types</div>\n    <div class=\"state\">Status</div>\n</div>\n<div class=\"list\">\n    <ng-container *ngIf=\"filtered_orders && filtered_orders.length; else empty_state\">\n        <div class=\"top-row\"></div>\n        <a-catering-orders-item\n            *ngFor=\"let order of filtered_orders; trackBy: trackByFn\"\n            [order]=\"order\"\n            [search]=\"search\"\n        ></a-catering-orders-item>\n    </ng-container>\n</div>\n<ng-template #empty_state>\n    <div class=\"info-block center\">\n        <div class=\"icon\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n        </div>\n        <div class=\"text\">No catering orders for {{ date_display }}</div>\n    </div>\n</ng-template>\n","import { Component, OnInit, Inject, Output, EventEmitter } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\nimport { UploadManager, Amazon } from '@acaprojects/ngx-uploads';\n\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { DialogEvent } from 'src/app/shared/utilities/types.utilities';\n\nimport * as blobUtil from 'blob-util';\n\nexport interface CateringCategoryModalData {\n    /** Category to edit */\n    category: CateringCategory;\n}\n\n@Component({\n    selector: 'a-catering-category-modal',\n    templateUrl: './category-modal.component.html',\n    styleUrls: ['./category-modal.component.scss'],\n})\nexport class CateringCategoryModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for user action on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Form controls for editing category */\n    public form: FormGroup;\n    /** Display string for current loading state */\n    public loading: string;\n    /** Whether image is being uploaded */\n    public uploading: boolean;\n\n    public get category(): CateringCategory {\n        return this._data.category;\n    }\n\n    public get image(): string {\n        return this.form.controls.image_path.value;\n    }\n\n    constructor(\n        private _service: ApplicationService,\n        private _upload_manager: UploadManager,\n        private _dialog_ref: MatDialogRef<CateringCategoryModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: CateringCategoryModalData\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.form = new FormGroup({\n            name: new FormControl(this.category.name, [Validators.required]),\n            description: new FormControl(this.category.description),\n            image_path: new FormControl(this.category.image_path),\n        });\n    }\n\n    public submit() {\n        this.form.markAllAsTouched();\n        /* istanbul ignore else */\n        if (this.form.valid) {\n            const data = { ...this.category.toJSON(), ...this.form.value };\n            const request = this.category.id\n                ? this._service.CateringCategories.update(this.category.id, data)\n                : this._service.CateringCategories.add(data);\n            request.then(\n                (item) => {\n                    this.event.emit({ reason: 'done', metadata: item });\n                    this._dialog_ref.close();\n                },\n                (err) =>\n                    this._service.notifyError(\n                        `Error ${this.category.id ? 'updating' : 'creating'} category. Error: ${\n                            err.message || err\n                        }`\n                    )\n            );\n        }\n    }\n\n    /** Upload the image to the cloud */\n    public uploadImage(event) {\n        /* istanbul ignore else */\n        if (event && event.target && event.target.files) {\n            const files: FileList = event.target.files;\n            /* istanbul ignore else */\n            if (files.length) {\n                const fileReader = new FileReader();\n                fileReader.addEventListener('loadend', (e: any) => {\n                    this.uploading = true;\n                    const arrayBuffer = e.target.result;\n                    const blob = blobUtil.arrayBufferToBlob(arrayBuffer, 'image/png');\n                    this._upload_manager.upload([blob], { file_name: files[0].name });\n                    const upload = this._upload_manager.uploads[\n                        this._upload_manager.uploads.length - 1\n                    ];\n                    this.interval('upload', () => {\n                        /* istanbul ignore else */\n                        if (upload.complete || upload.error) {\n                            /* istanbul ignore else */\n                            if (upload.access_url && upload.complete) {\n                                this.form.controls.image_path.setValue(upload.access_url);\n                            }\n                            this.uploading = false;\n                            this.clearInterval('upload');\n                        }\n                    });\n                });\n                fileReader.readAsArrayBuffer(files[0]);\n            }\n        }\n    }\n}\n","<header>\n    <div class=\"heading\">{{ category.id ? 'Edit' : 'Add' }} category</div>\n    <button mat-icon-button mat-dialog-close *ngIf=\"!loading\">\n        <app-icon [icon]=\"{ type: 'icon', class: 'material-icons', content: 'close' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <main *ngIf=\"!loading; else load_state\">\n        <form [formGroup]=\"form\" *ngIf=\"form\">\n            <div class=\"field\">\n                <div\n                    class=\"image\"\n                    [style.background]=\"\n                        'linear-gradient(rgba(0,0,0,.35),rgba(0,0,0,.35)), url(' + image + ')'\n                            | safe: 'style'\n                    \"\n                >\n                    <app-icon\n                        *ngIf=\"!uploading\"\n                        [icon]=\"{ class: 'material-icons', content: 'cloud_upload' }\"\n                    ></app-icon>\n                    <mat-spinner *ngIf=\"uploading\" diameter=\"48\"></mat-spinner>\n                    <input type=\"file\" (change)=\"uploadImage($event)\" />\n                </div>\n            </div>\n            <div class=\"field\">\n                <label\n                    for=\"name\"\n                    [class.error]=\"form.controls.name.errors && form.controls.name.touched\"\n                    >Name<span>*</span></label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"name\"\n                        placeholder=\"Category Name\"\n                        formControlName=\"name\"\n                    />\n                    <mat-error>A valid name is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label for=\"description\">Description</label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"description\"\n                        placeholder=\"Category Description\"\n                        formControlName=\"description\"\n                    ></textarea>\n                </mat-form-field>\n            </div>\n        </form>\n    </main>\n</mat-dialog-content>\n<mat-dialog-actions>\n    <footer>\n        <button mat-button [disabled]=\"uploading\" (tapped)=\"submit()\">Save</button>\n    </footer>\n</mat-dialog-actions>\n<ng-template #load_state>\n    <main>\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <mat-spinner diameter=\"32\"></mat-spinner>\n            </div>\n            <div class=\"text\">{{ loading }}</div>\n        </div>\n    </main>\n</ng-template>\n","import { Component, OnInit, Inject, EventEmitter, Output } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { UploadManager } from '@acaprojects/ngx-uploads';\n\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { DialogEvent, Identity } from 'src/app/shared/utilities/types.utilities';\n\nimport * as blobUtil from 'blob-util';\n\nexport interface CateringGroupModalData {\n    group: CateringCategory;\n    parent: CateringCategory;\n}\n\n@Component({\n    selector: 'a-catering-group-modal',\n    templateUrl: './group-modal.component.html',\n    styleUrls: ['./group-modal.component.scss'],\n})\nexport class CateringGroupModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for user action on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Form controls for editing category */\n    public form: FormGroup;\n    /** Display string for current loading state */\n    public loading: string;\n    /** Whether image is being uploaded */\n    public uploading: boolean;\n    /** List of available catering types */\n    public readonly types: Identity[] = [\n        { id: 'kitchen', name: 'Kitchen' },\n        { id: 'pantry', name: 'Pantry' },\n    ];\n\n    /** Category being edit/created */\n    public get category(): CateringCategory {\n        return this._data.group;\n    }\n\n    /** Parent category of the catergory being created/edited */\n    public get parent(): CateringCategory {\n        return this._data.parent;\n    }\n\n    /** Image URL for the category */\n    public get image(): string {\n        return this.form.controls.image_path.value;\n    }\n\n    /** Whether category is a package */\n    public get package(): boolean {\n        return this.form.controls.package.value;\n    }\n\n    constructor(\n        private _service: ApplicationService,\n        private _upload_manager: UploadManager,\n        private _dialog_ref: MatDialogRef<CateringGroupModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: CateringGroupModalData\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.form = new FormGroup({\n            name: new FormControl(this.category.name, [Validators.required]),\n            description: new FormControl(this.category.description),\n            image_path: new FormControl(this.category.image_path),\n            catering_type: new FormControl(this.category.catering_type, [Validators.required]),\n            package: new FormControl(this.category.package || false),\n            must_select: new FormControl(this.category.must_select),\n            unit_price: new FormControl(this.category.unit_price),\n            minimum_quantity: new FormControl(this.category.minimum_quantity),\n            maximum_quantity: new FormControl(this.category.maximum_quantity),\n            order_anytime: new FormControl(this.category.order_anytime),\n            out_of_stock: new FormControl(this.category.out_of_stock),\n        });\n    }\n\n    public submit() {\n        this.form.markAllAsTouched();\n        /* istanbul ignore else */\n        if (this.form.valid) {\n            const data = { ...this.category.toJSON(), ...this.form.value };\n            const request = this.category.id\n                ? this._service.CateringCategories.update(this.category.id, data)\n                : this._service.CateringCategories.add(data);\n            request.then(\n                (item) => {\n                    this.event.emit({ reason: 'done', metadata: item });\n                    this._dialog_ref.close();\n                },\n                (err) =>\n                    this._service.notifyError(\n                        `Error ${this.category.id ? 'updating' : 'creating'} category. Error: ${\n                            err.message || err\n                        }`\n                    )\n            );\n        }\n    }\n\n    /** Upload the image to the cloud */\n    public uploadImage(event) {\n        /* istanbul ignore else */\n        if (event && event.target && event.target.files) {\n            const files: FileList = event.target.files;\n            /* istanbul ignore else */\n            if (files.length) {\n                const fileReader = new FileReader();\n                fileReader.addEventListener('loadend', (e: any) => {\n                    this.uploading = true;\n                    const arrayBuffer = e.target.result;\n                    const blob = blobUtil.arrayBufferToBlob(arrayBuffer, 'image/png');\n                    this._upload_manager.upload([blob], { file_name: files[0].name });\n                    const upload = this._upload_manager.uploads[\n                        this._upload_manager.uploads.length - 1\n                    ];\n                    this.interval('upload', () => {\n                        /* istanbul ignore else */\n                        if (upload.complete || upload.error) {\n                            /* istanbul ignore else */\n                            if (upload.access_url && upload.complete) {\n                                this.form.controls.image_path.setValue(upload.access_url);\n                            }\n                            this.uploading = false;\n                            this.clearInterval('upload');\n                        }\n                    });\n                });\n                fileReader.readAsArrayBuffer(files[0]);\n            }\n        }\n    }\n}\n","<header>\n    <div class=\"heading\">\n        {{ category.id ? 'Edit' : 'Add' }} {{ package ? 'package' : 'sub-category' }}\n    </div>\n    <button mat-icon-button mat-dialog-close *ngIf=\"!loading\">\n        <app-icon [icon]=\"{ type: 'icon', class: 'material-icons', content: 'close' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <main *ngIf=\"!loading; else load_state\">\n        <form [formGroup]=\"form\">\n            <div class=\"field\">\n                <div\n                    class=\"image\"\n                    [style.background]=\"\n                        'linear-gradient(rgba(0,0,0,.35),rgba(0,0,0,.35)), url(' + image + ')'\n                            | safe: 'style'\n                    \"\n                >\n                    <app-icon\n                        *ngIf=\"!uploading\"\n                        [icon]=\"{ class: 'material-icons', content: 'cloud_upload' }\"\n                    ></app-icon>\n                    <mat-spinner *ngIf=\"uploading\" diameter=\"48\"></mat-spinner>\n                    <input type=\"file\" (change)=\"uploadImage($event)\" />\n                </div>\n            </div>\n            <div class=\"field padded\">\n                <label for=\"name\">Parent Category</label>\n                <div class=\"value\">{{ parent.name }}</div>\n            </div>\n            <div class=\"field padded\">\n                <mat-checkbox formControlName=\"package\">Package</mat-checkbox>\n            </div>\n            <div class=\"field\">\n                <label\n                    for=\"name\"\n                    [class.error]=\"form.controls.name.errors && form.controls.name.touched\"\n                    >Name<span>*</span></label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"name\"\n                        placeholder=\"Category Name\"\n                        formControlName=\"name\"\n                    />\n                    <mat-error>A valid name is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label\n                    for=\"type\"\n                    [class.error]=\"\n                        form.controls.catering_type.errors && form.controls.catering_type.touched\n                    \"\n                    >Type<span>*</span></label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <mat-select\n                        name=\"type\"\n                        formControlName=\"catering_type\"\n                        placeholder=\"Select type\"\n                    >\n                        <mat-option *ngFor=\"let type of types\" [value]=\"type.id\">\n                            {{ type.name }}\n                        </mat-option>\n                    </mat-select>\n                    <mat-error>Type is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label for=\"description\">Description</label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"description\"\n                        placeholder=\"Category Description\"\n                        formControlName=\"description\"\n                    ></textarea>\n                </mat-form-field>\n            </div>\n            <ng-container *ngIf=\"package\">\n                <div class=\"field padded\">\n                    <mat-checkbox formControlName=\"out_of_stock\">Out of Stock</mat-checkbox>\n                </div>\n                <div class=\"field padded\">\n                    <mat-checkbox formControlName=\"order_anytime\">Can order anytime</mat-checkbox>\n                </div>\n                <div class=\"field\">\n                    <label for=\"unit-price\">Unit Price</label>\n                    <mat-form-field appearance=\"outline\">\n                        <input\n                            matInput\n                            name=\"unit-price\"\n                            type=\"number\"\n                            placeholder=\"Price for one unit of the item without decimal places\"\n                            formControlName=\"unit_price\"\n                        />\n                    </mat-form-field>\n                </div>\n            </ng-container>\n            <div class=\"field\">\n                <label for=\"must-select\"\n                    >Items to select from {{ package ? 'package' : 'sub-category' }}</label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"must-select\"\n                        type=\"number\"\n                        placeholder=\"Must select X items from grouping\"\n                        formControlName=\"must_select\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label for=\"min-quanity\">Minimum Quanity</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"min-quanity\"\n                        type=\"number\"\n                        placeholder=\"Minimum Quantity\"\n                        formControlName=\"minimum_quantity\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label for=\"max-quanity\">Maximum Quanity</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"max-quanity\"\n                        type=\"number\"\n                        placeholder=\"Maximum Quantity\"\n                        formControlName=\"maximum_quantity\"\n                    />\n                </mat-form-field>\n            </div>\n        </form>\n    </main>\n</mat-dialog-content>\n<mat-dialog-actions>\n    <footer>\n        <button mat-button [disabled]=\"uploading\" (tapped)=\"submit()\">Save</button>\n    </footer>\n</mat-dialog-actions>\n<ng-template #load_state>\n    <main>\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <mat-spinner diameter=\"32\"></mat-spinner>\n            </div>\n            <div class=\"text\">{{ loading }}</div>\n        </div>\n    </main>\n</ng-template>\n","import { Component, OnInit, Inject, EventEmitter, Output } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { CateringItem } from 'src/app/services/data/catering/catering-item.class';\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\nimport { DialogEvent, Identity } from 'src/app/shared/utilities/types.utilities';\n\nexport interface CateringItemModalData {\n    item: CateringItem;\n    parent: CateringCategory;\n}\n\n@Component({\n    selector: 'a-catering-item-modal',\n    templateUrl: './item-modal.component.html',\n    styleUrls: ['./item-modal.component.scss'],\n})\nexport class CateringItemModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for user action on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Form controls for editing category */\n    public form: FormGroup;\n    /** Display string for current loading state */\n    public loading: string;\n    /** Whether image is being uploaded */\n    public uploading: boolean;\n    /** List of available catering types */\n    public readonly types: Identity[] = [\n        { id: 'kitchen', name: 'Kitchen' },\n        { id: 'pantry', name: 'Pantry' },\n    ];\n\n    /** Category being edit/created */\n    public get item(): CateringItem {\n        return this._data.item;\n    }\n\n    /** Parent category of the catergory being created/edited */\n    public get parent(): CateringCategory {\n        return this._data.parent;\n    }\n\n    constructor(\n        private _service: ApplicationService,\n        private _dialog_ref: MatDialogRef<CateringItemModalComponent>,\n        @Inject(MAT_DIALOG_DATA) private _data: CateringItemModalData\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.form = new FormGroup({\n            name: new FormControl(this.item.name, [Validators.required]),\n            description: new FormControl(this.item.description),\n            catering_type: new FormControl(this.item.catering_type, [Validators.required]),\n            supplier_cost: new FormControl(this.item.supplier_cost),\n            unit_price: new FormControl(this.item.unit_price),\n            minimum_quantity: new FormControl(this.item.minimum_quantity),\n            maximum_quantity: new FormControl(this.item.maximum_quantity),\n            order_anytime: new FormControl(this.item.order_anytime),\n            out_of_stock: new FormControl(this.item.out_of_stock),\n            allergy: new FormControl(this.item.allergy),\n        });\n    }\n\n    public submit() {\n        this.form.markAllAsTouched();\n        /* istanbul ignore else */\n        if (this.form.valid) {\n            const data = new CateringItem({ ...this.item.toJSON(), ...this.form.value }).toJSON();\n            const request = this.item.id\n                ? this._service.CateringItems.update(this.item.id, data)\n                : this._service.CateringItems.add(data);\n            request.then(\n                (item) => {\n                    this.event.emit({ reason: 'done', metadata: item });\n                    this._dialog_ref.close();\n                },\n                (err) =>\n                    this._service.notifyError(\n                        `Error ${this.item.id ? 'updating' : 'creating'} item. Error: ${\n                            err.message || err\n                        }`\n                    )\n            );\n        }\n    }\n}\n","<header>\n    <div class=\"heading\">{{ item.id ? 'Edit' : 'Add' }} catering item</div>\n    <button mat-icon-button mat-dialog-close *ngIf=\"!loading\">\n        <app-icon [icon]=\"{ type: 'icon', class: 'material-icons', content: 'close' }\"></app-icon>\n    </button>\n</header>\n<mat-dialog-content>\n    <main *ngIf=\"!loading; else load_state\">\n        <form [formGroup]=\"form\">\n            <div class=\"field padded\">\n                <label for=\"name\">Parent Category</label>\n                <div class=\"value\">{{ parent.name }}</div>\n            </div>\n            <div class=\"field\">\n                <label\n                    for=\"name\"\n                    [class.error]=\"form.controls.name.errors && form.controls.name.touched\"\n                    >Name<span>*</span></label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"name\"\n                        placeholder=\"Category Name\"\n                        formControlName=\"name\"\n                    />\n                    <mat-error>A valid name is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label\n                    for=\"type\"\n                    [class.error]=\"\n                        form.controls.catering_type.errors && form.controls.catering_type.touched\n                    \"\n                    >Type<span>*</span></label\n                >\n                <mat-form-field appearance=\"outline\">\n                    <mat-select\n                        name=\"type\"\n                        formControlName=\"catering_type\"\n                        placeholder=\"Select type\"\n                    >\n                        <mat-option *ngFor=\"let type of types\" [value]=\"type.id\">\n                            {{ type.name }}\n                        </mat-option>\n                    </mat-select>\n                    <mat-error>Type is required</mat-error>\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label for=\"description\">Description</label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"description\"\n                        placeholder=\"Category Description\"\n                        formControlName=\"description\"\n                    ></textarea>\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label for=\"allergy\">Allegen Information</label>\n                <mat-form-field appearance=\"outline\">\n                    <textarea\n                        matInput\n                        name=\"allergy\"\n                        placeholder=\"Allergy details about the item\"\n                        formControlName=\"allergy\"\n                    ></textarea>\n                </mat-form-field>\n            </div>\n            <div class=\"field padded\">\n                <mat-checkbox formControlName=\"out_of_stock\">Out of Stock</mat-checkbox>\n            </div>\n            <div class=\"field padded\">\n                <mat-checkbox formControlName=\"order_anytime\">Can order anytime</mat-checkbox>\n            </div>\n            <div class=\"field\">\n                <label for=\"supplier-price\">Supplier Price</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"supplier-price\"\n                        type=\"number\"\n                        placeholder=\"Price for one unit of the item from the supplier\"\n                        formControlName=\"supplier_cost\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label for=\"unit-price\">Unit Price</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"unit-price\"\n                        type=\"number\"\n                        placeholder=\"Price for one unit of the item without decimal places\"\n                        formControlName=\"unit_price\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label for=\"min-quanity\">Minimum Quanity</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"min-quanity\"\n                        type=\"number\"\n                        placeholder=\"Minimum Quantity\"\n                        formControlName=\"minimum_quantity\"\n                    />\n                </mat-form-field>\n            </div>\n            <div class=\"field\">\n                <label for=\"max-quanity\">Maximum Quanity</label>\n                <mat-form-field appearance=\"outline\">\n                    <input\n                        matInput\n                        name=\"max-quanity\"\n                        type=\"number\"\n                        placeholder=\"Maximum Quantity\"\n                        formControlName=\"maximum_quantity\"\n                    />\n                </mat-form-field>\n            </div>\n        </form>\n    </main>\n</mat-dialog-content>\n<mat-dialog-actions>\n    <footer>\n        <button mat-button [disabled]=\"uploading\" (tapped)=\"submit()\">Save</button>\n    </footer>\n</mat-dialog-actions>\n<ng-template #load_state>\n    <main>\n        <div class=\"info-block\">\n            <div class=\"icon\">\n                <mat-spinner diameter=\"32\"></mat-spinner>\n            </div>\n            <div class=\"text\">{{ loading }}</div>\n        </div>\n    </main>\n</ng-template>\n","import { Component, OnInit, Input } from '@angular/core';\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\n\n@Component({\n    selector: 'order-booking-details',\n    templateUrl: './booking-details.component.html',\n    styleUrls: ['./booking-details.component.scss'],\n})\nexport class OrderBookingDetailsComponent {\n    /** Booking details to display */\n    @Input() public booking: Booking;\n\n    /** Store booking details to be used in another component */\n    public storeBooking() {\n        localStorage.setItem('CONCIERGE.view_booking', JSON.stringify(this.booking.toJSON()));\n        localStorage.setItem('CONCIERGE.date', `${this.booking.date}`);\n    }\n}\n","<div class=\"heading\">\n    Meeting Details\n</div>\n<div class=\"content\">\n    <div class=\"field\">\n        <label for=\"host\">Host:</label>\n        <div class=\"value\" name=\"host\">\n            {{ booking.organiser?.name || booking.organiser_email }}\n        </div>\n    </div>\n    <div class=\"field\">\n        <label for=\"space\">Room:</label>\n        <div class=\"value\" name=\"space\">\n            {{ booking.space?.name }}\n        </div>\n    </div>\n    <div class=\"field\">\n        <label for=\"period\">Period:</label>\n        <div class=\"value\" name=\"period\">\n            {{ booking.time_period }}\n        </div>\n    </div>\n    <div class=\"field\">\n        <label for=\"attendees\">Attendees:</label>\n        <div class=\"value\" name=\"attendees\">\n            {{ booking.attendees?.length || '0' }}({{ booking.expected_attendees[booking.space?.id] || 0 }} expected)\n        </div>\n    </div>\n</div>\n<a\n    class=\"footer\"\n    button\n    mat-button\n    [routerLink]=\"['/day-view', booking.space?.level.id]\"\n    [queryParams]=\"{ view: booking.id.slice(0, 10) }\"\n    (click)=\"storeBooking()\"\n    mat-dialog-close\n>\n    View on Day View\n</a>\n","import { Component, Input } from '@angular/core';\n\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\nimport { CateringOrder } from 'src/app/services/data/catering/catering-order.class';\nimport { CateringCategory } from 'src/app/services/data/catering/catering-category.class';\n\n@Component({\n    selector: 'order-details-items',\n    templateUrl: './items.component.html',\n    styleUrls: ['./items.component.scss'],\n})\nexport class OrderDetailsItemsComponent {\n    /** Booking details to display */\n    @Input() public booking: Booking;\n    /** Catering order to display notes for */\n    @Input() public order: CateringOrder;\n\n    /** List of items in the order */\n    public get items(): (CateringCategory)[] {\n        return this.order.items as any || [];\n    }\n}\n","<div class=\"heading\">\n    Order Details\n</div>\n<div class=\"content\">\n    <ng-container *ngIf=\"items && items.length; else empty_state\">\n        <div class=\"item\" *ngFor=\"let item of items\">\n            <div class=\"details\">\n                <div class=\"name\">{{ item.name }}</div>\n                <div class=\"amount\">x{{ item.amount }}</div>\n            </div>\n            <ng-container *ngIf=\"item.items\">\n                <div class=\"sub-item\" *ngFor=\"let sub_item of item.items\">\n                    <div class=\"name\">{{ sub_item.name }}</div>\n                    <ng-container *ngIf=\"sub_item.items\">\n                        <div class=\"sub-item\" *ngFor=\"let sub_sub_item of sub_item.items\">\n                            <div class=\"name\">{{ sub_sub_item.name }}</div>\n                        </div>\n                    </ng-container>\n                </div>\n            </ng-container>\n        </div>\n    </ng-container>\n</div>\n<button class=\"footer\" mat-button>\n    Edit Order\n</button>\n<ng-template #empty_state>\n    <div class=\"info-block center\">\n        <div class=\"icon\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n        </div>\n        <div class=\"text\">\n            No items in order\n        </div>\n    </div>\n</ng-template>\n","<div class=\"heading\">\n    Private Notes\n</div>\n<div class=\"content\">\n    <ng-container *ngIf=\"notes && notes.length; else empty_state\">\n        <div class=\"note\" *ngFor=\"let item of notes\">\n            <div class=\"text\">{{ item.message }}</div>\n            <div class=\"details\">\n                <div class=\"author\">{{ item.author }}</div>\n                <div class=\"fill\"></div>\n                <div class=\"time\">{{ item.time }}</div>\n            </div>\n        </div>\n    </ng-container>\n</div>\n<div class=\"footer\">\n    <mat-form-field appearance=\"none\">\n        <input matInput [(ngModel)]=\"new_note\" [disabled]=\"loading\" placeholder=\"Type to add notes\" (keyup.enter)=\"addNote()\"/>\n        <button mat-icon-button matSuffix name=\"add-note\" [disabled]=\"!new_note || loading\" (tapped)=\"addNote()\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'send' }\"></app-icon>\n        </button>\n    </mat-form-field>\n    <div class=\"loader center\" *ngIf=\"loading\">\n        <mat-spinner diameter=\"32\"></mat-spinner>\n    </div>\n</div>\n<ng-template #empty_state>\n    <div class=\"info-block center\">\n        <div class=\"icon\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n        </div>\n        <div class=\"text\">\n            No private notes for order\n        </div>\n    </div>\n</ng-template>\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\n\nimport { CateringOrder } from 'src/app/services/data/catering/catering-order.class';\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\nimport { BookingNote } from 'src/app/services/data/bookings/booking.interfaces';\n\nimport * as dayjs from 'dayjs';\nimport { ApplicationService } from 'src/app/services/app.service';\n\n@Component({\n    selector: 'order-details-notes',\n    templateUrl: './messages.component.html',\n    styleUrls: ['./messages.component.scss'],\n})\nexport class OrderDetailsNotesComponent implements OnInit {\n    /** Booking details to display */\n    @Input() public booking: Booking;\n    /** Catering order to display notes for */\n    @Input() public order: CateringOrder;\n    /** Emitter for changes to the active booking */\n    @Output() public bookingChange = new EventEmitter<Booking>();\n    /** Contents of the new private note */\n    public new_note: string;\n    /** Whether a note is being added */\n    public loading: boolean;\n\n    /** List of notes for catering order space */\n    public get notes(): BookingNote[] {\n        const notes = this.booking.notes.filter((note) => {\n            return (\n                note.type === 'catering' &&\n                note.space === this.order.location_id &&\n                (!note.order_id || note.order_id === this.order.id)\n            );\n        });\n        notes.forEach((note) => {\n            note.time = dayjs(note.date).format('DD MMM, h:mm A');\n        });\n        return notes;\n    }\n\n    constructor(private _service: ApplicationService) {}\n\n    ngOnInit(): void {}\n\n    /**\n     * Add note for catering order\n     */\n    public async addNote() {\n        /* istanbul ignore else */\n        if (this.booking && this.new_note) {\n            const user = this._service.Users.current;\n            const booking = this.booking;\n            const notes = booking.notes;\n            const date = dayjs().startOf('m');\n            booking.storePendingChange('notes', [\n                ...notes,\n                {\n                    type: 'catering',\n                    date: date.valueOf(),\n                    author: user.name,\n                    order_id: this.order.id,\n                    space: booking.space.id,\n                    message: this.new_note,\n                    time: date.format('h:mm A'),\n                },\n            ]);\n            this.loading = true;\n            const new_booking: Booking = (await booking.save().catch((err) => {\n                this._service.notifyError(\n                    `Failed to add note to order meeting. Error: ${err.message || err}`\n                );\n                this.loading = false;\n                throw err;\n            })) as any;\n            this.booking = new_booking;\n            this.order.booking = new_booking;\n            this.bookingChange.emit(new_booking);\n            this.loading = false;\n            this.new_note = '';\n        }\n    }\n}\n","\n<mat-dialog-content>\n    <main>\n        <div class=\"details\">\n            <div class=\"burger-icon\"></div>\n            <div class=\"location\">{{ space?.name }}</div>\n            <div class=\"time\">{{ time }}</div>\n            <div class=\"status\">\n                <mat-form-field\n                    class=\"rounded visible\"\n                    appearance=\"outline\"\n                    *ngIf=\"statuses && statuses.length > 1\"\n                >\n                    <mat-select\n                        #select\n                        [(value)]=\"active_status\"\n                        (valueChange)=\"updateStatus()\"\n                        placeholder=\"New Order\"\n                        [disabled]=\"loading\"\n                    >\n                        <mat-select-trigger>\n                            <div class=\"group\">\n                                <div class=\"icon\">\n                                    <div\n                                        class=\"wrapper\"\n                                        [style.backgroundColor]=\"loading ? '#eee' : status_details?.colour\"\n                                    >\n                                        <app-icon *ngIf=\"!loading\" [icon]=\"status_details?.icon\"></app-icon>\n                                        <mat-spinner *ngIf=\"loading\" diameter=\"16\"></mat-spinner>\n                                    </div>\n                                </div>\n                                <div class=\"text\">{{ status_details?.name }}</div>\n                            </div>\n                        </mat-select-trigger>\n                        <mat-option *ngFor=\"let status of statuses\" [value]=\"status.id\">\n                            <div class=\"group\">\n                                <div class=\"text\">{{ status.name }}</div>\n                                <div class=\"colour\" [style.backgroundColor]=\"status.colour\"></div>\n                            </div>\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n            </div>\n        </div>\n        <div class=\"content\">\n            <div class=\"block\">\n                <order-booking-details [booking]=\"booking\"></order-booking-details>\n            </div>\n            <div class=\"block\">\n                <order-details-items [booking]=\"booking\" [order]=\"order\"></order-details-items>\n            </div>\n            <div class=\"block\">\n                <order-details-notes [(booking)]=\"booking\" [order]=\"order\"></order-details-notes>\n            </div>\n        </div>\n        <button class=\"close\" mat-icon-button mat-dialog-close>\n            <app-icon [icon]=\"{ type: 'icon', class: 'material-icons', content: 'close' }\"></app-icon>\n        </button>\n    </main>\n</mat-dialog-content>\n","import { Component, OnInit, Inject, Output, EventEmitter } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\n\nimport { CateringOrder, CateringOrderStatus } from 'src/app/services/data/catering/catering-order.class';\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { DialogEvent, Identity } from 'src/app/shared/utilities/types.utilities';\nimport { BaseDirective } from 'src/app/shared/base.directive';\n\nimport * as dayjs from 'dayjs';\nimport { IDataClassEvent } from 'src/app/services/data/base-api.class';\n\nexport interface OrderDetailsModalData {\n    /** Order to display details for */\n    order: CateringOrder;\n    /** Booking associated with catering order */\n    booking: Booking;\n}\n\n@Component({\n    selector: 'a-order-details-modal',\n    templateUrl: './order-details-modal.component.html',\n    styleUrls: ['./order-details-modal.component.scss'],\n})\nexport class OrderDetailsModalComponent extends BaseDirective implements OnInit {\n    /** Emitter for user action on the modal */\n    @Output() public event = new EventEmitter<DialogEvent>();\n    /** Whether status is being updated */\n    public loading: boolean;\n    /** Actively selected status */\n    public active_status: CateringOrderStatus;\n    /** List of available order statuses */\n    public statuses: Identity[] = [\n        { id: 'accepted', name: 'Accepted', icon: { class: 'custom-accepted' }, colour: '#3996B6' },\n        {\n            id: 'preparing',\n            name: 'Preparing',\n            icon: { class: 'custom-preparing' },\n            colour: '#E7536B',\n        },\n        { id: 'ready', name: 'Ready', icon: { class: 'custom-ready' }, colour: '#FFD028' },\n        {\n            id: 'delivered',\n            name: 'Delivered',\n            icon: { class: 'custom-delivered' },\n            colour: '#75BB43',\n        },\n        {\n            id: 'cancelled',\n            name: 'Cancelled',\n            icon: { class: 'custom-cancelled' },\n            colour: '#747474',\n        },\n    ];\n\n    /** Active booking to display */\n    public get booking(): Booking {\n        return this._data.booking;\n    }\n    public set booking(bkn: Booking) {\n        this._data.booking = bkn;\n    }\n\n    /** Order to display */\n    public get order(): CateringOrder {\n        return this._data.order;\n    }\n\n    /** Details for the active status */\n    public get status_details(): Identity {\n        return this.statuses.find((status) => status.id === this.active_status);\n    }\n\n    /** Space associated with the order */\n    public get space(): Space {\n        return this._service.Spaces.find(this._data.order.location_id);\n    }\n\n    /** Details about the delivery time */\n    public get time(): string {\n        const date = dayjs(this._data.booking.date).add(this._data.order.delivery_time, 'm');\n        return `(${date.format('DD MMM YYYY')}) To be delivered at ${this._data.order.deliver_at_time}`;\n    }\n\n    constructor(\n        private _service: ApplicationService,\n        @Inject(MAT_DIALOG_DATA) private _data: OrderDetailsModalData\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.active_status = this._data.order.status;\n        const handleChange = (event: IDataClassEvent<Booking>) => {\n            if (event.type === 'item_saved') {\n                this.booking = event.metadata;\n                this.subscription('booking_changes', this.booking.changeEvents.subscribe(handleChange));\n            }\n        };\n        this.subscription('booking_changes', this.booking.changeEvents.subscribe(handleChange));\n    }\n\n    /** Update the status of the order in the booking */\n    public async updateStatus(): Promise<void> {\n        const booking = this._data.booking;\n        /* istanbul ignore else */\n        if (booking) {\n            this.loading = true;\n            const catering = [...booking.catering];\n            catering.splice(\n                catering.findIndex((order) => order.id === this._data.order.id),\n                1,\n                new CateringOrder({ ...this._data.order, status: this.active_status })\n            );\n            booking.storePendingChange('catering', catering);\n            await booking.save().catch((err) => {\n                this._service.notifyError(\n                    `Error updating order status. Error: ${err.message || err}`\n                );\n                this.active_status = this._data.order.status;\n                this.loading = false;\n            });\n            this.loading = false;\n        }\n    }\n}\n"]}