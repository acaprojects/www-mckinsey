{"version":3,"sources":["webpack:///src/app/shell/week-view/day-display/day-display.component.ts","webpack:///src/app/shell/week-view/day-display/day-display.component.html","webpack:///src/app/shell/week-view/day-display/item/item.component.ts","webpack:///src/app/shell/week-view/day-display/item/item.component.html","webpack:///src/app/shell/week-view/timeline/timeline.component.ts","webpack:///src/app/shell/week-view/timeline/timeline.component.html","webpack:///src/app/shell/week-view/week-view.component.ts","webpack:///src/app/shell/week-view/week-view.component.html","webpack:///src/app/shell/week-view/week-view.module.ts"],"names":["WeekViewDayDisplayComponent","booking_list","changes","date","spaces","updateBookings","bookings","forEach","space","concat","bookingsFor","sort","a","b","format","isSame","selector","templateUrl","styleUrls","WeekViewItemComponent","_dialog","open","maxWidth","data","booking","event","declined","booking_type","type","has_visitors","WeekViewTimelineComponent","_service","date_list","space_list","search$","generateDates","weekends","initBookings","next","level","interval","unix","list","day","startOf","start","end","endOf","isBefore","push","valueOf","add","search_results$","pipe","_","loading","Spaces","query","zone_ids","space_type","available_from","Math","floor","available_to","length","subscription","subscribe","WeekViewComponent","_router","_route","active_level","active_type","levels","space_types","initialised","paramMap","params","has","get","Organisation","levelWithID","building","buildings","find","bld","id","building_id","listen","lvl","updateLevel","name","localeCompare","navigate","newMeeting","ROUTES","path","component","redirectTo","WeekViewModule","forChild","declarations","imports"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACEI;;AAAmC;;AAAK;;;;;;AAIpC;;;;;;AAAmD;;;;;;AADvD;;AACI;;AACJ;;;;;;AADoB;;AAAA;;;;;;;;;;;;;AAIpB;;AACI;;AACI;;AACJ;;AACA;;AAAkB;;AAAgC;;AACtD;;;;;;AAHkB;;AAAA;;AAEI;;AAAA;;;;QDFbA,2B;;;AALb;AAAA;;AAUI;AACO,aAAAC,YAAA,GAA0B,EAA1B;AA4BV;AA1BG;;;;;oCAWmBC,O,EAAwB;AACvC;AACA,cAAIA,OAAO,CAACC,IAAR,IAAgBD,OAAO,CAACE,MAA5B,EAAoC;AAChC,iBAAKC,cAAL;AACH;AACJ;;;yCAEqB;AAAA;;AAClB,cAAIC,QAAQ,GAAG,EAAf;AACA,eAAKF,MAAL,CAAYG,OAAZ,CAAoB,UAAAC,KAAK,EAAI;AACzBF,oBAAQ,GAAGA,QAAQ,CAACG,MAAT,CAAgBD,KAAK,CAACE,WAAN,CAAkB,KAAI,CAACP,IAAvB,CAAhB,CAAX;AACH,WAFD;AAGAG,kBAAQ,CAACK,IAAT,CAAc,UAACC,CAAD,EAAIC,CAAJ;AAAA,mBAAUD,CAAC,CAACT,IAAF,GAASU,CAAC,CAACV,IAArB;AAAA,WAAd;AACA,eAAKF,YAAL,GAAoBK,QAApB;AACH;;;4BAxBsB;AACnB,cAAMH,IAAI,GAAG,kCAAK,CAAC,KAAKA,IAAN,CAAlB;AACA,iBAAOA,IAAI,CAACW,MAAL,CAAY,kBAAZ,CAAP;AACH;AAED;;;;4BACmB;AACf,iBAAO,kCAAK,CAAC,KAAKX,IAAN,CAAL,CAAiBY,MAAjB,CAAwB,kCAAK,EAA7B,EAAiC,GAAjC,CAAP;AACH;;;;;;;uBAjBQf,2B;AAA2B,K;;;YAA3BA,2B;AAA2B,4C;AAAA;AAAA;AAAA;AAAA,O;AAAA,oF;AAAA,c;AAAA,a;AAAA,iP;AAAA;AAAA;ACZxC;;AACI;;AAAkB;;AAAkB;;AACpC;;AACJ;;AACA;;AACI;;AAGJ;;AACA;;;;;;AARsB;;AAAA;;AACA;;AAAA;;AAGJ;;AAAA,wHAA6D,UAA7D,EAA6D,GAA7D;;;;;;;;;sEDOLA,2B,EAA2B;cALvC,uDAKuC;eAL7B;AACPgB,kBAAQ,EAAE,uBADH;AAEPC,qBAAW,EAAE,8BAFN;AAGPC,mBAAS,EAAE,CAAC,8BAAD;AAHJ,S;AAK6B,Q;;gBAEnC;;;gBAEA;;;;;;;;;;;;;;;;;;;;AEhBL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;ACcY;;;;;;AAEI;;;;;;;;AAhBhB;;AASI;AAAA;;AAAA;;AAAA;AAAA;;AAEA;;AACI;;AAAkB;;AAAmD;;AACrE;;AACI;;AAQJ;;AACJ;;AACA;;AACI;;AACI;;AAAkB;;AAAK;;AACvB;;AAA+B;;AAAoD;;AACvF;;AACA;;AACI;;AAAsB;;AAAS;;AAC/B;;AACI;;AACJ;;AACJ;;AACA;;AACI;;AAAuB;;AAAU;;AACjC;;AAAoC;;AAAoC;;AAC5E;;AACJ;;AACJ;;;;;;AAvCI;;AAOA;;AAIsB;;AAAA;;AAGV;;AAAA;;AAUW;;AAAA;;AAEgB;;AAAA;;AAEhB;;AAAA;;AAEoB;;AAAA;;AAC/B;;AAAA;;AAKgC;;AAAA;;;;QD1BnCC,qB;;;AAeT,qCAAoBC,OAApB,EAAwC;AAAA;;AAApB,aAAAA,OAAA,GAAAA,OAAA;AAAsB;AAZ1C;;;;;;AAcA;;;6CAG4B;AACxB,eAAKA,OAAL,CAAaC,IAAb,CAAkB,mIAAlB,EAAgD;AAC5CC,oBAAQ,EAAE,mBADkC;AAE5CC,gBAAI,EAAE;AACFC,qBAAO,EAAE,KAAKC;AADZ;AAFsC,WAAhD;AAMH;;;4BAvBc;AACX,cAAI,KAAKA,KAAL,CAAWC,QAAf,EAAyB;AACrB,mBAAO,WAAP;AACH;;AACD,cAAMC,YAAY,GAAG,KAAKF,KAAL,CAAWG,IAAhC;;AACA,cAAID,YAAY,KAAK,UAAjB,IAA+B,KAAKF,KAAL,CAAWI,YAA9C,EAA4D;AACxD,mBAAO,UAAP;AACH;;AACD,iBAAOF,YAAP;AACH;;;;;;;uBAbQR,qB,EAAqB,mI;AAAA,K;;;YAArBA,qB;AAAqB,qC;AAAA;AAAA;AAAA,O;AAAA,c;AAAA,a;AAAA,yX;AAAA;AAAA;ACXlC;;;;AAOI;;;;;;;;;sEDISA,qB,EAAqB;cALjC,uDAKiC;eALvB;AACPH,kBAAQ,EAAE,gBADH;AAEPC,qBAAW,EAAE,uBAFN;AAGPC,mBAAS,EAAE,CAAC,uBAAD;AAHJ,S;AAKuB,Q;;;;;;gBAC7B;;;;;;;;;;;;;;;;;;;;AEZL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACCI;;AACI;;AACJ;;;;;;AACA;;;;;;;;AAEI,kFAAa,QAAb,EAAa,iBAAb;;;;QDSKY,yB;;;;;;;AAoBT,yCAAoBC,QAApB,EAAkD;AAAA;;AAAA;;AAC9C;AADgB,eAAAA,QAAA,GAAAA,QAAA;AATpB;;AACO,eAAAC,SAAA,GAAsB,EAAtB;AACP;;AACO,eAAAC,UAAA,GAAsB,EAAtB;AAGP;;AACgB,eAAAC,OAAA,GAAU,IAAI,4CAAJ,EAAV;AAEkC;AAEjD;;;;mCAEc;AAAA;;AACX,eAAKF,SAAL,GAAiB,KAAKG,aAAL,CAAmB,KAAKhC,IAAxB,EAA8B,KAAKiC,QAAnC,CAAjB;AACA,eAAKC,YAAL;AACA,eAAKH,OAAL,CAAaI,IAAb,WAAqB,KAAKnC,IAA1B,cAAkC,KAAKiC,QAAvC,cAAmD,KAAKG,KAAxD;AACA,eAAKC,QAAL,CACI,gBADJ,EAEI;AAAA,mBACI,MAAI,CAACN,OAAL,CAAaI,IAAb,WAAqB,MAAI,CAACnC,IAA1B,cAAkC,MAAI,CAACiC,QAAvC,cAAmD,MAAI,CAACG,KAAxD,cAAiE,kCAAK,GAAGE,IAAR,EAAjE,EADJ;AAAA,WAFJ,EAII,KAAK,IAJT;AAMH;;;oCAEkBvC,O,EAAsB;AACrC;AACA,cAAIA,OAAO,CAACC,IAAR,IAAgBD,OAAO,CAACkC,QAAxB,IAAoClC,OAAO,CAACqC,KAAhD,EAAuD;AACnD,iBAAKP,SAAL,GAAiB,KAAKG,aAAL,CAAmB,KAAKhC,IAAxB,EAA8B,KAAKiC,QAAnC,CAAjB;AACA,iBAAKF,OAAL,CAAaI,IAAb,WAAqB,KAAKnC,IAA1B,cAAkC,KAAKiC,QAAvC,cAAmD,KAAKG,KAAxD;AACH;AACJ;AAED;;;;;;;;sCAKsBpC,I,EAAuC;AAAA,cAAzBiC,QAAyB,uEAAL,KAAK;AACzD,cAAMM,IAAI,GAAa,EAAvB;AACA,cAAIC,GAAG,GAAG,kCAAK,CAACxC,IAAD,CAAL,CAAYyC,OAAZ,CAAoB,GAApB,CAAV;AACA,cAAIC,KAAK,GAAGF,GAAG,CAACC,OAAJ,CAAY,GAAZ,CAAZ;AACA,cAAME,GAAG,GAAGD,KAAK,CAACE,KAAN,CAAY,GAAZ,CAAZ;;AACA,iBAAOF,KAAK,CAACG,QAAN,CAAeF,GAAf,EAAoB,GAApB,CAAP,EAAiC;AAC7B,gBAAKD,KAAK,CAACF,GAAN,OAAgB,CAAhB,IAAqBE,KAAK,CAACF,GAAN,OAAgB,CAAtC,IAA4CP,QAAhD,EAA0D;AACtDM,kBAAI,CAACO,IAAL,CAAUJ,KAAK,CAACK,OAAN,EAAV;AACH;;AACDL,iBAAK,GAAGA,KAAK,CAACM,GAAN,CAAU,CAAV,EAAa,GAAb,CAAR;AACH;;AACD,iBAAOT,IAAP;AACH;;;uCAEsB;AAAA;;AACnB;AACA,eAAKU,eAAL,GAAuB,KAAKlB,OAAL,CAAamB,IAAb,CACnB,oEAAa,GAAb,CADmB,EAEnB,6EAFmB,EAGnB,iEAAU,UAAAC,CAAC,EAAI;AACX,kBAAI,CAACC,OAAL,GAAe,IAAf;AACA,gBAAMpD,IAAI,GAAG,kCAAK,CAAC,MAAI,CAACA,IAAN,CAAL,CAAiByC,OAAjB,CAAyB,GAAzB,CAAb;AACA,mBAAO,MAAI,CAACb,QAAL,CAAcyB,MAAd,CAAqBC,KAArB,CAA2B;AAC9BC,sBAAQ,YAAK,MAAI,CAACnB,KAAV,SAAkB,MAAI,CAACoB,UAAL,GAAkB,MAAM,MAAI,CAACA,UAA7B,GAA0C,EAA5D,CADsB;AAE9BC,4BAAc,EAAEC,IAAI,CAACC,KAAL,CAAW,MAAI,CAAC9B,SAAL,CAAe,CAAf,IAAoB,IAA/B,KAAwC7B,IAAI,CAACsC,IAAL,EAF1B;AAG9BsB,0BAAY,EACRF,IAAI,CAACC,KAAL,CAAW,MAAI,CAAC9B,SAAL,CAAe,MAAI,CAACA,SAAL,CAAegC,MAAf,GAAwB,CAAvC,IAA4C,IAAvD,KACA7D,IAAI,CAAC4C,KAAL,CAAW,GAAX,EAAgBN,IAAhB;AAL0B,aAA3B,CAAP;AAOH,WAVD,CAHmB,EAcnB,kEAAW,UAAAa,CAAC;AAAA,mBAAI,gDAAG,EAAH,CAAJ;AAAA,WAAZ,CAdmB,CAAvB,CAFmB,CAkBnB;;AACA,eAAKW,YAAL,CACI,gBADJ,EAEI,KAAKb,eAAL,CAAqBc,SAArB,CAA+B,UAAAxB,IAAI,EAAI;AACnC,kBAAI,CAACa,OAAL,GAAe,KAAf;AACA,kBAAI,CAACtB,UAAL,GAAkBS,IAAlB;AACH,WAHD,CAFJ;AAOH;;;;MAzF0C,2E;;;uBAAlCZ,yB,EAAyB,gJ;AAAA,K;;;YAAzBA,yB;AAAyB,yC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;AAAA,8J;AAAA,c;AAAA,a;AAAA,mL;AAAA;AAAA;ACftC;;AACI;;AAGA;;AAKJ;;;;AARwB;;AAAA;;AAIhB;;AAAA;;;;;;;;;sEDUKA,yB,EAAyB;cALrC,uDAKqC;eAL3B;AACPd,kBAAQ,EAAE,oBADH;AAEPC,qBAAW,EAAE,2BAFN;AAGPC,mBAAS,EAAE,CAAC,2BAAD;AAHJ,S;AAK2B,Q;;;;;;gBAEjC;;;gBAEA;;;gBAEA;;;gBAEA;;;gBAEA;;;;;;;;;;;;;;;;;;;;AEzBL;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACOwB;;AACI;;AACJ;;;;;;AAFyC;;AACrC;;AAAA;;;;;;;;AAHZ;;AACI;;AAAY;AAAA;;AAAA;;AAAA;AAAA,WAA0B,eAA1B,EAA0B;AAAA;;AAAA;;AAAA;AAAA,SAA1B;;AACR;;AAGJ;;AACJ;;;;;;AALgB;;AAAA;;AACI;;AAAA;;;;;;AAOZ;;AACI;;AACJ;;;;;;AAF6C;;AACzC;;AAAA;;;;;;;;AAHZ;;AACI;;AAAY;AAAA;;AAAA;;AAAA;AAAA;;AACR;;AAGJ;;AACJ;;;;;;AALgB;;AAAA;;AACI;;AAAA;;;;QDGvBiD,iB;;;;;;;AAcT,iCACYpC,QADZ,EAEYX,OAFZ,EAGYgD,OAHZ,EAIYC,MAJZ,EAIkC;AAAA;;AAAA;;AAE9B;AALQ,eAAAtC,QAAA,GAAAA,QAAA;AACA,eAAAX,OAAA,GAAAA,OAAA;AACA,eAAAgD,OAAA,GAAAA,OAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AAbZ;;AACO,eAAAC,YAAA,GAAuB,EAAvB;AACP;;AACO,eAAAC,WAAA,GAAsB,EAAtB;AACP;;AACO,eAAAC,MAAA,GAA0B,EAA1B;AACP;;AACO,eAAAC,WAAA,GAA0B,EAA1B;AAM2B;AAGjC;;;;mCAEc;AAAA;;AACX,eAAK1C,QAAL,CAAc2C,WAAd,CAA0BrB,IAA1B,CAA+B,6DAAM,UAACC,CAAD;AAAA,mBAAOA,CAAP;AAAA,WAAN,CAA/B,EAAgDY,SAAhD,CAA0D,YAAM;AAC5D,kBAAI,CAACD,YAAL,CACI,cADJ,EAEI,MAAI,CAACI,MAAL,CAAYM,QAAZ,CAAqBT,SAArB,CAA+B,UAACU,MAAD,EAAY;AACvC;AACA,kBAAIA,MAAM,CAACC,GAAP,CAAW,OAAX,KAAuB,MAAI,CAACP,YAAL,KAAsBM,MAAM,CAACE,GAAP,CAAW,OAAX,CAAjD,EAAsE;AAClE,oBAAMvC,KAAK,GAAG,MAAI,CAACR,QAAL,CAAcgD,YAAd,CAA2BC,WAA3B,CAAuCJ,MAAM,CAACE,GAAP,CAAW,OAAX,CAAvC,CAAd;AACA;;;AACA,oBAAIvC,KAAJ,EAAW;AACP,sBAAM0C,QAAQ,GAAG,MAAI,CAAClD,QAAL,CAAcgD,YAAd,CAA2BG,SAA3B,CAAqCC,IAArC,CACb,UAACC,GAAD;AAAA,2BAASA,GAAG,CAACC,EAAJ,KAAW9C,KAAK,CAAC+C,WAA1B;AAAA,mBADa,CAAjB;AAGA;;;AACA,sBAAIL,QAAJ,EAAc;AACV,0BAAI,CAACX,YAAL,GAAoB/B,KAAK,CAAC8C,EAA1B;AACA,0BAAI,CAACtD,QAAL,CAAcgD,YAAd,CAA2BE,QAA3B,GAAsCA,QAAtC;AACH;AACJ;AACJ;AACJ,aAhBD,CAFJ;;AAoBA,kBAAI,CAAChB,YAAL,CACI,UADJ,EAEI,MAAI,CAAClC,QAAL,CAAcgD,YAAd,CAA2BQ,MAA3B,CAAkC,iBAAlC,EAAqDrB,SAArD,CAA+D,YAAM;AACjE,kBAAMe,QAAQ,GAAG,MAAI,CAAClD,QAAL,CAAcgD,YAAd,CAA2BE,QAA5C;AACA;;AACA,kBAAI,CAACA,QAAQ,CAACT,MAAT,CAAgBW,IAAhB,CAAqB,UAACK,GAAD;AAAA,uBAASA,GAAG,CAACH,EAAJ,KAAW,MAAI,CAACf,YAAzB;AAAA,eAArB,CAAL,EAAkE;AAC9D,sBAAI,CAACA,YAAL,GAAoB,CAACW,QAAQ,CAACT,MAAT,CAAgB,CAAhB,KAAsB;AAAEa,oBAAE,EAAE;AAAN,iBAAvB,EAAmCA,EAAvD;;AACA,sBAAI,CAACI,WAAL;AACH;;AACD,oBAAI,CAACjB,MAAL,GAAc,CAAC;AAAEa,kBAAE,EAAE,EAAN;AAAUK,oBAAI,EAAE;AAAhB,eAAD,EAAwCjF,MAAxC,CAA+CwE,QAAQ,CAACT,MAAxD,CAAd;;AACA,oBAAI,CAACA,MAAL,CAAY7D,IAAZ,CAAiB,UAACC,CAAD,EAAIC,CAAJ;AAAA,uBAAUD,CAAC,CAAC8E,IAAF,CAAOC,aAAP,CAAqB9E,CAAC,CAAC6E,IAAvB,CAAV;AAAA,eAAjB;;AACA,oBAAI,CAACjB,WAAL,GAAmB,CAAC;AAAEY,kBAAE,EAAE,EAAN;AAAUK,oBAAI,EAAE;AAAhB,eAAD,EAA6CjF,MAA7C,CACf,MAAI,CAACsB,QAAL,CAAcgD,YAAd,CAA2BN,WADZ,CAAnB;AAGH,aAZD,CAFJ;AAgBH,WArCD;AAsCH;;;qCAEmB;AAChB,eAAKrD,OAAL,CAAaC,IAAb,CAAkB,4GAAlB,EAAyC;AACrCE,gBAAI,EAAE;AACFC,qBAAO,EAAE,IAAI,oFAAJ,CAAY,EAAZ;AADP;AAD+B,WAAzC;AAKH;;;sCAEoB;AACjB,eAAK4C,OAAL,CAAawB,QAAb,CAAsB,CAAC,YAAD,EAAe,KAAKtB,YAApB,CAAtB;AACH;;;;MA1EkC,2E;;;uBAA1BH,iB,EAAiB,gJ,EAAA,mI,EAAA,uH,EAAA,+H;AAAA,K;;;YAAjBA,iB;AAAiB,kC;AAAA,0F;AAAA,e;AAAA,a;AAAA,0gB;AAAA;AAAA;ACjB9B;;AACI;;AACA;;AACI;;AAAiB;AAAA;AAAA;;AACb;;AACI;;AAOA;;AAOA;;AACI;AAAA;AAAA;;AAIA;;AACJ;;AACJ;;AACJ;;AACA;;AACI;;AAMJ;;AACJ;;AACA;;AAA+C;AAAA,mBAAU,IAAA0B,UAAA,EAAV;AAAsB,WAAtB;;AAC3C;;AACI;;AAA4B;;AAAG;;AAC/B;;AAAkB;;AAAW;;AACjC;;AACJ;;AACJ;;;;AAxCyB;;AAAA;;AAEO;;AAAA;;AAOA;;AAAA;;AAQZ;;AAAA;;AAUJ;;AAAA,qFAAa,OAAb,EAAa,gBAAb,EAAa,YAAb,EAAa,eAAb,EAAa,UAAb,EAAa,WAAb;;;;;;;;;sEDbH1B,iB,EAAiB;cAL7B,uDAK6B;eALnB;AACPnD,kBAAQ,EAAE,aADH;AAEPC,qBAAW,EAAE,4BAFN;AAGPC,mBAAS,EAAE,CAAC,4BAAD;AAHJ,S;AAKmB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEjB9B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAWA,QAAM4E,MAAM,GAAY,CACpB;AAAEC,UAAI,EAAE,EAAR;AAAYC,eAAS,EAAE;AAAvB,KADoB,EAEpB;AAAED,UAAI,EAAE,QAAR;AAAkBC,eAAS,EAAE;AAA7B,KAFoB,EAGpB;AAAED,UAAI,EAAE,IAAR;AAAcE,gBAAU,EAAE;AAA1B,KAHoB,CAAxB;;QAUaC,c;;;;;YAAAA;;;;yBAAAA,c;AAAc,O;AAAA,gBAFd,CAAC,4DAAD,EAAe,0DAAf,EAA4B,6DAAaC,QAAb,CAAsBL,MAAtB,CAA5B,EAA2D,gFAA3D,CAEc;;;;0HAAdI,c,EAAc;AAAA,uBAHR,sEAGQ,EAHW,sFAGX,EAHsC,8FAGtC,EAHmE,sFAGnE;AAHwF,kBACrG,4DADqG,EACvF,0DADuF,EAC1E,4DAD0E,EAC3C,gFAD2C;AAGxF,O;AAFgE,K;;;;;sEAE9EA,c,EAAc;cAJ1B,sDAI0B;eAJjB;AACNE,sBAAY,EAAE,CAAC,sEAAD,EAAoB,sFAApB,EAA+C,8FAA/C,EAA4E,sFAA5E,CADR;AAENC,iBAAO,EAAE,CAAC,4DAAD,EAAe,0DAAf,EAA4B,6DAAaF,QAAb,CAAsBL,MAAtB,CAA5B,EAA2D,gFAA3D;AAFH,S;AAIiB,Q","file":"shell-week-view-week-view-module-es5.js","sourcesContent":["import { Component, Input, SimpleChanges, OnChanges } from '@angular/core';\n\nimport { Space } from 'src/app/services/data/spaces/space.class';\n\nimport * as dayjs from 'dayjs';\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\n\n@Component({\n    selector: 'week-view-day-display',\n    templateUrl: './day-display.component.html',\n    styleUrls: ['./day-display.component.scss']\n})\nexport class WeekViewDayDisplayComponent implements OnChanges {\n    /** Date to display bookings for */\n    @Input() public date: number;\n    /** List of spaces to display bookings for */\n    @Input() public spaces: Space[];\n    /** List of bookings for this date */\n    public booking_list: Booking[] = [];\n\n    /** Display string for the set date */\n    public get date_display(): string {\n        const date = dayjs(this.date);\n        return date.format('ddd, DD MMM YYYY');\n    }\n\n    /** Whether the date set is today */\n    public get is_today(): boolean {\n        return dayjs(this.date).isSame(dayjs(), 'd');\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        /* istanbul ignore else */\n        if (changes.date || changes.spaces) {\n            this.updateBookings();\n        }\n    }\n\n    private updateBookings(): void {\n        let bookings = [];\n        this.spaces.forEach(space => {\n            bookings = bookings.concat(space.bookingsFor(this.date));\n        });\n        bookings.sort((a, b) => a.date - b.date);\n        this.booking_list = bookings;\n    }\n}\n","<div class=\"heading\">\n    <div class=\"text\">{{ date_display }}</div>\n    <div class=\"info\" *ngIf=\"is_today\">Today</div>\n</div>\n<div class=\"list\">\n    <ng-container *ngIf=\"booking_list && booking_list.length; else empty_state\">\n        <week-view-item *ngFor=\"let event of booking_list\" [event]=\"event\"></week-view-item>\n    </ng-container>\n</div>\n<ng-template #empty_state>\n    <div class=\"info-block\">\n        <div class=\"icon\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'close' }\"></app-icon>\n        </div>\n        <div class=\"text\">No events for {{ date_display }}</div>\n    </div>\n</ng-template>\n","import { Component, Input } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\n\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\nimport { MeetingDetailsModalComponent } from 'src/app/overlays/meeting-details-modal/meeting-details-modal.component';\n\n@Component({\n    selector: 'week-view-item',\n    templateUrl: './item.component.html',\n    styleUrls: ['./item.component.scss']\n})\nexport class WeekViewItemComponent {\n    @Input() public event: Booking;\n\n    /** Type of booking */\n    public get type(): string {\n        if (this.event.declined) {\n            return 'cancelled';\n        }\n        const booking_type = this.event.type;\n        if (booking_type === 'internal' && this.event.has_visitors) {\n            return 'external';\n        }\n        return booking_type;\n    }\n\n    constructor(private _dialog: MatDialog) {}\n\n    /**\n     * Open modal to view bookings details\n     */\n    public viewMeetingDetails() {\n        this._dialog.open(MeetingDetailsModalComponent, {\n            maxWidth: 'calc(100vw - 2em)',\n            data: {\n                booking: this.event\n            }\n        })\n    }\n}\n","<div\n    [class]=\"\n        'event' +\n        (type ? ' ' + type : '') +\n        (event.status === 'done' ? ' ended' : '') +\n        (event.status === 'in_progress' ? 'in-progress' : '')\n    \"\n    *ngIf=\"event\"\n    [attr.id]=\"event?.id\"\n    (tapped)=\"viewMeetingDetails()\"\n>\n    <div class=\"heading\">\n        <div class=\"text\">{{ event.all_day ? 'All Day' : event.time_period }}</div>\n        <div class=\"handle\">\n            <app-icon\n                *ngIf=\"event.declined || event.approved\"\n                [icon]=\"{\n                    class: 'material-icons',\n                    content: event.approved ? 'done' : 'event_busy'\n                }\"\n            >\n            </app-icon>\n        </div>\n    </div>\n    <div class=\"details\">\n        <div class=\"field\" [title]=\"event.organiser?.name || event.organiser_email\">\n            <label for=\"host\">Host:</label>\n            <div class=\"value\" name=\"host\">{{ event.organiser?.name || event.organiser_email }}</div>\n        </div>\n        <div class=\"field\" [title]=\"event.space?.name || event.location\">\n            <label for=\"location\">Location:</label>\n            <div class=\"value\" name=\"location\" [matTooltip]=\"event.space?.name || event.location\">\n                {{ event.space?.name || event.location }}\n            </div>\n        </div>\n        <div class=\"field\">\n            <label for=\"attendees\">Attendees:</label>\n            <div class=\"value\" name=\"attendees\">{{ event.attendees?.length || '0' }}</div>\n        </div>\n    </div>\n</div>\n","import { Component, OnInit, Input, SimpleChanges } from '@angular/core';\nimport { Subject, Observable, of } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap, catchError } from 'rxjs/operators';\n\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { Space } from 'src/app/services/data/spaces/space.class';\nimport { ApplicationService } from 'src/app/services/app.service';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'week-view-timeline',\n    templateUrl: './timeline.component.html',\n    styleUrls: ['./timeline.component.scss']\n})\nexport class WeekViewTimelineComponent extends BaseDirective implements OnInit {\n    /** Timestamp of the active date */\n    @Input() public date: number;\n    /** ID of the active level */\n    @Input() public level: string;\n    /** ID of the room type to filter displayed spaces by */\n    @Input() public space_type: string;\n    /** Whether weekends are displayed */\n    @Input() public weekends: boolean;\n    /** Whether space bookings are being loaded */\n    @Input() public loading: boolean;\n    /** List of dates to display */\n    public date_list: number[] = [];\n    /** List of spaces to display bookings for */\n    public space_list: Space[] = [];\n    /** List of items from an API search */\n    public search_results$: Observable<Space[]>;\n    /** Subject holding the value of the search */\n    public readonly search$ = new Subject<string>();\n\n    constructor(private _service: ApplicationService) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this.date_list = this.generateDates(this.date, this.weekends);\n        this.initBookings();\n        this.search$.next(`${this.date}|${this.weekends}|${this.level}`);\n        this.interval(\n            'update_booking',\n            () =>\n                this.search$.next(`${this.date}|${this.weekends}|${this.level}|${dayjs().unix()}`),\n            30 * 1000\n        );\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        /* istanbul ignore else */\n        if (changes.date || changes.weekends || changes.level) {\n            this.date_list = this.generateDates(this.date, this.weekends);\n            this.search$.next(`${this.date}|${this.weekends}|${this.level}`);\n        }\n    }\n\n    /**\n     * Generate list of dates to display\n     * @param date Currently selected date\n     * @param weekends Whether weekends should be included\n     */\n    private generateDates(date: number, weekends: boolean = false): number[] {\n        const list: number[] = [];\n        let day = dayjs(date).startOf('d');\n        let start = day.startOf('w');\n        const end = start.endOf('w');\n        while (start.isBefore(end, 'm')) {\n            if ((start.day() !== 0 && start.day() !== 6) || weekends) {\n                list.push(start.valueOf());\n            }\n            start = start.add(1, 'd');\n        }\n        return list;\n    }\n\n    private initBookings() {\n        // Listen for input changes\n        this.search_results$ = this.search$.pipe(\n            debounceTime(100),\n            distinctUntilChanged(),\n            switchMap(_ => {\n                this.loading = true;\n                const date = dayjs(this.date).startOf('w');\n                return this._service.Spaces.query({\n                    zone_ids: `${this.level}${this.space_type ? ',' + this.space_type : ''}`,\n                    available_from: Math.floor(this.date_list[0] / 1000) || date.unix(),\n                    available_to:\n                        Math.floor(this.date_list[this.date_list.length - 1] / 1000) ||\n                        date.endOf('w').unix()\n                });\n            }),\n            catchError(_ => of([]))\n        );\n        // Process API results\n        this.subscription(\n            'search_results',\n            this.search_results$.subscribe(list => {\n                this.loading = false;\n                this.space_list = list;\n            })\n        );\n    }\n}\n","<div class=\"week-timeline\">\n    <div class=\"loader\" *ngIf=\"loading\">\n        <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n    </div>\n    <week-view-day-display\n        *ngFor=\"let date of date_list\"\n        [date]=\"date\"\n        [spaces]=\"space_list\"\n    ></week-view-day-display>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { first } from 'rxjs/operators';\n\nimport { BaseDirective } from 'src/app/shared/base.directive';\nimport { BuildingLevel } from 'src/app/services/data/organisation/level.class';\nimport { ApplicationService } from 'src/app/services/app.service';\nimport { Identity } from 'src/app/shared/utilities/types.utilities';\nimport { BookingModalComponent } from 'src/app/overlays/booking-modal/booking-modal.component';\nimport { Booking } from 'src/app/services/data/bookings/booking.class';\n\n@Component({\n    selector: 'a-week-view',\n    templateUrl: './week-view.component.html',\n    styleUrls: ['./week-view.component.scss'],\n})\nexport class WeekViewComponent extends BaseDirective implements OnInit {\n    /** Currently selected date */\n    public date: string;\n    /** Whether weekends are displayed */\n    public weekend: boolean;\n    /** ID of the currently selected level */\n    public active_level: string = '';\n    /** ID of the currently selected level */\n    public active_type: string = '';\n    /** List of levels available for the active building */\n    public levels: BuildingLevel[] = [];\n    /** List of space types available for the active building */\n    public space_types: Identity[] = [];\n\n    constructor(\n        private _service: ApplicationService,\n        private _dialog: MatDialog,\n        private _router: Router,\n        private _route: ActivatedRoute\n    ) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.initialised.pipe(first((_) => _)).subscribe(() => {\n            this.subscription(\n                'route.params',\n                this._route.paramMap.subscribe((params) => {\n                    /* istanbul ignore else */\n                    if (params.has('level') && this.active_level !== params.get('level')) {\n                        const level = this._service.Organisation.levelWithID(params.get('level'));\n                        /* istanbul ignore else */\n                        if (level) {\n                            const building = this._service.Organisation.buildings.find(\n                                (bld) => bld.id === level.building_id\n                            );\n                            /* istanbul ignore else */\n                            if (building) {\n                                this.active_level = level.id;\n                                this._service.Organisation.building = building;\n                            }\n                        }\n                    }\n                })\n            );\n            this.subscription(\n                'building',\n                this._service.Organisation.listen('active_building').subscribe(() => {\n                    const building = this._service.Organisation.building;\n                    /* istanbul ignore else */\n                    if (!building.levels.find((lvl) => lvl.id === this.active_level)) {\n                        this.active_level = (building.levels[0] || { id: '' }).id;\n                        this.updateLevel();\n                    }\n                    this.levels = [{ id: '', name: 'All Levels' } as any].concat(building.levels);\n                    this.levels.sort((a, b) => a.name.localeCompare(b.name));\n                    this.space_types = [{ id: '', name: 'All Space Types' } as any].concat(\n                        this._service.Organisation.space_types\n                    );\n                })\n            );\n        });\n    }\n\n    public newMeeting() {\n        this._dialog.open(BookingModalComponent, {\n            data: {\n                booking: new Booking({}),\n            },\n        });\n    }\n\n    public updateLevel() {\n        this._router.navigate(['/week-view', this.active_level]);\n    }\n}\n","<div class=\"week-view\">\n    <a-sidebar></a-sidebar>\n    <div class=\"group\">\n        <a-topbar-header [(date)]=\"date\">\n            <div class=\"topbar\">\n                <mat-form-field *ngIf=\"levels && levels.length > 1\" appearance=\"outline\">\n                    <mat-select [(ngModel)]=\"active_level\" (ngModelChange)=\"updateLevel()\">\n                        <mat-option *ngFor=\"let level of levels\" [value]=\"level?.id\">\n                            {{ level?.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n                <mat-form-field *ngIf=\"space_types && space_types.length > 1\" appearance=\"outline\">\n                    <mat-select [(ngModel)]=\"active_type\">\n                        <mat-option *ngFor=\"let type of space_types\" [value]=\"type?.id\">\n                            {{ type?.name }}\n                        </mat-option>\n                    </mat-select>\n                </mat-form-field>\n                <mat-slide-toggle\n                    [(ngModel)]=\"weekend\"\n                    labelPosition=\"before\"\n                    title=\"Only show meetings with setup and breakdown times\"\n                >\n                    Show Weekends\n                </mat-slide-toggle>\n            </div>\n        </a-topbar-header>\n        <main>\n            <week-view-timeline\n                [date]=\"date\"\n                [level]=\"active_level\"\n                [space_type]=\"active_type\"\n                [weekends]=\"weekend\"\n            ></week-view-timeline>\n        </main>\n    </div>\n    <button mat-button class=\"new-item\" name=\"new\" (tapped)=\"newMeeting()\">\n        <div class=\"content\">\n            <div class=\"material-icons\">add</div>\n            <div class=\"text\">New Meeting</div>\n        </div>\n    </button>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Route } from '@angular/router';\n\nimport { WeekViewComponent } from './week-view.component';\nimport { WeekViewTimelineComponent } from './timeline/timeline.component';\nimport { SharedContentModule } from 'src/app/shared/shared.module';\nimport { WeekViewDayDisplayComponent } from './day-display/day-display.component';\nimport { WeekViewItemComponent } from './day-display/item/item.component';\n\nconst ROUTES: Route[] = [\n    { path: '', component: WeekViewComponent },\n    { path: ':level', component: WeekViewComponent },\n    { path: '**', redirectTo: '' }\n];\n\n@NgModule({\n    declarations: [WeekViewComponent, WeekViewTimelineComponent, WeekViewDayDisplayComponent, WeekViewItemComponent],\n    imports: [CommonModule, FormsModule, RouterModule.forChild(ROUTES), SharedContentModule]\n})\nexport class WeekViewModule {}\n"]}