(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{O7Vg:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),o=e("mrSG"),i=e("5f3J"),r=e("OaWH"),a=e("Wgwc"),u=function(n){function l(l,e,t){var o=n.call(this)||this;return o._service=l,o._route=e,o._renderer=t,o.time_blocks=o.generateTimeBlocks(),o.scroll_top=0,o.scroll_left=0,o.scroll_offset=0,o.spaces=[],o.filtered_spaces=[],o.in_view={},o.loading={},o.last_update=0,o.show_holding_bay=!0,o}return Object(o.__extends)(l,n),l.prototype.onResize=function(){this.scroll_area.nativeElement&&(this.box=this.scroll_area.nativeElement.getBoundingClientRect())},Object.defineProperty(l.prototype,"is_loading",{get:function(){var n=this;return Object.keys(this.loading).reduce((function(l,e){return l||n.loading[e]}),!1)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"holding_bay",{get:function(){var n=this._service.Buildings.current();return n.holding_bay?this._service.Rooms.item(n.holding_bay):null},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){var n=this;if(!this._service.ready()||!this._service.Rooms.list(!0).length)return this.timeout("init",(function(){return n.ngOnInit()}));this._service.title="Day View",this.subscription("active_level",this._service.listen("APP.level",(function(l){var e=-1===l?n._service.Buildings.current().id:l;n.spaces=n._service.Rooms.list(!0,[e])||[];var t=n.holding_bay;n.filtered_spaces=n.spaces.filter((function(l){return(!n.room_type||l.zones.indexOf(n.room_type)>=0)&&(!t||l.id!==t.id)&&l.bookable})),n.updateBookings(),n.interval("bookings",(function(){return n.updateBookings()}),3e4)}))),this.subscription("date",this._service.listen("APP.date",(function(l){n.date=l,n.is_today=a().isSame(a(l),"d"),n.updateBookings(),n.interval("bookings",(function(){return n.updateBookings()}),3e4)}))),this.subscription("room_type",this._service.listen("APP.room_type",(function(l){n.room_type="string"==typeof l?l:null;var e=n.holding_bay;n.filtered_spaces=n.spaces.filter((function(l){return(!n.room_type||l.zones.indexOf(n.room_type)>=0)&&(!e||l.id!==e.id)&&l.bookable}))}))),this.subscription("viewing",this._service.listen("CONCIERGE.day_view.viewing",(function(l){return n.scrollIntoView(l)}))),this.subscription("route.query",this._route.queryParamMap.subscribe((function(l){l.has("id")&&(n.view_id=l.get("id"))}))),this.updateTime(),this.interval("time",(function(){return n.updateTime()}),15e3),this.updateBookings(),this.interval("bookings",(function(){return n.updateBookings()}),3e4),this.interval("scroll",(function(){n.scroll_area&&n.scroll_area.nativeElement&&n.updateScroll({target:n.scroll_area.nativeElement})}),1e3),this.scroll_area.nativeElement&&(this.box=this.scroll_area.nativeElement.getBoundingClientRect())},Object.defineProperty(l.prototype,"space_zones",{get:function(){return this.spaces.map((function(n){return"space-col-"+n.id}))},enumerable:!0,configurable:!0}),l.prototype.updateScroll=function(n){this.scroll_top=n.target.scrollTop,this.scroll_left=n.target.scrollLeft},l.prototype.generateTimeBlocks=function(){for(var n=[],l=a().startOf("h"),e=0;e<24;e++)n.push({id:l.hour(e).format("HH:mm"),display:l.hour(e).format("h:mm A")});return n},l.prototype.updateTime=function(){var n=a();this.now=(n.hour()+n.minute()/60)/24,this.active_hour=n.startOf("h").format("HH:mm")},l.prototype.updateBookings=function(){var n=this,l=this.spaces.filter((function(l){return!1!==n.in_view[l.id]}));if(l.length){l.forEach((function(l){return n.loading[l.id]=!0}));var e=a(this.date).startOf("d"),t=e.endOf("d"),o=this._service.get("APP.level"),i=[-1===o?this._service.Buildings.current().id:o];this.room_type&&i.push(this.room_type),this._service.Rooms.query({zone_ids:i,available_from:e.unix(),available_to:t.unix()}).then((function(l){n._service.Rooms.clearTimeline(e.valueOf(),t.valueOf()),l.forEach((function(l){if(n.view_id){var e=l.bookings.find((function(l){return l.id===n.view_id}));e&&n.view(e,l)}n._service.Rooms.updateTimeline(l.id,l.bookings)})),delete n.loading,n.last_update=a().valueOf(),n.loading={}}))}},l.prototype.view=function(n,l){this._service.Bookings.view(n,l).then((function(n){return null}),(function(n){return null})),this.view_id=null},l.prototype.scrollIntoView=function(n){if(n&&this.scroll_area&&this.scroll_area.nativeElement){var l=this.scroll_area.nativeElement.querySelector("#event-"+n.local_id);if(l){var e=this.scroll_area.nativeElement.getBoundingClientRect(),t=l.getBoundingClientRect();this.scroll_area.nativeElement.scrollTo({left:t.left-e.left+this.scroll_area.nativeElement.scrollLeft,top:t.top-e.top+this.scroll_area.nativeElement.scrollTop,behavior:"smooth"})}}},l.prototype.scrollView=function(n,l){(n||l)&&(this.scroll_area.nativeElement.scrollTop+=l||0,this.scroll_area.nativeElement.scrollLeft+=n||0,(l&&this.scroll_area.nativeElement.scrollTop>=this.scroll_area.nativeElement.scrollHeight||n&&this.scroll_area.nativeElement.scrollLeft>=this.scroll_area.nativeElement.scrollWidth||l&&this.scroll_area.nativeElement.scrollTop<=0||n&&this.scroll_area.nativeElement.scrollLeft<=0)&&this.clearInterval("auto_scroll"),this.updateScroll({target:this.scroll_area.nativeElement}))},l.prototype.clearSelected=function(){this._service.set("CONCIERGE.day_view.viewing",null)},l.prototype.cancelScroll=function(){this.clearInterval("auto_scroll")},l.prototype.dragChange=function(n){var l=this;n?(this.scroll_offset=this.scroll_area.nativeElement.scrollTop,this.subscription("listen_move",this._renderer.listen("window","mousemove",(function(n){var e=n.clientX,t=n.clientY,o=t>l.box.bottom-.05*l.box.height?1:t<l.box.top+.05*l.box.height?-1:0,i=e>l.box.right-.05*l.box.width?1:e<l.box.left+.05*l.box.height?-1:0;l.scrollView(5*i,5*o),l.interval("auto_scroll",(function(){return l.scrollView(10*i,10*o)}),10)}))),this.clearInterval("bookings")):(this.interval("bookings",(function(){return l.updateBookings()}),3e4),this.clearInterval("auto_scroll"),this.unsub("listen_move"))},l}(i.a),s=function(){return function(){}}(),c=e("pMnS"),d=e("tN88"),b=e("xYTU"),g=e("NcP4"),p=e("8fYl"),m=e("2t5/"),f=e("aiwB"),v=e("bPUX"),h=e("MIzx"),_=e("jtT9"),y=e("QoQi"),O=e("2cjq"),P=e("PnLf"),M=e("PfHN"),x=e("fBUd"),w=e("04GH"),C=e("/T1M"),k=e("Z+uX"),z=e("Ip0R"),T=e("Fzqc"),L=e("Wf4p"),I=e("ZYjt"),J=e("wFw1"),E=t.xb({encapsulation:2,styles:[".mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}@media (-ms-high-contrast:active){.mat-progress-bar .mat-progress-bar-background{display:none}}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}@media (-ms-high-contrast:active){.mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}@media (-ms-high-contrast:active){.mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:'';display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2s infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2s infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2s infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2s infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after{animation:none;transition:none}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(.5,0,.70173,.49582);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(.30244,.38135,.55,.95635);transform:translateX(83.67142%)}100%{transform:translateX(200.61106%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.33473,.12482,.78584,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.66148)}100%{transform:scaleX(.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.51506,.40969);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(.31033,.28406,.8,.73371);transform:translateX(37.65191%)}48.35%{animation-timing-function:cubic-bezier(.4,.62704,.6,.90203);transform:translateX(84.38617%)}100%{transform:translateX(160.27778%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.15,0,.51506,.40969);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.31033,.28406,.8,.73371);transform:scaleX(.4571)}44.15%{animation-timing-function:cubic-bezier(.4,.62704,.6,.90203);transform:scaleX(.72796)}100%{transform:scaleX(.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}"],data:{}});function V(n){return t.Vb(2,[t.Rb(402653184,1,{_primaryValueBar:0}),(n()(),t.zb(1,0,null,null,4,":svg:svg",[["class","mat-progress-bar-background mat-progress-bar-element"],["focusable","false"],["height","4"],["width","100%"]],null,null,null,null,null)),(n()(),t.zb(2,0,null,null,2,":svg:defs",[],null,null,null,null,null)),(n()(),t.zb(3,0,null,null,1,":svg:pattern",[["height","4"],["patternUnits","userSpaceOnUse"],["width","8"],["x","4"],["y","0"]],[[8,"id",0]],null,null,null,null)),(n()(),t.zb(4,0,null,null,0,":svg:circle",[["cx","2"],["cy","2"],["r","2"]],null,null,null,null,null)),(n()(),t.zb(5,0,null,null,0,":svg:rect",[["height","100%"],["width","100%"]],[[1,"fill",0]],null,null,null,null)),(n()(),t.zb(6,0,null,null,2,"div",[["class","mat-progress-bar-buffer mat-progress-bar-element"]],null,null,null,null,null)),t.Qb(512,null,z.D,z.E,[t.k,t.v,t.H]),t.yb(8,278528,null,0,z.q,[z.D],{ngStyle:[0,"ngStyle"]},null),(n()(),t.zb(9,0,[[1,0],["primaryValueBar",1]],null,2,"div",[["class","mat-progress-bar-primary mat-progress-bar-fill mat-progress-bar-element"]],null,null,null,null,null)),t.Qb(512,null,z.D,z.E,[t.k,t.v,t.H]),t.yb(11,278528,null,0,z.q,[z.D],{ngStyle:[0,"ngStyle"]},null),(n()(),t.zb(12,0,null,null,0,"div",[["class","mat-progress-bar-secondary mat-progress-bar-fill mat-progress-bar-element"]],null,null,null,null,null))],(function(n,l){var e=l.component;n(l,8,0,e._bufferTransform()),n(l,11,0,e._primaryTransform())}),(function(n,l){var e=l.component;n(l,3,0,e.progressbarId),n(l,5,0,e._rectangleFillValue)}))}var D=e("cnlR"),R=e("9Bt9"),j=e("QkPN"),B=e("0njA"),A=e("bujt"),S=e("UodH"),N=e("dWZg"),Y=e("lLAP"),F=function(n){function l(l){var e=n.call(this)||this;return e._service=l,e.position=new t.n,e}return Object(o.__extends)(l,n),Object.defineProperty(l.prototype,"type",{get:function(){if(!this.event||!this.event.booking_type)return"";if("cancelled"===this.event.state)return"cancelled";var n=this.event.booking_type.id?this.event.booking_type.id:this.event.booking_type;return"internal"===n&&this.event.visitors?"external":n},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"period",{get:function(){return this.event&&this.event.display?this.event.display.start+" - "+this.event.display.end:""},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"expected",{get:function(){return this.space&&(this.event.expected_attendees||{})[this.space.id]||0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"has_catering",{get:function(){var n=this;return!!this.event&&!!(this.event.catering||[]).find((function(l){return n.event.room.id===l.location_id}))},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"order",{get:function(){var n=this;return(this.event.catering||[]).find((function(l){return l.location_id===n.space.id}))},enumerable:!0,configurable:!0}),l.prototype.view=function(){this._service.Bookings.view(this.event,this.space).then((function(n){return null}),(function(n){return null}))},Object.defineProperty(l.prototype,"active",{get:function(){var n=this._service.get("CONCIERGE.day_view.viewing");return!n||n.id===this.event.id},enumerable:!0,configurable:!0}),l.prototype.ngOnChanges=function(n){(n.event||n.overlap||n.date)&&this.calculatePosition()},l.prototype.viewOrder=function(n){if(this.event&&this.event.catering){if(sessionStorage){sessionStorage.setItem("CONCIERGE.view_order",n);var l=JSON.stringify(Object(o.__assign)({},this.event,{room:Object(o.__assign)({},this.space,{bookings:[]})}));sessionStorage.setItem("CONCIERGE.order_booking",l)}this._service.navigate(["/catering","orders"],{booking:this.event.id,view:n})}},l.prototype.calculatePosition=function(){if(this.event){var n=this.overlap||{index:0,total:1},l=a(this.date).startOf("d"),e=a(this.event.date).startOf("m"),t=+e.diff(l,"h",!0).toFixed(3),o=Math.min(this.event.duration,Math.abs(l.diff(e.add(this.event.duration,"m"),"m")));this.top=Math.max(0,t/24*100),this.height=Math.min(100-this.top,this.fixed?o/60:o/60/24*100),this.position.emit({top:this.top,height:o/60/24*100}),this.width=Math.min(100,100/n.total+5),this.left=Math.min(100-this.width,this.width*n.index-5*n.index),this.overflow_top=100*(this.event.setup?this.event.setup/o:-.1),this.overflow_bottom=100*(this.event.breakdown?this.event.breakdown/o:-.1)}},l}(i.a),q=t.xb({encapsulation:0,styles:[[".event-container[_ngcontent-%COMP%]{position:absolute;pointer-events:auto;transition:-webkit-filter .2s;transition:filter .2s;transition:filter .2s,-webkit-filter .2s}.event-container[_ngcontent-%COMP%]:hover{-webkit-filter:none;filter:none}.event-container[_ngcontent-%COMP%]:hover   .catering-icon[_ngcontent-%COMP%]{z-index:999}.event-container[_ngcontent-%COMP%]:hover   .event[_ngcontent-%COMP%]{z-index:999!important;bottom:auto;min-height:100%;left:5px;right:5px}.event-container[_ngcontent-%COMP%]:hover   .event.low[_ngcontent-%COMP%]{bottom:0;top:auto}.event-container.fixed[_ngcontent-%COMP%]:hover   .event[_ngcontent-%COMP%]{z-index:999!important;top:0;left:1px;right:1px;bottom:0}.overflow[_ngcontent-%COMP%]{position:absolute;top:2px;left:2px;right:2px;bottom:2px;border-radius:4px;background-color:rgba(31,64,230,.2)}.overflow.internal[_ngcontent-%COMP%]{background-color:rgba(230,159,199,.2)}.overflow.external[_ngcontent-%COMP%]{background-color:rgba(140,90,200,.2)}.overflow.training[_ngcontent-%COMP%]{background-color:rgba(240,231,0,.2)}.overflow.interview[_ngcontent-%COMP%]{background-color:rgba(52,141,2,.2)}.overflow.setup[_ngcontent-%COMP%]{background-color:rgba(211,47,47,.2)}.overflow.cancelled[_ngcontent-%COMP%]{background-color:rgba(97,114,136,.2)}.event[_ngcontent-%COMP%]{position:absolute;overflow:hidden;top:0;left:1px;right:1px;bottom:0;border-radius:4px;background-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 2px 1px -1px rgba(0,0,0,.12);transition:bottom .2s,top .2s,left .2s,right .2s;border:1px solid #1f40e6}.event[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:#1f40e6}.event[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:rgba(31,64,230,.2)}.event.pending[_ngcontent-%COMP%]{border-color:rgba(31,64,230,.4)}.event.pending[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:rgba(31,64,230,.4)}.event.internal[_ngcontent-%COMP%]{border-color:#e69fc7}.event.internal[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:#e69fc7}.event.internal[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:rgba(230,159,199,.2)}.event.internal.pending[_ngcontent-%COMP%]{border-color:rgba(230,159,199,.4)}.event.internal.pending[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:rgba(230,159,199,.4)}.event.external[_ngcontent-%COMP%]{border-color:#8c5ac8}.event.external[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:#8c5ac8}.event.external[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:rgba(140,90,200,.2)}.event.external.pending[_ngcontent-%COMP%]{border-color:rgba(140,90,200,.4)}.event.external.pending[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:rgba(140,90,200,.4)}.event.training[_ngcontent-%COMP%]{border-color:#f0e700}.event.training[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:#f0e700}.event.training[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:rgba(240,231,0,.2)}.event.training.pending[_ngcontent-%COMP%]{border-color:rgba(240,231,0,.4)}.event.training.pending[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:rgba(240,231,0,.4)}.event.interview[_ngcontent-%COMP%]{border-color:#348d02}.event.interview[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:#348d02}.event.interview[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:rgba(52,141,2,.2)}.event.interview.pending[_ngcontent-%COMP%]{border-color:rgba(52,141,2,.4)}.event.interview.pending[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:rgba(52,141,2,.4)}.event.setup[_ngcontent-%COMP%]{border-color:#d32f2f}.event.setup[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:#d32f2f}.event.setup[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:rgba(211,47,47,.2)}.event.setup.pending[_ngcontent-%COMP%]{border-color:rgba(211,47,47,.4)}.event.setup.pending[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:rgba(211,47,47,.4)}.event.cancelled[_ngcontent-%COMP%]{border-color:#617288}.event.cancelled[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:#617288}.event.cancelled[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:rgba(97,114,136,.2)}.event.cancelled.pending[_ngcontent-%COMP%]{border-color:rgba(97,114,136,.4)}.event.cancelled.pending[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{background-color:rgba(97,114,136,.4)}.inactive[_ngcontent-%COMP%]{-webkit-filter:blur(1px) grayscale(80%);filter:blur(1px) grayscale(80%)}.header[_ngcontent-%COMP%]{display:flex;align-items:center;height:1.5em}.header[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:.8em;padding:1em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;min-width:50%}.handle[_ngcontent-%COMP%]{height:100%;width:1.8em;background-color:#1f40e6;color:#fff;display:flex;align-items:center;justify-content:center}.body[_ngcontent-%COMP%]{padding:1em;font-size:.8em}.field[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5em}.field[_ngcontent-%COMP%]:last-child{margin:none}.host[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-style:italic}.catering-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;bottom:-4px;right:4px;height:2.5em;width:2.5em;background-color:#fff;border:1px solid #ccc;z-index:100;font-size:.6em}spinner[_ngcontent-%COMP%]{font-size:.3em}"]],data:{}});function X(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,2,"app-icon",[],null,null,null,j.b,j.a)),t.yb(1,180224,null,0,B.a,[],{icon:[0,"icon"]},null),t.Ob(2,{class:0,content:1})],(function(n,l){var e=l.component,t=n(l,2,0,"material-icons","busy"===e.event.state?"done":"cancelled"===e.event.state?"event_busy":"");n(l,1,0,t)}),null)}function G(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,1,"spinner",[["color","#fff"],["type","circle-ring"]],null,null,null,d.A,d.o)),t.yb(1,770048,null,0,D.P,[t.h],{type:[0,"type"],color:[1,"color"]},null)],(function(n,l){n(l,1,0,"circle-ring","#fff")}),null)}function H(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,4,"div",[["class","field booked-by"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Booked by:\xa0"])),(n()(),t.zb(3,0,null,null,1,"div",[["class","value"]],[[8,"title",0]],null,null,null,null)),(n()(),t.Tb(4,null,[" "," "]))],null,(function(n,l){var e=l.component;n(l,3,0,"Booked By: "+((null==e.event.booked_by?null:e.event.booked_by.name)||e.event.booked_by)),n(l,4,0,(null==e.event.booked_by?null:e.event.booked_by.name)||e.event.booked_by)}))}function $(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,2,"div",[["class","field"]],[[8,"title",0]],null,null,null,null)),(n()(),t.zb(1,0,null,null,1,"div",[["class","value"]],null,null,null,null,null)),(n()(),t.Tb(2,null,["Welcomed by: ",""]))],null,(function(n,l){var e=l.component;n(l,0,0,"Welcomed by: "+e.event.notify_users[0]),n(l,2,0,e.event.notify_users[0])}))}function U(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,2,"div",[["class","field"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,1,"div",[["class","value"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Catered"]))],null,null)}function Q(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,4,"div",[["class","field"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Parking:"])),(n()(),t.zb(3,0,null,null,1,"div",[["class","value"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Need Parking"]))],null,null)}function W(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,5,"button",[["class","catering-icon"],["mat-icon-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"touchrelease"],[null,"mousedown"],[null,"touchstart"],[null,"mouseup"],[null,"touchend"]],(function(n,l,e){var o=!0,i=n.component;return"mousedown"===l&&(o=!1!==t.Lb(n,1).mousestart(e)&&o),"touchstart"===l&&(o=!1!==t.Lb(n,1).touchstart(e)&&o),"mouseup"===l&&(o=!1!==t.Lb(n,1).mouse(e)&&o),"touchend"===l&&(o=!1!==t.Lb(n,1).touch(e)&&o),"touchrelease"===l&&(o=!1!==i.viewOrder(i.order.id)&&o),o}),A.d,A.b)),t.yb(1,16384,null,0,D.vb,[],null,{event:"touchrelease"}),t.yb(2,180224,null,0,S.b,[t.k,N.a,Y.c,[2,J.a]],null,null),(n()(),t.zb(3,0,null,0,2,"app-icon",[],null,null,null,j.b,j.a)),t.yb(4,180224,null,0,B.a,[],{icon:[0,"icon"]},null),t.Ob(5,{class:0,content:1})],(function(n,l){var e=n(l,5,0,"material-icons","restaurant");n(l,4,0,e)}),(function(n,l){n(l,0,0,t.Lb(l,2).disabled||null,"NoopAnimations"===t.Lb(l,2)._animationMode)}))}function K(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,33,"div",[["class","event-container"]],[[8,"id",0],[2,"fixed",null],[2,"inactive",null],[4,"top",null],[4,"left",null],[4,"width",null],[4,"height",null]],null,null,null,null)),(n()(),t.zb(1,0,null,null,0,"div",[],[[8,"className",0],[4,"top",null],[4,"bottom",null]],null,null,null,null)),(n()(),t.zb(2,0,null,null,29,"div",[],[[8,"className",0],[4,"z-index",null]],[[null,"touchrelease"],[null,"mousedown"],[null,"touchstart"],[null,"mouseup"],[null,"touchend"]],(function(n,l,e){var o=!0,i=n.component;return"mousedown"===l&&(o=!1!==t.Lb(n,3).mousestart(e)&&o),"touchstart"===l&&(o=!1!==t.Lb(n,3).touchstart(e)&&o),"mouseup"===l&&(o=!1!==t.Lb(n,3).mouse(e)&&o),"touchend"===l&&(o=!1!==t.Lb(n,3).touch(e)&&o),"touchrelease"===l&&(o=!1!==i.view()&&o),o}),null,null)),t.yb(3,16384,null,0,D.vb,[],null,{event:"touchrelease"}),(n()(),t.zb(4,0,null,null,7,"div",[["class","header"]],null,null,null,null,null)),(n()(),t.zb(5,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(n()(),t.Tb(6,null,["",""])),(n()(),t.zb(7,0,null,null,4,"div",[["class","handle"]],null,null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,X)),t.yb(9,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.ob(16777216,null,null,1,null,G)),t.yb(11,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.zb(12,0,null,null,19,"div",[["class","body"]],null,null,null,null,null)),(n()(),t.zb(13,0,null,null,4,"div",[["class","field host"]],null,null,null,null,null)),(n()(),t.zb(14,0,null,null,1,"div",[["class","label"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Host:\xa0"])),(n()(),t.zb(16,0,null,null,1,"div",[["class","value"]],[[8,"title",0]],null,null,null,null)),(n()(),t.Tb(17,null,[" "," "])),(n()(),t.ob(16777216,null,null,1,null,H)),t.yb(19,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.zb(20,0,null,null,2,"div",[["class","field"]],null,null,null,null,null)),(n()(),t.zb(21,0,null,null,1,"div",[["class","value"]],[[8,"title",0]],null,null,null,null)),(n()(),t.Tb(22,null,["",""])),(n()(),t.zb(23,0,null,null,2,"div",[["class","field"]],null,null,null,null,null)),(n()(),t.zb(24,0,null,null,1,"div",[["class","value"]],null,null,null,null,null)),(n()(),t.Tb(25,null,[" "," Attendee",""," "])),(n()(),t.ob(16777216,null,null,1,null,$)),t.yb(27,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.ob(16777216,null,null,1,null,U)),t.yb(29,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.ob(16777216,null,null,1,null,Q)),t.yb(31,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.ob(16777216,null,null,1,null,W)),t.yb(33,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null)],(function(n,l){var e=l.component;n(l,9,0,"cancelled"===e.event.state||"busy"===e.event.state),n(l,11,0,"loading"===e.event.state),n(l,19,0,e.event.booked_by&&e.event.booked_by.email!==e.event.organiser.email),n(l,27,0,e.event.notify_users),n(l,29,0,e.has_catering),n(l,31,0,e.event.parking),n(l,33,0,e.has_catering)}),(function(n,l){var e=l.component;n(l,0,0,"event-"+e.event.local_id,e.fixed,!e.active,e.top+"%",e.left+"%",e.fixed?"15rem":e.width+"%",e.fixed?3*e.height+"rem":e.height+"%"),n(l,1,0,"overflow"+(e.type?" "+e.type:""),0-e.overflow_top+"%",0-e.overflow_bottom+"%"),n(l,2,0,"event"+(e.type?" "+e.type:"")+(e.top>50?" low":""),((null==e.overlap?null:e.overlap.index)||0)+2),n(l,6,0,e.event.all_day?"All Day":e.period),n(l,16,0,"Host: "+((null==e.event.organiser?null:e.event.organiser.name)||e.event.organiser)),n(l,17,0,(null==e.event.organiser?null:e.event.organiser.name)||e.event.organiser),n(l,21,0,"Title: "+e.event.title),n(l,22,0,e.event.title),n(l,25,0,e.event.attendees&&e.event.attendees.length||"No",1===(null==e.event.attendees?null:e.event.attendees.length)?"":"s",e.expected?"("+e.expected+" Expected)":"")}))}function Z(n){return t.Vb(0,[(n()(),t.ob(16777216,null,null,1,null,K)),t.yb(1,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,1,0,l.component.event)}),null)}var nn=e("qAlS"),ln=e("9Kh7"),en=function(n){function l(l){var e=n.call(this)||this;return e._service=l,e.inView=new t.n,e.dragging=new t.n,e.overlap_details={},e.legend={},e.position_list={},e.settings={},e}return Object(o.__extends)(l,n),Object.defineProperty(l.prototype,"events",{get:function(){var n=this,l=a(this.date).format("DD MMM YYYY");return this.space?(this.space.timeline[l]||[]).filter((function(l){return n.override_state&&n.override_state===l.icaluid&&(l.state="loading"),"cancelled"!==l.state?(!n.overflow_only||l.setup||l.breakdown)&&!1!==n.legend["internal"===l.booking_type&&l.visitors?"external":l.booking_type]:(!n.overflow_only||l.setup||l.breakdown)&&!1!==n.legend.declined})):[]},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){var n=this;if(!this._service.ready())return this.timeout("init",(function(){return n.ngOnInit()}));this.settings=this._service.Settings.get("app.day_view")||{},this.subscription("breakdown",this._service.listen("APP.breakdown",(function(l){n.overflow_only=l}))),this.subscription("legend",this._service.listen("CONCIERGE.legend",(function(l){n.legend=l||{}})))},l.prototype.ngOnChanges=function(n){var l=this;n.scroll&&this.checkInView(),n.last_update&&this.timeout("update_overlaps",(function(){return l.calculateOverlaps()}),1e3)},l.prototype.trackByFn=function(n,l){return l.id||n},l.prototype.calculateOverlaps=function(){var n,l,e=this,t=this.events.sort((function(n,l){return n.date-l.date||n.duration-l.duration||(n.title||"").localeCompare(l.title||"")}));t.forEach((function(n){return e.overlap_details[n.id]={index:0,total:1}}));var i=function(n){var l,e,i=a(n.date).startOf("m"),u=a(i).add(n.duration,"m").startOf("m"),s=1,c=0,d=[],b=function(l){if(n.id!==l.id){var e=a(l.date).startOf("m"),o=a(e).add(l.duration,"m").startOf("m");(i.isSame(e,"m")||i.isAfter(e,"m")&&i.isBefore(o,"m")||u.isSame(o,"m")||u.isAfter(e,"m")&&u.isBefore(o,"m"))&&(s++,d.push(n),t.findIndex((function(l){return l.id===n.id}))>t.findIndex((function(n){return n.id===l.id}))&&c++)}};try{for(var g=(l=void 0,Object(o.__values)(t)),p=g.next();!p.done;p=g.next())b(p.value)}catch(m){l={error:m}}finally{try{p&&!p.done&&(e=g.return)&&e.call(g)}finally{if(l)throw l.error}}r.overlap_details[n.id]={index:Math.max(0,c),total:s}},r=this;try{for(var u=Object(o.__values)(t),s=u.next();!s.done;s=u.next())i(s.value)}catch(c){n={error:c}}finally{try{s&&!s.done&&(l=u.return)&&l.call(u)}finally{if(n)throw n.error}}},l.prototype.checkInView=function(){if(this.view&&this.view.nativeElement){var n=this.view.nativeElement;this.in_view=n.offsetLeft+this.scroll>=-240&&n.offsetLeft+this.scroll<=window.innerWidth,this.inView.emit(this.in_view)}},l.prototype.initDrag=function(){this.box=this.view.nativeElement.getBoundingClientRect(),console.log("Drag Start"),this.dragging.emit(!0)},l.prototype.endDrag=function(){var n=this;this.timeout("end_drag",(function(){return n.top=0}),10),console.log("Drag End"),this.dragging.emit(!1)},l.prototype.updateDragTop=function(n){if(n.delta.y){var l=15*Math.round((n.pointerPosition.y-this.box.top-this.scroll_top)/this.box.height*24*60/15)/60;this.top=l/24*100}},l.prototype.drop=function(n){var l=this,e=n.item.element.nativeElement.id,t=n.previousContainer.data.list.find((function(n){return n.id===e}));if(t){var i=t.state,r=Math.round((n.previousContainer.data.top||0)/100*24*60),u=a(t.date),s=u.startOf("d").minute(r);if(a().startOf("m").isAfter(s,"m"))return this._service.notifyError("Meetings cannot be moved into the past");t.state="loading",this.override_state=t.icaluid;var c=t.room,d="Update "+t.organiser.name+"'s meeting in \""+(t.room||{}).name+'" from '+u.format("h:mm A")+" to "+s.format("h:mm A"),b="Successfully updated meeting time from "+u.format("h:mm A")+" to "+s.format("h:mm A"),g=Object(o.__assign)({},t,{old_date:t.date,date:s.valueOf()});if(n.container!==n.previousContainer&&(c=this._service.Rooms.item(n.container.id.replace("space-col-","")),g.from_room=t.room.email,d="Move "+t.organiser.name+"'s meeting in \""+(t.room||{}).name+'" to "'+c.name+'" at '+s.format("h:mm A"),b='Successfully moved booking to "'+c.name+'" at '+s.format("h:mm A")),c===t.room&&s.isSame(u,"m"))return t.state=i,void(this.override_state=null);var p=Object(o.__spread)([c],t.room_list.filter((function(n){return n.id!==t.room.id})));if(p.reduce((function(n,l){return n.add(l.id)}),new Set).size<p.length)return t.state=i,this.override_state=null,this._service.notifyError("The meeting is already in this room");g.room=p,this.checkCollisions(p,s.valueOf(),t.duration,t.icaluid).then((function(){l.moveBooking(d,g).then((function(n){l._service.Rooms.removeFromTimeline(t.room.id,t.id),l._service.Rooms.addToTimeline(n),l.override_state=null,l._service.notifySuccess(b)}),(function(n){t.state=i,l.override_state=null,"User cancelled"!==n&&l._service.notifyError("Error: "+n)}))}),(function(){t.state=i,l.override_state=null,l._service.notifyError("Updated meeting time clashes with another")}))}},l.prototype.checkCollisions=function(n,l,e,t){var o=this;return new Promise((function(i,r){o._service.Rooms.available({room_ids:n.map((function(n){return n.id})).join(","),date:l,duration:e,ignore:t,hide_bookings:!0}).then((function(l){l.length===n.length?i():r()}),(function(){return r()}))}))},l.prototype.moveBooking=function(n,l){var e=this;return new Promise((function(t,o){e._service.confirm({title:"Update meeting",message:n,icon:"event_available",accept:"Ok",cancel:!0},(function(n){"Accept"===n.type?e._service.Bookings.updateItem(l.id,l).then((function(n){return t(n)}),(function(n){return o(n)})):o("User cancelled"),n.close()}))}))},l}(i.a),tn=t.xb({encapsulation:0,styles:[[".space-display[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;overflow:hidden;pointer-events:auto}.event-preview[_ngcontent-%COMP%], .space-display[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:none}.event-placeholder[_ngcontent-%COMP%]{position:absolute;width:calc(100% - .5em);margin:0 .25em;border:3px dashed #969696;background-color:rgba(0,0,0,.2);border-radius:4px;transform:none!important;z-index:99999}.drop-zone[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;pointer-events:none;transform:none!important}.cdk-drag[_ngcontent-%COMP%]{transform:none!important;cursor:-webkit-grab;cursor:grab}.cdk-drag-disabled[_ngcontent-%COMP%]{cursor:initial}.moving[_ngcontent-%COMP%]{position:fixed;bottom:1.5em;left:50%;transform:translateX(-50%);padding:.5em 1em;border-radius:1.5em;display:flex;align-items:center;background-color:#fff;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 2px 1px -1px rgba(0,0,0,.12);z-index:999}.moving[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{margin-left:.5em}.moving[_ngcontent-%COMP%]   spinner[_ngcontent-%COMP%]{font-size:.25em}"]],data:{}});function on(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,3,"div",[["class","event-preview"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,2,"div",[["class","content"]],null,null,null,null,null)),(n()(),t.zb(2,0,null,null,1,"day-view-space-event",[],null,null,null,Z,q)),t.yb(3,704512,null,0,F,[r.a],{event:[0,"event"],space:[1,"space"],fixed:[2,"fixed"]},null)],(function(n,l){n(l,3,0,l.parent.context.$implicit,l.component.space,!0)}),null)}function rn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,0,"div",[["class","event-placeholder"]],[[4,"top",null],[4,"height",null]],null,null,null,null))],null,(function(n,l){var e=l.component;n(l,0,0,(e.top||(e.position_list[l.parent.context.$implicit.id]?e.position_list[l.parent.context.$implicit.id].top:0))+"%",(e.position_list[l.parent.context.$implicit.id]?e.position_list[l.parent.context.$implicit.id].height:100)+"%")}))}function an(n){return t.Vb(0,[(n()(),t.zb(0,16777216,null,null,11,"div",[["cdkDrag",""],["class","cdk-drag"]],[[4,"display",null],[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],[[null,"cdkDragStarted"],[null,"cdkDragMoved"],[null,"cdkDragReleased"]],(function(n,l,e){var t=!0,o=n.component;return"cdkDragStarted"===l&&(t=!1!==o.initDrag()&&t),"cdkDragMoved"===l&&(t=!1!==o.updateDragTop(e)&&t),"cdkDragReleased"===l&&(t=!1!==o.endDrag()&&t),t}),null,null)),t.Qb(6144,null,R.k,null,[R.c]),t.yb(2,4866048,[[2,4],[3,4]],3,R.c,[t.k,[3,R.b],z.e,t.B,t.T,nn.j,R.j,R.a,[2,T.b],R.h,t.h],{disabled:[0,"disabled"]},{started:"cdkDragStarted",released:"cdkDragReleased",moved:"cdkDragMoved"}),t.Rb(603979776,7,{_handles:1}),t.Rb(335544320,8,{_previewTemplate:0}),t.Rb(335544320,9,{_placeholderTemplate:0}),(n()(),t.zb(6,0,null,null,1,"day-view-space-event",[],null,[[null,"position"]],(function(n,l,e){var t=!0;return"position"===l&&(t=!1!==(n.component.position_list[n.context.$implicit.id]=e)&&t),t}),Z,q)),t.yb(7,704512,null,0,F,[r.a],{event:[0,"event"],date:[1,"date"],space:[2,"space"],overlap:[3,"overlap"]},{position:"position"}),(n()(),t.ob(0,null,null,1,null,on)),t.yb(9,16384,[[8,4]],0,R.e,[t.P],null,null),(n()(),t.ob(0,null,null,1,null,rn)),t.yb(11,16384,[[9,4]],0,R.d,[t.P],null,null),(n()(),t.ob(0,null,null,0))],(function(n,l){var e=l.component;n(l,2,0,"upcoming"!==l.context.$implicit.status||"cancelled"===l.context.$implicit.state||!e.settings.dragdrop),n(l,7,0,l.context.$implicit,e.date,e.space,e.overlap_details[l.context.$implicit.id])}),(function(n,l){n(l,0,0,!1!==l.component.inView?"":"none",t.Lb(l,2).disabled,t.Lb(l,2)._dragRef.isDragging())}))}function un(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,5,"div",[["class","moving"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Moving meeting"])),(n()(),t.zb(3,0,null,null,2,"div",[["class","spinner"]],null,null,null,null,null)),(n()(),t.zb(4,0,null,null,1,"spinner",[["type","circle-ring"]],null,null,null,d.A,d.o)),t.yb(5,770048,null,0,D.P,[t.h],{type:[0,"type"]},null)],(function(n,l){n(l,5,0,"circle-ring")}),null)}function sn(n){return t.Vb(0,[t.Rb(402653184,1,{view:0}),(n()(),t.zb(1,0,[[1,0],["view",1]],null,15,"div",[["cdkDropList",""],["cdkDropListSortingDisabled",""],["class","space-display cdk-drop-list"],["scrollContainer","#day-view-scroll"]],[[8,"id",0],[2,"cdk-drop-list-disabled",null],[2,"cdk-drop-list-dragging",null],[2,"cdk-drop-list-receiving",null]],[[null,"cdkDropListDropped"]],(function(n,l,e){var t=!0;return"cdkDropListDropped"===l&&(t=!1!==n.component.drop(e)&&t),t}),null,null)),t.yb(2,1196032,null,1,R.f,[t.k,R.j,t.h,[2,T.b],[3,R.g],[2,z.e],R.h],{connectedTo:[0,"connectedTo"],data:[1,"data"],id:[2,"id"]},{dropped:"cdkDropListDropped"}),t.Rb(603979776,3,{_draggables:1}),t.Ob(4,{top:0,list:1}),t.yb(5,1720320,null,1,ln.a,[R.f,t.H],{scrollContainer:[0,"scrollContainer"]},null),t.Rb(603979776,2,{items:1}),t.Qb(256,null,R.g,void 0,[]),t.Qb(2048,null,R.b,null,[R.f]),(n()(),t.zb(9,16777216,null,null,5,"div",[["cdkDrag",""],["class","drop-zone cdk-drag"]],[[2,"cdk-drag-disabled",null],[2,"cdk-drag-dragging",null]],null,null,null,null)),t.Qb(6144,null,R.k,null,[R.c]),t.yb(11,4866048,[[2,4],[3,4]],3,R.c,[t.k,[3,R.b],z.e,t.B,t.T,nn.j,R.j,R.a,[2,T.b],R.h,t.h],null,null),t.Rb(603979776,4,{_handles:1}),t.Rb(335544320,5,{_previewTemplate:0}),t.Rb(335544320,6,{_placeholderTemplate:0}),(n()(),t.ob(16777216,null,null,1,null,an)),t.yb(16,278528,null,0,z.m,[t.T,t.P,t.u],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null),(n()(),t.ob(16777216,null,null,1,null,un)),t.yb(18,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null)],(function(n,l){var e=l.component,o=e.space_list||t.ib,i=n(l,4,0,e.top,e.events);n(l,2,0,o,i,"space-col-"+(null==e.space?null:e.space.id)),n(l,5,0,"#day-view-scroll"),n(l,16,0,e.events,e.trackByFn),n(l,18,0,e.override_state)}),(function(n,l){n(l,1,0,t.Lb(l,2).id,t.Lb(l,2).disabled,t.Lb(l,2)._dropListRef.isDragging(),t.Lb(l,2)._dropListRef.isReceiving()),n(l,9,0,t.Lb(l,11).disabled,t.Lb(l,11)._dragRef.isDragging())}))}var cn=e("NhFT"),dn=e("PT0D"),bn={},gn=function(n){function l(l){var e=n.call(this)||this;return e._service=l,e.acting=new t.n,e}return Object(o.__extends)(l,n),Object.defineProperty(l.prototype,"was_edited",{get:function(){var n=this;return this.event&&Object.keys(this.event.edit_counts||{}).reduce((function(l,e){return l+(n.event.edit_counts[e]||0)}),0)>0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"type",{get:function(){if(this.event){var n="cancelled"===this.event.state?"cancelled":this.event.booking_type instanceof Object?this.event.booking_type.id:this.event.booking_type;return"internal"===n&&this.event.visitors?"external":n}return""},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"notifyee",{get:function(){return this.event&&this.event.notify_users&&this.event.notify_users.length?this.event.notify_users[0]:"Concierge"},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"description",{get:function(){return this.event&&this.event.notes?(this.event.notes.find((function(n){return"description"===n.type}))||{message:""}).message:""},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"has_catering",{get:function(){var n=this;return!!this.event&&!!(this.event.catering||[]).find((function(l){return n.event.room.id===l.location_id}))},enumerable:!0,configurable:!0}),l.prototype.view=function(){var n=this;this.timeout("view",(function(){n._service.Bookings.view(n.event,n.event.room).then((function(n){return null}),(function(n){return null})),n._service.set("CONCIERGE.day_view.viewing",n.event)}),50)},l.prototype.accept=function(){var n=this;this.event.organiser||(this.event.organiser={}),this.event.display||(this.event.display={}),this.acting.emit(!0),this._service.confirm({title:"Approve Meeting",message:"Approve "+(this.event.organiser.name||this.event.organiser)+"'s meeting in \""+(this.event.room||{}).name+'" at '+this.event.display.start+" for "+this.event.display.duration+" on "+this.event.display.date,icon:"event_available",accept:"Ok",cancel:!0},(function(l){"Accept"===l.type&&(n.loading=!0,n._service.Bookings.accept(n.event.id,{comment:"",room_id:n.event.room?n.event.room.id:n.event.room_id}).then((function(){n._service.notifySuccess("Meeting approved."),n.event.state="busy",n._service.Rooms.removeFromTimeline(n.event.room.id,n.event.id),n._service.Rooms.addToTimeline(n.event),bn[n.event.id]=n.event.state,n._service.set("BOOKING.states",bn),n.loading=!1,n.acting.emit(!1)}),(function(){n.acting.emit(!1),n._service.notifyError("Error approving meeting."),n.loading=!1}))),l.close()}))},l.prototype.decline=function(){var n=this;this.event.organiser||(this.event.organiser={}),this.event.display||(this.event.display={}),this.acting.emit(!0),this._service.confirm({title:"Decline Meeting",message:"Decline "+(this.event.organiser.name||this.event.organiser)+"'s meeting in \""+(this.event.room||{}).name+'" at '+this.event.display.start+" for "+this.event.display.duration+" on "+this.event.display.date,icon:"event_busy",accept:"Ok",cancel:!0},(function(l){if("Accept"===l.type){n.loading=!0;var e=n.event;e.state="loading",n._service.Bookings.decline(e.id,{booking_id:e.id,organiser:e.organiser.email,icaluid:e.icaluid,start:Math.floor(e.date/1e3),end:Math.floor(e.date/1e3)+60*e.duration,room_id:e.room?e.room.id:e.room_id}).then((function(){n._service.notifySuccess("Meeting declined."),n.event.state="cancelled",n._service.Rooms.removeFromTimeline(n.event.room.id,n.event.id),n._service.Rooms.addToTimeline(n.event),bn[n.event.id]=n.event.state,n._service.set("BOOKING.states",bn),n.loading=!1,n.acting.emit(!1)}),(function(){n.acting.emit(!1),n._service.notifyError("Error declining meeting."),n.loading=!1}))}l.close()}))},l}(i.a),pn=t.xb({encapsulation:0,styles:[[".approval-event[_ngcontent-%COMP%]{position:relative;width:100%;background-color:#fff;font-size:.8em;margin:.5em 1px;border:2px solid #1f40e6;border-right:4px solid #1f40e6}.approval-event.internal[_ngcontent-%COMP%]{border-color:#e69fc7}.approval-event.external[_ngcontent-%COMP%]{border-color:#8c5ac8}.approval-event.training[_ngcontent-%COMP%]{border-color:#f0e700}.approval-event.interview[_ngcontent-%COMP%]{border-color:#348d02}.approval-event.setup[_ngcontent-%COMP%]{border-color:#d32f2f}.approval-event.cancelled[_ngcontent-%COMP%]{border-color:#617288}.header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1em}.avatar[_ngcontent-%COMP%]{font-size:1.2em}.details[_ngcontent-%COMP%]{padding:.5em;max-width:calc(100% - 4em)}.footer[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:100%}.load-state[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;background-color:rgba(255,255,255,.85)}.control[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:0 1em;margin-bottom:.5em}.control[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{height:1px;min-width:1px;flex:1;background-color:#ccc}.control[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:1em;width:1em;font-size:1.5em;margin:0 .5em;cursor:pointer}.contents[_ngcontent-%COMP%]{padding:0 1em 1em;overflow:hidden}.text[_ngcontent-%COMP%]{display:flex;align-items:center}.text[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:6px;width:6px;border-radius:100%;background-color:#f4a500;margin:.25em}.field[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:.5em}.field[_ngcontent-%COMP%]:last-child{margin-bottom:0}.field[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 .5em;flex:1;min-width:50%}.field[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{flex:1;min-width:50%}.field.multiline[_ngcontent-%COMP%]{align-items:flex-start}.field.multiline[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.no-item[_ngcontent-%COMP%]{font-size:.6em;color:#000}.no-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin:0;font-size:.75em}button[mat-button][_ngcontent-%COMP%]{flex:1;min-width:30%;background-color:#f7f8ff;transition:color .2s,background-color .2s;border:1px solid #ccc;color:rgba(0,0,0,.85);cursor:pointer}button[mat-button].accepted[_ngcontent-%COMP%], button[mat-button].declined[_ngcontent-%COMP%]{pointer-events:none;color:#fff}button[mat-button].accepted[_ngcontent-%COMP%]{background-color:#309b40}button[mat-button].declined[_ngcontent-%COMP%]{background-color:#db291d}.bold[_ngcontent-%COMP%]{font-weight:500}.actions[_ngcontent-%COMP%]{display:flex;align-items:center}[mat-icon-button][_ngcontent-%COMP%]{background-color:#00adef;color:#fff;border:1px solid #00adef;margin:.3em}[mat-icon-button][disabled][_ngcontent-%COMP%]{background-color:#f0f0f0;color:rgba(0,0,0,.35);border-color:rgba(0,0,0,.35)}[mat-icon-button].search[_ngcontent-%COMP%]{position:absolute;top:.5em;right:.5em;font-size:.8em}"]],data:{animation:[{type:7,name:"show",definitions:[{type:1,expr:":enter",animation:[{type:6,styles:{opacity:0,height:0},offset:null},{type:4,styles:{type:6,styles:{opacity:1,height:"*"},offset:null},timings:200}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{opacity:1,height:"*"},offset:null},{type:4,styles:{type:6,styles:{opacity:0,height:0},offset:null},timings:200}],options:null}],options:{}}]}});function mn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,0,"div",[],null,null,null,null,null))],null,null)}function fn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,16,"div",[["class","field"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Booked by:"])),(n()(),t.zb(3,0,null,null,13,"div",[["class","value"]],null,null,null,null,null)),(n()(),t.zb(4,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(n()(),t.Tb(5,null,["",""])),(n()(),t.zb(6,0,null,null,10,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t.zb(7,0,null,null,4,"a",[["mat-icon-button",""]],[[8,"href",4],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,l,e){var o=!0;return"click"===l&&(o=!1!==t.Lb(n,8)._haltDisabledEvents(e)&&o),o}),A.c,A.a)),t.yb(8,180224,null,0,S.a,[N.a,Y.c,t.k,[2,J.a]],{disabled:[0,"disabled"]},null),(n()(),t.zb(9,0,null,0,2,"app-icon",[],null,null,null,j.b,j.a)),t.yb(10,180224,null,0,B.a,[],{icon:[0,"icon"]},null),t.Ob(11,{class:0,content:1}),(n()(),t.zb(12,0,null,null,4,"a",[["mat-icon-button",""]],[[8,"href",4],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,l,e){var o=!0;return"click"===l&&(o=!1!==t.Lb(n,13)._haltDisabledEvents(e)&&o),o}),A.c,A.a)),t.yb(13,180224,null,0,S.a,[N.a,Y.c,t.k,[2,J.a]],{disabled:[0,"disabled"]},null),(n()(),t.zb(14,0,null,0,2,"app-icon",[],null,null,null,j.b,j.a)),t.yb(15,180224,null,0,B.a,[],{icon:[0,"icon"]},null),t.Ob(16,{class:0,content:1})],(function(n,l){var e=l.component;n(l,8,0,!(null!=e.event.booked_by&&e.event.booked_by.email));var t=n(l,11,0,"material-icons","email");n(l,10,0,t),n(l,13,0,!(null!=e.event.booked_by&&e.event.booked_by.phone));var o=n(l,16,0,"material-icons","phone");n(l,15,0,o)}),(function(n,l){var e=l.component;n(l,5,0,null==e.event.booked_by?null:e.event.booked_by.name),n(l,7,0,"mailto:"+(null==e.event.booked_by?null:e.event.booked_by.email),t.Lb(l,8).disabled?-1:t.Lb(l,8).tabIndex||0,t.Lb(l,8).disabled||null,t.Lb(l,8).disabled.toString(),"NoopAnimations"===t.Lb(l,8)._animationMode),n(l,12,0,"tel:"+(null==e.event.booked_by?null:e.event.booked_by.phone),t.Lb(l,13).disabled?-1:t.Lb(l,13).tabIndex||0,t.Lb(l,13).disabled||null,t.Lb(l,13).disabled.toString(),"NoopAnimations"===t.Lb(l,13)._animationMode)}))}function vn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,1,"div",[["class","attendee"]],null,null,null,null,null)),(n()(),t.Tb(1,null,["",""]))],null,(function(n,l){n(l,1,0,l.context.$implicit.name)}))}function hn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,4,"div",[["class","field"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Notes:"])),(n()(),t.zb(3,0,null,null,1,"div",[["class","value"]],[[8,"innerHTML",1]],null,null,null,null)),t.Pb(4,1)],null,(function(n,l){var e=l.component,o=t.Ub(l,3,0,n(l,4,0,t.Lb(l.parent.parent.parent,0),e.description||""));n(l,3,0,o)}))}function _n(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,37,"div",[["class","contents"]],[[24,"@show",0]],null,null,null,null)),(n()(),t.zb(1,0,null,null,16,"div",[["class","field"]],null,null,null,null,null)),(n()(),t.zb(2,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Host:"])),(n()(),t.zb(4,0,null,null,13,"div",[["class","value"]],null,null,null,null,null)),(n()(),t.zb(5,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(n()(),t.Tb(6,null,["",""])),(n()(),t.zb(7,0,null,null,10,"div",[["class","actions"]],null,null,null,null,null)),(n()(),t.zb(8,0,null,null,4,"a",[["mat-icon-button",""]],[[8,"href",4],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,l,e){var o=!0;return"click"===l&&(o=!1!==t.Lb(n,9)._haltDisabledEvents(e)&&o),o}),A.c,A.a)),t.yb(9,180224,null,0,S.a,[N.a,Y.c,t.k,[2,J.a]],{disabled:[0,"disabled"]},null),(n()(),t.zb(10,0,null,0,2,"app-icon",[],null,null,null,j.b,j.a)),t.yb(11,180224,null,0,B.a,[],{icon:[0,"icon"]},null),t.Ob(12,{class:0,content:1}),(n()(),t.zb(13,0,null,null,4,"a",[["mat-icon-button",""]],[[8,"href",4],[1,"tabindex",0],[1,"disabled",0],[1,"aria-disabled",0],[2,"_mat-animation-noopable",null]],[[null,"click"]],(function(n,l,e){var o=!0;return"click"===l&&(o=!1!==t.Lb(n,14)._haltDisabledEvents(e)&&o),o}),A.c,A.a)),t.yb(14,180224,null,0,S.a,[N.a,Y.c,t.k,[2,J.a]],{disabled:[0,"disabled"]},null),(n()(),t.zb(15,0,null,0,2,"app-icon",[],null,null,null,j.b,j.a)),t.yb(16,180224,null,0,B.a,[],{icon:[0,"icon"]},null),t.Ob(17,{class:0,content:1}),(n()(),t.ob(16777216,null,null,1,null,fn)),t.yb(19,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.zb(20,0,null,null,5,"div",[["class","field multiline"]],null,null,null,null,null)),(n()(),t.zb(21,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Attendees:"])),(n()(),t.zb(23,0,null,null,2,"div",[["class","value"]],null,null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,vn)),t.yb(25,278528,null,0,z.m,[t.T,t.P,t.u],{ngForOf:[0,"ngForOf"]},null),(n()(),t.zb(26,0,null,null,4,"div",[["class","field"]],null,null,null,null,null)),(n()(),t.zb(27,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Welcomed by:"])),(n()(),t.zb(29,0,null,null,1,"div",[["class","value"]],null,null,null,null,null)),(n()(),t.Tb(30,null,["",""])),(n()(),t.zb(31,0,null,null,4,"div",[["class","field"]],null,null,null,null,null)),(n()(),t.zb(32,0,null,null,1,"label",[],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Catering:"])),(n()(),t.zb(34,0,null,null,1,"div",[["class","value"]],null,null,null,null,null)),(n()(),t.Tb(35,null,["",""])),(n()(),t.ob(16777216,null,null,1,null,hn)),t.yb(37,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null)],(function(n,l){var e=l.component;n(l,9,0,!(null!=e.event.organiser&&e.event.organiser.email));var t=n(l,12,0,"material-icons","email");n(l,11,0,t),n(l,14,0,!(null!=e.event.organiser&&e.event.organiser.phone));var o=n(l,17,0,"material-icons","phone");n(l,16,0,o),n(l,19,0,e.event.booked_by&&e.event.organiser&&e.event.organiser.email!==e.event.booked_by.email),n(l,25,0,e.event.attendees),n(l,37,0,e.description)}),(function(n,l){var e=l.component;n(l,0,0,void 0),n(l,6,0,null==e.event.organiser?null:e.event.organiser.name),n(l,8,0,"mailto:"+(null==e.event.organiser?null:e.event.organiser.email),t.Lb(l,9).disabled?-1:t.Lb(l,9).tabIndex||0,t.Lb(l,9).disabled||null,t.Lb(l,9).disabled.toString(),"NoopAnimations"===t.Lb(l,9)._animationMode),n(l,13,0,"tel:"+(null==e.event.organiser?null:e.event.organiser.phone),t.Lb(l,14).disabled?-1:t.Lb(l,14).tabIndex||0,t.Lb(l,14).disabled||null,t.Lb(l,14).disabled.toString(),"NoopAnimations"===t.Lb(l,14)._animationMode),n(l,30,0,e.notifyee),n(l,35,0,e.has_catering?"Catered":"No Catering")}))}function yn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,6,"div",[["class","load-state"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,5,"div",[["class","no-item center"]],null,null,null,null,null)),(n()(),t.zb(2,0,null,null,2,"div",[["class","icon"]],null,null,null,null,null)),(n()(),t.zb(3,0,null,null,1,"spinner",[["type","circle-ring"]],null,null,null,d.A,d.o)),t.yb(4,770048,null,0,D.P,[t.h],{type:[0,"type"]},null),(n()(),t.zb(5,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Processing request..."]))],(function(n,l){n(l,4,0,"circle-ring")}),null)}function On(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,38,"div",[],[[8,"className",0],[1,"event-id",0]],null,null,null,null)),(n()(),t.zb(1,0,null,null,16,"div",[["class","header"]],null,null,null,null,null)),(n()(),t.zb(2,0,null,null,2,"div",[["class","avatar"]],null,null,null,null,null)),(n()(),t.zb(3,0,null,null,1,"avatar",[],null,null,null,cn.b,cn.a)),t.yb(4,573440,null,0,dn.a,[],{user:[0,"user"],klass:[1,"klass"]},null),(n()(),t.zb(5,0,null,null,6,"div",[["class","details"]],null,null,null,null,null)),(n()(),t.zb(6,0,null,null,3,"div",[["class","text bold"]],null,null,null,null,null)),(n()(),t.Tb(7,null,[" "," "," "])),(n()(),t.ob(16777216,null,null,1,null,mn)),t.yb(9,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.zb(10,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(n()(),t.Tb(11,null,[""," "])),(n()(),t.zb(12,0,null,null,5,"button",[["class","search"],["mat-icon-button",""]],[[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"touchrelease"],[null,"mousedown"],[null,"touchstart"],[null,"mouseup"],[null,"touchend"]],(function(n,l,e){var o=!0,i=n.component;return"mousedown"===l&&(o=!1!==t.Lb(n,13).mousestart(e)&&o),"touchstart"===l&&(o=!1!==t.Lb(n,13).touchstart(e)&&o),"mouseup"===l&&(o=!1!==t.Lb(n,13).mouse(e)&&o),"touchend"===l&&(o=!1!==t.Lb(n,13).touch(e)&&o),"touchrelease"===l&&(o=!1!==i.view()&&o),o}),A.d,A.b)),t.yb(13,16384,null,0,D.vb,[],null,{event:"touchrelease"}),t.yb(14,180224,null,0,S.b,[t.k,N.a,Y.c,[2,J.a]],null,null),(n()(),t.zb(15,0,null,0,2,"app-icon",[],null,null,null,j.b,j.a)),t.yb(16,180224,null,0,B.a,[],{icon:[0,"icon"]},null),t.Ob(17,{class:0,content:1}),(n()(),t.zb(18,0,null,null,9,"div",[["class","body"]],null,null,null,null,null)),(n()(),t.zb(19,0,null,null,6,"div",[["class","control"]],null,null,null,null,null)),(n()(),t.zb(20,0,null,null,0,"div",[["class","bar"]],null,null,null,null,null)),(n()(),t.zb(21,0,null,null,3,"app-icon",[],null,[[null,"touchrelease"],[null,"mousedown"],[null,"touchstart"],[null,"mouseup"],[null,"touchend"]],(function(n,l,e){var o=!0,i=n.component;return"mousedown"===l&&(o=!1!==t.Lb(n,22).mousestart(e)&&o),"touchstart"===l&&(o=!1!==t.Lb(n,22).touchstart(e)&&o),"mouseup"===l&&(o=!1!==t.Lb(n,22).mouse(e)&&o),"touchend"===l&&(o=!1!==t.Lb(n,22).touch(e)&&o),"touchrelease"===l&&(o=0!=(i.shown=!i.shown)&&o),o}),j.b,j.a)),t.yb(22,16384,null,0,D.vb,[],null,{event:"touchrelease"}),t.yb(23,180224,null,0,B.a,[],{icon:[0,"icon"]},null),t.Ob(24,{class:0,content:1}),(n()(),t.zb(25,0,null,null,0,"div",[["class","bar"]],null,null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,_n)),t.yb(27,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.zb(28,0,null,null,8,"div",[["class","footer"]],null,null,null,null,null)),(n()(),t.zb(29,0,null,null,3,"button",[["class","inverse"],["mat-button",""]],[[2,"accepted",null],[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"touchrelease"],[null,"mousedown"],[null,"touchstart"],[null,"mouseup"],[null,"touchend"]],(function(n,l,e){var o=!0,i=n.component;return"mousedown"===l&&(o=!1!==t.Lb(n,30).mousestart(e)&&o),"touchstart"===l&&(o=!1!==t.Lb(n,30).touchstart(e)&&o),"mouseup"===l&&(o=!1!==t.Lb(n,30).mouse(e)&&o),"touchend"===l&&(o=!1!==t.Lb(n,30).touch(e)&&o),"touchrelease"===l&&(o=!1!==i.accept()&&o),o}),A.d,A.b)),t.yb(30,16384,null,0,D.vb,[],null,{event:"touchrelease"}),t.yb(31,180224,null,0,S.b,[t.k,N.a,Y.c,[2,J.a]],null,null),(n()(),t.Tb(32,0,[" Accept"," "])),(n()(),t.zb(33,0,null,null,3,"button",[["class","inverse"],["mat-button",""]],[[2,"declined",null],[8,"disabled",0],[2,"_mat-animation-noopable",null]],[[null,"touchrelease"],[null,"mousedown"],[null,"touchstart"],[null,"mouseup"],[null,"touchend"]],(function(n,l,e){var o=!0,i=n.component;return"mousedown"===l&&(o=!1!==t.Lb(n,34).mousestart(e)&&o),"touchstart"===l&&(o=!1!==t.Lb(n,34).touchstart(e)&&o),"mouseup"===l&&(o=!1!==t.Lb(n,34).mouse(e)&&o),"touchend"===l&&(o=!1!==t.Lb(n,34).touch(e)&&o),"touchrelease"===l&&(o=!1!==i.decline()&&o),o}),A.d,A.b)),t.yb(34,16384,null,0,D.vb,[],null,{event:"touchrelease"}),t.yb(35,180224,null,0,S.b,[t.k,N.a,Y.c,[2,J.a]],null,null),(n()(),t.Tb(36,0,[" Decline"," "])),(n()(),t.ob(16777216,null,null,1,null,yn)),t.yb(38,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null)],(function(n,l){var e=l.component;n(l,4,0,e.event.organiser,e.type),n(l,9,0,e.was_edited);var t=n(l,17,0,"material-icons","search");n(l,16,0,t);var o=n(l,24,0,"material-icons","keyboard_arrow_"+(e.shown?"up":"down"));n(l,23,0,o),n(l,27,0,e.shown),n(l,38,0,e.loading)}),(function(n,l){var e=l.component;n(l,0,0,"approval-event"+(e.type?" "+e.type:""),e.event.id),n(l,7,0,e.event.all_day?"All Day":(null==e.event.display?null:e.event.display.start)+" - "+(null==e.event.display?null:e.event.display.end),e.event.room?"in "+e.event.room.name:""),n(l,11,0,e.event.title),n(l,12,0,t.Lb(l,14).disabled||null,"NoopAnimations"===t.Lb(l,14)._animationMode),n(l,29,0,"busy"===e.event.state,t.Lb(l,31).disabled||null,"NoopAnimations"===t.Lb(l,31)._animationMode),n(l,32,0,"busy"===e.event.state?"ed":""),n(l,33,0,"cancelled"===e.event.state,t.Lb(l,35).disabled||null,"NoopAnimations"===t.Lb(l,35)._animationMode),n(l,36,0,"cancelled"===e.event.state?"d":"")}))}function Pn(n){return t.Vb(0,[t.Nb(0,D.L,[I.b]),(n()(),t.ob(16777216,null,null,1,null,On)),t.yb(2,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,2,0,l.component.event)}),null)}var Mn=function(n){function l(l){var e=n.call(this)||this;return e._service=l,e.events=[],e.space_list=[],e}return Object(o.__extends)(l,n),Object.defineProperty(l.prototype,"date_display",{get:function(){var n=a().startOf("d"),l=a(this.date).startOf("d");return n.isSame(l,"d")?"Today":1===l.diff(n,"d")?"Tomorrow":1===n.diff(l,"d")?"Yesterday":l.format("DD MMM YYYY")},enumerable:!0,configurable:!0}),l.prototype.ngOnInit=function(){var n=this;this.subscription("building",this._service.listen("APP.level",(function(l){n.space_list=n._service.Rooms.list(!0,[-1===l?n._service.Buildings.current().id:l]).map((function(n){return n.name})),n.processMeetings(),n.getMonthlyPending()}))),this.getMonthlyPending(),this.interval("monthly_pending",(function(){return n.getMonthlyPending()}),6e5)},l.prototype.ngOnChanges=function(n){var l=this;n.date&&(this.events=[],this.processMeetings(),this.interval("process_meetings",(function(){return l.processMeetings()}),1e3),a(n.date.previousValue).isSame(a(n.date.currentValue),"M")||(this.getMonthlyPending(),this.interval("monthly_pending",(function(){return l.getMonthlyPending()}),6e5)))},l.prototype.trackByFn=function(n,l){return l.id||n},l.prototype.updateMeetings=function(){var n=this,l=this._service.get("APP.level"),e=-1===l?this._service.Buildings.current().id:l,t=a(this.date).startOf("d"),o=t.endOf("d");this.loading=!0,this._service.Rooms.query({zone_ids:e,available_from:t.unix(),available_to:o.unix()}).then((function(l){n.space_list=l.map((function(n){return n.id})),n._service.Rooms.clearTimeline(t.valueOf(),o.valueOf(),n.space_list),l.forEach((function(l){return n._service.Rooms.updateTimeline(l.id,l.bookings)})),n.processMeetings(),n.loading=!1}))},l.prototype.processMeetings=function(){if(!this.waiting_on_event){var n=a(this.date).format("DD MMM YYYY");this.events=this.process(n);var l=this._service.get("CONCIERGE.pending_bookings")||{};l[a(this.date).format("YYYY-MM-DD")]=this.events.length,this._service.set("CONCIERGE.pending_bookings",l)}},l.prototype.process=function(n){var l,e,t,i,r=[];try{for(var a=Object(o.__values)(this.space_list),u=a.next();!u.done;u=a.next()){var s=this._service.Rooms.item(u.value);if(s){var c=s.timeline[n]||[];try{for(var d=(t=void 0,Object(o.__values)(c)),b=d.next();!b.done;b=d.next()){var g=b.value;"tentative"!==g.type&&"tentative"!==g.state||r.push(g)}}catch(p){t={error:p}}finally{try{b&&!b.done&&(i=d.return)&&i.call(d)}finally{if(t)throw t.error}}}}}catch(m){l={error:m}}finally{try{u&&!u.done&&(e=a.return)&&e.call(a)}finally{if(l)throw l.error}}return r.sort((function(n,l){return n.date-l.date}))},l.prototype.getMonthlyPending=function(){var n=this,l=a().startOf("d"),e=a(this.date).startOf("M"),t=e.endOf("M");if(!l.isAfter(t,"m")){l.isAfter(e,"m")&&(e=l);var o=this._service.get("APP.level"),i=(-1===o?null:o)||this._service.Buildings.current();console.log("Get Monthly:",e.format("MMMM YYYY")),this._service.Rooms.query({zone_ids:i,available_from:e.unix(),available_to:t.unix()}).then((function(l){n._service.Rooms.clearTimeline(e.valueOf(),t.valueOf(),l.map((function(n){return n.id}))),l.forEach((function(l){return n._service.Rooms.updateTimeline(l.id,l.bookings)}));for(var o=n._service.get("CONCIERGE.pending_bookings")||{},i=e;i.isBefore(t,"m");i=i.add(1,"d")){var r=n.process(i.format("DD MMM YYYY"));o[i.format("YYYY-MM-DD")]=r.length}n._service.set("CONCIERGE.pending_bookings",o)}))}},l}(i.a),xn=t.xb({encapsulation:0,styles:[[".approvals-view[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden auto;background-color:#eee}.no-item[_ngcontent-%COMP%]{font-size:.7em}.date[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;margin:.5em 0}.bar[_ngcontent-%COMP%]{height:1px;min-width:1px;flex:1;background-color:#707070}.display[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;padding:.5em 1.5em;height:1.5em;border-radius:.8em;background-color:#707070;color:#fff;font-size:.8em}.load-state[_ngcontent-%COMP%]{position:absolute;left:50%;bottom:4px;transform:translateX(-50%);background-color:#fff;z-index:999;border-radius:4px;height:3em;width:3em;box-shadow:0 1px 3px 0 rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 2px 1px -1px rgba(0,0,0,.12)}.load-state[_ngcontent-%COMP%]   spinner[_ngcontent-%COMP%]{font-size:.4em}"]],data:{}});function wn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,1,"approvals-event",[],null,[[null,"acting"]],(function(n,l,e){var t=!0;return"acting"===l&&(t=!1!==(n.component.waiting_on_event=e)&&t),t}),Pn,pn)),t.yb(1,180224,null,0,gn,[r.a],{event:[0,"event"]},{acting:"acting"})],(function(n,l){n(l,1,0,l.context.$implicit)}),null)}function Cn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,7,"div",[["class","content"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,4,"div",[["class","date"]],null,null,null,null,null)),(n()(),t.zb(2,0,null,null,0,"div",[["class","bar"]],null,null,null,null,null)),(n()(),t.zb(3,0,null,null,1,"div",[["class","display"]],null,null,null,null,null)),(n()(),t.Tb(4,null,["",""])),(n()(),t.zb(5,0,null,null,0,"div",[["class","bar"]],null,null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,wn)),t.yb(7,278528,null,0,z.m,[t.T,t.P,t.u],{ngForOf:[0,"ngForOf"],ngForTrackBy:[1,"ngForTrackBy"]},null)],(function(n,l){var e=l.component;n(l,7,0,e.events,e.trackByFn)}),(function(n,l){n(l,4,0,l.component.date_display)}))}function kn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,4,"div",[["class","load-state"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,3,"div",[["class","no-item center"]],null,null,null,null,null)),(n()(),t.zb(2,0,null,null,2,"div",[["class","icon"]],null,null,null,null,null)),(n()(),t.zb(3,0,null,null,1,"spinner",[["type","circle-ring"]],null,null,null,d.A,d.o)),t.yb(4,770048,null,0,D.P,[t.h],{type:[0,"type"]},null)],(function(n,l){n(l,4,0,"circle-ring")}),null)}function zn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,5,"div",[["class","no-item center"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,2,"div",[["class","icon"]],null,null,null,null,null)),(n()(),t.zb(2,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["close"])),(n()(),t.zb(4,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["No meetings pending approval"]))],null,null)}function Tn(n){return t.Vb(0,[(n()(),t.ob(16777216,null,null,1,null,zn)),t.yb(1,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.ob(0,null,null,0))],(function(n,l){n(l,1,0,!l.component.loading)}),null)}function Ln(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,4,"div",[["class","approvals-view"]],null,null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,Cn)),t.yb(2,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(n()(),t.ob(16777216,null,null,1,null,kn)),t.yb(4,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.ob(0,[["empty_state",2]],null,0,null,Tn))],(function(n,l){var e=l.component;n(l,2,0,e.events&&e.events.length,t.Lb(l,5)),n(l,4,0,e.loading)}),null)}var In=e("ZYCi"),Jn=t.xb({encapsulation:0,styles:[[".day-view[_ngcontent-%COMP%]{position:relative;height:100%;width:100%;display:flex;align-items:center;flex-direction:column;background-color:#ecf1f5}.header[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid #ccc;width:100%;height:3em}.header[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{overflow:hidden;height:100%}.header[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;top:0;left:0;bottom:0}.header[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:.5em}.header[_ngcontent-%COMP%]   spinner[_ngcontent-%COMP%]{font-size:.25em}.body[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:100%;flex:1;min-height:50%;overflow:hidden}.body[_ngcontent-%COMP%]   .group[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center;flex-direction:column;top:0;left:0;right:0}.time-blocks[_ngcontent-%COMP%]{position:relative;width:6em;border-right:1px solid #ccc;height:100%;overflow:hidden}.time-blocks[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]:first-child{opacity:0}.time-blocks[_ngcontent-%COMP%] > .text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;width:100%}.flex[_ngcontent-%COMP%]{position:relative;flex:1;min-width:5em}.content[_ngcontent-%COMP%]{overflow:auto;background-color:#fff;height:100%}.time-lines[_ngcontent-%COMP%]{position:absolute;width:100%;pointer-events:none}.time-lines[_ngcontent-%COMP%]   .block[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1)}.time-lines[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{position:absolute;top:50%;border-bottom:1px dashed rgba(0,0,0,.1);width:100%}.block[_ngcontent-%COMP%]{position:relative;width:100%;height:3rem;box-sizing:border-box;font-size:.8em}.hour[_ngcontent-%COMP%]{position:absolute;top:0;transform:translateY(-50%);text-align:center;width:100%;transition:color .2s}.hour.active[_ngcontent-%COMP%]{color:#00adef}.space-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;border-right:1px solid rgba(0,0,0,.1);height:100%;width:15rem;padding:.25em 1em}.space-header[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.space-header[_ngcontent-%COMP%]   .capacity[_ngcontent-%COMP%]{font-size:.7em;text-align:center}.space-header[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:.9em}.space-day[_ngcontent-%COMP%]{display:flex}.space[_ngcontent-%COMP%]{border-right:1px solid rgba(0,0,0,.1);min-height:50vh;min-width:15rem;max-width:15rem;pointer-events:none}.now-line[_ngcontent-%COMP%]{position:absolute;left:6em;right:0;top:0;border:1px solid #00adef;pointer-events:none;z-index:101}.now-line[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]{position:absolute;top:0;left:-1px;transform:translate(-50%,-50%);height:12px;width:12px;border-radius:100%;background-color:#00adef}.sidebar[_ngcontent-%COMP%]{position:relative;border-left:1px solid #ccc;height:100%;background-color:rgba(0,0,0,.05);z-index:102;width:0;transition:width .2s}.sidebar.show[_ngcontent-%COMP%]{width:24em}.sidebar[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{border:none}.sidebar[_ngcontent-%COMP%]   .space-header[_ngcontent-%COMP%]{width:100%}.auto-scroll[_ngcontent-%COMP%]{position:absolute;top:3em;left:6em;right:0;bottom:0;pointer-events:none}@media only screen and (orientation:portrait) and (max-width:450px){.auto-scroll[_ngcontent-%COMP%]{display:none}}@media only screen and (orientation:landscape) and (max-width:800px){.auto-scroll[_ngcontent-%COMP%]{display:none}}.auto-scroll[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{pointer-events:auto}.auto-scroll[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%], .auto-scroll[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{position:absolute;left:0;right:0;height:32px}.auto-scroll[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{top:0}.auto-scroll[_ngcontent-%COMP%]   .bottom[_ngcontent-%COMP%]{bottom:0}.auto-scroll[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .auto-scroll[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;width:32px}.auto-scroll[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{top:0}.auto-scroll[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{bottom:0}.tag[_ngcontent-%COMP%]{position:absolute;left:1px;top:50%;display:flex;align-items:center;height:2.5em;transform:translate(-100%,-50%);border-radius:1.3em 0 0 1.3em;background-color:#fff;border:1px solid #ccc!important;border-right:none!important}.tag[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:1.25em;width:1.25em;font-size:2em;margin:0 .1em}.loader[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;height:4px;z-index:999}"]],data:{}});function En(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,2,"div",[["class","loader"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,1,"mat-progress-bar",[["aria-valuemax","100"],["aria-valuemin","0"],["class","mat-progress-bar"],["mode","indeterminate"],["role","progressbar"]],[[1,"aria-valuenow",0],[1,"mode",0],[2,"_mat-animation-noopable",null]],null,null,V,E)),t.yb(2,4374528,null,0,k.b,[t.k,t.B,[2,J.a],[2,k.a]],{mode:[0,"mode"]},null)],(function(n,l){n(l,2,0,"indeterminate")}),(function(n,l){n(l,1,0,t.Lb(l,2).value,t.Lb(l,2).mode,t.Lb(l,2)._isNoopAnimation)}))}function Vn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,6,"div",[["class","space-header"]],[[8,"title",0]],null,null,null,null)),(n()(),t.zb(1,0,null,null,3,"div",[["class","details"]],null,null,null,null,null)),(n()(),t.zb(2,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(n()(),t.Tb(3,null,["",""])),(n()(),t.zb(4,0,null,null,0,"div",[["class","icon"]],null,null,null,null,null)),(n()(),t.zb(5,0,null,null,1,"div",[["class","capacity"]],null,null,null,null,null)),(n()(),t.Tb(6,null,["Capacity - "," ",""]))],null,(function(n,l){n(l,0,0,l.context.$implicit.long_name),n(l,3,0,l.context.$implicit.name),n(l,6,0,l.context.$implicit.capacity||"0",1===l.context.$implicit.capacity?"person":"people")}))}function Dn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,9,"div",[["class","sidebar"]],[[2,"show",null]],null,null,null,null)),(n()(),t.zb(1,0,null,null,3,"div",[["class","space-header"]],[[8,"title",0]],null,null,null,null)),(n()(),t.zb(2,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Holding Bay"])),(n()(),t.zb(4,0,null,null,0,"div",[["class","icon"]],null,null,null,null,null)),(n()(),t.zb(5,0,null,null,4,"div",[["class","tag"]],null,[[null,"touchrelease"],[null,"mousedown"],[null,"touchstart"],[null,"mouseup"],[null,"touchend"]],(function(n,l,e){var o=!0,i=n.component;return"mousedown"===l&&(o=!1!==t.Lb(n,6).mousestart(e)&&o),"touchstart"===l&&(o=!1!==t.Lb(n,6).touchstart(e)&&o),"mouseup"===l&&(o=!1!==t.Lb(n,6).mouse(e)&&o),"touchend"===l&&(o=!1!==t.Lb(n,6).touch(e)&&o),"touchrelease"===l&&(o=0!=(i.show_holding_bay=!i.show_holding_bay)&&o),o}),null,null)),t.yb(6,16384,null,0,D.vb,[],null,{event:"touchrelease"}),(n()(),t.zb(7,0,null,null,2,"div",[["class","icon"]],null,null,null,null,null)),(n()(),t.zb(8,0,null,null,1,"i",[["class","material-icons"]],null,null,null,null,null)),(n()(),t.Tb(9,null,["",""]))],null,(function(n,l){var e=l.component;n(l,0,0,e.show_holding_bay),n(l,1,0,e.holding_bay.name),n(l,9,0,e.show_holding_bay?"keyboard_arrow_right":"event_available")}))}function Rn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,2,"div",[["class","block"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,1,"div",[["class","hour"],["div",""]],[[2,"active",null]],null,null,null,null)),(n()(),t.Tb(2,null,["",""]))],null,(function(n,l){var e=l.component;n(l,1,0,e.is_today&&l.context.$implicit.id===e.active_hour),n(l,2,0,l.context.$implicit.display)}))}function jn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,1,"div",[["class","block"]],null,null,null,null,null)),(n()(),t.zb(1,0,null,null,0,"div",[["class","line"]],null,null,null,null,null))],null,null)}function Bn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,3,"div",[["cdkDropListGroup",""],["class","space"]],[[4,"min-height",null]],null,null,null,null)),t.yb(1,147456,null,0,R.g,[],null,null),(n()(),t.zb(2,0,null,null,1,"day-view-space",[],null,[[null,"dragging"],[null,"inView"]],(function(n,l,e){var t=!0,o=n.component;return"dragging"===l&&(t=!1!==o.dragChange(e)&&t),"inView"===l&&(t=!1!==(o.in_view[n.context.$implicit.id]=e)&&t),t}),sn,tn)),t.yb(3,770048,null,0,en,[r.a],{space_list:[0,"space_list"],date:[1,"date"],space:[2,"space"],scroll:[3,"scroll"],scroll_top:[4,"scroll_top"],last_update:[5,"last_update"]},{inView:"inView",dragging:"dragging"})],(function(n,l){var e=l.component;n(l,3,0,e.space_zones,e.date,l.context.$implicit,0-e.scroll_left,e.scroll_offset-e.scroll_top,e.last_update)}),(function(n,l){n(l,0,0,3*l.component.time_blocks.length+"rem")}))}function An(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,2,"div",[["class","now-line"]],[[4,"top",null]],null,null,null,null)),t.Pb(1,1),(n()(),t.zb(2,0,null,null,0,"div",[["class","knob"]],null,null,null,null,null))],null,(function(n,l){var e=l.component,o=t.Ub(l,0,0,n(l,1,0,t.Lb(l.parent,0),"calc("+e.now*e.time_blocks.length*3+"rem - "+e.scroll_top+"px)"));n(l,0,0,o)}))}function Sn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,1,"day-view-space",[],null,[[null,"dragging"],[null,"inView"]],(function(n,l,e){var t=!0,o=n.component;return"dragging"===l&&(t=!1!==o.dragChange(e)&&t),"inView"===l&&(t=!1!==(o.in_view[o.holding_bay.id]=e)&&t),t}),sn,tn)),t.yb(1,770048,null,0,en,[r.a],{date:[0,"date"],space:[1,"space"],last_update:[2,"last_update"]},{inView:"inView",dragging:"dragging"})],(function(n,l){var e=l.component;n(l,1,0,e.date,e.holding_bay,e.last_update)}),null)}function Nn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,4,"div",[["class","sidebar"]],[[2,"show",null]],null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,Sn)),t.yb(2,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.zb(3,0,null,null,1,"day-view-approvals-view",[],null,null,null,Ln,xn)),t.yb(4,770048,null,0,Mn,[r.a],{date:[0,"date"]},null)],(function(n,l){var e=l.component;n(l,2,0,e.holding_bay),n(l,4,0,e.date)}),(function(n,l){n(l,0,0,l.component.show_holding_bay)}))}function Yn(n){return t.Vb(0,[t.Nb(0,D.M,[I.b]),t.Rb(402653184,1,{scroll_area:0}),(n()(),t.zb(2,0,null,null,29,"div",[["class","day-view"]],null,null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,En)),t.yb(4,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.zb(5,0,null,null,9,"div",[["class","header"]],null,null,null,null,null)),(n()(),t.zb(6,0,null,null,2,"div",[["class","time-blocks"]],null,null,null,null,null)),(n()(),t.zb(7,0,null,null,1,"div",[["class","text"]],null,null,null,null,null)),(n()(),t.Tb(-1,null,["Time"])),(n()(),t.zb(9,0,null,null,3,"div",[["class","flex"]],null,null,null,null,null)),(n()(),t.zb(10,0,null,null,2,"div",[["class","group"]],[[4,"left",null]],null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,Vn)),t.yb(12,278528,null,0,z.m,[t.T,t.P,t.u],{ngForOf:[0,"ngForOf"]},null),(n()(),t.ob(16777216,null,null,1,null,Dn)),t.yb(14,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.zb(15,0,null,null,16,"div",[["class","body"]],null,[[null,"touchrelease"],[null,"mousedown"],[null,"touchstart"],[null,"mouseup"],[null,"touchend"]],(function(n,l,e){var o=!0,i=n.component;return"mousedown"===l&&(o=!1!==t.Lb(n,16).mousestart(e)&&o),"touchstart"===l&&(o=!1!==t.Lb(n,16).touchstart(e)&&o),"mouseup"===l&&(o=!1!==t.Lb(n,16).mouse(e)&&o),"touchend"===l&&(o=!1!==t.Lb(n,16).touch(e)&&o),"touchrelease"===l&&(o=!1!==i.clearSelected()&&o),o}),null,null)),t.yb(16,16384,null,0,D.vb,[],null,{event:"touchrelease"}),(n()(),t.zb(17,0,null,null,3,"div",[["class","time-blocks"]],null,null,null,null,null)),(n()(),t.zb(18,0,null,null,2,"div",[["class","group"]],[[4,"top",null]],null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,Rn)),t.yb(20,278528,null,0,z.m,[t.T,t.P,t.u],{ngForOf:[0,"ngForOf"]},null),(n()(),t.zb(21,0,[[1,0],["scroll_area",1]],null,6,"div",[["class","flex content"],["id","day-view-scroll"]],null,[[null,"scroll"]],(function(n,l,e){var t=!0;return"scroll"===l&&(t=!1!==n.component.updateScroll(e)&&t),t}),null,null)),(n()(),t.zb(22,0,null,null,2,"div",[["class","time-lines"]],[[4,"min-width",null]],null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,jn)),t.yb(24,278528,null,0,z.m,[t.T,t.P,t.u],{ngForOf:[0,"ngForOf"]},null),(n()(),t.zb(25,0,null,null,2,"div",[["class","space-day"]],null,null,null,null,null)),(n()(),t.ob(16777216,null,null,1,null,Bn)),t.yb(27,278528,null,0,z.m,[t.T,t.P,t.u],{ngForOf:[0,"ngForOf"]},null),(n()(),t.ob(16777216,null,null,1,null,An)),t.yb(29,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null),(n()(),t.ob(16777216,null,null,1,null,Nn)),t.yb(31,16384,null,0,z.n,[t.T,t.P],{ngIf:[0,"ngIf"]},null)],(function(n,l){var e=l.component;n(l,4,0,e.is_loading),n(l,12,0,e.filtered_spaces),n(l,14,0,e.holding_bay),n(l,20,0,e.time_blocks),n(l,24,0,e.time_blocks),n(l,27,0,e.filtered_spaces),n(l,29,0,e.is_today),n(l,31,0,e.holding_bay)}),(function(n,l){var e=l.component;n(l,10,0,0-e.scroll_left+"px"),n(l,18,0,0-e.scroll_top+"px"),n(l,22,0,15*e.filtered_spaces.length+"rem")}))}function Fn(n){return t.Vb(0,[(n()(),t.zb(0,0,null,null,1,"app-day-view",[],null,[["window","resize"]],(function(n,l,e){var o=!0;return"window:resize"===l&&(o=!1!==t.Lb(n,1).onResize()&&o),o}),Yn,Jn)),t.yb(1,245760,null,0,u,[r.a,In.a,t.H],null,null)],(function(n,l){n(l,1,0)}),null)}var qn=t.vb("app-day-view",u,Fn,{},{},[]),Xn=e("t/Na"),Gn=e("gIcY"),Hn=e("eDkP"),$n=e("M2Lx"),Un=e("v9Dh"),Qn=e("tbE3"),Wn=e("5UE1"),Kn=e("/VYK"),Zn=e("Kitg"),nl=e("z3XH"),ll=e("gsSG"),el=e("y4qS"),tl=e("4c35"),ol=e("vARd"),il=e("de3e"),rl=e("xQn8");e.d(l,"DayViewModuleNgFactory",(function(){return al}));var al=t.wb(s,[],(function(n){return t.Ib([t.Jb(512,t.j,t.gb,[[8,[c.a,d.a,d.g,d.d,d.e,d.f,d.s,d.E,d.F,d.b,d.c,b.a,b.b,g.a,p.a,m.a,f.a,v.a,h.a,_.a,y.a,O.a,P.a,M.a,x.a,w.a,C.a,qn]],[3,t.j],t.z]),t.Jb(4608,z.p,z.o,[t.w,[2,z.G]]),t.Jb(4608,Xn.j,Xn.p,[z.e,t.D,Xn.n]),t.Jb(4608,Xn.q,Xn.q,[Xn.j,Xn.o]),t.Jb(5120,Xn.a,(function(n){return[n]}),[Xn.q]),t.Jb(4608,Xn.m,Xn.m,[]),t.Jb(6144,Xn.k,null,[Xn.m]),t.Jb(4608,Xn.i,Xn.i,[Xn.k]),t.Jb(6144,Xn.b,null,[Xn.i]),t.Jb(4608,Xn.f,Xn.l,[Xn.b,t.s]),t.Jb(4608,Xn.c,Xn.c,[Xn.f]),t.Jb(4608,Gn.x,Gn.x,[]),t.Jb(4608,Gn.f,Gn.f,[]),t.Jb(4608,Hn.a,Hn.a,[Hn.g,Hn.c,t.j,Hn.f,Hn.d,t.s,t.B,z.e,T.b,[2,z.h]]),t.Jb(5120,Hn.h,Hn.i,[Hn.a]),t.Jb(4608,$n.c,$n.c,[]),t.Jb(5120,Un.b,Un.c,[Hn.a]),t.Jb(4608,I.e,L.a,[[2,L.c],[2,L.e]]),t.Jb(4608,R.h,R.h,[z.e,t.B,nn.j,R.j]),t.Jb(1073742336,z.c,z.c,[]),t.Jb(1073742336,In.p,In.p,[[2,In.u],[2,In.l]]),t.Jb(1073742336,Xn.e,Xn.e,[]),t.Jb(1073742336,Xn.d,Xn.d,[]),t.Jb(1073742336,Gn.w,Gn.w,[]),t.Jb(1073742336,Gn.k,Gn.k,[]),t.Jb(1073742336,D.tb,D.tb,[]),t.Jb(1073742336,D.ub,D.ub,[]),t.Jb(1073742336,D.F,D.F,[]),t.Jb(1073742336,D.yb,D.yb,[]),t.Jb(1073742336,D.wb,D.wb,[]),t.Jb(1073742336,D.zb,D.zb,[]),t.Jb(1073742336,D.Ab,D.Ab,[]),t.Jb(1073742336,T.a,T.a,[]),t.Jb(1073742336,N.b,N.b,[]),t.Jb(1073742336,nn.g,nn.g,[]),t.Jb(1073742336,D.Bb,D.Bb,[]),t.Jb(1073742336,D.Cb,D.Cb,[]),t.Jb(1073742336,D.Db,D.Db,[]),t.Jb(1073742336,D.Eb,D.Eb,[]),t.Jb(1073742336,D.Fb,D.Fb,[]),t.Jb(1073742336,D.Hb,D.Hb,[]),t.Jb(1073742336,D.Ib,D.Ib,[]),t.Jb(1073742336,D.q,D.q,[]),t.Jb(1073742336,D.o,D.o,[]),t.Jb(1073742336,D.bb,D.bb,[]),t.Jb(1073742336,D.Jb,D.Jb,[]),t.Jb(1073742336,D.cb,D.cb,[]),t.Jb(1073742336,D.db,D.db,[]),t.Jb(1073742336,D.eb,D.eb,[]),t.Jb(1073742336,D.fb,D.fb,[]),t.Jb(1073742336,D.r,D.r,[]),t.Jb(1073742336,D.G,D.G,[]),t.Jb(1073742336,D.Y,D.Y,[]),t.Jb(1073742336,Gn.u,Gn.u,[]),t.Jb(1073742336,Qn.b,Qn.b,[]),t.Jb(1073742336,Wn.b,Wn.b,[]),t.Jb(1073742336,Kn.b,Kn.b,[]),t.Jb(1073742336,D.n,D.n,[]),t.Jb(1073742336,Zn.a,Zn.a,[]),t.Jb(1073742336,nl.b,nl.b,[]),t.Jb(1073742336,ll.e,ll.e,[]),t.Jb(1073742336,el.m,el.m,[]),t.Jb(1073742336,L.e,L.e,[[2,L.b],[2,I.f]]),t.Jb(1073742336,L.g,L.g,[]),t.Jb(1073742336,S.c,S.c,[]),t.Jb(1073742336,tl.f,tl.f,[]),t.Jb(1073742336,Hn.e,Hn.e,[]),t.Jb(1073742336,ol.e,ol.e,[]),t.Jb(1073742336,$n.d,$n.d,[]),t.Jb(1073742336,Y.a,Y.a,[]),t.Jb(1073742336,Un.e,Un.e,[]),t.Jb(1073742336,il.c,il.c,[]),t.Jb(1073742336,k.c,k.c,[]),t.Jb(1073742336,rl.a,rl.a,[]),t.Jb(1073742336,R.i,R.i,[]),t.Jb(1073742336,s,s,[]),t.Jb(256,Xn.n,"XSRF-TOKEN",[]),t.Jb(256,Xn.o,"X-XSRF-TOKEN",[]),t.Jb(1024,In.j,(function(){return[[{path:"",component:u}]]}),[])])}))}}]);