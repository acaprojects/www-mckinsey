{"version":3,"sources":["./src/app/shell/day-view/approvals-view/approvals-view.component.html","./src/app/shell/day-view/approvals-view/approvals-view.component.ts","./src/app/shell/day-view/approvals-view/event/event.component.html","./src/app/shell/day-view/approvals-view/event/event.component.ts","./src/app/shell/day-view/day-view.component.html","./src/app/shell/day-view/day-view.component.ts","./src/app/shell/day-view/day-view.module.ts","./src/app/shell/day-view/space/event/event.component.html","./src/app/shell/day-view/space/event/event.component.ts","./src/app/shell/day-view/space/space.component.html","./src/app/shell/day-view/space/space.component.ts"],"names":[],"mappings":"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","file":"shell-day-view-day-view-module-ngfactory-es2015.js","sourcesContent":["<div class=\"approvals-view\">\n    <div class=\"content\" *ngIf=\"events && events.length; else empty_state\">\n        <div class=\"date\">\n            <div class=\"bar\"></div>\n            <div class=\"display\">{{ date_display }}</div>\n            <div class=\"bar\"></div>\n        </div>\n        <approvals-event *ngFor=\"let item of events; trackBy: trackByFn\" [event]=\"item\" (acting)=\"waiting_on_event = $event\"></approvals-event>\n    </div>\n    <div class=\"load-state\" *ngIf=\"loading\">\n        <div class=\"no-item center\">\n            <div class=\"icon\">\n                <spinner type=\"circle-ring\"></spinner>\n            </div>\n        </div>\n    </div>\n</div>\n<ng-template #empty_state>\n    <div class=\"no-item center\" *ngIf=\"!loading\">\n        <div class=\"icon\">\n            <i class=\"material-icons\">close</i>\n        </div>\n        <div class=\"text\">No meetings pending approval</div>\n    </div>\n</ng-template>","import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { BaseComponent } from '../../../shared/globals/base.component';\nimport { AppService } from '../../../services/app.service';\nimport { IBooking } from '../../../services/data/bookings.service';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'day-view-approvals-view',\n    templateUrl: './approvals-view.component.html',\n    styleUrls: ['./approvals-view.component.scss']\n})\nexport class DayViewApprovalsViewComponent extends BaseComponent implements OnInit, OnChanges {\n    /** Timestamp of the active date */\n    @Input() public date: number;\n    /** List of bookings that are pending approval */\n    public events: IBooking[] = [];\n    /** List of spaces to check for pending approvals */\n    public space_list: string[] = [];\n    /** Whether the pending bookings are being loaded */\n    public loading: boolean;\n    /** Whether an event action is in progress */\n    public waiting_on_event: boolean;\n\n    /** Display value for the active date */\n    public get date_display(): string {\n        const now = dayjs().startOf('d');\n        const date = dayjs(this.date).startOf('d');\n        if (now.isSame(date, 'd')) {\n            return 'Today';\n        } else if (date.diff(now, 'd') === 1) {\n            return 'Tomorrow';\n        } else if (now.diff(date, 'd') === 1) {\n            return 'Yesterday';\n        }\n        return date.format('DD MMM YYYY');\n    }\n\n    constructor(private _service: AppService) {\n        super();\n    }\n\n    ngOnInit() {\n        // this.subscription('building', this._service.Buildings.listen((bld => {\n        //     this.updateMeetings();\n        //     this.interval('update_meetings', () => this.updateMeetings(), 60 * 1000);\n        // })));\n        this.subscription('building', this._service.listen('APP.level', (level => {\n            this.space_list = this._service.Rooms.list(true, [level === -1 ? this._service.Buildings.current().id : level]).map(i => i.name);\n            this.processMeetings();\n            this.getMonthlyPending();\n            // this.updateMeetings();\n            // this.interval('update_meetings', () => this.updateMeetings(), 60 * 1000);\n        })));\n        this.getMonthlyPending();\n        this.interval('monthly_pending', () => this.getMonthlyPending(), 60 * 1000);\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.date) {\n            this.events = [];\n            // this.updateMeetings();\n            // this.interval('update_meetings', () => this.updateMeetings(), 60 * 1000);\n            this.processMeetings();\n            this.interval('process_meetings', () => this.processMeetings(), 1 * 1000);\n        }\n    }\n\n    /**\n     * Track by function for ngFor optimisation\n     * @param index Index of the item\n     * @param item Data associated with the item at the given index\n     */\n    public trackByFn(index: number, item: IBooking) {\n        return item.id || index;\n    }\n\n    /** Update listing of meetings pending approval */\n    private updateMeetings() {\n        const level_id = this._service.get('APP.level');\n        const zone_ids = level_id === -1 ? this._service.Buildings.current().id : level_id;\n        const time = dayjs(this.date).startOf('d');\n        const end = time.endOf('d');\n        this.loading = true;\n        this._service.Rooms.query({\n            zone_ids,\n            available_from: time.unix(),\n            available_to: end.unix()\n        }).then((room_list) => {\n            this.space_list = room_list.map(i => i.id);\n            this._service.Rooms.clearTimeline(time.valueOf(), end.valueOf(), this.space_list);\n            room_list.forEach(rm => this._service.Rooms.updateTimeline(rm.id, rm.bookings));\n            this.processMeetings();\n            this.loading = false;\n        });\n    }\n\n    /**\n     * Update pending meetings from list of rooms\n     */\n    private processMeetings() {\n        if (this.waiting_on_event) { return; }\n        const date = dayjs(this.date).format('DD MMM YYYY');\n        this.events = this.process(date);\n        const pending_list = this._service.get('CONCIERGE.pending_bookings') || {};\n        pending_list[dayjs(this.date).format('YYYY-MM-DD')] = this.events.length;\n        this._service.set('CONCIERGE.pending_bookings', pending_list);\n    }\n\n    private process(date: string) {\n        const events: IBooking[] = [];\n        for (const id of this.space_list) {\n            const rm = this._service.Rooms.item(id);\n            if (rm) {\n                const bookings = rm.timeline[date] || [];\n                for (const bkn of bookings) {\n                    if (bkn.type === 'tentative' || bkn.state === 'tentative') {\n                        events.push(bkn);\n                    }\n                }\n            }\n        }\n        return events.sort((a, b) => a.date - b.date);\n    }\n\n    private getMonthlyPending() {\n        const start = dayjs(this.date).startOf('M');\n        const end = start.endOf('M');\n        const level = this._service.get('APP.level');\n        const zone_ids = (level === -1 ? null : level) || this._service.Buildings.current();\n        console.log('Get Monthly:', start.format('MMMM YYYY'));\n        this._service.Rooms.query({\n            zone_ids,\n            available_from: start.unix(),\n            available_to: end.unix()\n        }).then((room_list) => {\n            this._service.Rooms.clearTimeline(start.valueOf(), end.valueOf(), room_list.map(i => i.id));\n            room_list.forEach(rm => this._service.Rooms.updateTimeline(rm.id, rm.bookings));\n            const pending_list = this._service.get('CONCIERGE.pending_bookings') || {};\n            for (let date = start; date.isBefore(end, 'm'); date = date.add(1, 'd')) {\n                const events = this.process(date.format('DD MMM YYYY'));\n                pending_list[date.format('YYYY-MM-DD')] = events.length;\n            }\n            this._service.set('CONCIERGE.pending_bookings', pending_list);\n        })\n    }\n}\n","<div [class]=\"'approval-event' + (type ? ' ' + type : '')\" *ngIf=\"event\" [attr.event-id]=\"event.id\">\n    <div class=\"header\">\n        <div class=\"avatar\">\n            <avatar [klass]=\"type\" [user]=\"event.organiser\"></avatar>\n        </div>\n        <div class=\"details\">\n            {{ event.display?.start + ' - ' + event.display?.end }}\n            {{ event.room ? 'in ' + event.room.name : '' }}\n        </div>\n        <div class=\"search icon\" (touchrelease)=\"view()\">\n            <i class=\"material-icons\">search</i>\n        </div>\n    </div>\n    <div class=\"body\">\n        <div class=\"control\">\n            <div class=\"bar\"></div>\n            <div class=\"icon\" (touchrelease)=\"shown = !shown\">\n                <i class=\"material-icons\">keyboard_arrow_{{ shown ? 'up' : 'down' }}</i>\n            </div>\n            <div class=\"bar\"></div>\n        </div>\n        <div class=\"contents\" *ngIf=\"shown\" [@show]>\n            <div class=\"field\">\n                <label>Host:</label>\n                <div class=\"value\">\n                    <div class=\"text\">{{ event.organiser?.name }}</div>\n                    <div class=\"actions\">\n                        <a [href]=\"'mailto:' + event.organiser?.email\" [class.no-event]=\"!event.organiser?.email\">\n                            <btn format=\"mini-action\" [disabled]=\"!event.organiser?.email\">\n                                <i class=\"material-icons\">email</i>\n                            </btn>\n                        </a>\n                        <a [href]=\"'tel:' + event.organiser?.phone\" [class.no-event]=\"!event.organiser?.phone\">\n                            <btn format=\"mini-action\" [disabled]=\"!event.organiser?.phone\">\n                                <i class=\"material-icons\">call</i>\n                            </btn>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class=\"field\" *ngIf=\"event.booked_by && event.organiser && event.organiser.email !== event.booked_by.email\">\n                <label>Booked by:</label>\n                <div class=\"value\">\n                    <div class=\"text\">{{ event.booked_by?.name }}</div>\n                    <div class=\"actions\">\n                        <a [href]=\"'mailto:' + event.booked_by?.email\" [class.no-event]=\"!event.booked_by?.email\">\n                            <btn format=\"mini-action\" [disabled]=\"!event.booked_by?.email\">\n                                <i class=\"material-icons\">email</i>\n                            </btn>\n                        </a>\n                        <a [href]=\"'tel:' + event.booked_by?.phone\" [class.no-event]=\"!event.booked_by?.phone\">\n                            <btn format=\"mini-action\" [disabled]=\"!event.booked_by?.phone\">\n                                <i class=\"material-icons\">call</i>\n                            </btn>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class=\"field multiline\">\n                <label>Attendees:</label>\n                <div class=\"value\">\n                    <div class=\"attendee\" *ngFor=\"let item of event.attendees\">{{ item.name }}</div>\n                </div>\n            </div>\n            <div class=\"field\">\n                <label>Welcomed by:</label>\n                <div class=\"value\">{{ notifyee }}</div>\n            </div>\n            <div class=\"field\">\n                <label>Catering:</label>\n                <div class=\"value\">{{ has_catering ? 'Catered' : 'No Catering' }}</div>\n            </div>\n            <div class=\"field\" *ngIf=\"description\">\n                <label>Notes:</label>\n                <div class=\"value\" [innerHTML]=\"description || '' | safe\"></div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer\">\n        <button (touchrelease)=\"accept()\" [class.accepted]=\"event.state === 'busy'\">\n            Accept{{ event.state === 'busy' ? 'ed' : '' }}\n        </button>\n        <button (touchrelease)=\"decline()\" [class.declined]=\"event.state === 'cancelled'\">\n            Decline{{ event.state === 'cancelled' ? 'd' : '' }}\n        </button>\n    </div>\n    <div class=\"load-state\" *ngIf=\"loading\">\n        <div class=\"no-item center\">\n            <div class=\"icon\">\n                <spinner type=\"circle-ring\"></spinner>\n            </div>\n            <div class=\"text\">Processing request...</div>\n        </div>\n    </div>\n</div>\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { trigger, style, animate, transition } from '@angular/animations';\n\nimport { IBooking } from '../../../../services/data/bookings.service';\nimport { AppService } from '../../../../services/app.service';\nimport { BaseComponent } from '../../../../shared/globals/base.component';\n\nconst STATES: { [id: string]: string } = {};\n\n@Component({\n    selector: 'approvals-event',\n    templateUrl: './event.component.html',\n    styleUrls: ['./event.component.scss'],\n    animations: [\n        trigger('show', [\n            transition(':enter', [style({ opacity: 0, height: 0 }), animate(200, style({ opacity: 1, height: '*' }))]),\n            transition(':leave', [style({ opacity: 1, height: '*' }), animate(200, style({ opacity: 0, height: 0 }))]),\n        ])\n    ]\n})\nexport class ApprovalsViewEventComponent extends BaseComponent {\n    /** Event to display */\n    @Input() event: IBooking;\n    /** Event emitter for event actions */\n    @Output() acting = new EventEmitter<boolean>();\n    /** Whether approval action is being processed */\n    public loading: boolean;\n    /** Whether event details are shown */\n    public shown: boolean;\n\n    /** Type of event */\n    public get type(): string {\n        if (this.event) {\n            return this.event.state === 'cancelled' ? 'cancelled' : this.event.booking_type;\n        }\n        return '';\n    }\n\n    /** Person to notify when external attendees arrive */\n    public get notifyee() {\n        if (this.event) {\n            if (this.event.notify_users && this.event.notify_users.length) {\n                return this.event.notify_users[0];\n            }\n        }\n        return 'Concierge';\n    }\n\n    /** Description of the meeting */\n    public get description(): string {\n        if (this.event && this.event.notes) {\n            return (this.event.notes.find(i => i.type === 'description') || { message: '' }).message;\n        }\n        return '';\n    }\n\n    /** Whether the meeting has catering attached */\n    public get has_catering(): boolean {\n        if (!this.event) return false;\n        const catering = this.event.catering || {} as any;\n        if (!catering.items) {\n            const order = catering[this.event.room.id] || {};\n            return !!(order.items && order.items.length);\n        } else {\n            return !!(catering.items && catering.items.length);\n        }\n    }\n\n    /** View booking details */\n    public view() {\n        this.timeout('view', () => {\n            this._service.Bookings.view(this.event, this.event.room).then(_ => null, _ => null);\n            this._service.set('CONCIERGE.day_view.viewing', this.event);\n        }, 50);\n    }\n\n    constructor(private _service: AppService) {\n        super();\n    }\n\n    /**\n     * Approve the meeting for the set room\n     */\n    public accept() {\n        if (!this.event.organiser) { this.event.organiser = {} as any; }\n        if (!this.event.display) { this.event.display = {}; }\n        this.acting.emit(true)\n        this._service.confirm({\n            title: 'Approve Meeting',\n            message: `Approve ${this.event.organiser.name || this.event.organiser}'s meeting in \"${(this.event.room || {} as any).name}\" at ${this.event.display.start} for ${this.event.display.duration} on ${this.event.display.date}`,\n            icon: 'event_available',\n            accept: 'Ok',\n            cancel: true\n        }, (event) => {\n            if (event.type === 'Accept') {\n                this.loading = true;\n                this._service.Bookings.accept(this.event.id, {\n                    comment: '',\n                    room_id: this.event.room ? this.event.room.id : (this.event as any).room_id\n                }).then(\n                    () => {\n                        this._service.success('Meeting approved.');\n                        this.event.state = 'busy';\n                        this._service.Rooms.removeFromTimeline(this.event.room.id, this.event.id);\n                        this._service.Rooms.addToTimeline(this.event);\n                        STATES[this.event.id] = this.event.state;\n                        this._service.set('BOOKING.states', STATES);\n                        this.loading = false;\n                        this.acting.emit(false);\n                    },\n                    () => {\n                        this.acting.emit(false);\n                        this._service.error('Error approving meeting.');\n                        this.loading = false;\n                    }\n                );\n            }\n            event.close();\n        });\n    }\n\n    /**\n     * Decline meeting for the set room\n     */\n    public decline() {\n        if (!this.event.organiser) { this.event.organiser = {} as any; }\n        if (!this.event.display) { this.event.display = {}; }\n        this.acting.emit(true);\n        this._service.confirm({\n            title: 'Decline Meeting',\n            message: `Decline ${this.event.organiser.name || this.event.organiser}'s meeting in \"${(this.event.room || {} as any).name}\" at ${this.event.display.start} for ${this.event.display.duration} on ${this.event.display.date}`,\n            icon: 'event_busy',\n            accept: 'Ok',\n            cancel: true\n        }, (event) => {\n            if (event.type === 'Accept') {\n                this.loading = true;\n                const booking: IBooking = this.event;\n                booking.state = 'loading';\n                this._service.Bookings.decline(booking.id, {\n                    booking_id: booking.id,\n                    organiser: booking.organiser.email,\n                    icaluid: booking.icaluid,\n                    start: Math.floor(booking.date / 1000),\n                    end: Math.floor(booking.date / 1000) + booking.duration * 60,\n                    room_id: booking.room ? booking.room.id : (booking as any).room_id\n                }).then(\n                    () => {\n                        this._service.success('Meeting declined.');\n                        this.event.state = 'cancelled';\n                        this._service.Rooms.removeFromTimeline(this.event.room.id, this.event.id);\n                        this._service.Rooms.addToTimeline(this.event);\n                        STATES[this.event.id] = this.event.state;\n                        this._service.set('BOOKING.states', STATES);\n                        this.loading = false;\n                        this.acting.emit(false);\n                    },\n                    () => {\n                        this.acting.emit(false);\n                        this._service.error('Error declining meeting.');\n                        this.loading = false;\n                    }\n                );\n            }\n            event.close();\n        });\n    }\n}","<div class=\"day-view\">\n    <div class=\"header\">\n        <div class=\"time-blocks\"><div class=\"text\">Time</div></div>\n        <div class=\"flex\">\n            <div class=\"group\" [style.left]=\"-scroll_left + 'px'\">\n                <div class=\"space-header\" *ngFor=\"let item of filtered_spaces\" [title]=\"item.long_name\">\n                    <div class=\"details\">\n                        <div class=\"text\">{{ item.name }}</div>\n                        <div class=\"icon\"></div>\n                    </div>\n                    <div class=\"capacity\">Capacity - {{ item.capacity || '0' }} {{ item.capacity === 1 ? 'person' : 'people' }}</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"sidebar\" *ngIf=\"holding_bay\" [class.show]=\"show_holding_bay\">\n            <div class=\"space-header\" [title]=\"holding_bay.name\">\n                <div class=\"text\">Holding Bay</div>\n                <div class=\"icon\"></div>\n            </div>\n            <div class=\"tag\" (touchrelease)=\"show_holding_bay = !show_holding_bay\">\n                <div class=\"icon\">\n                    <i class=\"material-icons\">{{ show_holding_bay ? 'keyboard_arrow_right' : 'event_available'}}</i>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"body\" (touchrelease)=\"clearSelected()\">\n        <div class=\"time-blocks\">\n            <div class=\"group\" [style.top]=\"-scroll_top + 'px'\">\n                <div class=\"block\" *ngFor=\"let item of time_blocks\">\n                    <div div class=\"hour\" [class.active]=\"is_today && item.id === active_hour\">{{ item.display }}</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"flex content\" #scroll_area id=\"day-view-scroll\" (scroll)=\"updateScroll($event)\">\n            <div class=\"time-lines\" [style.min-width]=\"filtered_spaces.length * 15 + 'rem'\">\n                <div class=\"block\" *ngFor=\"let item of time_blocks\">\n                    <div class=\"line\"></div>\n                </div>\n            </div>\n            <div class=\"space-day\">\n                <div\n                    class=\"space\"\n                    [style.min-height]=\"time_blocks.length * 3 + 'rem'\"\n                    *ngFor=\"let item of filtered_spaces\"\n                    cdkDropListGroup\n                >\n                    <day-view-space\n                        [space_list]=\"space_zones\"\n                        [date]=\"date\"\n                        [space]=\"item\"\n                        [scroll]=\"-scroll_left\"\n                        [scrollTop]=\"scroll_offset - scroll_top\"\n                        [lastUpdate]=\"last_update\"\n                        (dragging)=\"dragChange($event)\"\n                        (inView)=\"in_view[item.id] = $event\"\n                    ></day-view-space>\n                </div>\n            </div>\n        </div>\n        <div\n            class=\"now-line\"\n            *ngIf=\"is_today\"\n            [style.top]=\"'calc(' + now * time_blocks.length * 3 + 'rem - ' + scroll_top + 'px)' | safestyle\"\n        >\n            <div class=\"knob\"></div>\n        </div>\n        <div class=\"sidebar\" *ngIf=\"holding_bay\" [class.show]=\"show_holding_bay\">\n            <day-view-space\n                *ngIf=\"holding_bay\"\n                [date]=\"date\"\n                [space]=\"holding_bay\"\n                [lastUpdate]=\"last_update\"\n                (dragging)=\"dragChange($event)\"\n                (inView)=\"in_view[holding_bay.id] = $event\"\n            ></day-view-space>\n            <day-view-approvals-view [date]=\"date\"></day-view-approvals-view>\n        </div>\n    </div>\n</div>\n","import { Component, OnInit, HostListener, ViewChild, ElementRef, Renderer2 } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { BaseComponent } from '../../shared/globals/base.component';\nimport { IRoom } from '../../services/data/rooms.service';\nimport { AppService } from '../../services/app.service';\n\nimport * as dayjs from 'dayjs';\nimport { IBooking } from '../../services/data/bookings.service';\n\nexport interface ITimeBlock {\n    /** ID of the time block */\n    id: string;\n    /** Display value for the time block */\n    display: string;\n}\n\nconst UPDATE_INTERVAL = 15;\n\n@Component({\n    selector: 'app-day-view',\n    templateUrl: './day-view.component.html',\n    styleUrls: ['./day-view.component.scss']\n})\nexport class DayViewComponent extends BaseComponent implements OnInit {\n    /** List of timeblocks to display */\n    public time_blocks: ITimeBlock[] = this.generateTimeBlocks();\n    /** Top value of the content scroll */\n    public scroll_top: number = 0;\n    /** Left value of the content scroll */\n    public scroll_left: number = 0;\n    /** Offset of the scroll value when starting a drag */\n    public scroll_offset: number = 0;\n    /** List of spaces to display for  */\n    public spaces: IRoom[] = [];\n    /** List of spaces to display for  */\n    public filtered_spaces: IRoom[] = [];\n    /** Mapping of space ids to whether they are in view */\n    public in_view: { [id: string]: boolean } = {};\n    /** Percent of the day that is now */\n    public now: number;\n    /** Timestamp of the active date */\n    public date: number;\n    /** Whether the active day is today */\n    public is_today: boolean;\n    /** Currently active hour of the day */\n    public active_hour: string;\n    /** Mapping of spaces loading booking date */\n    public loading: { [id: string]: boolean } = {};\n    /** Booking ID to open modal for */\n    public view_id: string;\n    /** Room type to filter the shown rooms by */\n    public room_type: string;\n    /** Last update time for the space bookings */\n    public last_update: number = 0;\n    /** Whether an event is being dragged */\n    public is_dragging: boolean;\n    /** Client rectangle for the scroll area */\n    public box: ClientRect;\n    /** Whether to show the holding bay */\n    public show_holding_bay: boolean = true;\n\n    /** Scrollable area of the day view */\n    @ViewChild('scroll_area', { static: true }) private scroll_area: ElementRef<HTMLDivElement>;\n\n    /** Update scroll box when the window is resized */\n    @HostListener('window:resize') public onResize() {\n        if (this.scroll_area.nativeElement) {\n            this.box = this.scroll_area.nativeElement.getBoundingClientRect();\n        }\n    }\n\n    constructor(private _service: AppService, private _route: ActivatedRoute, private _renderer: Renderer2) {\n        super();\n    }\n\n    public get holding_bay(): IRoom {\n        const bld = this._service.Buildings.current();\n        if (bld.holding_bay) {\n            return this._service.Rooms.item(bld.holding_bay);\n        }\n        return null;\n    }\n\n    public ngOnInit(): void {\n        if (!this._service.ready() || !this._service.Rooms.list(true).length) {\n            return this.timeout('init', () => this.ngOnInit());\n        }\n        this._service.title = 'Day View';\n        // Subscribe to changes of the selected level\n        this.subscription('active_level', this._service.listen('APP.level', (level_id) => {\n            const zone_id = level_id === -1 ? this._service.Buildings.current().id : level_id;\n            this.spaces = this._service.Rooms.list(true, [zone_id]) || [];\n            const holding_bay = this.holding_bay;\n            this.filtered_spaces = this.spaces.filter(i =>\n                (!this.room_type || i.zones.indexOf(this.room_type) >= 0) && (!holding_bay || i.id !== holding_bay.id) && i.bookable\n            );\n            this.updateBookings();\n            this.interval('bookings', () => this.updateBookings(), UPDATE_INTERVAL * 1000);\n        }));\n        // Subscribe to changes of the selected date\n        this.subscription('date', this._service.listen('APP.date', (date) => {\n            this.date = date;\n            this.is_today = dayjs().isSame(dayjs(date), 'd');\n            this.updateBookings();\n            this.interval('bookings', () => this.updateBookings(), UPDATE_INTERVAL * 1000);\n        }));\n        this.subscription('room_type', this._service.listen('APP.room_type', (type) => {\n            this.room_type = typeof type === 'string' ? type : null;\n            const holding_bay = this.holding_bay;\n            this.filtered_spaces = this.spaces.filter(i =>\n                (!this.room_type || i.zones.indexOf(this.room_type) >= 0) && (!holding_bay || i.id !== holding_bay.id) && i.bookable\n            );\n        }));\n        this.subscription('viewing', this._service.listen('CONCIERGE.day_view.viewing', (event) => this.scrollIntoView(event)));\n        // Subscribe to route query changes\n        this.subscription('route.query', this._route.queryParamMap.subscribe((params) => {\n            if (params.has('id')) {\n                this.view_id = params.get('id');\n            }\n        }));\n        // Update time\n        this.updateTime();\n        this.interval('time', () => this.updateTime(), 15 * 1000);\n        // Update bookings for visible rooms\n        this.updateBookings();\n        this.interval('bookings', () => this.updateBookings(), UPDATE_INTERVAL * 1000);\n        this.interval('scroll', () => {\n            if (this.scroll_area && this.scroll_area.nativeElement) {\n                this.updateScroll({ target: this.scroll_area.nativeElement });\n            }\n        }, 1000);\n        if (this.scroll_area.nativeElement) {\n            this.box = this.scroll_area.nativeElement.getBoundingClientRect();\n        }\n    }\n\n    /** List of space */\n    public get space_zones(): string[] {\n        return this.spaces.map(i => `space-col-${i.id}`);\n    }\n\n    /**\n     * Update scroll parameters to match the change in the scroll position\n     * @param event\n     */\n    public updateScroll(event) {\n        this.scroll_top = event.target.scrollTop;\n        this.scroll_left = event.target.scrollLeft;\n    }\n\n    /** Generate time blocks to display on the day view */\n    private generateTimeBlocks(): ITimeBlock[] {\n        const blocks: ITimeBlock[] = [];\n        const date = dayjs().startOf('h');\n        for (let i = 0; i < 24; i++) {\n            blocks.push({\n                id: date.hour(i).format('HH:mm'),\n                display: date.hour(i).format('h:mm A')\n            });\n        }\n        return blocks;\n    }\n\n    /** Update the now line position */\n    private updateTime() {\n        const time = dayjs();\n        this.now = (time.hour() + time.minute() / 60) / 24;\n        this.active_hour = time.startOf('h').format('HH:mm');\n    }\n\n    /** Update bookings for rooms in view */\n    private updateBookings() {\n        const visible_rooms = this.spaces.filter(i => this.in_view[i.id] !== false);\n        if (visible_rooms.length) {\n            visible_rooms.forEach(rm => this.loading[rm.id] = true);\n            const time = dayjs(this.date).startOf('d');\n            const end = time.endOf('d');\n            // const room_ids = visible_rooms.reduce((v, i) => v + (v ? ',' : '') + i.id, '');\n            const level = this._service.get('APP.level');\n            const zone_ids = [level === -1 ? this._service.Buildings.current().id : level ];\n            if (this.room_type) {\n                zone_ids.push(this.room_type);\n            }\n            this._service.Rooms.query({\n                // room_ids,\n                zone_ids,\n                available_from: time.unix(),\n                available_to: end.unix()\n            }).then((room_list) => {\n                this._service.Rooms.clearTimeline(time.valueOf(), end.valueOf()/*, room_ids.split(',') */);\n                room_list.forEach(rm => {\n                    if (this.view_id) {\n                        const booking = rm.bookings.find(i => i.id === this.view_id);\n                        if (booking) {\n                            this.view(booking, rm);\n                        }\n                    }\n                    this._service.Rooms.updateTimeline(rm.id, rm.bookings);\n                });\n                delete this.loading;\n                this.last_update = dayjs().valueOf();\n                this.loading = {};\n            });\n        }\n    }\n\n    /**\n     * View booking details\n     * @param booking Booking to view the details of\n     */\n    private view(booking: IBooking, space: IRoom) {\n        this._service.Bookings.view(booking, space).then(_ => null, _ => null);\n        this.view_id = null;\n    }\n\n    /**\n     * Scroll booking to the event on the day view\n     * @param booking Booking to scroll into view\n     */\n    private scrollIntoView(booking: IBooking) {\n        if (booking && this.scroll_area && this.scroll_area.nativeElement) {\n            const box = this.scroll_area.nativeElement.getBoundingClientRect();\n            const height = this.scroll_area.nativeElement.scrollHeight + box.height;\n            const width = this.scroll_area.nativeElement.scrollWidth + box.width;\n            const date = dayjs(booking.date);\n            const time = date.hour() + date.minute() / 60;\n            const index = this.spaces.findIndex(i => i.id === booking.room.id);\n            if (index >= 0) {\n                this.scroll_area.nativeElement.scrollTo({\n                    top: height * (time / 24) - box.height / 2,\n                    left: width * (index / this.spaces.length),\n                    behavior: 'smooth'\n                });\n            }\n        }\n    }\n\n    /**\n     * Setup an auto-scroll for the display view\n     * @param x\n     * @param y\n     */\n    public scrollView(x: number, y: number) {\n        if (x || y) {\n            this.scroll_area.nativeElement.scrollTop += y || 0;\n            this.scroll_area.nativeElement.scrollLeft += x || 0;\n            if (\n                (y && this.scroll_area.nativeElement.scrollTop >= this.scroll_area.nativeElement.scrollHeight)\n                || (x && this.scroll_area.nativeElement.scrollLeft >= this.scroll_area.nativeElement.scrollWidth)\n                || (y && this.scroll_area.nativeElement.scrollTop <= 0)\n                || (x && this.scroll_area.nativeElement.scrollLeft <= 0)\n            ) {\n                this.clearInterval('auto_scroll');\n            }\n            this.updateScroll({ target: this.scroll_area.nativeElement });\n        }\n    }\n\n    public clearSelected() {\n        this._service.set('CONCIERGE.day_view.viewing', null);\n    }\n\n    public cancelScroll() {\n        this.clearInterval('auto_scroll');\n    }\n\n    public dragChange(is_dragging: boolean) {\n        if (is_dragging) {\n            this.scroll_offset = this.scroll_area.nativeElement.scrollTop;\n            this.subscription('listen_move', this._renderer.listen('window', 'mousemove', (event: MouseEvent) => {\n                const position = { x: event.clientX, y: event.clientY };\n                const y = position.y > (this.box.bottom - (this.box.height * 0.05))\n                    ? 1\n                    : (position.y < (this.box.top + (this.box.height * 0.05))\n                        ? -1\n                        : 0);\n                const x = position.x > (this.box.right - (this.box.width * 0.05))\n                    ? 1\n                    : (position.x < (this.box.left + (this.box.height * 0.05))\n                        ? -1\n                        : 0);\n                this.scrollView(x * 5, y * 5);\n                this.interval('auto_scroll', () => this.scrollView(x * 10, y * 10), 10);\n            }));\n            this.clearInterval('bookings');\n        } else {\n            this.interval('bookings', () => this.updateBookings(), UPDATE_INTERVAL * 1000);\n            this.clearInterval('auto_scroll');\n            this.unsub('listen_move');\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Route, RouterModule } from '@angular/router';\nimport { WidgetsModule } from '@acaprojects/ngx-widgets';\nimport { DragDropModule } from '@angular/cdk/drag-drop';\n\nimport { DayViewComponent } from './day-view.component';\nimport { DayViewSpaceComponent } from './space/space.component';\nimport { DayViewApprovalsViewComponent } from './approvals-view/approvals-view.component';\nimport { DayViewSpaceEventComponent } from './space/event/event.component';\nimport { ApprovalsViewEventComponent } from './approvals-view/event/event.component';\nimport { SharedComponentModule } from '../../shared/components/shared.module';\n\nconst ROUTES: Route[] = [{ path: '', component: DayViewComponent }];\n\n@NgModule({\n    declarations: [\n        DayViewComponent,\n        DayViewSpaceComponent,\n        DayViewApprovalsViewComponent,\n        DayViewSpaceEventComponent,\n        ApprovalsViewEventComponent\n    ],\n    imports: [\n        CommonModule,\n        RouterModule.forChild(ROUTES),\n        WidgetsModule,\n        SharedComponentModule,\n        DragDropModule\n    ]\n})\nexport class DayViewModule {}\n","<div\n    class=\"event-container\"\n    *ngIf=\"event\"\n    [class.fixed]=\"fixed\"\n    [class.inactive]=\"!active\"\n    [style.top]=\"top + '%'\"\n    [style.left]=\"left + '%'\"\n    [style.width]=\"fixed ? '15rem' : width + '%'\"\n    [style.height]=\"fixed ? (height * 3) + 'rem' : (height + '%')\"\n>\n    <div [class]=\"'overflow' + (type ? ' ' + type : '')\" [style.top]=\"-overflow_top + '%'\" [style.bottom]=\"-overflow_bottom + '%'\"></div>\n    <div [class]=\"'event' + (type ? ' ' + type : '') + (top > 50 ? ' low' : '')\" [style.z-index]=\"(overlap?.index || 0) + 2\" (touchrelease)=\"view()\">\n        <div class=\"header\">\n            <div class=\"text\">{{ event.all_day ? 'All Day' : period }}</div>\n            <div class=\"icon\">\n                <i class=\"material-icons\" *ngIf=\"event.state === 'cancelled' || event.state === 'busy'\">\n                    {{ event.state === 'busy' ? 'done' : event.state === 'cancelled' ? 'event_busy' : '' }}\n                </i>\n                <spinner type=\"circle-ring\" color=\"#fff\" *ngIf=\"event.state === 'loading'\"></spinner>\n            </div>\n        </div>\n        <div class=\"body\">\n            <div class=\"field host\">\n                <!-- <div class=\"label\">Host:</div> -->\n                <div class=\"value\" [title]=\"'Host: ' + (event.organiser?.name || event.organiser)\">\n                    {{ event.organiser?.name || event.organiser }}\n                </div>\n            </div>\n            <div class=\"field\">\n                <!-- <div class=\"label\">Event:</div> -->\n                <div class=\"value\" [title]=\"'Title: ' + event.title\">{{ event.title }}</div>\n            </div>\n            <div class=\"field\">\n                <div class=\"value\">\n                    {{ event.attendees ? event.attendees.length || 'No' : 'No' }} Attendee{{\n                        event.attendees?.length === 1 ? '' : 's'\n                    }}{{ expected ? '(' + expected + ' Expected)' : '' }}\n                </div>\n            </div>\n            <div class=\"field\" *ngIf=\"event.notify_users\" [title]=\"'Welcomed by: ' + event.notify_users[0]\">\n                <div class=\"value\">Welcomed by: {{ event.notify_users[0] }}</div>\n            </div>\n            <div class=\"field\" *ngIf=\"has_catering\">\n                <div class=\"value\">Catered</div>\n            </div>\n            <div class=\"field\" *ngIf=\"event.parking\">\n                <div class=\"label\">Parking:</div>\n                <div class=\"value\">Need Parking</div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"catering-icon\" *ngIf=\"event.catering && event.catering.items && event.catering.items.length\" (touchrelease)=\"viewOrder()\">\n        <i class=\"material-icons\">restaurant</i>\n    </div>\n</div>\n","import { Component, OnInit, Input, OnChanges, SimpleChanges, Output, EventEmitter } from '@angular/core';\n\nimport { IBooking } from '../../../../services/data/bookings.service';\nimport { AppService } from '../../../../services/app.service';\nimport { BaseComponent } from '../../../../shared/globals/base.component';\nimport { IRoom } from '../../../../services/data/rooms.service';\n\nimport * as dayjs from 'dayjs';\n\n/** Details about the associated event overlapping with other events */\nexport interface IEventOverlap {\n    /** Index of this item with the overlapping items */\n    index: number;\n    /** Total number of items overlapping with this one */\n    total: number;\n}\n\n@Component({\n    selector: 'day-view-space-event',\n    templateUrl: './event.component.html',\n    styleUrls: ['./event.component.scss']\n})\nexport class DayViewSpaceEventComponent extends BaseComponent implements OnInit, OnChanges {\n    /** Event to display */\n    @Input() public event: IBooking;\n    /** Event to display */\n    @Input() public space: IRoom;\n    /** Whether the item is a fixed size */\n    @Input() public fixed: boolean;\n    /** Overlap details for the event */\n    @Input() public overlap: IEventOverlap;\n\n    @Output() public position = new EventEmitter<{ top: number, height: number }>();\n\n    /** Position of the event start time in the day */\n    public top: number;\n    /** Position of the event relative to overlapping events */\n    public left: number;\n    /** Height based of the duration of the event */\n    public height: number;\n    /** Size of the event when overlapping with other events */\n    public width: number;\n    /** Offset from the event's top that the setup time starts */\n    public overflow_top: number;\n    /** Offset from the event's bottom that the breakdown time ends */\n    public overflow_bottom: number;\n\n    constructor(private _service: AppService) {\n        super();\n    }\n\n    ngOnInit() {}\n\n    /** Type of event */\n    public get type(): string {\n        if (this.event) {\n            return this.event.state === 'cancelled' ? 'cancelled' : this.event.booking_type;\n        }\n        return '';\n    }\n\n    /** Period that the event will occur during the day */\n    public get period(): string {\n        if (this.event && this.event.display) {\n            return `${this.event.display.start}  ${this.event.display.end}`\n        }\n        return ``;\n    }\n\n    /** Number attendees expected to turn up to the event */\n    public get expected(): number {\n        const expected = this.event.expected_attendees || {};\n        return this.space ? expected[this.space.id] || 0 : 0;\n    }\n\n    /** Whether the meeting has catering attached */\n    public get has_catering(): boolean {\n        return !!(this.event && this.event.catering && this.event.catering.items && this.event.catering.items.length);\n    }\n\n    /** View booking details */\n    public view() {\n        this._service.Bookings.view(this.event, this.space).then((e: any) => {\n        }, _ => null);\n    }\n\n    /** Whether event is active */\n    public get active(): boolean {\n        const event = this._service.get('CONCIERGE.day_view.viewing');\n        return !event || event.id === this.event.id;\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.event || changes.overlap) {\n            this.calculatePosition();\n        }\n    }\n\n    /**\n     * View catering order for the event\n     */\n    public viewOrder() {\n        if (this.event && this.event.catering) {\n            if (sessionStorage) {\n                sessionStorage.setItem('CONCIERGE.view_order', JSON.stringify({ ...this.event, room: { ...this.event.room, bookings: [] } }))\n            }\n            this._service.navigate(['/catering', 'orders'], { id: this.event.id });\n        }\n    }\n\n    /** Calculate the position */\n    private calculatePosition() {\n        if (this.event) {\n            const overlap = this.overlap || { index: 0, total: 1 };\n            const date = dayjs(this.event.date).startOf('m');\n            const start = date.hour() + date.minute() / 60;\n            if (this.event.all_day) {\n                this.top = 0;\n                this.height = 100;\n                this.position.emit({ top: 0, height: 100 });\n            } else {\n                this.top = (start / 24) * 100;\n                this.height = this.fixed ? (this.event.duration / 60) : ((this.event.duration / 60) / 24) * 100;\n                this.position.emit({ top: this.top, height: ((this.event.duration / 60) / 24) * 100 });\n            }\n            this.width = Math.min(100, 100 / overlap.total + 5);\n            this.left = Math.min(100 - this.width, this.width * overlap.index - 5 * overlap.index);\n            this.overflow_top = (this.event.setup ? this.event.setup / this.event.duration : -.1) * 100;\n            this.overflow_bottom = (this.event.breakdown ? this.event.breakdown / this.event.duration : -.1) * 100;\n        }\n    }\n}\n","<div\n    class=\"space-display\"\n    #view\n    cdkDropList\n    cdkDropListSortingDisabled\n    [cdkDropListConnectedTo]=\"space_list || []\"\n    [cdkDropListData]=\"{ top: top, list: events }\"\n    (cdkDropListDropped)=\"drop($event)\"\n    scrollContainer=\"#day-view-scroll\"\n    [id]=\"'space-col-' + space?.id\"\n>\n    <div class=\"drop-zone\" cdkDrag></div>\n    <div\n        [style.display]=\"inView !== false ? '' : 'none'\"\n        *ngFor=\"let item of events; trackBy: trackByFn\"\n        cdkDrag\n        [id]=\"item.id\"\n        (cdkDragStarted)=\"initDrag()\"\n        (cdkDragMoved)=\"updateDragTop($event)\"\n        (cdkDragReleased)=\"endDrag()\"\n        [cdkDragDisabled]=\"item.status !== 'upcoming' || item.state === 'cancelled' || !settings.dragdrop\"\n    >\n        <day-view-space-event\n            [space]=\"space\"\n            [event]=\"item\"\n            [overlap]=\"overlap_details[item.id]\"\n            (position)=\"position_list[item.id] = $event\"\n        ></day-view-space-event>\n        <div class=\"event-preview\" *cdkDragPreview>\n            <div class=\"content\">\n                <day-view-space-event [fixed]=\"true\" [space]=\"space\" [event]=\"item\"></day-view-space-event>\n            </div>\n        </div>\n        <div\n            class=\"event-placeholder\"\n            *cdkDragPlaceholder\n            [style.top]=\"(top || (position_list[item.id] ? position_list[item.id].top : 0)) + '%'\"\n            [style.height]=\"(position_list[item.id] ? position_list[item.id].height : 100) + '%'\"\n        ></div>\n    </div>\n</div>\n<div class=\"moving\" *ngIf=\"override_state\">\n    <div class=\"text\">Moving meeting</div>\n    <div class=\"spinner\">\n        <spinner type=\"circle-ring\"></spinner>\n    </div>\n</div>\n","import { Component, OnChanges, Input, SimpleChanges, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';\nimport { CdkDragMove, CdkDragDrop } from '@angular/cdk/drag-drop';\n\nimport { IRoom } from '../../../services/data/rooms.service';\nimport { IBooking } from '../../../services/data/bookings.service';\nimport { IEventOverlap } from './event/event.component';\nimport { BaseComponent } from '../../../shared/globals/base.component';\nimport { AppService } from '../../../services/app.service';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'day-view-space',\n    templateUrl: './space.component.html',\n    styleUrls: ['./space.component.scss']\n})\nexport class DayViewSpaceComponent extends BaseComponent implements OnChanges {\n    /** List of space dropzones connected to */\n    @Input() public space_list: string[];\n    /** Date to display events for */\n    @Input() public date: number;\n    /** Space to display events for */\n    @Input() public space: IRoom;\n    /** Scroll value of the day view */\n    @Input() public scroll: number;\n    /** Scroll value to add to drop placeholders */\n    @Input('scrollTop') public scroll_top: number;\n    /** Last update time of the displayed bookings */\n    @Input('lastUpdate') public last_update: number;\n    /** Emitter for whether the space column is in view */\n    @Output() public inView = new EventEmitter<boolean>();\n    /** Emitter for whether an event is being dragged */\n    @Output() public dragging = new EventEmitter<boolean>();\n    /** Mapping of event IDs to overlap details */\n    public overlap_details: { [id: string]: IEventOverlap } = {};\n    /** Whether to only show meetings with a setup or breakdown time */\n    public overflow_only: boolean;\n    /** Mapping of whether to show events with a given legend id */\n    public legend: { [id: string]: boolean } = {};\n    /** Mapping of positions of event in the day */\n    public position_list: { [id: string]: { top: number, height: number } } = {};\n    /** Override for mapped position */\n    public top: number;\n    /** Client Rectangle for the container element box */\n    public box: ClientRect;\n    /** Whether the space list is in view */\n    public in_view: boolean;\n    /** ID of the booking with an action processing */\n    public override_state: string;\n    /** Settings for day view */\n    public settings: { [key: string]: any } = {};\n\n    /** Container element for the component contents */\n    @ViewChild('view', { static: true }) private view: ElementRef<HTMLDivElement>;\n\n    constructor(private _service: AppService) {\n        super();\n    }\n\n    /** Events to display for the active date */\n    public get events(): IBooking[] {\n        const date = dayjs(this.date).format('DD MMM YYYY');\n        if (this.space) {\n            const bookings = this.space.timeline[date] || [];\n            const list = bookings.filter(i => {\n                if (this.override_state && this.override_state === i.icaluid) {\n                    i.state = 'loading';\n                }\n                return i.state !== 'cancelled'\n                    ? (!this.overflow_only || i.setup || i.breakdown) && this.legend[i.booking_type] !== false\n                    : (!this.overflow_only || i.setup || i.breakdown) && this.legend.declined !== false\n            });\n            return list;\n        }\n        return [];\n    }\n\n    public ngOnInit(): void {\n        if (!this._service.ready()) {\n            return this.timeout('init', () => this.ngOnInit());\n        }\n        this.settings = this._service.Settings.get('app.day_view') || {};\n        this.subscription('breakdown', this._service.listen('APP.breakdown', (state) => {\n            this.overflow_only = state;\n        }));\n        this.subscription('legend', this._service.listen('CONCIERGE.legend', (state) => {\n            this.legend = state || {};\n        }));\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.scroll) {\n            this.checkInView();\n        }\n        if (changes.last_update) {\n            this.timeout('update_overlaps', () => this.calculateOverlaps(), 1000);\n        }\n    }\n\n    /**\n     * Track by function for ngFor optimisation\n     * @param index Index of the item\n     * @param item Data associated with the item at the given index\n     */\n    public trackByFn(index: number, item: IBooking) {\n        return item.id || index;\n    }\n\n    /**\n     * Calculate to overlap details for the booking events on the space\n     */\n    private calculateOverlaps() {\n        const events = this.events.sort((a, b) => a.date - b.date || a.duration - b.duration || (a.title || '').localeCompare(b.title || ''));\n        events.forEach(i => this.overlap_details[i.id] = { index: 0, total: 1 });\n        for (const bkn of events) {\n            const bkn_start = dayjs(bkn.date).startOf('m');\n            const bkn_end = dayjs(bkn_start).add(bkn.duration, 'm').startOf('m');\n            let count = 1;\n            let index = 0;\n            const collisions: IBooking[] = [];\n            for (const cmp of events) {\n                if (bkn.id !== cmp.id) {\n                    const cmp_start = dayjs(cmp.date).startOf('m');\n                    const cmp_end = dayjs(cmp_start).add(cmp.duration, 'm').startOf('m');\n                    if ((bkn_start.isSame(cmp_start, 'm') || (bkn_start.isAfter(cmp_start, 'm') && bkn_start.isBefore(cmp_end, 'm'))) ||\n                        (bkn_end.isSame(cmp_end, 'm') || (bkn_end.isAfter(cmp_start, 'm') && bkn_end.isBefore(cmp_end, 'm')))) {\n                        count++;\n                        collisions.push(bkn);\n                        if (events.findIndex(i => i.id === bkn.id) > events.findIndex(i => i.id === cmp.id)) {\n                            index++;\n                        }\n                    }\n                }\n            }\n            // collisions.forEach(i => this.overlap_details[i.id].total = count > this.overlap_details[i.id].total ? count : this.overlap_details[i.id].total);\n            // const indexes = collisions.reduce((a, v) => {\n            //     if (this.overlap_details[v.id].index || this.overlap_details[v.id].index === 0) {\n            //         a.push(this.overlap_details[v.id].index);\n            //     }\n            //     return a;\n            // }, []);\n            // if (indexes.length > 0) {\n            //     for (let n = 0; n < count; n++) {\n            //         if (!indexes.find(i => i === n)) { index = n; }\n            //     }\n            // }\n            this.overlap_details[bkn.id] = { index: Math.max(0, index), total: count };\n        }\n    }\n\n    /**\n     * Check whether the space column is with the view of the\n     */\n    private checkInView() {\n        if (this.view && this.view.nativeElement) {\n            const el = this.view.nativeElement;\n            this.in_view = el.offsetLeft + this.scroll >= -240 && el.offsetLeft + this.scroll <= window.innerWidth;\n            this.inView.emit(this.in_view);\n        }\n    }\n\n    /**\n     * Initialise drag events\n     */\n    public initDrag() {\n        this.box = this.view.nativeElement.getBoundingClientRect();\n        console.log('Drag Start');\n        this.dragging.emit(true);\n    }\n\n    /**\n     * Cleanup after drag\n     */\n    public endDrag() {\n        this.timeout('end_drag', () => this.top = 0, 10);\n        console.log('Drag End');\n        this.dragging.emit(false);\n    }\n\n    /**\n     * Update top position of the dragged event placeholder\n     * @param booking Booking being dragged\n     * @param event Drag event\n     */\n    public updateDragTop(event: CdkDragMove<IBooking>) {\n        if (event.delta.y) {\n            const y = event.pointerPosition.y;\n            const top = (y - this.box.top - this.scroll_top) / this.box.height;\n            const top_minutes = (Math.round((top * 24 * 60) / 15) * 15) / 60;\n            this.top = (top_minutes / 24) * 100;\n        }\n    }\n\n    /**\n     * Handle drop event\n     * @param event\n     */\n    public drop(event: CdkDragDrop<{ top: number; list: IBooking[]}>) {\n        const id = event.item.element.nativeElement.id;\n        const booking = event.previousContainer.data.list.find(i => i.id === id);\n        if (!booking) {\n            return;\n        }\n        const old_state = booking.state;\n        const top = event.previousContainer.data.top;\n        const new_start = Math.round(((top || 0) / 100) * 24 * 60);\n        const old_date = dayjs(booking.date);\n        const date = old_date.startOf('d').minute(new_start);\n        const now = dayjs().startOf('m');\n        // Prevent moving event into past\n        if (now.isAfter(date, 'm')) {\n            return this._service.error('Meetings cannot be moved into the past');\n        }\n        // Check for collisions\n        booking.state = 'loading';\n        this.override_state = booking.icaluid;\n        let room = booking.room;\n        let message = `Update ${booking.organiser.name}'s meeting in \"${(booking.room || ({} as any)).name}\" from ${old_date.format('h:mm A')} to ${date.format('h:mm A')}`;\n        let success = `Successfully updated meeting time from ${old_date.format('h:mm A')} to ${date.format('h:mm A')}`;\n        let new_booking: any = { ...booking, old_date: booking.date, date: date.valueOf() };\n        if (event.container !== event.previousContainer) { // Same room\n            room = this._service.Rooms.item(event.container.id.replace('space-col-', ''));\n            new_booking.from_room = booking.room.email;\n            message = `Move ${booking.organiser.name}'s meeting in \"${(booking.room || ({} as any)).name}\" to \"${room.name}\" at ${date.format('h:mm A')}`;\n            success = `Successfully moved booking to \"${room.name}\" at ${date.format('h:mm A')}`;\n        }\n        // Check if booking has a change\n        if (room === booking.room && date.isSame(old_date, 'm')) {\n            booking.state = old_state;\n            this.override_state = null;\n            return;\n        }\n        const room_list = [room, ...booking.room_list.filter(i => i.id !== booking.room.id)];\n        // Check if booking is already in the room\n        const room_count = room_list.reduce((a, v) => a.add(v.id), new Set()).size;\n        if (room_count < room_list.length) {\n            booking.state = old_state;\n            this.override_state = null;\n            return this._service.error('The meeting is already in this room');\n        }\n        new_booking.room = room_list;\n        this.checkCollisions(room_list, date.valueOf(), booking.duration, booking.icaluid).then(() => {\n            this.moveBooking(message, new_booking).then((bkn) => {\n                this._service.Rooms.removeFromTimeline(booking.room.id, booking.id);\n                this._service.Rooms.addToTimeline(bkn);\n                this.override_state = null;\n                this._service.success(success);\n            }, (err) => {\n                booking.state = old_state;\n                this.override_state = null;\n                if (err !== 'User cancelled') {\n                    this._service.error(`Error: ${err}`);\n                }\n            });\n        }, () => {\n            booking.state = old_state;\n            this.override_state = null;\n            this._service.error('Updated meeting time clashes with another');\n        });\n    }\n\n    /**\n     * Check if there are any booking collisions with the new booking time\n     * @param spaces\n     * @param date\n     * @param duration\n     */\n    private checkCollisions(spaces: IRoom[], date: number, duration: number, ignore?: string) {\n        return new Promise((resolve, reject) => {\n            this._service.Rooms.available({\n                room_ids: spaces.map(i => i.id).join(','),\n                date,\n                duration,\n                ignore,\n                hide_bookings: true\n            }).then((list) => {\n                list.length === spaces.length ? resolve() : reject();\n            }, () => reject());\n        });\n    }\n\n    /**\n     * Update booking\n     * @param confirm_msg\n     * @param new_booking\n     */\n    private moveBooking(confirm_msg: string, new_booking: { [key: string]: any }): Promise<IBooking> {\n        return new Promise((resolve, reject) => {\n            this._service.confirm({\n                title: 'Update meeting',\n                message: confirm_msg,\n                icon: 'event_available',\n                accept: 'Ok',\n                cancel: true\n            }, (event) => {\n                if (event.type === 'Accept') {\n                    this._service.Bookings.updateItem(new_booking.id, new_booking)\n                        .then((bkn: IBooking) => resolve(bkn), (err) => reject(err));\n                } else {\n                    reject('User cancelled');\n                }\n                event.close();\n            })\n        });\n    }\n}\n"],"sourceRoot":"webpack:///"}