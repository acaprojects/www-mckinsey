{"version":3,"sources":["./src/app/shell/day-view/approvals-view/approvals-view.component.html","./src/app/shell/day-view/approvals-view/approvals-view.component.ts","./src/app/shell/day-view/approvals-view/event/event.component.html","./src/app/shell/day-view/approvals-view/event/event.component.ts","./src/app/shell/day-view/day-view.component.html","./src/app/shell/day-view/day-view.component.ts","./src/app/shell/day-view/day-view.module.ts","./src/app/shell/day-view/space/event/event.component.html","./src/app/shell/day-view/space/event/event.component.ts","./src/app/shell/day-view/space/space.component.html","./src/app/shell/day-view/space/space.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mHAOQ,wLAAqH,YAArC;;wBAAoC;MAApH,weAAqH,2BAApD,kBAAc,oBAA/E,YAAqH,EAApD,SAAc;mHANnF,2IAAuE,KACnE,wIAAkB,KACd,uIAAiB,KACjB,2IAAqB,gFAAkB,MACvC,uIAAiB,KAErB,kgBAAqH,iDAApG,+CAA+C,YAAhE,YAAqH,EAApG,oBAA+C,mDAHvC,yDAAkB;mHAK/C,8IAAwC,KACpC,kJAA4B,KACxB,wIAAkB,KACd,goBAA4B,yBAAnB,6BAAkB,EAA3B,YAA4B,EAAnB,SAAkB;mHAMvC,kJAA6C,KACzC,wIAAkB,KACd,gJAA0B,kFAAK,MAEnC,wIAAkB,yGAA4B;mHAJlD,sZAA6C,iIAAjB,oBAAgB,UAA5C,YAA6C,EAAjB,SAAgB;mHAlBhD,kJAA4B,KACxB,ibAAuE,IAQvE,sZAAwC,IAQ5C,uIAA0B,kDAhBD,2HAAiD,GAAtE,YAAuE,EAAlD,oBAAiD,GAQ9C,mBAAe,UAAvC,YAAwC,EAAhB,SAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTwC;AACZ;AACZ;AAG5B;AAE/B;IAKmD,iDAAa;IA0B5D,uCAAoB,QAAoB;QAAxC,YACI,iBAAO,SACV;QAFmB,cAAQ,GAAR,QAAQ,CAAY;QAvBxC,iDAAiD;QAC1C,YAAM,GAAe,EAAE,CAAC;QAC/B,oDAAoD;QAC7C,gBAAU,GAAa,EAAE,CAAC;;IAsBjC,CAAC;IAfD,sBAAW,uDAAY;QADvB,wCAAwC;aACxC;YACI,IAAM,GAAG,GAAG,kCAAK,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YACjC,IAAM,IAAI,GAAG,kCAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAC3C,IAAI,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE;gBACvB,OAAO,OAAO,CAAC;aAClB;iBAAM,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE;gBAClC,OAAO,UAAU,CAAC;aACrB;iBAAM,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE;gBAClC,OAAO,WAAW,CAAC;aACtB;YACD,OAAO,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QACtC,CAAC;;;OAAA;IAMD,gDAAQ,GAAR;QAAA,iBAcC;QAbG,yEAAyE;QACzE,6BAA6B;QAC7B,gFAAgF;QAChF,QAAQ;QACR,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,eAAK;YAClE,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,EAAN,CAAM,CAAC,CAAC;YACjI,KAAI,CAAC,eAAe,EAAE,CAAC;YACvB,KAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,yBAAyB;YACzB,4EAA4E;QAChF,CAAC,CAAC,CAAC,CAAC,CAAC;QACL,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAAE,cAAM,YAAI,CAAC,iBAAiB,EAAE,EAAxB,CAAwB,EAAE,EAAE,GAAG,IAAI,CAAC,CAAC;IAChF,CAAC;IAEM,mDAAW,GAAlB,UAAmB,OAAsB;QAAzC,iBAQC;QAPG,IAAI,OAAO,CAAC,IAAI,EAAE;YACd,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;YACjB,yBAAyB;YACzB,4EAA4E;YAC5E,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,QAAQ,CAAC,kBAAkB,EAAE,cAAM,YAAI,CAAC,eAAe,EAAE,EAAtB,CAAsB,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC;SAC7E;IACL,CAAC;IAED;;;;OAIG;IACI,iDAAS,GAAhB,UAAiB,KAAa,EAAE,IAAc;QAC1C,OAAO,IAAI,CAAC,EAAE,IAAI,KAAK,CAAC;IAC5B,CAAC;IAED,kDAAkD;IAC1C,sDAAc,GAAtB;QAAA,iBAiBC;QAhBG,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAChD,IAAM,QAAQ,GAAG,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC;QACnF,IAAM,IAAI,GAAG,kCAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAC3C,IAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC5B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;YACtB,QAAQ;YACR,cAAc,EAAE,IAAI,CAAC,IAAI,EAAE;YAC3B,YAAY,EAAE,GAAG,CAAC,IAAI,EAAE;SAC3B,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;YACd,KAAI,CAAC,UAAU,GAAG,SAAS,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC;YAC3C,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,GAAG,CAAC,OAAO,EAAE,EAAE,KAAI,CAAC,UAAU,CAAC,CAAC;YAClF,SAAS,CAAC,OAAO,CAAC,YAAE,IAAI,YAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,QAAQ,CAAC,EAAtD,CAAsD,CAAC,CAAC;YAChF,KAAI,CAAC,eAAe,EAAE,CAAC;YACvB,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACzB,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;OAEG;IACK,uDAAe,GAAvB;QACI,IAAI,IAAI,CAAC,gBAAgB,EAAE;YAAE,OAAO;SAAE;QACtC,IAAM,IAAI,GAAG,kCAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;QACpD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACjC,IAAM,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,4BAA4B,CAAC,IAAI,EAAE,CAAC;QAC3E,YAAY,CAAC,kCAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QACzE,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,4BAA4B,EAAE,YAAY,CAAC,CAAC;IAClE,CAAC;IAEO,+CAAO,GAAf,UAAgB,IAAY;;QACxB,IAAM,MAAM,GAAe,EAAE,CAAC;;YAC9B,KAAiB,sBAAI,CAAC,UAAU,6CAAE;gBAA7B,IAAM,EAAE;gBACT,IAAM,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;gBACxC,IAAI,EAAE,EAAE;oBACJ,IAAM,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;;wBACzC,KAAkB,iDAAQ,4FAAE;4BAAvB,IAAM,GAAG;4BACV,IAAI,GAAG,CAAC,IAAI,KAAK,WAAW,IAAI,GAAG,CAAC,KAAK,KAAK,WAAW,EAAE;gCACvD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;6BACpB;yBACJ;;;;;;;;;iBACJ;aACJ;;;;;;;;;QACD,OAAO,MAAM,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,QAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,EAAf,CAAe,CAAC,CAAC;IAClD,CAAC;IAEO,yDAAiB,GAAzB;QAAA,iBAoBC;QAnBG,IAAM,KAAK,GAAG,kCAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAC5C,IAAM,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;QAC7B,IAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAC7C,IAAM,QAAQ,GAAG,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;QACpF,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,KAAK,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;QACvD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;YACtB,QAAQ;YACR,cAAc,EAAE,KAAK,CAAC,IAAI,EAAE;YAC5B,YAAY,EAAE,GAAG,CAAC,IAAI,EAAE;SAC3B,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;YACd,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE,GAAG,CAAC,OAAO,EAAE,EAAE,SAAS,CAAC,GAAG,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,EAAJ,CAAI,CAAC,CAAC,CAAC;YAC5F,SAAS,CAAC,OAAO,CAAC,YAAE,IAAI,YAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,QAAQ,CAAC,EAAtD,CAAsD,CAAC,CAAC;YAChF,IAAM,YAAY,GAAG,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,4BAA4B,CAAC,IAAI,EAAE,CAAC;YAC3E,KAAK,IAAI,IAAI,GAAG,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,EAAE;gBACrE,IAAM,MAAM,GAAG,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC,CAAC;gBACxD,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC;aAC3D;YACD,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,4BAA4B,EAAE,YAAY,CAAC,CAAC;QAClE,CAAC,CAAC;IACN,CAAC;IACL,oCAAC;AAAD,CAAC,CAtIkD,4EAAa,GAsI/D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iHC7GW,0IAAiH,KAC7G,yHAAO,uFAAU,MACjB,0IAAmB,KACf,wIAAkB,gFAA2B,MAC7C,4IAAqB,KACjB,wJAA0F,KACtF,0pBAA+D,IAC3D,8IAA0B,kFAAK,MAGvC,yJAAuF,KACnF,4pBAA+D,IAC3D,8IAA0B,iFAAI,mDANR,4DAAoC,yBAAzD,6BAAoB,EAAzB,YAA+D,EAArC,SAAoC,EAAzD,SAAoB,GAKC,4DAAoC,yBAAzD,6BAAoB,EAAzB,aAA+D,EAArC,SAAoC,EAAzD,SAAoB,mDARf,0GAA2B,GAEtC,wEAA2C,0BAAC,4DAA0C,yBAAzF,YAA0F,EAAvF,SAA2C,EAAC,SAA0C,GAKtF,qEAAwC,0BAAC,4DAA0C,yBAAtF,aAAuF,EAApF,SAAwC,EAAC,SAA0C;iHAW1F,4IAA2D,mLAAe;iHAWlF,yIAAuC,KACnC,yHAAO,mFAAM,MACb,0JAA0D,IAAvC,+SAAsC,KAAzD,YAA0D,EAAvC,SAAsC;iHArDjE,2JAA4C,KACxC,0IAAmB,KACf,yHAAO,kFAAK,MACZ,0IAAmB,KACf,wIAAkB,gFAA2B,MAC7C,4IAAqB,KACjB,wJAA0F,KACtF,2pBAA+D,IAC3D,8IAA0B,kFAAK,MAGvC,yJAAuF,KACnF,4pBAA+D,IAC3D,8IAA0B,iFAAI,MAMlD,qZAAiH,IAkBjH,oJAA6B,KACzB,0HAAO,uFAAU,MACjB,0IAAmB,KACf,8dAA2D,IAGnE,0IAAmB,KACf,0HAAO,yFAAY,MACnB,0IAAmB,iFAAc,MAErC,0IAAmB,KACf,0HAAO,sFAAS,MAChB,0IAAmB,iFAAoD,MAE3E,qZAAuC,iDA5CG,4DAAoC,yBAAzD,6BAAoB,EAAzB,aAA+D,EAArC,SAAoC,EAAzD,SAAoB,GAKC,4DAAoC,yBAAzD,6BAAoB,EAAzB,aAA+D,EAArC,SAAoC,EAAzD,SAAoB,GAOtB,oGAA6F,0BAAhH,aAAiH,EAA9F,UAA6F,GAqBlF,oBAAoC,kBAA1D,aAA2D,EAArC,UAAoC,GAW/C,oBAAmB,cAAtC,aAAuC,EAApB,UAAmB,mDAnDN,yBAAO,EAA3C,YAA4C,EAAR,SAAO,GAIb,0GAA2B,GAEtC,wEAA2C,0BAAC,4DAA0C,yBAAzF,YAA0F,EAAvF,SAA2C,EAAC,SAA0C,GAKtF,qEAAwC,0BAAC,4DAA0C,yBAAtF,aAAuF,EAApF,SAAwC,EAAC,SAA0C,GAkC3E,wDAAc,GAId,gGAAoD;iHAgBnF,8IAAwC,KACpC,kJAA4B,KACxB,wIAAkB,KACd,goBAA4B,IAEhC,wIAAkB,kGAAqB,2BAF1B,6BAAkB,EAA3B,YAA4B,EAAnB,SAAkB;iHAtF3C,mKAAqE,KACjE,0IAAoB,KAChB,0IAAoB,KAChB,khBAAiC,IAErC,2IAAqB,uFAGrB,MAEJ,wIAAkB,KACd,2IAAqB,KACjB,uIAAiB,KACjB;;;;;;;;;;;wBAAkD;MAAhC;;wBAA+B;MAAjD,iMAAkD,MAC9C,iJAA0B,gGAA0C,MAExE,wIAAiB,KAErB,qZAA4C,IAyDhD,2IAAoB,KAChB;;;;;;;;;;;wBAA4E;MAApE;;wBAAyB;MAAjC,iMAA4E,0FAE5E,MACA;;;;;;;;;;;wBAAkF;MAA1E;;wBAA0B;MAAlC,iMAAkF,2FAElF,MAEJ,qZAAwC,iDAhFxB,mBAAwB,kBAAhC,YAAiC,EAAzB,SAAwB,GAed,mBAAa,QAAnC,aAA4C,EAAtB,SAAa,GAiEf,oBAAe,UAAvC,aAAwC,EAAhB,UAAe,mDAnFD,mBAA0B,WAApE,YAAqE,EAA3B,SAA0B,GAKvC,oQAGrB,GAMkC,qEAA0C,GA8D1C,2CAAyC,GAA3E,aAA4E,EAA1C,SAAyC,GAAC,oFAE5E,GACmC,gDAA8C,GAAjF,aAAkF,EAA/C,SAA8C,GAAC,wFAElF;qTAjFR,oZAAqE,iDAAzC,mBAAa,QAAzC,YAAqE,EAAzC,SAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA8B;AAIT;AACY;AAE1E,IAAM,MAAM,GAA6B,EAAE,CAAC;AAE5C;IAWiD,+CAAa;IAiC1D,qCAAoB,QAAoB;QAAxC,YACI,iBAAO,SACV;QAFmB,cAAQ,GAAR,QAAQ,CAAY;QA9BxC,sCAAsC;QAC5B,YAAM,GAAG,IAAI,0DAAY,EAAW,CAAC;;IA+B/C,CAAC;IAxBD,sBAAW,iDAAQ;QADnB,sDAAsD;aACtD;YACI,IAAI,IAAI,CAAC,KAAK,EAAE;gBACZ,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,EAAE;oBAC3D,OAAO,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;iBACrC;aACJ;YACD,OAAO,WAAW,CAAC;QACvB,CAAC;;;OAAA;IAGD,sBAAW,oDAAW;QADtB,iCAAiC;aACjC;YACI,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;gBAChC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,IAAI,KAAK,aAAa,EAAxB,CAAwB,CAAC,IAAI,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC;aAC5F;YACD,OAAO,EAAE,CAAC;QACd,CAAC;;;OAAA;IAGD,sBAAW,qDAAY;QADvB,gDAAgD;aAChD;YACI,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAClH,CAAC;;;OAAA;IAMD;;OAEG;IACI,4CAAM,GAAb;QAAA,iBAoCC;QAnCG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE;YAAE,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,EAAS,CAAC;SAAE;QAChE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;YAAE,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;SAAE;QACrD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;YAClB,KAAK,EAAE,iBAAiB;YACxB,OAAO,EAAE,cAAW,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,yBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,EAAS,CAAC,CAAC,IAAI,cAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,aAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,YAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAM;YAC7N,IAAI,EAAE,iBAAiB;YACvB,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,IAAI;SACf,EAAE,UAAC,KAAK;YACL,IAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE;gBACzB,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAI,CAAC,KAAK,CAAC,EAAE,EAAE;oBACzC,OAAO,EAAE,EAAE;oBACX,OAAO,EAAE,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAE,KAAI,CAAC,KAAa,CAAC,OAAO;iBAC9E,CAAC,CAAC,IAAI,CACH;oBACI,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;oBAC3C,KAAI,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;oBAC1B,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,kBAAkB,CAAC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;oBAC1E,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;oBAC9C,MAAM,CAAC,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC;oBACzC,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;oBAC5C,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;oBACrB,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC5B,CAAC,EACD;oBACI,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACxB,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC;oBAChD,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACzB,CAAC,CACJ,CAAC;aACL;YACD,KAAK,CAAC,KAAK,EAAE,CAAC;QAClB,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;OAEG;IACI,6CAAO,GAAd;QAAA,iBA0CC;QAzCG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE;YAAE,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,EAAS,CAAC;SAAE;QAChE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;YAAE,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE,CAAC;SAAE;QACrD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACvB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;YAClB,KAAK,EAAE,iBAAiB;YACxB,OAAO,EAAE,cAAW,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,yBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,EAAS,CAAC,CAAC,IAAI,cAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,aAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,YAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAM;YAC7N,IAAI,EAAE,YAAY;YAClB,MAAM,EAAE,IAAI;YACZ,MAAM,EAAE,IAAI;SACf,EAAE,UAAC,KAAK;YACL,IAAI,KAAK,CAAC,IAAI,KAAK,QAAQ,EAAE;gBACzB,KAAI,CAAC,OAAO,GAAG,IAAI,CAAC;gBACpB,IAAM,OAAO,GAAa,KAAI,CAAC,KAAK,CAAC;gBACrC,OAAO,CAAC,KAAK,GAAG,SAAS,CAAC;gBAC1B,KAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,EAAE;oBACvC,UAAU,EAAE,OAAO,CAAC,EAAE;oBACtB,SAAS,EAAE,OAAO,CAAC,SAAS,CAAC,KAAK;oBAClC,OAAO,EAAE,OAAO,CAAC,OAAO;oBACxB,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;oBACtC,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,GAAG,EAAE;oBAC5D,OAAO,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAE,OAAe,CAAC,OAAO;iBACrE,CAAC,CAAC,IAAI,CACH;oBACI,KAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,mBAAmB,CAAC,CAAC;oBAC3C,KAAI,CAAC,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC;oBAC/B,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,kBAAkB,CAAC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;oBAC1E,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;oBAC9C,MAAM,CAAC,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,GAAG,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC;oBACzC,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,gBAAgB,EAAE,MAAM,CAAC,CAAC;oBAC5C,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;oBACrB,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC5B,CAAC,EACD;oBACI,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACxB,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC;oBAChD,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACzB,CAAC,CACJ,CAAC;aACL;YACD,KAAK,CAAC,KAAK,EAAE,CAAC;QAClB,CAAC,CAAC,CAAC;IACP,CAAC;IACL,kCAAC;AAAD,CAAC,CA5HgD,4EAAa,GA4H7D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sGC3Ie,6JAAwF,KACpF,2IAAqB,KACjB,wIAAkB,gFAAe,MACjC,wIAAkB,KAEtB,4IAAsB,kGAEtB,iCAP2D,kBAAwB,8BAAvF,YAAwF,EAAzB,SAAwB,GAE7D,kEAAe,GAGf,yKAEtB;sGAIZ,2IAAyC,KACrC,6JAAqD,KACjD,wIAAkB,wFAAW,MAC7B,wIAAkB,wDAFI,mBAA0B,mBAApD,YAAqD,EAA3B,SAA0B;sGAUhD,yIAAoD,KAChD,sKAA2E,gFAAkB,yDAAvE,iEAAoD,gBAA1E,YAA2E,EAArD,SAAoD,GAAC,qEAAkB;sGAMjG,yIAAoD,KAChD,wIAAkB;sGAItB,8JAIC,KACG,6LAA2I,YAA3C;;wBAA0C;MAA1I,6iBAA2I,mDAA3H,mBAAa,OAAC,kBAAc,oBAAC,wBAAuB,eAAC,mBAA0B,cAA/F,YAA2I,EAA3H,SAAa,EAAC,SAAc,EAAC,SAAuB,EAAC,SAA0B,mDAH/F,qDAAmD,GAFvD,YAIC,EAFG,SAAmD;sGAO/D,0JAA0I,IAAnG,uDAAkG,IACrI,wIAAkB,wDADiB,0PAAkG,KAAzI,YAA0I,EAAnG,SAAkG;sGAIrI,6LAAqJ,YAAlD;;wBAAiD;MAApJ,shBAAqJ,mDAAjH,mBAAa,OAAC,mBAAqB,cAAC,mBAA0B,cAAlG,YAAqJ,EAAjH,SAAa,EAAC,SAAqB,EAAC,SAA0B;sGADtG,2IAAyC,KACrC,yYAAqJ,IACrJ,uoBAAuC,iDADvB,mBAAmB,cAAnC,YAAqJ,EAArI,SAAmB,GACV,mBAAa,OAAtC,YAAuC,EAAd,SAAa;qYArDlD,6IAAsB,KAClB,0IAAoB,KAChB,+IAAyB,6IAAkB,iFAAI,MAC/C,wIAAkB,KACd,wJAAsD,KAClD,mdAAwF,IAWhG,0YAAyC,IAQ7C,0IAAkB,KACd,gJAAyB,KACrB,wJAAoD,KAChD,mdAAoD,IAK5D,8NAAuE,YAAhC;;wBAA+B;MAAtE,wBAAuE,KACnE,mKAAgF,KAC5E,mdAAoD,IAIxD,8IAAuB,KACnB,mdAIC,IAKT,0YAA0I,IAG1I,0YAAyC,iDA9CP,mBAAoC,kBAA9D,aAAwF,EAA9D,SAAoC,GAWjD,mBAAmB,cAAxC,aAAyC,EAApB,SAAmB,GAWb,mBAAgC,cAAnD,aAAoD,EAAjC,SAAgC,GAOhC,mBAAgC,cAAnD,aAAoD,EAAjC,SAAgC,GAQ/C,mBAAoC,kBAHxC,aAIC,EADG,SAAoC,GAM1B,mBAAgB,WAAtC,aAA0I,EAApH,SAAgB,GAGjB,mBAAmB,cAAxC,aAAyC,EAApB,SAAmB,mDA/CjB,6CAAkC,GAArD,YAAsD,EAAnC,SAAkC,GAsBlC,4CAAgC,GAAnD,aAAoD,EAAjC,SAAgC,GAO3B,0DAAuD,GAA/E,aAAgF,EAAxD,SAAuD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjCJ;AACtC;AAEmB;AAEZ;AAEzB;AAU/B,IAAM,eAAe,GAAG,EAAE,CAAC;AAE3B;IAKsC,oCAAa;IAgC/C,0BAAoB,QAAoB,EAAU,MAAsB;QAAxE,YACI,iBAAO,SACV;QAFmB,cAAQ,GAAR,QAAQ,CAAY;QAAU,YAAM,GAAN,MAAM,CAAgB;QA/BxE,oCAAoC;QAC7B,iBAAW,GAAiB,KAAI,CAAC,kBAAkB,EAAE,CAAC;QAC7D,sCAAsC;QAC/B,gBAAU,GAAW,CAAC,CAAC;QAC9B,uCAAuC;QAChC,iBAAW,GAAW,CAAC,CAAC;QAC/B,qCAAqC;QAC9B,YAAM,GAAY,EAAE,CAAC;QAC5B,qCAAqC;QAC9B,qBAAe,GAAY,EAAE,CAAC;QACrC,uDAAuD;QAChD,aAAO,GAA8B,EAAE,CAAC;QAS/C,6CAA6C;QACtC,aAAO,GAA8B,EAAE,CAAC;QAK/C,8CAA8C;QACvC,iBAAW,GAAW,CAAC,CAAC;;IAM/B,CAAC;IAED,sBAAW,yCAAW;aAAtB;YACI,IAAM,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;YAC9C,IAAI,GAAG,CAAC,WAAW,EAAE;gBACjB,OAAO,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;aACpD;YACD,OAAO,IAAI,CAAC;QAChB,CAAC;;;OAAA;IAEM,mCAAQ,GAAf;QAAA,iBA8CC;QA7CG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE;YAClE,OAAO,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,cAAM,YAAI,CAAC,QAAQ,EAAE,EAAf,CAAe,CAAC,CAAC;SACtD;QACD,6CAA6C;QAC7C,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,EAAE,UAAC,QAAQ;YACzE,IAAM,OAAO,GAAG,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,QAAQ,CAAC;YAClF,KAAI,CAAC,MAAM,GAAG,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;YAC9D,IAAM,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC;YACrC,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC;gBACvC,QAAC,CAAC,KAAI,CAAC,SAAS,IAAI,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,IAAI,CAAC,CAAC,EAAE,KAAK,WAAW,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,QAAQ;YAApH,CAAoH,CACvH,CAAC;YACF,KAAI,CAAC,cAAc,EAAE,CAAC;YACtB,KAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,cAAM,YAAI,CAAC,cAAc,EAAE,EAArB,CAAqB,EAAE,eAAe,GAAG,IAAI,CAAC,CAAC;QACnF,CAAC,CAAC,CAAC,CAAC;QACJ,4CAA4C;QAC5C,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,EAAE,UAAC,IAAI;YAC5D,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,KAAI,CAAC,QAAQ,GAAG,kCAAK,EAAE,CAAC,MAAM,CAAC,kCAAK,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;YACjD,KAAI,CAAC,cAAc,EAAE,CAAC;YACtB,KAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,cAAM,YAAI,CAAC,cAAc,EAAE,EAArB,CAAqB,EAAE,eAAe,GAAG,IAAI,CAAC,CAAC;QACnF,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,EAAE,UAAC,IAAI;YACtE,KAAI,CAAC,SAAS,GAAG,OAAO,IAAI,KAAK,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC;YACxD,IAAM,WAAW,GAAG,KAAI,CAAC,WAAW,CAAC;YACrC,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC;gBACvC,QAAC,CAAC,KAAI,CAAC,SAAS,IAAI,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,KAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,WAAW,IAAI,CAAC,CAAC,EAAE,KAAK,WAAW,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,QAAQ;YAApH,CAAoH,CACvH,CAAC;QACN,CAAC,CAAC,CAAC,CAAC;QACJ,mCAAmC;QACnC,IAAI,CAAC,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,SAAS,CAAC,UAAC,MAAM;YACxE,IAAI,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;gBAClB,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;aACnC;QACL,CAAC,CAAC,CAAC,CAAC;QACJ,cAAc;QACd,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,cAAM,YAAI,CAAC,UAAU,EAAE,EAAjB,CAAiB,EAAE,EAAE,GAAG,IAAI,CAAC,CAAC;QAC1D,oCAAoC;QACpC,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE,cAAM,YAAI,CAAC,cAAc,EAAE,EAArB,CAAqB,EAAE,eAAe,GAAG,IAAI,CAAC,CAAC;QAC/E,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;YACpB,IAAI,KAAI,CAAC,WAAW,IAAI,KAAI,CAAC,WAAW,CAAC,aAAa,EAAE;gBACpD,KAAI,CAAC,YAAY,CAAC,EAAE,MAAM,EAAE,KAAI,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,CAAC;aACjE;QACL,CAAC,EAAE,IAAI,CAAC;IACZ,CAAC;IAED;;;OAGG;IACI,uCAAY,GAAnB,UAAoB,KAAK;QACrB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC;QACzC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC;IAC/C,CAAC;IAED,sDAAsD;IAC9C,6CAAkB,GAA1B;QACI,IAAM,MAAM,GAAiB,EAAE,CAAC;QAChC,IAAM,IAAI,GAAG,kCAAK,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QAClC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;YACzB,MAAM,CAAC,IAAI,CAAC;gBACR,EAAE,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC;gBAChC,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC;aACzC,CAAC,CAAC;SACN;QACD,OAAO,MAAM,CAAC;IAClB,CAAC;IAED,mCAAmC;IAC3B,qCAAU,GAAlB;QACI,IAAM,IAAI,GAAG,kCAAK,EAAE,CAAC;QACrB,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;QACnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IACzD,CAAC;IAED,wCAAwC;IAChC,yCAAc,GAAtB;QAAA,iBAiCC;QAhCG,IAAM,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,WAAC,IAAI,YAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,KAAK,EAA5B,CAA4B,CAAC,CAAC;QAC5E,IAAI,aAAa,CAAC,MAAM,EAAE;YACtB,aAAa,CAAC,OAAO,CAAC,YAAE,IAAI,YAAI,CAAC,OAAO,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,EAA1B,CAA0B,CAAC,CAAC;YACxD,IAAM,MAAI,GAAG,kCAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAC3C,IAAM,KAAG,GAAG,MAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAC5B,kFAAkF;YAClF,IAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YAC7C,IAAM,QAAQ,GAAG,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAE,CAAC;YAChF,IAAI,IAAI,CAAC,SAAS,EAAE;gBAChB,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;aACjC;YACD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC;gBACtB,YAAY;gBACZ,QAAQ;gBACR,cAAc,EAAE,MAAI,CAAC,IAAI,EAAE;gBAC3B,YAAY,EAAE,KAAG,CAAC,IAAI,EAAE;aAC3B,CAAC,CAAC,IAAI,CAAC,UAAC,SAAS;gBACd,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,MAAI,CAAC,OAAO,EAAE,EAAE,KAAG,CAAC,OAAO,EAAE,2BAA0B,CAAC,CAAC;gBAC3F,SAAS,CAAC,OAAO,CAAC,YAAE;oBAChB,IAAI,KAAI,CAAC,OAAO,EAAE;wBACd,IAAM,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,KAAK,KAAI,CAAC,OAAO,EAArB,CAAqB,CAAC,CAAC;wBAC7D,IAAI,OAAO,EAAE;4BACT,KAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CAAC;yBAC1B;qBACJ;oBACD,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,QAAQ,CAAC,CAAC;gBAC3D,CAAC,CAAC,CAAC;gBACH,OAAO,KAAI,CAAC,OAAO,CAAC;gBACpB,KAAI,CAAC,WAAW,GAAG,kCAAK,EAAE,CAAC,OAAO,EAAE,CAAC;gBACrC,KAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YACtB,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAED;;;OAGG;IACK,+BAAI,GAAZ,UAAa,OAAiB,EAAE,KAAY;QACxC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,WAAC,IAAI,WAAI,EAAJ,CAAI,EAAE,WAAC,IAAI,WAAI,EAAJ,CAAI,CAAC,CAAC;QACvE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;IACxB,CAAC;IACL,uBAAC;AAAD,CAAC,CArKqC,4EAAa,GAqKlD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3LD;AAAA;AAAA;AAAA;AAAsD;AAGE;AAOxD,IAAM,MAAM,GAAY,CAAC,EAAE,IAAI,EAAE,EAAE,EAAE,SAAS,EAAE,oEAAgB,EAAE,CAAC,CAAC;AAEpE;IAAA;IAe4B,CAAC;IAAD,oBAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gHChBb,gJAAwF,qRAExF;gHACA,wqBAA2E,yBAAlE,6BAAkB,EAAC,sBAAY,EAAxC,YAA2E,EAAlE,SAAkB,EAAC,SAAY;gHAqB5C,sJAAgG,KAC5F,yIAAmB,6FAAwC,yDADjB,2DAAiD,IAA/F,YAAgG,EAAlD,SAAiD,GACxE,kEAAwC;gHAE/D,yIAAwC,KACpC,yIAAmB,oFAAO;gHAE9B,yIAAyC,KACrC,yIAAmB,qFAAQ,MAC3B,yIAAmB,yFAAY;gHAK3C;;;;;;;;;;;wBAAsI;MAA7B;;wBAA4B;MAArI,gMAAsI,MAClI,gJAA0B,uFAAU;gHAnD5C,8NAOC,KACG,+KAA+H,KAC/H;;;;;;;;;;;wBAAiJ;MAAxB;;wBAAuB;MAAhJ,gMAAiJ,MAC7I,0IAAoB,KAChB,wIAAkB,gFAAwC,MAC1D,wIAAkB,KACd,mZAAwF,IAGxF,oZAA2E,IAGnF,0IAAkB,KACd,+IAAwB,KAEpB,uJAAmF,mFAEnF,MAEJ,0IAAmB,KAEf,uJAAqD,iFAAiB,MAE1E,0IAAmB,KACf,0IAAmB,oGAInB,MAEJ,oZAAgG,IAGhG,oZAAwC,IAGxC,oZAAyC,IAOjD,oZAAsI,iDArChG,kFAA6D,IAAvF,YAAwF,EAA9D,UAA6D,GAG9C,+CAAiC,GAA1E,aAA2E,EAAlC,UAAiC,GAqB3D,oBAA0B,qBAA7C,aAAgG,EAA7E,UAA0B,GAG1B,oBAAoB,eAAvC,aAAwC,EAArB,UAAoB,GAGpB,oBAAqB,gBAAxC,aAAyC,EAAtB,UAAqB,GAOrB,yEAA6E,+BAAxG,aAAsI,EAA3G,UAA6E,mDA/CxG,8BAAuB,GACvB,+BAAyB,GACzB,gCAA2B,GAC3B,iCAA6B,GANjC,YAOC,EAJG,SAAuB,EACvB,SAAyB,EACzB,SAA2B,EAC3B,SAA6B,GAExB,+DAA+C,IAAC,6CAAiC,GAAC,gDAAuC,GAA9H,YAA+H,EAA1H,SAA+C,EAAC,SAAiC,EAAC,SAAuC,GACzH,+FAAuE,IAAC,8EAA2C,GAAxH,YAAiJ,EAA5I,SAAuE,EAAC,SAA2C,GAE9F,qFAAwC,GAWnC,sGAA+D,oBAAlF,aAAmF,EAAhE,UAA+D,GAAC,sIAEnF,GAImB,iCAAiC,eAApD,aAAqD,EAAlC,UAAiC,GAAC,2DAAiB,GAGnD,gUAInB;gHAnChB,mZAOC,iDALG,mBAAa,QAFjB,YAOC,EALG,SAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFkE;AAGrB;AACY;AAG3C;AAU/B;IAKgD,8CAAa;IAqBzD,oCAAoB,QAAoB;QAAxC,YACI,iBAAO,SACV;QAFmB,cAAQ,GAAR,QAAQ,CAAY;;IAExC,CAAC;IAED,6CAAQ,GAAR,cAAY,CAAC;IAGb,sBAAW,4CAAI;QADf,oBAAoB;aACpB;YACI,IAAI,IAAI,CAAC,KAAK,EAAE;gBACZ,OAAO,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;aACnF;YACD,OAAO,EAAE,CAAC;QACd,CAAC;;;OAAA;IAGD,sBAAW,8CAAM;QADjB,sDAAsD;aACtD;YACI,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;gBAClC,OAAU,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,gBAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAK;aACnE;YACD,OAAO,EAAE,CAAC;QACd,CAAC;;;OAAA;IAGD,sBAAW,gDAAQ;QADnB,wDAAwD;aACxD;YACI,IAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,kBAAkB,IAAI,EAAE,CAAC;YACrD,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzD,CAAC;;;OAAA;IAGD,sBAAW,oDAAY;QADvB,gDAAgD;aAChD;YACI,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAClH,CAAC;;;OAAA;IAED,2BAA2B;IACpB,yCAAI,GAAX;QACI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAC,CAAM;QAChE,CAAC,EAAE,WAAC,IAAI,WAAI,EAAJ,CAAI,CAAC,CAAC;IAClB,CAAC;IAEM,gDAAW,GAAlB,UAAmB,OAAsB;QACrC,IAAI,OAAO,CAAC,KAAK,IAAI,OAAO,CAAC,OAAO,EAAE;YAClC,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC5B;IACL,CAAC;IAED;;OAEG;IACI,8CAAS,GAAhB;QACI,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YACnC,IAAI,cAAc,EAAE;gBAChB,cAAc,CAAC,OAAO,CAAC,sBAAsB,EAAE,IAAI,CAAC,SAAS,cAAM,IAAI,CAAC,KAAK,IAAE,IAAI,eAAO,IAAI,CAAC,KAAK,CAAC,IAAI,IAAE,QAAQ,EAAE,EAAE,OAAK,CAAC;aAChI;YACD,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,WAAW,EAAE,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC;SAC1E;IACL,CAAC;IAED,6BAA6B;IACrB,sDAAiB,GAAzB;QACI,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,IAAM,OAAO,GAAG,IAAI,CAAC,OAAO,IAAI,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;YACvD,IAAM,IAAI,GAAG,kCAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YACjD,IAAM,KAAK,GAAG,IAAI,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,CAAC;YAC/C,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;gBACpB,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;gBACb,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;aACrB;iBAAM;gBACH,IAAI,CAAC,GAAG,GAAG,CAAC,KAAK,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC;gBAC9B,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,GAAG,CAAC;aACzD;YACD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,GAAG,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;YACpD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,GAAG,CAAC,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;YACvF,IAAI,CAAC,YAAY,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;YAC5F,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC;SAC1G;IACL,CAAC;IACL,iCAAC;AAAD,CAAC,CAjG+C,4EAAa,GAiG5D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2GCrHO,qnBAKC,iDAFG,kBAAc,oBADd,mBAAe,QAEf,sCAAoC,wBAJxC,YAKC,EAFG,SAAc,EADd,SAAe,EAEf,SAAoC;2GAL5C,wHAAuC,KACnC,0fAKC,iIAJG,+CAA+C,YADnD,YAKC,EAJG,oBAA+C;0LAH3D,kKAAiC,KAC7B,8YAAuC,iDAAzB,qCAAwB,GAAtC,YAAuC,EAAzB,SAAwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACD8E;AAKjD;AAExC;AAC4B;AAE3D;IAK2C,yCAAa;IAuBpD,+BAAoB,QAAoB;QAAxC,YACI,iBAAO,SACV;QAFmB,cAAQ,GAAR,QAAQ,CAAY;QAZxC,sDAAsD;QACrC,kBAAY,GAAG,IAAI,0DAAY,EAAW,CAAC;QAC5D,8CAA8C;QACvC,qBAAe,GAAoC,EAAE,CAAC;QAG7D,+DAA+D;QACxD,YAAM,GAA8B,EAAE,CAAC;;IAO9C,CAAC;IAGD,sBAAW,yCAAM;QADjB,4CAA4C;aAC5C;YAAA,iBAYC;YAXG,IAAM,IAAI,GAAG,kCAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,aAAa,CAAC,CAAC;YACpD,IAAI,IAAI,CAAC,KAAK,EAAE;gBACZ,IAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;gBACjD,IAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,WAAC;oBAC1B,OAAO,CAAC,CAAC,KAAK,KAAK,WAAW;wBAC1B,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,aAAa,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,SAAS,CAAC,IAAI,KAAI,CAAC,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,KAAK,KAAK;wBAC1F,CAAC,CAAC,CAAC,CAAC,KAAI,CAAC,aAAa,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,SAAS,CAAC,IAAI,KAAI,CAAC,MAAM,CAAC,QAAQ,KAAK,KAAK;gBAC3F,CAAC,CAAC,CAAC;gBACH,OAAO,IAAI,CAAC;aACf;YACD,OAAO,EAAE,CAAC;QACd,CAAC;;;OAAA;IAEM,wCAAQ,GAAf;QAAA,iBAOC;QANG,IAAI,CAAC,YAAY,CAAC,WAAW,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,eAAe,EAAE,UAAC,KAAK;YACvE,KAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC/B,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,kBAAkB,EAAE,UAAC,KAAK;YACvE,KAAI,CAAC,MAAM,GAAG,KAAK,IAAI,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC,CAAC;IACR,CAAC;IAEM,2CAAW,GAAlB,UAAmB,OAAsB;QAAzC,iBAOC;QANG,IAAI,OAAO,CAAC,MAAM,EAAE;YAChB,IAAI,CAAC,WAAW,EAAE,CAAC;SACtB;QACD,IAAI,OAAO,CAAC,WAAW,EAAE;YACrB,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE,cAAM,YAAI,CAAC,iBAAiB,EAAE,EAAxB,CAAwB,EAAE,IAAI,CAAC,CAAC;SACzE;IACL,CAAC;IAED;;;;OAIG;IACI,yCAAS,GAAhB,UAAiB,KAAa,EAAE,IAAc;QAC1C,OAAO,IAAI,CAAC,EAAE,IAAI,KAAK,CAAC;IAC5B,CAAC;IAED;;OAEG;IACK,iDAAiB,GAAzB;;QAAA,iBAqCC;QApCG,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,QAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,IAAI,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE,CAAC,EAA1F,CAA0F,CAAC,CAAC;QACtI,MAAM,CAAC,OAAO,CAAC,WAAC,IAAI,YAAI,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,EAAnD,CAAmD,CAAC,CAAC;gCAC9D,GAAG;;YACV,IAAM,SAAS,GAAG,kCAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YAC/C,IAAM,OAAO,GAAG,kCAAK,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;YACrE,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,IAAI,KAAK,GAAG,CAAC,CAAC;YACd,IAAM,UAAU,GAAe,EAAE,CAAC;oCACvB,GAAG;gBACV,IAAI,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,EAAE;oBACnB,IAAM,SAAS,GAAG,kCAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBAC/C,IAAM,OAAO,GAAG,kCAAK,CAAC,SAAS,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;oBACrE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,SAAS,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;wBAC7G,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE;wBACvG,KAAK,EAAE,CAAC;wBACR,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;wBACrB,IAAI,MAAM,CAAC,SAAS,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,EAAf,CAAe,CAAC,GAAG,MAAM,CAAC,SAAS,CAAC,WAAC,IAAI,QAAC,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,EAAf,CAAe,CAAC,EAAE;4BACjF,KAAK,EAAE,CAAC;yBACX;qBACJ;iBACJ;;;gBAZL,KAAkB,6CAAM;oBAAnB,IAAM,GAAG;4BAAH,GAAG;iBAab;;;;;;;;;YACD,mJAAmJ;YACnJ,gDAAgD;YAChD,wFAAwF;YACxF,oDAAoD;YACpD,QAAQ;YACR,gBAAgB;YAChB,UAAU;YACV,4BAA4B;YAC5B,wCAAwC;YACxC,0DAA0D;YAC1D,QAAQ;YACR,IAAI;YACJ,OAAK,eAAe,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC;;;;YAhC/E,KAAkB,8BAAM;gBAAnB,IAAM,GAAG;wBAAH,GAAG;aAiCb;;;;;;;;;IACL,CAAC;IAED;;OAEG;IACK,2CAAW,GAAnB;QACI,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YACtC,IAAM,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC;YACnC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,IAAI,CAAC,GAAG,IAAI,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,UAAU,CAAC;YACtG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;SACvC;IACL,CAAC;IACL,4BAAC;AAAD,CAAC,CAzH0C,4EAAa,GAyHvD","file":"shell-day-view-day-view-module-ngfactory-es5.js","sourcesContent":["<div class=\"approvals-view\">\n    <div class=\"content\" *ngIf=\"events && events.length; else empty_state\">\n        <div class=\"date\">\n            <div class=\"bar\"></div>\n            <div class=\"display\">{{ date_display }}</div>\n            <div class=\"bar\"></div>\n        </div>\n        <approvals-event *ngFor=\"let item of events; trackBy: trackByFn\" [event]=\"item\" (acting)=\"waiting_on_event = $event\"></approvals-event>\n    </div>\n    <div class=\"load-state\" *ngIf=\"loading\">\n        <div class=\"no-item center\">\n            <div class=\"icon\">\n                <spinner type=\"circle-ring\"></spinner>\n            </div>\n        </div>\n    </div>\n</div>\n<ng-template #empty_state>\n    <div class=\"no-item center\" *ngIf=\"!loading\">\n        <div class=\"icon\">\n            <i class=\"material-icons\">close</i>\n        </div>\n        <div class=\"text\">No meetings pending approval</div>\n    </div>\n</ng-template>","import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { BaseComponent } from '../../../shared/globals/base.component';\nimport { AppService } from '../../../services/app.service';\nimport { IBooking } from '../../../services/data/bookings.service';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'day-view-approvals-view',\n    templateUrl: './approvals-view.component.html',\n    styleUrls: ['./approvals-view.component.scss']\n})\nexport class DayViewApprovalsViewComponent extends BaseComponent implements OnInit, OnChanges {\n    /** Timestamp of the active date */\n    @Input() public date: number;\n    /** List of bookings that are pending approval */\n    public events: IBooking[] = [];\n    /** List of spaces to check for pending approvals */\n    public space_list: string[] = [];\n    /** Whether the pending bookings are being loaded */\n    public loading: boolean;\n    /** Whether an event action is in progress */\n    public waiting_on_event: boolean;\n\n    /** Display value for the active date */\n    public get date_display(): string {\n        const now = dayjs().startOf('d');\n        const date = dayjs(this.date).startOf('d');\n        if (now.isSame(date, 'd')) {\n            return 'Today';\n        } else if (date.diff(now, 'd') === 1) {\n            return 'Tomorrow';\n        } else if (now.diff(date, 'd') === 1) {\n            return 'Yesterday';\n        }\n        return date.format('DD MMM YYYY');\n    }\n\n    constructor(private _service: AppService) {\n        super();\n    }\n\n    ngOnInit() {\n        // this.subscription('building', this._service.Buildings.listen((bld => {\n        //     this.updateMeetings();\n        //     this.interval('update_meetings', () => this.updateMeetings(), 60 * 1000);\n        // })));\n        this.subscription('building', this._service.listen('APP.level', (level => {\n            this.space_list = this._service.Rooms.list(true, [level === -1 ? this._service.Buildings.current().id : level]).map(i => i.name);\n            this.processMeetings();\n            this.getMonthlyPending();\n            // this.updateMeetings();\n            // this.interval('update_meetings', () => this.updateMeetings(), 60 * 1000);\n        })));\n        this.getMonthlyPending();\n        this.interval('monthly_pending', () => this.getMonthlyPending(), 60 * 1000);\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.date) {\n            this.events = [];\n            // this.updateMeetings();\n            // this.interval('update_meetings', () => this.updateMeetings(), 60 * 1000);\n            this.processMeetings();\n            this.interval('process_meetings', () => this.processMeetings(), 1 * 1000);\n        }\n    }\n\n    /**\n     * Track by function for ngFor optimisation\n     * @param index Index of the item\n     * @param item Data associated with the item at the given index\n     */\n    public trackByFn(index: number, item: IBooking) {\n        return item.id || index;\n    }\n\n    /** Update listing of meetings pending approval */\n    private updateMeetings() {\n        const level_id = this._service.get('APP.level');\n        const zone_ids = level_id === -1 ? this._service.Buildings.current().id : level_id;\n        const time = dayjs(this.date).startOf('d');\n        const end = time.endOf('d');\n        this.loading = true;\n        this._service.Rooms.query({\n            zone_ids,\n            available_from: time.unix(),\n            available_to: end.unix()\n        }).then((room_list) => {\n            this.space_list = room_list.map(i => i.id);\n            this._service.Rooms.clearTimeline(time.valueOf(), end.valueOf(), this.space_list);\n            room_list.forEach(rm => this._service.Rooms.updateTimeline(rm.id, rm.bookings));\n            this.processMeetings();\n            this.loading = false;\n        });\n    }\n\n    /**\n     * Update pending meetings from list of rooms\n     */\n    private processMeetings() {\n        if (this.waiting_on_event) { return; }\n        const date = dayjs(this.date).format('DD MMM YYYY');\n        this.events = this.process(date);\n        const pending_list = this._service.get('CONCIERGE.pending_bookings') || {};\n        pending_list[dayjs(this.date).format('YYYY-MM-DD')] = this.events.length;\n        this._service.set('CONCIERGE.pending_bookings', pending_list);\n    }\n\n    private process(date: string) {\n        const events: IBooking[] = [];\n        for (const id of this.space_list) {\n            const rm = this._service.Rooms.item(id);\n            if (rm) {\n                const bookings = rm.timeline[date] || [];\n                for (const bkn of bookings) {\n                    if (bkn.type === 'tentative' || bkn.state === 'tentative') {\n                        events.push(bkn);\n                    }\n                }\n            }\n        }\n        return events.sort((a, b) => a.date - b.date);\n    }\n\n    private getMonthlyPending() {\n        const start = dayjs(this.date).startOf('M');\n        const end = start.endOf('M');\n        const level = this._service.get('APP.level');\n        const zone_ids = (level === -1 ? null : level) || this._service.Buildings.current();\n        console.log('Get Monthly:', start.format('MMMM YYYY'));\n        this._service.Rooms.query({\n            zone_ids,\n            available_from: start.unix(),\n            available_to: end.unix()\n        }).then((room_list) => {\n            this._service.Rooms.clearTimeline(start.valueOf(), end.valueOf(), room_list.map(i => i.id));\n            room_list.forEach(rm => this._service.Rooms.updateTimeline(rm.id, rm.bookings));\n            const pending_list = this._service.get('CONCIERGE.pending_bookings') || {};\n            for (let date = start; date.isBefore(end, 'm'); date = date.add(1, 'd')) {\n                const events = this.process(date.format('DD MMM YYYY'));\n                pending_list[date.format('YYYY-MM-DD')] = events.length;\n            }\n            this._service.set('CONCIERGE.pending_bookings', pending_list);\n        })\n    }\n}\n","<div class=\"approval-event\" *ngIf=\"event\" [attr.event-id]=\"event.id\">\n    <div class=\"header\">\n        <div class=\"avatar\">\n            <avatar [user]=\"event.organiser\"></avatar>\n        </div>\n        <div class=\"details\">\n            {{ event.display?.start + ' - ' + event.display?.end }}\n            {{ event.room ? 'in ' + event.room.name : '' }}\n        </div>\n    </div>\n    <div class=\"body\">\n        <div class=\"control\">\n            <div class=\"bar\"></div>\n            <div class=\"icon\" (touchrelease)=\"shown = !shown\">\n                <i class=\"material-icons\">keyboard_arrow_{{ shown ? 'up' : 'down' }}</i>\n            </div>\n            <div class=\"bar\"></div>\n        </div>\n        <div class=\"contents\" *ngIf=\"shown\" [@show]>\n            <div class=\"field\">\n                <label>Host:</label>\n                <div class=\"value\">\n                    <div class=\"text\">{{ event.organiser?.name }}</div>\n                    <div class=\"actions\">\n                        <a [href]=\"'mailto:' + event.organiser?.email\" [class.no-event]=\"!event.organiser?.email\">\n                            <btn format=\"mini-action\" [disabled]=\"!event.organiser?.email\">\n                                <i class=\"material-icons\">email</i>\n                            </btn>\n                        </a>\n                        <a [href]=\"'tel:' + event.organiser?.phone\" [class.no-event]=\"!event.organiser?.phone\">\n                            <btn format=\"mini-action\" [disabled]=\"!event.organiser?.phone\">\n                                <i class=\"material-icons\">call</i>\n                            </btn>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class=\"field\" *ngIf=\"event.booked_by && event.organiser && event.organiser.email !== event.booked_by.email\">\n                <label>Booked by:</label>\n                <div class=\"value\">\n                    <div class=\"text\">{{ event.booked_by?.name }}</div>\n                    <div class=\"actions\">\n                        <a [href]=\"'mailto:' + event.booked_by?.email\" [class.no-event]=\"!event.booked_by?.email\">\n                            <btn format=\"mini-action\" [disabled]=\"!event.booked_by?.email\">\n                                <i class=\"material-icons\">email</i>\n                            </btn>\n                        </a>\n                        <a [href]=\"'tel:' + event.booked_by?.phone\" [class.no-event]=\"!event.booked_by?.phone\">\n                            <btn format=\"mini-action\" [disabled]=\"!event.booked_by?.phone\">\n                                <i class=\"material-icons\">call</i>\n                            </btn>\n                        </a>\n                    </div>\n                </div>\n            </div>\n            <div class=\"field multiline\">\n                <label>Attendees:</label>\n                <div class=\"value\">\n                    <div class=\"attendee\" *ngFor=\"let item of event.attendees\">{{ item.name }}</div>\n                </div>\n            </div>\n            <div class=\"field\">\n                <label>Welcomed by:</label>\n                <div class=\"value\">{{ notifyee }}</div>\n            </div>\n            <div class=\"field\">\n                <label>Catering:</label>\n                <div class=\"value\">{{ event.has_catering ? 'Catered' : 'No Catering' }}</div>\n            </div>\n            <div class=\"field\" *ngIf=\"description\">\n                <label>Notes:</label>\n                <div class=\"value\" [innerHTML]=\"description || '' | safe\"></div>\n            </div>\n        </div>\n    </div>\n    <div class=\"footer\">\n        <button (touchrelease)=\"accept()\" [class.accepted]=\"event.state === 'busy'\">\n            Accept{{ event.state === 'busy' ? 'ed' : '' }}\n        </button>\n        <button (touchrelease)=\"decline()\" [class.declined]=\"event.state === 'cancelled'\">\n            Decline{{ event.state === 'cancelled' ? 'd' : '' }}\n        </button>\n    </div>\n    <div class=\"load-state\" *ngIf=\"loading\">\n        <div class=\"no-item center\">\n            <div class=\"icon\">\n                <spinner type=\"circle-ring\"></spinner>\n            </div>\n            <div class=\"text\">Processing request...</div>\n        </div>\n    </div>\n</div>\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { trigger, style, animate, transition } from '@angular/animations';\n\nimport { IBooking } from '../../../../services/data/bookings.service';\nimport { AppService } from '../../../../services/app.service';\nimport { BaseComponent } from '../../../../shared/globals/base.component';\n\nconst STATES: { [id: string]: string } = {};\n\n@Component({\n    selector: 'approvals-event',\n    templateUrl: './event.component.html',\n    styleUrls: ['./event.component.scss'],\n    animations: [\n        trigger('show', [\n            transition(':enter', [style({ opacity: 0, height: 0 }), animate(200, style({ opacity: 1, height: '*' }))]),\n            transition(':leave', [style({ opacity: 1, height: '*' }), animate(200, style({ opacity: 0, height: 0 }))]),\n        ])\n    ]\n})\nexport class ApprovalsViewEventComponent extends BaseComponent {\n    /** Event to display */\n    @Input() event: IBooking;\n    /** Event emitter for event actions */\n    @Output() acting = new EventEmitter<boolean>();\n    /** Whether approval action is being processed */\n    public loading: boolean;\n    /** Whether event details are shown */\n    public shown: boolean;\n\n    /** Person to notify when external attendees arrive */\n    public get notifyee() {\n        if (this.event) {\n            if (this.event.notify_users && this.event.notify_users.length) {\n                return this.event.notify_users[0];\n            }\n        }\n        return 'Concierge';\n    }\n\n    /** Description of the meeting */\n    public get description(): string {\n        if (this.event && this.event.notes) {\n            return (this.event.notes.find(i => i.type === 'description') || { message: '' }).message;\n        }\n        return '';\n    }\n\n    /** Whether the meeting has catering attached */\n    public get has_catering(): boolean {\n        return !!(this.event && this.event.catering && this.event.catering.items && this.event.catering.items.length);\n    }\n\n    constructor(private _service: AppService) {\n        super();\n    }\n\n    /**\n     * Approve the meeting for the set room\n     */\n    public accept() {\n        if (!this.event.organiser) { this.event.organiser = {} as any; }\n        if (!this.event.display) { this.event.display = {}; }\n        this.acting.emit(true)\n        this._service.confirm({\n            title: 'Approve Meeting',\n            message: `Approve ${this.event.organiser.name || this.event.organiser}'s meeting in \"${(this.event.room || {} as any).name}\" at ${this.event.display.start} for ${this.event.display.duration} on ${this.event.display.date}`,\n            icon: 'event_available',\n            accept: 'Ok',\n            cancel: true\n        }, (event) => {\n            if (event.type === 'Accept') {\n                this.loading = true;\n                this._service.Bookings.accept(this.event.id, {\n                    comment: '',\n                    room_id: this.event.room ? this.event.room.id : (this.event as any).room_id\n                }).then(\n                    () => {\n                        this._service.success('Meeting approved.');\n                        this.event.state = 'busy';\n                        this._service.Rooms.removeFromTimeline(this.event.room.id, this.event.id);\n                        this._service.Rooms.addToTimeline(this.event);\n                        STATES[this.event.id] = this.event.state;\n                        this._service.set('BOOKING.states', STATES);\n                        this.loading = false;\n                        this.acting.emit(false);\n                    },\n                    () => {\n                        this.acting.emit(false);\n                        this._service.error('Error approving meeting.');\n                        this.loading = false;\n                    }\n                );\n            }\n            event.close();\n        });\n    }\n\n    /**\n     * Decline meeting for the set room\n     */\n    public decline() {\n        if (!this.event.organiser) { this.event.organiser = {} as any; }\n        if (!this.event.display) { this.event.display = {}; }\n        this.acting.emit(true);\n        this._service.confirm({\n            title: 'Decline Meeting',\n            message: `Decline ${this.event.organiser.name || this.event.organiser}'s meeting in \"${(this.event.room || {} as any).name}\" at ${this.event.display.start} for ${this.event.display.duration} on ${this.event.display.date}`,\n            icon: 'event_busy',\n            accept: 'Ok',\n            cancel: true\n        }, (event) => {\n            if (event.type === 'Accept') {\n                this.loading = true;\n                const booking: IBooking = this.event;\n                booking.state = 'loading';\n                this._service.Bookings.decline(booking.id, {\n                    booking_id: booking.id,\n                    organiser: booking.organiser.email,\n                    icaluid: booking.icaluid,\n                    start: Math.floor(booking.date / 1000),\n                    end: Math.floor(booking.date / 1000) + booking.duration * 60,\n                    room_id: booking.room ? booking.room.id : (booking as any).room_id\n                }).then(\n                    () => {\n                        this._service.success('Meeting declined.');\n                        this.event.state = 'cancelled';\n                        this._service.Rooms.removeFromTimeline(this.event.room.id, this.event.id);\n                        this._service.Rooms.addToTimeline(this.event);\n                        STATES[this.event.id] = this.event.state;\n                        this._service.set('BOOKING.states', STATES);\n                        this.loading = false;\n                        this.acting.emit(false);\n                    },\n                    () => {\n                        this.acting.emit(false);\n                        this._service.error('Error declining meeting.');\n                        this.loading = false;\n                    }\n                );\n            }\n            event.close();\n        });\n    }\n}","<div class=\"day-view\">\n    <div class=\"header\">\n        <div class=\"time-blocks\"><div class=\"text\">Time</div></div>\n        <div class=\"flex\">\n            <div class=\"group\" [style.left]=\"-scroll_left + 'px'\">\n                <div class=\"space-header\" *ngFor=\"let item of filtered_spaces\" [title]=\"item.long_name\">\n                    <div class=\"details\">\n                        <div class=\"text\">{{ item.name }}</div>\n                        <div class=\"icon\"></div>\n                    </div>\n                    <div class=\"capacity\">\n                        Capacity - {{ item.capacity || '0' }} {{ item.capacity === 1 ? 'person' : 'people' }}\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"sidebar\" *ngIf=\"holding_bay\">\n            <div class=\"space-header\" [title]=\"holding_bay.name\">\n                <div class=\"text\">Holding Bay</div>\n                <div class=\"icon\">\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"body\">\n        <div class=\"time-blocks\">\n            <div class=\"group\" [style.top]=\"-scroll_top + 'px'\">\n                <div class=\"block\" *ngFor=\"let item of time_blocks\">\n                    <div div class=\"hour\" [class.active]=\"is_today && item.id === active_hour\">{{ item.display }}</div>\n                </div>\n            </div>\n        </div>\n        <div class=\"flex content\" #scroll_area (scroll)=\"updateScroll($event)\">\n            <div class=\"time-lines\" [style.min-width]=\"filtered_spaces.length * 15 + 'rem'\">\n                <div class=\"block\" *ngFor=\"let item of time_blocks\">\n                    <div class=\"line\"></div>\n                </div>\n            </div>\n            <div class=\"space-day\">\n                <div\n                    class=\"space\"\n                    [style.min-height]=\"time_blocks.length * 3 + 'rem'\"\n                    *ngFor=\"let item of filtered_spaces\"\n                >\n                    <day-view-space [date]=\"date\" [space]=\"item\" [scroll]=\"-scroll_left\" [lastUpdate]=\"last_update\" (inViewChange)=\"in_view[item.id] = $event\"></day-view-space>\n                </div>\n            </div>\n        </div>\n        <div class=\"now-line\" *ngIf=\"is_today\" [style.top]=\"'calc(' + (now * time_blocks.length * 3) + 'rem - ' + scroll_top + 'px)' | safestyle\">\n            <div class=\"knob\"></div>\n        </div>\n        <div class=\"sidebar\" *ngIf=\"holding_bay\">\n            <day-view-space *ngIf=\"holding_bay\" [date]=\"date\" [space]=\"holding_bay\" [lastUpdate]=\"last_update\" (inViewChange)=\"in_view[holding_bay.id] = $event\"></day-view-space>\n            <day-view-approvals-view [date]=\"date\"></day-view-approvals-view>\n        </div>\n    </div>\n</div>\n","import { Component, OnInit, HostListener, ViewChild, ElementRef } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { BaseComponent } from '../../shared/globals/base.component';\nimport { IRoom } from '../../services/data/rooms.service';\nimport { AppService } from '../../services/app.service';\n\nimport * as dayjs from 'dayjs';\nimport { IBooking } from '../../services/data/bookings.service';\n\nexport interface ITimeBlock {\n    /** ID of the time block */\n    id: string;\n    /** Display value for the time block */\n    display: string;\n}\n\nconst UPDATE_INTERVAL = 15;\n\n@Component({\n    selector: 'app-day-view',\n    templateUrl: './day-view.component.html',\n    styleUrls: ['./day-view.component.scss']\n})\nexport class DayViewComponent extends BaseComponent implements OnInit {\n    /** List of timeblocks to display */\n    public time_blocks: ITimeBlock[] = this.generateTimeBlocks();\n    /** Top value of the content scroll */\n    public scroll_top: number = 0;\n    /** Left value of the content scroll */\n    public scroll_left: number = 0;\n    /** List of spaces to display for  */\n    public spaces: IRoom[] = [];\n    /** List of spaces to display for  */\n    public filtered_spaces: IRoom[] = [];\n    /** Mapping of space ids to whether they are in view */\n    public in_view: { [id: string]: boolean } = {};\n    /** Percent of the day that is now */\n    public now: number;\n    /** Timestamp of the active date */\n    public date: number;\n    /** Whether the active day is today */\n    public is_today: boolean;\n    /** Currently active hour of the day */\n    public active_hour: string;\n    /** Mapping of spaces loading booking date */\n    public loading: { [id: string]: boolean } = {};\n    /** Booking ID to open modal for */\n    public view_id: string;\n    /** Room type to filter the shown rooms by */\n    public room_type: string;\n    /** Last update time for the space bookings */\n    public last_update: number = 0;\n\n    @ViewChild('scroll_area', { static: true }) private scroll_area: ElementRef<HTMLDivElement>;\n\n    constructor(private _service: AppService, private _route: ActivatedRoute) {\n        super();\n    }\n\n    public get holding_bay(): IRoom {\n        const bld = this._service.Buildings.current();\n        if (bld.holding_bay) {\n            return this._service.Rooms.item(bld.holding_bay);\n        }\n        return null;\n    }\n\n    public ngOnInit(): void {\n        if (!this._service.ready() || !this._service.Rooms.list(true).length) {\n            return this.timeout('init', () => this.ngOnInit());\n        }\n        // Subscribe to changes of the selected level\n        this.subscription('active_level', this._service.listen('APP.level', (level_id) => {\n            const zone_id = level_id === -1 ? this._service.Buildings.current().id : level_id;\n            this.spaces = this._service.Rooms.list(true, [zone_id]) || [];\n            const holding_bay = this.holding_bay;\n            this.filtered_spaces = this.spaces.filter(i =>\n                (!this.room_type || i.zones.indexOf(this.room_type) >= 0) && (!holding_bay || i.id !== holding_bay.id) && i.bookable\n            );\n            this.updateBookings();\n            this.interval('bookings', () => this.updateBookings(), UPDATE_INTERVAL * 1000);\n        }));\n        // Subscribe to changes of the selected date\n        this.subscription('date', this._service.listen('APP.date', (date) => {\n            this.date = date;\n            this.is_today = dayjs().isSame(dayjs(date), 'd');\n            this.updateBookings();\n            this.interval('bookings', () => this.updateBookings(), UPDATE_INTERVAL * 1000);\n        }));\n        this.subscription('room_type', this._service.listen('APP.room_type', (type) => {\n            this.room_type = typeof type === 'string' ? type : null;\n            const holding_bay = this.holding_bay;\n            this.filtered_spaces = this.spaces.filter(i =>\n                (!this.room_type || i.zones.indexOf(this.room_type) >= 0) && (!holding_bay || i.id !== holding_bay.id) && i.bookable\n            );\n        }));\n        // Subscribe to route query changes\n        this.subscription('route.query', this._route.queryParamMap.subscribe((params) => {\n            if (params.has('id')) {\n                this.view_id = params.get('id');\n            }\n        }));\n        // Update time\n        this.updateTime();\n        this.interval('time', () => this.updateTime(), 15 * 1000);\n        // Update bookings for visible rooms\n        this.updateBookings();\n        this.interval('bookings', () => this.updateBookings(), UPDATE_INTERVAL * 1000);\n        this.interval('scroll', () => {\n            if (this.scroll_area && this.scroll_area.nativeElement) {\n                this.updateScroll({ target: this.scroll_area.nativeElement });\n            }\n        }, 1000)\n    }\n\n    /**\n     * Update scroll parameters to match the change in the scroll position\n     * @param event\n     */\n    public updateScroll(event) {\n        this.scroll_top = event.target.scrollTop;\n        this.scroll_left = event.target.scrollLeft;\n    }\n\n    /** Generate time blocks to display on the day view */\n    private generateTimeBlocks(): ITimeBlock[] {\n        const blocks: ITimeBlock[] = [];\n        const date = dayjs().startOf('h');\n        for (let i = 0; i < 24; i++) {\n            blocks.push({\n                id: date.hour(i).format('HH:mm'),\n                display: date.hour(i).format('h:mm A')\n            });\n        }\n        return blocks;\n    }\n\n    /** Update the now line position */\n    private updateTime() {\n        const time = dayjs();\n        this.now = (time.hour() + time.minute() / 60) / 24;\n        this.active_hour = time.startOf('h').format('HH:mm');\n    }\n\n    /** Update bookings for rooms in view */\n    private updateBookings() {\n        const visible_rooms = this.spaces.filter(i => this.in_view[i.id] !== false);\n        if (visible_rooms.length) {\n            visible_rooms.forEach(rm => this.loading[rm.id] = true);\n            const time = dayjs(this.date).startOf('d');\n            const end = time.endOf('d');\n            // const room_ids = visible_rooms.reduce((v, i) => v + (v ? ',' : '') + i.id, '');\n            const level = this._service.get('APP.level');\n            const zone_ids = [level === -1 ? this._service.Buildings.current().id : level ];\n            if (this.room_type) {\n                zone_ids.push(this.room_type);\n            }\n            this._service.Rooms.query({\n                // room_ids,\n                zone_ids,\n                available_from: time.unix(),\n                available_to: end.unix()\n            }).then((room_list) => {\n                this._service.Rooms.clearTimeline(time.valueOf(), end.valueOf()/*, room_ids.split(',') */);\n                room_list.forEach(rm => {\n                    if (this.view_id) {\n                        const booking = rm.bookings.find(i => i.id === this.view_id);\n                        if (booking) {\n                            this.view(booking, rm);\n                        }\n                    }\n                    this._service.Rooms.updateTimeline(rm.id, rm.bookings);\n                });\n                delete this.loading;\n                this.last_update = dayjs().valueOf();\n                this.loading = {};\n            });\n        }\n    }\n\n    /**\n     * View booking details\n     * @param booking Booking to view the details of\n     */\n    private view(booking: IBooking, space: IRoom) {\n        this._service.Bookings.view(booking, space).then(_ => null, _ => null);\n        this.view_id = null;\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Route, RouterModule } from '@angular/router';\nimport { WidgetsModule } from '@acaprojects/ngx-widgets';\n\nimport { DayViewComponent } from './day-view.component';\nimport { DayViewSpaceComponent } from './space/space.component';\nimport { DayViewApprovalsViewComponent } from './approvals-view/approvals-view.component';\nimport { DayViewSpaceEventComponent } from './space/event/event.component';\nimport { ApprovalsViewEventComponent } from './approvals-view/event/event.component';\nimport { SharedComponentModule } from '../../shared/components/shared.module';\n\nconst ROUTES: Route[] = [{ path: '', component: DayViewComponent }];\n\n@NgModule({\n    declarations: [\n        DayViewComponent,\n        DayViewSpaceComponent,\n        DayViewApprovalsViewComponent,\n        DayViewSpaceEventComponent,\n        ApprovalsViewEventComponent\n    ],\n    imports: [\n        CommonModule, \n        RouterModule.forChild(ROUTES), \n        WidgetsModule,\n        SharedComponentModule\n    ]\n})\nexport class DayViewModule {}\n","<div\n    class=\"event-container\"\n    *ngIf=\"event\"\n    [style.top]=\"top + '%'\"\n    [style.left]=\"left + '%'\"\n    [style.width]=\"width + '%'\"\n    [style.height]=\"height + '%'\"\n>\n    <div [class]=\"'overflow' + (type ? ' ' + type : '')\" [style.top]=\"-overflow_top + '%'\" [style.bottom]=\"-overflow_bottom + '%'\"></div>\n    <div [class]=\"'event' + (type ? ' ' + type : '') + (top > 50 ? ' low' : '')\" [style.z-index]=\"(overlap?.index || 0) + 2\" (touchrelease)=\"view()\">\n        <div class=\"header\">\n            <div class=\"text\">{{ event.all_day ? 'All Day' : period }}</div>\n            <div class=\"icon\">\n                <i class=\"material-icons\" *ngIf=\"event.state === 'cancelled' || event.state === 'busy'\">\n                    {{ event.state === 'busy' ? 'done' : event.state === 'cancelled' ? 'event_busy' : '' }}\n                </i>\n                <spinner type=\"circle-ring\" color=\"#fff\" *ngIf=\"event.state === 'loading'\"></spinner>\n            </div>\n        </div>\n        <div class=\"body\">\n            <div class=\"field host\">\n                <!-- <div class=\"label\">Host:</div> -->\n                <div class=\"value\" [title]=\"'Host: ' + (event.organiser?.name || event.organiser)\">\n                    {{ event.organiser?.name || event.organiser }}\n                </div>\n            </div>\n            <div class=\"field\">\n                <!-- <div class=\"label\">Event:</div> -->\n                <div class=\"value\" [title]=\"'Title: ' + event.title\">{{ event.title }}</div>\n            </div>\n            <div class=\"field\">\n                <div class=\"value\">\n                    {{ event.attendees ? event.attendees.length || 'No' : 'No' }} Attendee{{\n                        event.attendees?.length === 1 ? '' : 's'\n                    }}{{ expected ? '(' + expected + ' Expected)' : '' }}\n                </div>\n            </div>\n            <div class=\"field\" *ngIf=\"event.notify_users\" [title]=\"'Welcomed by: ' + event.notify_users[0]\">\n                <div class=\"value\">Welcomed by: {{ event.notify_users[0] }}</div>\n            </div>\n            <div class=\"field\" *ngIf=\"has_catering\">\n                <div class=\"value\">Catered</div>\n            </div>\n            <div class=\"field\" *ngIf=\"event.parking\">\n                <div class=\"label\">Parking:</div>\n                <div class=\"value\">Need Parking</div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"catering-icon\" *ngIf=\"event.catering && event.catering.items && event.catering.items.length\" (touchrelease)=\"viewOrder()\">\n        <i class=\"material-icons\">restaurant</i>\n    </div>\n</div>\n","import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\n\nimport { IBooking } from '../../../../services/data/bookings.service';\nimport { AppService } from '../../../../services/app.service';\nimport { BaseComponent } from '../../../../shared/globals/base.component';\nimport { IRoom } from '../../../../services/data/rooms.service';\n\nimport * as dayjs from 'dayjs';\n\n/** Details about the associated event overlapping with other events */\nexport interface IEventOverlap {\n    /** Index of this item with the overlapping items */\n    index: number;\n    /** Total number of items overlapping with this one */\n    total: number;\n}\n\n@Component({\n    selector: 'day-view-space-event',\n    templateUrl: './event.component.html',\n    styleUrls: ['./event.component.scss']\n})\nexport class DayViewSpaceEventComponent extends BaseComponent implements OnInit, OnChanges {\n    /** Event to display */\n    @Input() public event: IBooking;\n    /** Event to display */\n    @Input() public space: IRoom;\n    /** Overlap details for the event */\n    @Input() public overlap: IEventOverlap;\n\n    /** Position of the event start time in the day */\n    public top: number;\n    /** Position of the event relative to overlapping events */\n    public left: number;\n    /** Height based of the duration of the event */\n    public height: number;\n    /** Size of the event when overlapping with other events */\n    public width: number;\n    /** Offset from the event's top that the setup time starts */\n    public overflow_top: number;\n    /** Offset from the event's bottom that the breakdown time ends */\n    public overflow_bottom: number;\n\n    constructor(private _service: AppService) {\n        super();\n    }\n\n    ngOnInit() {}\n\n    /** Type of event */\n    public get type(): string {\n        if (this.event) {\n            return this.event.state === 'cancelled' ? 'cancelled' : this.event.booking_type;\n        }\n        return '';\n    }\n\n    /** Period that the event will occur during the day */\n    public get period(): string {\n        if (this.event && this.event.display) {\n            return `${this.event.display.start}  ${this.event.display.end}`\n        }\n        return ``;\n    }\n\n    /** Number attendees expected to turn up to the event */\n    public get expected(): number {\n        const expected = this.event.expected_attendees || {};\n        return this.space ? expected[this.space.id] || 0 : 0;\n    }\n\n    /** Whether the meeting has catering attached */\n    public get has_catering(): boolean {\n        return !!(this.event && this.event.catering && this.event.catering.items && this.event.catering.items.length);\n    }\n\n    /** View booking details */\n    public view() {\n        this._service.Bookings.view(this.event, this.space).then((e: any) => {\n        }, _ => null);\n    }\n\n    public ngOnChanges(changes: SimpleChanges) {\n        if (changes.event || changes.overlap) {\n            this.calculatePosition();\n        }\n    }\n\n    /**\n     * View catering order for the event\n     */\n    public viewOrder() {\n        if (this.event && this.event.catering) {\n            if (sessionStorage) {\n                sessionStorage.setItem('CONCIERGE.view_order', JSON.stringify({ ...this.event, room: { ...this.event.room, bookings: [] } }))\n            }\n            this._service.navigate(['/catering', 'orders'], { id: this.event.id });\n        }\n    }\n\n    /** Calculate the position */\n    private calculatePosition() {\n        if (this.event) {\n            const overlap = this.overlap || { index: 0, total: 1 };\n            const date = dayjs(this.event.date).startOf('m');\n            const start = date.hour() + date.minute() / 60;\n            if (this.event.all_day) {\n                this.top = 0;\n                this.height = 100;\n            } else {\n                this.top = (start / 24) * 100;\n                this.height = ((this.event.duration / 60) / 24) * 100;\n            }\n            this.width = Math.min(100, 100 / overlap.total + 5);\n            this.left = Math.min(100 - this.width, this.width * overlap.index - 5 * overlap.index);\n            this.overflow_top = (this.event.setup ? this.event.setup / this.event.duration : -.1) * 100;\n            this.overflow_bottom = (this.event.breakdown ? this.event.breakdown / this.event.duration : -.1) * 100;\n        }\n    }\n}\n","<div class=\"space-display\" #view>\n    <ng-container *ngIf=\"inView !== false\">\n        <day-view-space-event\n            *ngFor=\"let item of events; trackBy: trackByFn\"\n            [space]=\"space\"\n            [event]=\"item\"\n            [overlap]=\"overlap_details[item.id]\"\n        ></day-view-space-event>\n    </ng-container>\n</div>\n","import { Component, OnChanges, Input, SimpleChanges, Output, EventEmitter, ViewChild, ElementRef } from '@angular/core';\n\nimport { IRoom } from '../../../services/data/rooms.service';\nimport { IBooking } from '../../../services/data/bookings.service';\nimport { IEventOverlap } from './event/event.component';\nimport { BaseComponent } from '../../../shared/globals/base.component';\n\nimport * as dayjs from 'dayjs';\nimport { AppService } from '../../../services/app.service';\n\n@Component({\n    selector: 'day-view-space',\n    templateUrl: './space.component.html',\n    styleUrls: ['./space.component.scss']\n})\nexport class DayViewSpaceComponent extends BaseComponent implements OnChanges {\n    /** Date to display events for */\n    @Input() public date: number;\n    /** Space to display events for */\n    @Input() public space: IRoom;\n    /** Scroll value of the day view */\n    @Input() public scroll: number;\n    /** Last update time of the displayed bookings */\n    @Input('lastUpdate') public last_update: number;\n    /** Whether the space column is in view */\n    @Input() public inView: boolean;\n    /** Emitter for whether the space column is in view */\n    @Output() public inViewChange = new EventEmitter<boolean>();\n    /** Mapping of event IDs to overlap details */\n    public overlap_details: { [id: string]: IEventOverlap } = {};\n    /** Whether to only show meetings with a setup or breakdown time */\n    public overflow_only: boolean;\n    /** Mapping of whether to show events with a given legend id */\n    public legend: { [id: string]: boolean } = {};\n\n    /** Container element for the component contents */\n    @ViewChild('view', { static: true }) private view: ElementRef<HTMLDivElement>;\n\n    constructor(private _service: AppService) {\n        super();\n    }\n\n    /** Events to display for the active date */\n    public get events(): IBooking[] {\n        const date = dayjs(this.date).format('DD MMM YYYY');\n        if (this.space) {\n            const bookings = this.space.timeline[date] || [];\n            const list = bookings.filter(i => {\n                return i.state !== 'cancelled' \n                    ? (!this.overflow_only || i.setup || i.breakdown) && this.legend[i.booking_type] !== false\n                    : (!this.overflow_only || i.setup || i.breakdown) && this.legend.declined !== false\n            });\n            return list;\n        }\n        return [];\n    }\n\n    public ngOnInit(): void {\n        this.subscription('breakdown', this._service.listen('APP.breakdown', (state) => {\n            this.overflow_only = state;\n        }));\n        this.subscription('legend', this._service.listen('CONCIERGE.legend', (state) => {\n            this.legend = state || {};\n        }));\n    }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.scroll) {\n            this.checkInView();\n        }\n        if (changes.last_update) {\n            this.timeout('update_overlaps', () => this.calculateOverlaps(), 1000);\n        }\n    }\n\n    /**\n     * Track by function for ngFor optimisation\n     * @param index Index of the item\n     * @param item Data associated with the item at the given index\n     */\n    public trackByFn(index: number, item: IBooking) {\n        return item.id || index;\n    }\n\n    /**\n     * Calculate to overlap details for the booking events on the space\n     */\n    private calculateOverlaps() {\n        const events = this.events.sort((a, b) => a.date - b.date || a.duration - b.duration || (a.title || '').localeCompare(b.title || ''));\n        events.forEach(i => this.overlap_details[i.id] = { index: 0, total: 1 });\n        for (const bkn of events) {\n            const bkn_start = dayjs(bkn.date).startOf('m');\n            const bkn_end = dayjs(bkn_start).add(bkn.duration, 'm').startOf('m');\n            let count = 1;\n            let index = 0;\n            const collisions: IBooking[] = [];\n            for (const cmp of events) {\n                if (bkn.id !== cmp.id) {\n                    const cmp_start = dayjs(cmp.date).startOf('m');\n                    const cmp_end = dayjs(cmp_start).add(cmp.duration, 'm').startOf('m');\n                    if ((bkn_start.isSame(cmp_start, 'm') || (bkn_start.isAfter(cmp_start, 'm') && bkn_start.isBefore(cmp_end, 'm'))) ||\n                        (bkn_end.isSame(cmp_end, 'm') || (bkn_end.isAfter(cmp_start, 'm') && bkn_end.isBefore(cmp_end, 'm')))) {\n                        count++;\n                        collisions.push(bkn);\n                        if (events.findIndex(i => i.id === bkn.id) > events.findIndex(i => i.id === cmp.id)) {\n                            index++;\n                        }\n                    }\n                }\n            }\n            // collisions.forEach(i => this.overlap_details[i.id].total = count > this.overlap_details[i.id].total ? count : this.overlap_details[i.id].total);\n            // const indexes = collisions.reduce((a, v) => {\n            //     if (this.overlap_details[v.id].index || this.overlap_details[v.id].index === 0) {\n            //         a.push(this.overlap_details[v.id].index);\n            //     }\n            //     return a;\n            // }, []);\n            // if (indexes.length > 0) {\n            //     for (let n = 0; n < count; n++) {\n            //         if (!indexes.find(i => i === n)) { index = n; }\n            //     }\n            // }\n            this.overlap_details[bkn.id] = { index: Math.max(0, index), total: count };\n        }\n    }\n\n    /**\n     * Check whether the space column is with the view of the\n     */\n    private checkInView() {\n        if (this.view && this.view.nativeElement) {\n            const el = this.view.nativeElement;\n            this.inView = el.offsetLeft + this.scroll >= -240 && el.offsetLeft + this.scroll <= window.innerWidth;\n            this.inViewChange.emit(this.inView);\n        }\n    }\n}\n"],"sourceRoot":"webpack:///"}