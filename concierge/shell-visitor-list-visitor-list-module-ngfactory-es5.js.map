{"version":3,"sources":["./src/app/shell/visitor-list/host-item/host-item.component.html","./src/app/shell/visitor-list/host-item/host-item.component.ts","./src/app/shell/visitor-list/list-item/list-item.component.html","./src/app/shell/visitor-list/list-item/list-item.component.ts","./src/app/shell/visitor-list/visitor-list.component.html","./src/app/shell/visitor-list/visitor-list.component.ts","./src/app/shell/visitor-list/visitor-list.module.ts"],"names":[],"mappings":"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","file":"shell-visitor-list-visitor-list-module-ngfactory-es5.js","sourcesContent":["<div class=\"host-item\" (window:click)=\"show_tooltip ? closeTooltip() : ''\">\n    <div class=\"host\"><span>Host:</span>&nbsp;{{ group?.organiser?.name }}</div>\n    <div class=\"group-details\">\n        <div class=\"time\">{{ time_display }}</div>\n        <div class=\"meeting\" [title]=\"group?.title + ' in ' + group?.room?.name\">\n            <div class=\"text\">\n                {{ group?.title }} in&nbsp;<span>{{ group?.room?.name }}</span>\n            </div>\n        </div>\n        <!-- <div class=\"catering\">\n            <div class=\"text\">{{ group?.catering ? 'Catered Event' : 'No catering' }}</div>\n        </div> -->\n        <div class=\"attendees\">\n            <div class=\"contents\" (touchrelease)=\"show_tooltip = !show_tooltip\" click-responder>\n                <div class=\"text\">\n                    {{ group?.attendees.length }} Attendee{{ group?.attendees.length === 1 ? '' : 's' }}\n                </div>\n                <app-icon [icon]=\"{ class: 'material-icons', content: 'keyboard_arrow_down'}\"></app-icon>\n            </div>\n            <div class=\"attendee-list\" *ngIf=\"show_tooltip\" [@show] (touchrelease)=\"cancelClose()\">\n                <ul>\n                    <li class=\"item\" *ngFor=\"let item of group.attendees\">\n                        <div class=\"text\">{{ item.name }}</div>\n                        <app-icon *ngIf=\"item.state === 'accepted'\" [icon]=\"{ class: 'material-icons', content: 'done'}\"></app-icon>\n                    </li>\n                </ul>\n                <button mat-button class=\"full-width\" *ngIf=\"!group.expired\" (touchrelease)=\"addAttendees()\">\n                    <app-icon [icon]=\"{ class: 'material-icons', content: 'add'}\"></app-icon>\n                    <div class=\"text\">Add Attendees</div>\n                </button>\n            </div>\n        </div>\n        <div class=\"actions\" *ngIf=\"group && group.organiser\">\n            <a mat-icon-button [href]=\"'mailto:' + group.organiser?.email\" [disabled]=\"!group.organiser?.email || loading\">\n                <app-icon [icon]=\"{ class: 'material-icons', content: 'email'}\"></app-icon>\n            </a>\n            <a mat-icon-button [href]=\"'tel:' + group?.phone\" [disabled]=\"!group?.phone || loading\">\n                <app-icon [icon]=\"{ class: 'material-icons', content: 'phone'}\"></app-icon>\n            </a>\n        </div>\n    </div>\n</div>\n","import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { animate, style, transition, trigger } from '@angular/animations';\n\nimport { IBooking } from '../../../services/data/bookings.service';\nimport { AppService } from '../../../services/app.service';\nimport { BaseDirective } from '../../../shared/globals/base.directive';\nimport { Utils } from '../../../shared/utility.class';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'visitor-list-host-item',\n    templateUrl: './host-item.component.html',\n    styleUrls: ['./host-item.component.scss'],\n    animations: [\n        trigger('show', [\n            transition(':enter', [\n                style({ opacity: 0, height: 0, width: 0 }),\n                animate(200, style({ opacity: 1, height: '*', width: '*' }))\n            ]),\n            transition(':leave', [style({ opacity: 1, height: '*', width: '*' }), animate(200, style({ opacity: 0, height: 0, width: 0 }))])\n        ])\n    ]\n})\nexport class VisitorListHostItemComponent extends BaseDirective implements OnInit, OnChanges {\n    /** Visitor group to display */\n    @Input() public group: IBooking;\n    /** Display period for the group meeting */\n    public time_display: string;\n    /** Whether to show the attendee tooltip */\n    public show_tooltip: boolean;\n\n    constructor(private _service: AppService) {\n        super();\n    }\n\n    ngOnInit(): void {}\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.group && this.group) {\n            this.timeout(\n                'date',\n                () => {\n                    const date = dayjs(this.group.date);\n                    const end = date.add(this.group.duration, 'm');\n                    this.time_display = this.group.all_day ? 'All Day' : `${date.format('h:mm A')} - ${end.format('h:mm A')}`;\n                },\n                10\n            );\n        }\n    }\n\n    /**\n     * Global event handler for closing open attendee toolip\n     */\n    public closeTooltip() {\n        this.timeout('close_tooltip', () => (this.show_tooltip = false));\n    }\n\n    /**\n     * Cancel timeout for closing the attendee tooltip\n     */\n    public cancelClose() {\n        this.clearTimeout('close_tooltip');\n    }\n\n    /**\n     * Open modal for adding new attendes to the visitor group\n     */\n    public addAttendees() {\n        this._service.Overlay.openModal('add-visitors', { data: { visitors: this.group.attendees } }, event => {\n            if (event.type === 'finish') {\n                const new_list = event.data.visitors.filter(i => !i.id).map(i => { i.external = true; return i; });\n                this._service.Bookings.update(this.group.id, {\n                    ...this.group,\n                    attendees: Utils.unique(this.group.attendees.concat(new_list), 'email')\n                }).then(\n                    () => {\n                        this._service.notifySuccess('Successfully added new users');\n                        this.group.visitors = event.data.visitors;\n                        event.close();\n                    },\n                    e => {\n                        event.data.loading = false;\n                        if (e !== 'User cancelled') {\n                            this._service.notifyError(`Error: ${e}`);\n                        }\n                    }\n                );\n            } else {\n                event.close();\n            }\n        });\n    }\n}\n","<div class=\"list-item\" [class.plus]=\"is_now\">\n    <div class=\"time\">\n        <div class=\"now\" *ngIf=\"is_now\">Now!</div>\n        <div class=\"display\">{{ visitor.group?.display?.arrival }}</div>\n        <div [class]=\"'status ' + status\">{{ status || 'Upcoming' }}</div>\n    </div>\n    <div class=\"space\" [title]=\"visitor.group?.room?.name\">\n        <div class=\"text\">{{ visitor.group?.room?.name }}</div>\n    </div>\n    <div class=\"host\" [title]=\"'Host: ' + visitor.group?.host?.name + '<' + visitor.group?.host?.email + '>'\">\n        <div class=\"text\"><span>Host:</span>&nbsp;{{ visitor.group?.host?.name }}</div>\n    </div>\n    <div class=\"user\" [title]=\"'Guest: ' + visitor.name + '<' + visitor.email + '>'\">\n        <div class=\"text\"><span>Guest:</span>&nbsp;{{ visitor.name }}</div>\n    </div>\n    <div class=\"actions\">\n        <a mat-icon-button [href]=\"'mailto:' + visitor?.email\" [disabled]=\"!visitor?.email || loading\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'email' }\"></app-icon>\n        </a>\n        <button\n            mat-icon-button\n            [class.accepted]=\"visitor.state === 'accepted'\"\n            [class.processing]=\"processing === 'checkin'\"\n            (touchrelease)=\"checkin()\"\n            [disabled]=\"loading || processing === 'decline' || visitor.state === 'declined'\"\n        >\n            <app-icon *ngIf=\"processing !== 'checkin'\" [icon]=\"{ class: 'material-icons', content: 'done' }\"></app-icon>\n            <spinner *ngIf=\"processing === 'checkin'\" type=\"circle-ring\"></spinner>\n        </button>\n    </div>\n</div>\n","\nimport { Component, OnInit, Input, SimpleChanges, OnChanges } from '@angular/core';\n\nimport { AppService } from '../../../services/app.service';\nimport { BaseDirective } from '../../../shared/globals/base.directive';\nimport { IUser } from '../../../services/data/users.service';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'visitor-list-item',\n    templateUrl: './list-item.component.html',\n    styleUrls: ['./list-item.component.scss']\n})\nexport class VisitorListItemComponent extends BaseDirective implements OnInit, OnChanges {\n    /** Visitor to display */\n    @Input() public visitor: IUser;\n    /** Whether the visitor arrival time is the current time */\n    public is_now: boolean;\n    /** Whether an action is being performed for the visitor */\n    public loading: boolean;\n    /** Name of the request being processed */\n    public processing: string;\n\n    constructor(private _service: AppService) {\n        super();\n    }\n\n    public ngOnInit(): void { }\n\n    public ngOnChanges(changes: SimpleChanges): void {\n        if (changes.visitor) {\n            this.timeout('is_now', () => {\n                const now = dayjs();\n                const arrival = dayjs(this.visitor.group.date);\n                this.is_now = now.add(5, 'm').isBefore(arrival, 'm') && now.subtract(5, 'm').isAfter(arrival, 'm');\n            }, 100);\n        }\n    }\n\n    public get status(): string {\n        const now = dayjs();\n        const arrival = dayjs(this.visitor.group.date);\n        const end = arrival.add(this.visitor.group.duration, 'm');\n\n        return (this.visitor\n            ? this.visitor.state === 'accepted'\n                ? (now.isAfter(arrival, 'm')\n                    ? 'collected'\n                    : now.isAfter(end, 'm')\n                        ? 'departed'\n                        : 'arrived')\n                : (now.isAfter(arrival.add(5, 'm'), 'm')\n                    ? 'late'\n                    : '')\n            : null) || '';\n    }\n\n    /**\n     * Open modal to allow the user to add notes to the booking associated with the visitor\n     */\n    public addNotes() {\n        const booking = this._service.Bookings.item(this.visitor.group.id);\n        if (booking) {\n            // TODO: Add logic to edit booking associated with visitor\n            this._service.notifyInfo('Not implemented.');\n        }\n    }\n\n    /**\n     * Checkin the visitor\n     */\n    public checkin() {\n        const group = this.visitor.group;\n        const bld = this._service.Buildings.current();\n        if (group) {\n            this.processing = 'checkin';\n            this._service.Visitors.checkin(this.visitor.group.id, {\n                attendee_email: this.visitor.email,\n                attendee_name: this.visitor.name,\n                response_type: 'accepted',\n                room_id: group.room_id,\n                host_email: group.host ? group.host.email : '',\n                icaluid: group.icaluid,\n                booking_id: group.id,\n                notify_users: group.notify_users || [group.host ? group.host.email : bld.reception_email || 'ln-reception@mckinsey.com'],\n                check_ins: group.booking.check_ins\n            }).then(() => {\n                this.visitor.state = 'accepted';\n                this.processing = null;\n            }, (e) => {\n                this._service.notifyError(`Error checking in user: ${e}`);\n                this.processing = null;\n            });\n        } else {\n            this._service.notifyError(`No booking associated with visitor`);\n        }\n    }\n\n    public decline() {\n        const group = this.visitor.group;\n        if (group) {\n            this.processing = 'decline';\n            this._service.Visitors.checkin(this.visitor.group.id, {\n                attendee_email: this.visitor.email,\n                attendee_name: this.visitor.name,\n                response_type: 'declined',\n                room_id: group.room_id,\n                host_email: group.host ? group.host.email : '',\n                icaluid: group.icaluid,\n                booking_id: group.id,\n                notify_users: group.notify_users,\n                check_ins: group.booking.check_ins\n            }).then(() => {\n                this.visitor.state = 'declined';\n                this.processing = null;\n            }, (e) => {\n                this._service.notifyError(`Error checking in user: ${e}`);\n                this.processing = null;\n            });\n        } else {\n            this._service.notifyError(`No booking associated with visitor`);\n        }\n    }\n\n\n}\n\n","<section class=\"visitor-list\">\n    <header class=\"search\">\n        <div class=\"searchbar\" tabindex=\"0\" (focus)=\"focus()\">\n            <app-icon [icon]=\"{ class: 'material-icons', content: 'search'}\"></app-icon>\n            <input #input [(ngModel)]=\"search_str\" (ngModelChange)=\"filter($event)\" placeholder=\"Search for someone here...\" />\n        </div>\n    </header>\n    <main class=\"\">\n        <div class=\"tab-group\">\n            <a routerLink=\"/visitor-list/visitors\" routerLinkActive=\"active\">\n                <div class=\"tab\">All visitors {{ date_display }}</div>\n            </a>\n            <a routerLink=\"/visitor-list/hosts\" routerLinkActive=\"active\">\n                <div class=\"tab\">All hosts {{ date_display }}</div>\n            </a>\n            <div class=\"loader\" *ngIf=\"loading\">\n                <spinner type=\"circle-ring\" color=\"#000\"></spinner>\n            </div>\n        </div>\n        <div class=\"list-view\">\n            <div [ngSwitch]=\"active_view\">\n                <ul *ngSwitchCase=\"'hosts'\">\n                    <ng-container *ngIf=\"host_list && host_list.filtered && host_list.filtered.length > 0; else no_items\">\n                        <li *ngFor=\"let item of host_list.filtered; trackBy: trackByFn\">\n                            <visitor-list-host-item [group]=\"item\"></visitor-list-host-item>\n                        </li>\n                    </ng-container>\n                </ul>\n                <ul *ngSwitchDefault>\n                    <ng-container *ngIf=\"visitor_list && visitor_list.filtered && visitor_list.filtered.length > 0; else no_items\">\n                        <li *ngFor=\"let item of visitor_list.filtered; trackBy: trackByFn\">\n                            <visitor-list-item [visitor]=\"item\"></visitor-list-item>\n                        </li>\n                    </ng-container>\n                </ul>\n            </div>\n        </div>\n    </main>\n    <ng-template #no_items>\n        <div class=\"no-item\" center>\n            <div class=\"icon\">\n                <i class=\"material-icons\">close</i>\n            </div>\n            <div class=\"text\">\n                No {{ search_str ? 'matching' : '' }} {{ active_view === 'hosts' ? 'hosts' : 'visitors' }} for {{ date_display }}\n            </div>\n        </div>\n    </ng-template>\n</section>\n","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { BaseDirective } from '../../shared/globals/base.directive';\nimport { AppService } from '../../services/app.service';\nimport { IBuilding } from '../../services/data/buildings.service';\nimport { IUser } from '../../services/data/users.service';\nimport { IVisitorGroup } from '../../services/data/visitors.service';\nimport { IBooking } from '../../services/data/bookings.service';\n\nimport * as dayjs from 'dayjs';\n\n@Component({\n    selector: 'app-visitor-list',\n    templateUrl: './visitor-list.component.html',\n    styleUrls: ['./visitor-list.component.scss']\n})\nexport class VisitorListComponent extends BaseDirective implements OnInit {\n    /** Name of the active tab */\n    public active_view: 'visitors' | 'hosts' = 'visitors';\n    /** List of visitors for the active day */\n    public visitor_list: { raw: IUser[]; filtered: IUser[] } = { raw: [], filtered: [] };\n    /** List of visitor bookings for the active day */\n    public host_list: { raw: IBooking[]; filtered: IBooking[] } = { raw: [], filtered: [] };\n    /** Display value for the currently selected date */\n    public date_display: string;\n    /** Current search string */\n    public search_str: string;\n    /** Whether the listings are loading */\n    public loading: boolean;\n    /** Currently active building */\n    private building: IBuilding;\n    /** Timestamp of the current selected date in ms since UTC epoch */\n    private date: number;\n\n    @ViewChild('input', { static: true }) private input: ElementRef<HTMLInputElement>;\n\n    constructor(private _service: AppService, private _route: ActivatedRoute) {\n        super();\n    }\n\n    public ngOnInit(): void {\n        this._service.title = 'Visitor List';\n        this.subscription('building', this._service.Buildings.listen(bld => {\n            if (bld) {\n                this.building = bld;\n                this.updateListing();\n            }\n        }));\n\n        this.subscription('date', this._service.listen('APP.date', date => {\n            this.date = date;\n            const today = dayjs();\n            const day = dayjs(date);\n            this.date_display = day.isSame(today, 'd') ? 'Today' : day.format('DD MMM YYYY');\n            this.visitor_list.filtered = [];\n            this.host_list.filtered = [];\n            this.updateListing();\n            this.interval('update', () => this.updateListing(), 15 * 1000);\n        }));\n\n        this.subscription('route', this._route.paramMap.subscribe(params => {\n            if (params.has('tab_id')) {\n                this.active_view = params.get('tab_id') as any;\n            }\n        }));\n        this.building = this._service.Buildings.current();\n        this.updateListing();\n        this.interval('update', () => this.updateListing(), 15 * 1000);\n    }\n\n    /**\n     * Update the listings for visitors and hosts\n     */\n    public updateListing() {\n        if (this.building) {\n            this.timeout('listing', () => {\n                const from = dayjs(this.date).startOf('d');\n                const to = from.endOf('d');\n                this.loading = true;\n                this._service.Rooms.query({\n                    zone_ids: this.building.id,\n                    available_from: from.unix(),\n                    available_to: to.unix()\n                }).then(room_list => {\n                    // Grab visitor bookings from the room for the set date\n                    const visitor_bookings = room_list.reduce(\n                        (o, i) => o.concat((i.bookings || []).filter(j => {\n                            const date = dayjs(j.date).second(1);\n                            const end = date.add(j.duration, 'm').second(-1);\n                            return (date.isAfter(from.valueOf()) && date.isBefore(to.valueOf())) ||\n                                   (end.isAfter(from.valueOf()) && end.isBefore(to.valueOf())) ||\n                                   (from.isAfter(date.second(-1).valueOf()) && from.isBefore(end.second(1).valueOf()));\n                        })),\n                        []\n                    ).sort((a, b) => a.date - b.date);\n                    this._service.Visitors.clearList();\n                    const list = this._service.Visitors.addFromBookings([ ...visitor_bookings ]);\n                    const visitor_groups = list\n                    // Convert visitor groups into visitors\n                    const visitors = visitor_groups.reduce((o, i) => o.concat(i.visitors.map(j => ({ ...j, group: i }))), []);\n                    this.visitor_list.raw = visitors;\n                    this.host_list.raw = [ ...visitor_bookings ];\n                    this.filter(this.search_str);\n                    this.loading = false;\n                });\n            });\n        }\n    }\n\n    /**\n     * Filter the item listing by the given string\n     * @param str String to filter the visitors on\n     */\n    public filter(str?: string) {\n        const filter = (str || '').toLowerCase();\n        this.filterVisitors(filter);\n        this.filterHosts(filter);\n    }\n\n    /**\n     * Track by function for ngFor optimisation\n     * @param index Index of the item\n     * @param item Data associated with the item at the given index\n     */\n    public trackByFn(index: number, item: IUser | IVisitorGroup) {\n        if (item.group) {\n            return (item.group as any).id || index;\n        } else {\n            return item.id || index;\n        }\n    }\n\n    /**\n     * Focus the search input element\n     */\n    public focus() {\n        if (this.input) {\n            this.input.nativeElement.focus();\n        }\n    }\n\n    /**\n     * Filter the displayed visitor items\n     * @param str String to filter the vistor items\n     */\n    private filterVisitors(str?: string) {\n        if (str) {\n            this.visitor_list.filtered = this.visitor_list.raw.filter(i => {\n                return (\n                    i.name.toLowerCase().indexOf(str) >= 0 ||\n                    i.email.indexOf(str) >= 0 ||\n                    i.group.host.email.indexOf(str) >= 0 ||\n                    i.group.host.name.toLowerCase().indexOf(str) >= 0\n                );\n            });\n        } else {\n            this.visitor_list.filtered = this.visitor_list.raw;\n        }\n    }\n\n    /**\n     * Filter the displayed host items\n     * @param str String to filter the host items\n     */\n    private filterHosts(str?: string) {\n        if (str) {\n            this.host_list.filtered = this.host_list.raw.filter(i => {\n                return i.organiser.email.indexOf(str) >= 0 || i.organiser.name.toLowerCase().indexOf(str) >= 0;\n            });\n        } else {\n            this.host_list.filtered = this.host_list.raw;\n        }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule, Routes } from '@angular/router';\nimport { WidgetsModule } from '@acaprojects/ngx-widgets';\n\nimport { SharedComponentModule } from '../../shared/components/shared.module';\n\nimport { VisitorListComponent } from './visitor-list.component';\nimport { VisitorListItemComponent } from './list-item/list-item.component';\nimport { VisitorListHostItemComponent } from './host-item/host-item.component';\n\nconst ROUTES: Routes = [\n    { path: ':tab_id', component: VisitorListComponent },\n    { path: '**', redirectTo: 'visitors' }\n];\n\n@NgModule({\n    declarations: [VisitorListComponent, VisitorListItemComponent, VisitorListHostItemComponent],\n    imports: [CommonModule, FormsModule, SharedComponentModule, WidgetsModule, RouterModule.forChild(ROUTES)],\n    exports: [],\n    providers: []\n})\nexport class VisitorListModule {}\n"],"sourceRoot":"webpack:///"}