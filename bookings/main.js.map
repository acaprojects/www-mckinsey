{"version":3,"sources":["webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.ts.AppComponent.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/bootstrap/bootstrap.template.html","webpack:///./src/app/bootstrap/bootstrap.component.ts","webpack:///./src/app/overlays/booking/booking.template.html","webpack:///./src/app/overlays/booking/booking.component.ts","webpack:///./src/app/overlays/confirm/confirm.template.html","webpack:///./src/app/overlays/confirm/confirm.component.ts","webpack:///./src/app/overlays/meeting/meeting.template.html","webpack:///./src/app/overlays/meeting/meeting.component.ts","webpack:///./src/app/overlays/overlays.module.ts","webpack:///./src/app/overlays/time-picker/time-pick.template.html","webpack:///./src/app/overlays/time-picker/time-pick.component.ts","webpack:///./src/app/overlays/user-search/user-search.template.html","webpack:///./src/app/overlays/user-search/user-search.component.ts","webpack:///./src/app/services/app.service.ts","webpack:///./src/app/services/data/analytics.service.ts","webpack:///./src/app/services/data/base.service.ts","webpack:///./src/app/services/data/bookings.service.ts","webpack:///./src/app/services/data/buildings.service.ts","webpack:///./src/app/services/data/rooms.service.ts","webpack:///./src/app/services/data/users.service.ts","webpack:///./src/app/services/settings.service.ts","webpack:///./src/app/shared/components/avatar/avatar.template.html","webpack:///./src/app/shared/components/avatar/avatar.component.ts","webpack:///./src/app/shared/components/base.component.ts","webpack:///./src/app/shared/components/room-list/room-list.template.html","webpack:///./src/app/shared/components/room-list/room-list.component.ts","webpack:///./src/app/shared/components/shared.module.ts","webpack:///./src/app/shared/components/timeline/timeline.template.html","webpack:///./src/app/shared/components/timeline/timeline.component.ts","webpack:///./src/app/shared/components/user-tag/user-tag.template.html","webpack:///./src/app/shared/components/user-tag/user-tag.component.ts","webpack:///./src/app/shared/utility.class.ts","webpack:///./src/app/shell/booking/booking.template.html","webpack:///./src/app/shell/booking/booking.component.ts","webpack:///./src/app/shell/meet/meet.template.html","webpack:///./src/app/shell/meet/meet.component.ts","webpack:///./src/app/shell/multi-display/multi-display.template.html","webpack:///./src/app/shell/multi-display/multi-display.component.ts","webpack:///./src/app/shell/select-display/select-display.template.html","webpack:///./src/app/shell/select-display/select-display.component.ts","webpack:///./src/app/shell/shell.template.html","webpack:///./src/app/shell/shell.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"main.js","sourcesContent":["var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-SG\": \"./node_modules/moment/locale/en-SG.js\",\n\t\"./en-SG.js\": \"./node_modules/moment/locale/en-SG.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-us\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./ga\": \"./node_modules/moment/locale/ga.js\",\n\t\"./ga.js\": \"./node_modules/moment/locale/ga.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"./node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"./node_modules/moment/locale/gu.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it-ch\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it-ch.js\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ku\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ku.js\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"./node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"./node_modules/moment/locale/mt.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"./node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"./node_modules/moment/locale/tg.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","\n    <div class=\"app\">\n        <router-outlet></router-outlet>\n    </div>\n    ","\nimport { Component, ViewContainerRef } from '@angular/core';\nimport { OverlayService } from '@acaprojects/ngx-widgets';\nimport { ViewEncapsulation } from '@angular/core';\n\nimport { environment } from '../environments/environment';\n\n@Component({\n    selector: 'app-root',\n    template: `\n    <div class=\"app\">\n        <router-outlet></router-outlet>\n    </div>\n    `,\n    styleUrls: ['./app.component.scss'],\n    encapsulation: ViewEncapsulation.None,\n})\nexport class AppComponent {\n    constructor(private view: ViewContainerRef, private overlay: OverlayService) {\n        this.overlay.view = view;\n        if (environment.production && 'serviceWorker' in navigator) {\n            navigator.serviceWorker.getRegistration()\n                .then(active => !active && navigator.serviceWorker.register('/bookings/ngsw-worker.js'))\n                .catch(console.error);\n        }\n    }\n}\n","\nimport { BrowserModule } from '@angular/platform-browser';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { NgModule } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { ServiceWorkerModule } from '@angular/service-worker';\n\nimport { ComposerModule } from '@acaprojects/ngx-composer';\nimport { WidgetsModule } from '@acaprojects/ngx-widgets';\n\nimport { AppComponent } from './app.component';\nimport { BootstrapComponent } from './bootstrap/bootstrap.component';\nimport { APP_COMPONENTS } from './shell';\n\nimport { OverlayComponentModule } from './overlays/overlays.module';\nimport { SharedComponentModule } from './shared/components/shared.module';\n\nimport { ROUTES } from './app.routes';\nimport { environment } from '../environments/environment';\n\n// import './shared/mock';\n\n@NgModule({\n    declarations: [\n        AppComponent,\n        BootstrapComponent,\n        ...APP_COMPONENTS\n    ],\n    imports: [\n        BrowserAnimationsModule,\n        BrowserModule,\n        RouterModule.forRoot(ROUTES, { useHash: true }),\n        HttpClientModule,\n        FormsModule,\n        ServiceWorkerModule.register('/bookings/ngsw-worker.js', { enabled: environment.production }),\n        WidgetsModule.forRoot(),\n        ComposerModule.forRoot(),\n        SharedComponentModule,\n        OverlayComponentModule\n    ],\n    entryComponents: [],\n    bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","<!--\n@Author: Alex Sorafumo <alex.sorafumo>\n@Date:   11/01/2017 11:49 AM\n@Email:  alex@yuion.net\n@Filename: bootstrap.template.html\n@Last modified by:   Alex Sorafumo\n@Last modified time: 31/01/2017 11:11 AM\n-->\n\n<div class=\"bootstrap\">\n    <div class=\"loading center\" *ngIf=\"!setup\">\n        <div class=\"bounce\" style=\"position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);font-size: 0.5em;\">\n            <div class=\"circle\"><div class=\"inner\"></div></div>\n        </div>\n    </div>\n    <div class=\"setup\" *ngIf=\"setup\">\n        <div class=\"setup-display\">\n            <h1>Booking UI Setup</h1>\n            <div class=\"manual-btn\" *ngIf=\"(system_list && system_list.length > 0)\">\n                <btn name=\"white\" format=\"mini-action\" (tapped)=\"select_sys = !select_sys\"><i class=\"material-icons\">build</i></btn>\n            </div>\n            <div class=\"manual\" [style.display]=\"!select_sys ? '' : 'none'\">\n                <div class=\"building\">\n                    <p>Please enter the System ID below:</p>\n                    <input id=\"building\" [(ngModel)]=\"sys_id\" type=\"text\" (keyup.enter)=\"configure()\" placeholder=\"System ID\" />\n                </div>\n            </div>\n            <div class=\"auto\">\n            <div class=\"auto\" [style.display]=\"select_sys?'':'none'\">\n                <div class=\"building select\">\n                    <p>Please select a system from the dropdown below:</p>\n                    <dropdown name=\"bootstrap\" [list]=\"system_list\" [filter]=\"true\" (modelChange)=\"selectSystem(system_list[$event])\"></dropdown>\n                </div>\n            </div>\n            <btn (tapped)=\"configure()\">Finish Setup</btn>\n        </div>\n    </div>\n</div>\n","/**\n* @Author: Alex Sorafumo <alex.sorafumo>\n* @Date:   16/01/2017 9:43 AM\n* @Email:  alex@yuion.net\n* @Filename: bootstrap.component.ts\n* @Last modified by:   Alex Sorafumo\n* @Last modified time: 31/01/2017 11:16 AM\n*/\n\nimport { Component, Input, OnInit } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { Router, ActivatedRoute } from '@angular/router';\n\nimport { AppService } from '../services/app.service';\nimport { BaseComponent } from '../shared/components/base.component';\n\n@Component({\n    selector: 'bootstrapper',\n    styleUrls: ['./bootstrap.styles.scss'],\n    templateUrl: './bootstrap.template.html'\n})\nexport class BootstrapComponent extends BaseComponent implements OnInit {\n    public query: any = null;\n    public setup: any = false;\n    public sys_id = '';\n    public sys_text: string[] = [];\n    public system_list: any[] = [];\n    public select_sys = false;\n    public sys: any = null;\n    public system = 0;\n    public module = '';\n\n    private sys_timer: any = null;\n\n    constructor(private route: ActivatedRoute, private service: AppService) {\n        super();\n        if (sessionStorage) {\n            sessionStorage.setItem('trust', 'true');\n        }\n        this.query = this.route.queryParams.subscribe(params => {\n            if (params['clear'] && (params['clear'] === true || params['clear'] === 'true')) {\n                if (localStorage) {\n                    localStorage.removeItem('ACA.CONTROL.system');\n                    this.setup = true;\n                }\n            }\n        });\n    }\n\n    public ngOnInit() {\n        this.init();\n    }\n\n    public init() {\n        if (!this.service.ready()) {\n            return setTimeout(() => this.init(), 500);\n        }\n        this.service.Rooms.init();\n        this.service.loadSystems();\n        this.service.log('Bootstrap', 'Initialising...');\n        if (localStorage) {\n            const sys = localStorage.getItem('ACA.CONTROL.system');\n            this.setup = sys ? false : true;\n        }\n        if (!this.setup) {\n            this.service.log('Bootstrap', 'Settings found. Redirecting to set system...');\n            return this.redirect();\n        }\n        this.service.log('Bootstrap', 'Settings not found. Loading systems...');\n        this.loadSettings();\n        setTimeout(() => {\n            if (this.query) {\n                this.query.unsubscribe();\n                this.query = null;\n            }\n        }, 1000);\n        this.subs.obs.rooms = this.service.Rooms.listen('list', () => {\n            const room = this.service.Rooms.item(this.service.Users.current().email);\n            if (room) {\n                this.sys_id = room.id;\n                this.configure();\n            }\n        });\n    }\n\n    public loadSettings() {\n        if (!this.service.Settings.setup) {\n            return setTimeout(() => this.loadSettings(), 500);\n        }\n        const mod = this.service.Settings.get('module');\n        if (mod && mod !== '') {\n            this.module = mod;\n        }\n        this.service.listen('systems', (list) => {\n            this.system_list = list;\n            if (this.system_list && this.system_list.length > 0) {\n                this.select_sys = true;\n            }\n        });\n    }\n\n    /**\n     * Called when the user selects a system from the dropdown\n     * @param  {number} index Index of the system in the systems list.\n     * @return {void}\n     */\n    public selectSystem(system: any) {\n        if (system) {\n            this.sys = system;\n            this.sys_id = this.sys.id;\n        }\n    }\n    /**\n     * Redirects the user to the set application\n     * @return {void}\n     */\n    public redirect() {\n        if (localStorage) {\n            const sys_id = localStorage.getItem('ACA.CONTROL.system');\n            if (sys_id) {\n                this.service.navigate(`${sys_id}`, { 'trust': true, 'fixed_device': true });\n            } else {\n                this.setup = true;\n                this.init();\n            }\n        } else {\n            this.setup = true;\n        }\n    }\n    /**\n     * Configures the settings for the kiosk on the device\n     * @return {void}\n     */\n    public configure() {\n        if (this.sys_id && this.sys_id !== '') {\n            if (localStorage) {\n                localStorage.setItem('ACA.CONTROL.system', this.sys_id);\n            }\n            if (this.sys_timer) {\n                clearTimeout(this.sys_timer);\n                this.sys_timer = null;\n            }\n            this.service.navigate(`${this.sys_id}`, { 'trust': true, 'fixed_device': true });\n        }\n    }\n}\n","<!--\n@Author: Alex Sorafumo\n@Date:   21/10/2016 1:10 PM\n@Email:  alex@yuion.net\n@Filename: booking.template.html\n@Last modified by:   Alex Sorafumo\n@Last modified time: 01/02/2017 11:22 AM\n-->\n\n<div class=\"container\">\n    <div class=\"header\">\n        <div class=\"text\">Book Room</div>\n    </div>\n    <div class=\"body\">\n        <div class=\"bindings\">\n            <div binding [(value)]=\"model.room_name\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"room_name\"></div>\n            <div binding [(value)]=\"model.booking_set_host\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_set_host\"></div>\n            <div binding [(value)]=\"model.booking_set_title\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_set_title\"></div>\n            <div binding [(value)]=\"model.booking_set_ext\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_set_ext\"></div>\n            <div binding [(value)]=\"model.booking_min_duration\" (valueChange)=\"updateMax()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_min_duration\"></div>\n            <div binding [(value)]=\"model.booking_max_duration\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_max_duration\"></div>\n            <div binding [(value)]=\"model.booking_duration_step\" (valueChange)=\"updateMax()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_duration_step\"></div>\n            <div binding [(value)]=\"model.booking_search_user\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_search_user\"></div>\n            <div binding [(value)]=\"model.disable_future\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_disable_future\"></div>\n            <div binding [(value)]=\"model.default_title\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_default_title\"></div>\n        </div>\n        <div class=\"content\" [class.hide]=\"model.loading\">\n            <div class=\"field time\">\n                <div class=\"select-time\" [class.disable]=\"model.disable_future\" (mousedown)=\"pickTime()\" (touchstart)=\"pickTime()\">\n                    <div class=\"icon\">\n                        <i class=\"material-icons\">access_time</i>\n                    </div>\n                    <div class=\"label\">{{model.display.time}}</div>\n                </div>\n                <div class=\"duration\">\n                    <slider [name]=\"(model.booking_min_duration || 15) === (model.max || model.booking_max_duration || 240) ? 'disabled' : ''\" [(model)]=\"model.form.duration\" [min]=\"model.booking_min_duration || 15\" [max]=\"model.max || model.booking_max_duration || 240\" [step]=\"model.booking_duration_step || model.booking_min_duration || 15\"></slider>\n                    <div class=\"text\">Duration: <span class=\"primary\">{{model.form.duration}} minutes</span></div>\n                </div>\n            </div>\n            <div class=\"error\" *ngIf=\"model.valid && !model.valid.time\">Valid time and duration must be set</div>\n            <div class=\"field name\" *ngIf=\"model.booking_set_title\" [class.focus]=\"model.focus_title\">\n                <div class=\"icon\">\n                    <i class=\"material-icons\">edit_mode</i>\n                </div>\n                <div class=\"label\">Subject</div>\n                <div class=\"value\">\n                    <input-field name=\"basic\" [(model)]=\"model.form.title\" (focus)=\"model.focus_title = true\" (blur)=\"model.focus_title = false\" placeholder=\"No meeting name\"></input-field>\n                </div>\n            </div>\n            <div class=\"error\" *ngIf=\"model.booking_set_title && model.valid && !model.valid.title\">Valid meeting name must be set</div>\n            <div class=\"field host\" *ngIf=\"model.booking_set_host\" [class.focus]=\"model.focus_user\" (touchstart)=\"selectUser()\" (mousedown)=\"selectUser()\">\n                <div class=\"icon\"></div>\n                <div class=\"label\">Host</div>\n                <div class=\"value\">\n                    <input-field name=\"basic\" [(model)]=\"model.form.user_name\" (focus)=\"model.focus_user = true\" (blur)=\"model.focus_user = false\" placeholder=\"No host selected\"></input-field>\n                </div>\n            </div>\n            <div class=\"error\" *ngIf=\"model.booking_set_host && model.valid && !model.valid.user\">Valid host must be set</div>\n            <div class=\"field ext\" *ngIf=\"model.booking_set_ext\" [class.focus]=\"model.focus_ext\" (touchstart)=\"selectUser()\" (mousedown)=\"selectUser()\">\n                <div class=\"icon\">\n                    <i class=\"material-icons\">edit_mode</i>\n                </div>\n                <div class=\"label\">Phone Extension:</div>\n                <div class=\"value\">\n                    <input-field name=\"basic\" [(model)]=\"model.form.ext\" (focus)=\"model.focus_ext = true\" (blur)=\"model.focus_ext = false\" placeholder=\"No phone extension selected\"></input-field>\n                </div>\n            </div>\n            <div class=\"error\" *ngIf=\"model.booking_set_ext && model.valid && !model.valid.ext\">Valid phone extension must be set</div>\n            <div class=\"options\">\n                <btn name=\"full-width\" (tapped)=\"close()\">Cancel</btn>\n                <btn name=\"full-width secondary\" (tapped)=\"select()\">Book</btn>\n            </div>\n            <div class=\"loading\">\n                <div class=\"icon\">\n                    <spinner name=\"grey\" type=\"circle-ring\" color=\"#999\"></spinner>\n                </div>\n                <div class=\"text\">Processing booking request...</div>\n            </div>\n        </div>\n    </div>\n</div>","/**\n* @Author: Alex Sorafumo\n* @Date:   25/01/2017 4:57 PM\n* @Email:  alex@yuion.net\n* @Filename: booking.component.ts\n* @Last modified by:   Alex Sorafumo\n* @Last modified time: 01/02/2017 11:42 AM\n*/\n\nimport { OverlayContentComponent } from '@acaprojects/ngx-widgets';\nimport { Component, Input, OnInit } from '@angular/core';\n\nimport * as moment from 'moment';\n\n@Component({\n    selector: 'booking-modal',\n    providers: [],\n    styleUrls: ['./booking.style.scss'],\n    templateUrl: './booking.template.html',\n})\nexport class BookingModalComponent extends OverlayContentComponent implements OnInit {\n    @Input() public model: any = { form: {}, display: {} };\n\n    public ngOnInit() {\n        if (!this.model) {\n            this.model = { form: {}, display: {} };\n        }\n        if (!this.model.form) {\n            this.model.form = {};\n        }\n        this.model.min = 30;\n        if (!this.model.display) {\n            this.model.display = {};\n        }\n        this.model.form.title = '';\n        if (!this.model.form.time) {\n            this.model.form.time = new Date();\n        }\n        this.model.form.time.minutes(Math.ceil(this.model.form.time.minutes() / 5) * 5);\n        this.model.form.start_time = this.model.form.time.format('HH:mm');\n        this.model.form.num_staff = 2;\n        this.model.users = [];\n        this.updateMax();\n        this.setTime();\n    }\n\n    public updateMax() {\n        if (this.model.gap) {\n            this.model.max = this.model.gap - (this.model.gap % (this.model.booking_duration_step || this.model.booking_min_duration || 15));\n            this.model.max = Math.min(this.model.max, this.model.booking_max_duration || 240);\n            if (this.model.form.duration && this.model.form.duration > this.model.max) {\n                this.model.form.duration = this.model.max;\n            }\n        }\n    }\n\n    public pickTime() {\n        if (this.model.disable_future) { return; }\n        setTimeout(() => {\n            this.service.Overlay.openModal('time-picker', {\n                data: {\n                    free: this.model.free,\n                    time: this.model.form.start_time,\n                    system: this.model.system\n                }\n            }).then((inst: any) => inst.subscribe((event: any) => {\n                if (event.type === 'Ok') {\n                    if (event.data.selected) {\n                        const block = event.data.selected;\n                        this.updateTime(moment(block.date).format('HH:mm'));\n                        this.model.gap = block.duration;\n                        this.updateMax();\n                    } else {\n                        this.updateTime(event.data.form.time);\n                    }\n                }\n                event.close();\n            }));\n        }, 200);\n    }\n\n    public setTime() {\n        const time = moment(this.model.form.time.valueOf());\n        this.model.display.time = time.format('hh:mm A');\n    }\n\n    public updateTime(data: any) {\n        const parts = data.split(':');\n        this.model.form.start_time = data.time;\n        this.model.form.time.hours(+parts[0]).minutes(Math.ceil(+parts[1] / 5) * 5);\n        this.setTime();\n    }\n\n    public selectUser() {\n        if (!this.model.booking_search_user) { return; }\n        this.service.Overlay.openModal('user-search', {}).then(\n            (inst: any) => inst.subscribe((event) => {\n                console.log('Event:', event);\n                if (event.type === 'Accept') {\n                    const user = event.data.selected;\n                    if (user) {\n                        this.model.form.name = user.name;\n                        this.model.form.ext = user.phone;\n                        this.model.form.user = user;\n                        this.model.form.booking_set_host = user;\n                        this.model.form.user_name = user.name;\n                        if (!this.model.valid) { this.model.valid = {}; }\n                        this.model.valid.name = true;\n                        this.model.valid.user = true;\n                        this.model.valid.title = true;\n                        this.model.valid.ext = true;\n                        this.model.valid.time = true;\n                    }\n                }\n                event.close();\n            }), (err) => null\n        );\n    }\n\n    public close() {\n        setTimeout(() => this.fn.close(), 300);\n    }\n    public event(name: string) {\n        setTimeout(() => this.fn.event(name), 300);\n    }\n\n    public select() {\n\n        this.model.loading = true;\n        let valid = true;\n        this.model.valid = {};\n        this.model.valid.user = true;\n        this.model.valid.title = true;\n        this.model.valid.ext = true;\n        this.model.valid.time = true;\n        if (!this.model.form.user && this.model.booking_set_host) {\n            valid = false;\n            this.model.valid.user = false;\n        }\n        if (!this.model.form.title && this.model.booking_set_title && !this.model.default_title) {\n            valid = false;\n            this.model.valid.title = false;\n        } else if (!this.model.form.title && this.model.default_title) {\n            this.model.form.title = this.model.default_title;\n        }\n        if (!+this.model.form.num_staff && !+this.model.form.num_partners) {\n            valid = false;\n            this.model.valid.count = false;\n        }\n        this.model.stopLoading = () => {\n            this.model.loading = false;\n            // Remove prefix from title\n            if (this.model.title_prefix) {\n                this.model.form.title = this.model.form.title.replace(this.model.title_prefix + ' ', '');\n            }\n        };\n        if (valid) {\n            // Add prefix to title\n            if (this.model.title_prefix) {\n                this.model.form.title = `${this.model.title_prefix} ${this.model.form.title }`;\n                this.model.form.title = this.model.form.title.replace('{{room}}', this.model.room_name);\n            }\n            setTimeout(() => this.fn.event('Book'), 300);\n        } else {\n            this.model.loading = false;\n        }\n    }\n}\n","<div class=\"confirm\">\n    <div class=\"body\">\n        <div class=\"icon\">\n            <i center class=\"material-icons\">{{model.icon}}</i>\n        </div>\n        <div class=\"details\">\n            <div class=\"heading\" [innerHTML]=\"model.title | safe\"  *ngIf=\"model.title\" ></div>\n            <div class=\"info\">{{model.message}}</div>\n            <div class=\"link\" *ngIf=\"model.link\">\n                <a (mousedown)=\"fn.event('Link')\" (touchstart)=\"fn.event('Link')\">{{model.link.text}}</a>\n            </div>\n        </div>\n    </div>\n    <div class=\"options\">\n        <btn name=\"full-width\" (tapped)=\"event('Cancel')\">Cancel</btn>\n        <btn name=\"full-width inverse\" (tapped)=\"event('Accept')\">Ok</btn>\n    </div>\n</div>","import { OverlayContentComponent } from '@acaprojects/ngx-widgets';\nimport { Component } from '@angular/core';\n\n@Component({\n    selector: 'confirm-modal',\n    templateUrl: './confirm.template.html',\n    styleUrls: ['./confirm.styles.scss'],\n})\nexport class ConfirmModalComponent extends OverlayContentComponent {\n    public model: any = {};\n\n    public init() {\n        return;\n    }\n\n    public close() {\n        setTimeout(() => this.fn.close(), 300);\n    }\n\n    public event(name: string) {\n        setTimeout(() => this.fn.event(name), 300);\n    }\n}\n","<div class=\"meeting\">\n    <btn name=\"green\" (tapped)=\"start()\">{{model.ok}}</btn>\n    <btn name=\"red\" (tapped)=\"cancel()\">{{model.cancel}}</btn>\n    <div class=\"close\" (touchstart)=\"fn.close()\" (mousedown)=\"fn.close()\">\n        <div center icon=\"close\"></div>\n    </div>\n</div>\n","import { OverlayContentComponent } from '@acaprojects/ngx-widgets';\nimport { Component, Input } from '@angular/core';\n\n@Component({\n    selector: 'meeting-modal',\n    styleUrls: ['./meeting.style.scss'],\n    templateUrl: './meeting.template.html',\n})\nexport class MeetingModalComponent extends OverlayContentComponent {\n    public start() {\n        this.fn.event('Ok');\n    }\n\n    public cancel() {\n        this.fn.event('Cancel');\n    }\n\n}\n","\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { WidgetsModule } from '@acaprojects/ngx-widgets';\nimport { ComposerModule } from '@acaprojects/ngx-composer';\n\nimport { BookingModalComponent } from './booking/booking.component';\nimport { ConfirmModalComponent } from './confirm/confirm.component';\nimport { MeetingModalComponent } from './meeting/meeting.component';\nimport { TimePickModalComponent } from './time-picker/time-pick.component';\nimport { UserSearchModalComponent } from './user-search/user-search.component';\n\nimport { SharedComponentModule } from '../shared/components/shared.module';\n\nconst OVERLAYS: any = [\n    BookingModalComponent,\n    ConfirmModalComponent,\n    MeetingModalComponent,\n    TimePickModalComponent,\n    UserSearchModalComponent\n];\n\n@NgModule({\n    declarations: [\n        ...OVERLAYS\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        ComposerModule.forRoot(),\n        WidgetsModule.forRoot(),\n        SharedComponentModule\n    ],\n    exports: [\n        ...OVERLAYS\n    ],\n    entryComponents: [\n        ...OVERLAYS\n    ]\n})\nexport class OverlayComponentModule { }\n","<!--\n@Author: Alex Sorafumo\n@Date:   08/11/2016 4:02 PM\n@Email:  alex@yuion.net\n@Filename: time-pick.template.html\n@Last modified by:   Alex Sorafumo\n@Last modified time: 01/02/2017 11:43 AM\n-->\n\n<div class=\"container\">\n    <div class=\"header\">Pick time</div>\n    <div class=\"body\">\n        <div binding [(value)]=\"model.min_duration\" (valueChange)=\"generateFreeSpaces()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_min_duration\"></div>\n        <div binding [(value)]=\"model.duration_step\" (valueChange)=\"generateFreeSpaces()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_duration_step\"></div>\n        <div binding [(value)]=\"model.enable_free\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_select_free\"></div>\n        <div class=\"blocks\" *ngIf=\"model.blocks && model.blocks.length > 0 && model.enable_free\">\n            <div class=\"list\" *ngFor=\"let block of model.blocks\">\n                <div class=\"item\" *ngFor=\"let item of block\" [class.active]=\"item.active\" (touchrelease)=\"selectTime(item)\">\n                    {{item.display}}\n                </div>\n            </div>\n        </div>\n        <div class=\"form\" *ngIf=\"((!model.free || model.free.length <= 0 || !model.blocks || model.blocks.length <= 0) || !model.enable_free) && model.form\">\n            <time-picker [(date)]=\"model.form.time\" [(duration)]=\"model.duration\" [range]=\"false\"></time-picker>\n        </div>\n    </div>\n    <div class=\"options\">\n        <btn name=\"full-width\" (tapped)=\"close()\">Cancel</btn>\n        <btn name=\"full-width inverse\" (tapped)=\"event('Ok')\">Ok</btn>\n    </div>\n</div>\n","import { OverlayContentComponent } from '@acaprojects/ngx-widgets';\nimport { ChangeDetectorRef, Component, Input } from '@angular/core';\n\nimport * as moment from 'moment';\n\n@Component({\n    selector: 'time-pick',\n    templateUrl: './time-pick.template.html',\n    styleUrls: [ './time-pick.styles.scss' ]\n})\nexport class TimePickModalComponent extends OverlayContentComponent {\n\n    public init() {\n        this.model.form = {};\n        if (this.model.free) {\n            this.generateFreeSpaces();\n        }\n        this.model.form.time = this.model.time;\n    }\n\n    public close() {\n        setTimeout(() => this.fn.close(), 300);\n    }\n    public event(name: string) {\n        setTimeout(() => this.fn.event(name), 300);\n    }\n\n    public selectTime(item) {\n        if (this.model.selected) {\n            this.model.selected.active = false;\n        }\n        this.model.selected = item;\n        item.active = true;\n    }\n\n    public addTime(value: number = 5) {\n        const parts = this.model.form.time.split(':');\n        const time = moment().hours(parts[0]).minutes(parts[1]);\n        time.add(value, 'm');\n        time.minutes(Math.round(time.minutes() / 5) * 5);\n        this.model.form.time = time.format('HH:mm');\n    }\n\n    public generateFreeSpaces() {\n        this.model.blocks = [];\n        const min_length = this.model.duration_step || this.model.min_duration || 15;\n        const step = 15;\n        const free_space = {};\n        const now = moment();\n        for (const space of this.model.free) {\n            const start = moment(space.date);\n            const date = moment(start);\n            date.minutes(Math.ceil(date.minutes() / 15) * 15);\n            const end = moment(start).add(Math.floor(space.duration), 'm');\n            for (; date.isBefore(end, 'm'); date.add(step, 'm')) {\n                const duration = moment.duration(end.diff(date)).asMinutes();\n                if (duration >= min_length && date.isSameOrAfter(now, 'm')) {\n                    if (!free_space[date.format('H')]) {\n                        free_space[date.format('H')] = [];\n                    }\n                    free_space[date.format('H')].push({\n                        date: date.valueOf(),\n                        display: date.format('h:mma'),\n                        duration\n                    });\n                }\n            }\n        }\n        for (const k in free_space) {\n            if (free_space.hasOwnProperty(k)) {\n                this.model.blocks.push(free_space[k]);\n                if (this.model.blocks.length > 6) {\n                    break;\n                }\n            }\n        }\n    }\n}\n","<div class=\"container\">\n    <div class=\"header\">\n        <div class=\"text\">Select host</div>\n        <div class=\"close\" (touchrelease)=\"fn.close()\">\n            <i class=\"material-icons\">close</i>\n        </div>\n    </div>\n    <div class=\"body\">\n        <div class=\"search\" [class.focus]=\"model.searching\">\n            <div class=\"icon\">\n                <i center class=\"material-icons\">search</i>\n            </div>\n            <div class=\"input\">\n                <input [(ngModel)]=\"model.search\" (focus)=\"model.searching=true\" (blur)=\"model.searching=false\" (ngModelChange)=\"search()\"\n                    placeholder=\"Search for people...\" />\n            </div>\n        </div>\n        <div class=\"results\">\n            <div class=\"list\" *ngIf=\"model.filtered_users && !model.loading\">\n                <div class=\"user\" *ngFor=\"let user of model.filtered_users\" (touchstart)=\"select(user)\" (mousedown)=\"select(user)\">\n                    <user-tag [model]=\"user\" [email]=\"true\"></user-tag>\n                </div>\n            </div>\n            <div center class=\"no-item\" *ngIf=\"model.loading\">\n                <div class=\"icon\"><spinner type=\"circle-ring\" color=\"rgba(0,0,0,.2)\"></spinner></div>\n                <div class=\"text\">Searching...</div>\n            </div>\n            <div center class=\"no-item\" *ngIf=\"(!model.filtered_users || model.filtered_users.length <= 0) && !model.loading\">\n                <div class=\"icon\"><i class=\"material-icons\">{{model.search && model.search.length >= 3 ? 'close' : 'keyboard'}}</i></div>\n                <div class=\"text\">{{ model.search && model.search.length >= 3 ? 'No results found' : 'Start typing to search users' }}</div>\n            </div>\n        </div>\n    </div>\n</div>","import { OverlayContentComponent } from '@acaprojects/ngx-widgets';\nimport { Component } from '@angular/core';\n\nimport { Utils } from '../../shared/utility.class';\n\n@Component({\n    selector: 'user-search-modal',\n    templateUrl: './user-search.template.html',\n    styleUrls: [ './user-search.styles.scss' ]\n})\nexport class UserSearchModalComponent extends OverlayContentComponent {\n\n    public search() {\n        this.model.filtered_users = [];\n        if (this.service && this.model.search && this.model.search.length > 2) {\n            this.model.loading = true;\n            this.service.Users.query({ q: this.model.search, limit: 50 }).then((users) => {\n                this.model.filtered_users = Utils.filter(this.model.search, users, ['name', 'email']);\n                for (const user of this.model.filtered_users) {\n                    if (user.match_name) {\n                            // Format match name\n                        user.match_name = user.match_name.replace(/\\`[a-zA-Z0-9\\@\\.\\_]*\\`/g, '<span class=\"highlight\">$&</span>');\n                        user.match_name = user.match_name.replace(/\\`/g, '');\n                    }\n                    if (user.match_email) {\n                            // Format match email\n                        user.match_email = user.match_email.replace(/\\`[a-zA-Z0-9\\@\\.\\_]*\\`/g, '<span class=\"highlight\">$&</span>');\n                        user.match_email = user.match_email.replace(/\\`/g, '');\n                    }\n                }\n                this.model.loading = false;\n            });\n        }\n    }\n\n    public select(user: any) {\n        this.model.selected = user;\n        this.fn.event('Accept');\n    }\n}\n","/**\n * @Author: Alex Sorafumo <alex.sorafumo>\n * @Date:   12/01/2017 2:25 PM\n * @Email:  alex@yuion.net\n * @Filename: app.service.ts\n * @Last modified by:   Alex Sorafumo\n * @Last modified time: 03/02/2017 10:25 AM\n */\n\nimport { SystemsService } from '@acaprojects/ngx-composer';\nimport { OverlayService } from '@acaprojects/ngx-widgets';\n\nimport { Injectable } from '@angular/core';\nimport { Title } from '@angular/platform-browser';\nimport { Router } from '@angular/router';\nimport { SwUpdate } from '@angular/service-worker';\nimport { BehaviorSubject } from 'rxjs';\n\nimport Agent from '@meldcx/agent';\n\nimport { SettingsService } from './settings.service';\nimport { Utils } from '../shared/utility.class';\n\nimport { AnalyticsService } from './data/analytics.service';\nimport { RoomsService } from './data/rooms.service';\nimport { BookingsService } from './data/bookings.service';\nimport { UsersService } from './data/users.service';\n\nimport { BookingModalComponent } from '../overlays/booking/booking.component';\nimport { MeetingModalComponent } from '../overlays/meeting/meeting.component';\nimport { TimePickModalComponent } from '../overlays/time-picker/time-pick.component';\nimport { UserSearchModalComponent } from '../overlays/user-search/user-search.component';\nimport { ConfirmModalComponent } from '../overlays/confirm/confirm.component';\nimport { BuildingsService } from './data/buildings.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AppService {\n    private api_base = 'api/staff';\n\n    private _system = '';\n    private subjects: any = {};\n    private observers: any = {};\n\n    private prev_route: string[] = [];\n    private model: any = {};\n    private timers: any = {};\n\n    constructor(private _title: Title,\n        private version: SwUpdate,\n        private router: Router,\n        private analytics: AnalyticsService,\n        private overlay: OverlayService,\n        private settings: SettingsService,\n        private buildings: BuildingsService,\n        private systems: SystemsService,\n        private bookings: BookingsService,\n        private rooms: RoomsService,\n        private users: UsersService\n    ) {\n        this.overlay.registerService(this);\n        this.overlay.setupModal('booking', { cmp: BookingModalComponent });\n        this.overlay.setupModal('meeting', { cmp: MeetingModalComponent });\n        this.overlay.setupModal('time-picker', { cmp: TimePickModalComponent });\n        this.overlay.setupModal('user-search', { cmp: UserSearchModalComponent });\n        this.overlay.setupModal('confirm', { cmp: ConfirmModalComponent });\n        this.buildings.parent = this.bookings.parent = this.users.parent = this.rooms.parent = this;\n        this.init();\n        this.subjects.system = new BehaviorSubject('');\n        this.observers.system = this.subjects.system.asObservable();\n        this.subjects.systems = new BehaviorSubject<any[]>([]);\n        this.observers.systems = this.subjects.systems.asObservable();\n        this.model.agent = new Agent();\n\n        const initMeldAgent =  async() => {\n            await this.model.agent.onReadyAsync();\n\n            const options = await this.model.agent.getDeviceOptions();\n\n            if (options.booking_system) {\n                this.initSystem(options.booking_system);\n            }\n        };\n        initMeldAgent();\n    }\n\n    get endpoint() {\n        const host = this.Settings.get('composer.domain');\n        const protocol = this.Settings.get('composer.protocol');\n        const port = ((protocol === 'https:') ? '443' : '80');\n        const url = `${protocol || location.protocol}//${host || location.host}`;\n        const endpoint = `${url}`;\n        return endpoint;\n    }\n\n    get api_endpoint() {\n        return `${this.endpoint}/${this.api_base}`;\n    }\n\n    public init() {\n        if (!this.settings.setup) {\n            return setTimeout(() => this.init(), 500);\n        }\n        this.version.available.subscribe(event => {\n            const old = event.current.hash;\n            const new_hash = event.available.hash;\n            this.settings.log('CACHE', `Update available: current version is ${old} available version is ${new_hash}`);\n            location.reload();\n        });\n        this.model.title = this.settings.get('app.title') || 'Angular Application';\n        if (this.settings.get('debug')) { (window as any).application = this; }\n        this.initialiseComposer();\n        if (this.users) {\n            const sub = this.users.listen('state', (state) => {\n                if (state === 'available') {\n                    this.loadSystems();\n                    sub.unsubscribe();\n                }\n            });\n        } else {\n            this.loadSystems();\n        }\n        this.analytics.init();\n        this.buildings.init();\n        this.bookings.init();\n        this.rooms.init();\n        this.users.init();\n        setInterval(() => this.checkCache(), 5 * 60 * 1000);\n    }\n\n    public initialiseComposer(tries: number = 0) {\n        this.settings.log('SYSTEM', 'Initialising Composer...');\n            // Get domain information for configuring composer\n        const host = this.settings.get('composer.domain') || location.hostname;\n        const protocol = this.settings.get('composer.protocol') || location.protocol;\n        const port = (protocol.indexOf('https') >= 0 ? '443' : '80');\n        const url = this.settings.get('composer.use_domain') ? `${protocol}//${host}` : location.origin;\n        const route = this.settings.get('composer.route') || '';\n            // Generate configuration for composer\n        const config: any = {\n            id: 'AcaEngine',\n            scope: 'public',\n            protocol, host, port,\n            oauth_server: `${url}/auth/oauth/authorize`,\n            oauth_tokens: `${url}/auth/token`,\n            redirect_uri: `${location.origin}${route}/oauth-resp.html`,\n            api_endpoint: `${url}/control/`,\n            proactive: true,\n            login_local: this.settings.get('composer.local_login') || false,\n            http: true,\n        };\n            // Enable mock/development environment if the settings is defined\n        const mock = this.settings.get('mock');\n        if (mock) {\n            config.mock = true;\n            config.http = false;\n        }\n            // Setup/Initialise composer\n        this.systems.setup(config);\n    }\n\n    public initSystem(sys: string) {\n        this._system = sys;\n        if (!this._system || this._system === '') {\n            if (localStorage) {\n                this._system = localStorage.getItem('ACA.CONTROL.system');\n                if (this.subjects.system) {\n                    this.subjects.system.next(this._system);\n                }\n            }\n            if (!this._system || this._system === '') {\n                this.model.agent.onReadyAsync().then(() => {\n                    this.model.agent.Storage.getItem('BOOKINGS.system').then((value) => {\n                        this._system = value;\n                        this.subjects.system.next(this._system);\n                    }).catch(() => this.navigate('bootstrap'));\n                }).catch(() => this.navigate('bootstrap'));\n            } else {\n                this.navigate('');\n            }\n        } else {\n            if (this.subjects.system) {\n                this.subjects.system.next(this._system);\n            }\n            this.model.agent.onReadyAsync().then(() => {\n                this.model.agent.Storage.setItem('BOOKINGS.system', this._system);\n            }).catch(() => null);\n        }\n    }\n\n    public ready() {\n        const mock = this.settings.get('mock') ? (window as any).backend : null;\n        const app_ready = this.settings.setup && this.users.current() && this.buildings.current();\n        return app_ready && (!mock || mock.is_loaded);\n    }\n\n\n    public listen(name: string, next: (data: any) => void) {\n        if (this.subjects[name]) {\n            return this.observers[name].subscribe(next);\n        }\n        return null;\n    }\n\n    public get(name: string) {\n        if (this.subjects[name]) {\n            return this.subjects[name].getValue();\n        }\n        return null;\n    }\n\n    get Analytics() { return this.analytics; }\n    get Settings() { return this.settings; }\n    get Overlay() { return this.overlay; }\n    get system() { return this.subjects.system.getValue(); }\n    set system(value: string) {\n        this.subjects.system.next(value);\n    }\n    get Systems() { return this.systems; }\n    get Buildings() { return this.buildings; }\n    get Bookings() { return this.bookings; }\n    get Rooms() { return this.rooms; }\n    get Users() { return this.users; }\n\n    set title(str: string) {\n        if (!this.model.title) {\n            this.model.title = this.settings.get('app.title') || '';\n        }\n        const title = `${str ? str : ''}${this.model.title ? ' | ' + this.model.title : ''}`;\n        this._title.setTitle(title || this.settings.get('app.title'));\n    }\n\n    public navigate(path: string, query?: any) {\n        const path_list = [];\n        path_list.push(path);\n        this.prev_route.push(this.router.url);\n        // if (!this.systems.resources.authLoaded) {\n        this.router.navigate(path_list, { queryParams: query });\n        // } else {\n        // this.router.navigate([path]);\n        // }\n    }\n\n    public back() {\n        if (this.prev_route.length > 0) {\n            this.navigate(this.prev_route.pop());\n            this.prev_route.pop();\n        } else {\n            this.navigate('');\n        }\n    }\n\n    public log(type: string, msg: string, args?: any, stream: string = 'debug') {\n        this.settings.log(type, msg, args, stream);\n    }\n\n    public confirm(options, next: (event: any) => void) {\n        this.Overlay.openModal('confirm', {\n            data: options,\n        }).then((inst: any) => {\n            inst.subscribe(next);\n        });\n    }\n\n    public error(msg: string, action?: string, event?: () => void) {\n        const message = msg ? msg : `Error`;\n        this.overlay.notify('success', {\n            html: `<div class=\"display-icon error\" style=\"font-size:2.0em\"></div><div class=\"msg\">${message}</div>`,\n            name: 'ntfy error',\n            action,\n            timeout: 5000\n        });\n    }\n\n    public success(msg: string, action?: string, event?: () => void) {\n        const message = msg ? msg : `Success`;\n        this.overlay.notify('success', {\n            html: `<div class=\"display-icon success\" style=\"font-size:2.0em\"></div><div class=\"msg\">${message}</div>`,\n            name: 'ntfy success',\n            action,\n            timeout: 5000\n        }, event);\n    }\n\n    public info(msg: string, action?: string, event?: () => void) {\n        const message = msg ? msg : `Information`;\n        this.overlay.notify('info', {\n            html: `<div class=\"display-icon info\" style=\"font-size:2.0em\"></div></div><div class=\"msg\">${message}</div>`,\n            name: 'ntfy info',\n            action,\n            timeout: 5000\n        }, event);\n    }\n\n    get iOS() {\n        return Utils.isMobileSafari();\n    }\n\n    public getSystem(id: string) {\n        const system_list = this.subjects.systems.getValue();\n        if (system_list) {\n            for (const system of system_list) {\n                if (system.id === id) {\n                    return system;\n                }\n            }\n        }\n        return {};\n    }\n\n    public loadSystems(tries: number = 0) {\n        if (this.timers.system) {\n            clearTimeout(this.timers.system);\n            this.timers.system = null;\n        }\n        if (tries > 20) { return; }\n        const systems = this.systems.resources.get('System');\n        if (systems) {\n            tries = 0;\n            systems.get({ offset: '0', limit: 500 }).then((sys_list: any) => {\n                this.subjects.systems.next([]);\n                if (sys_list) {\n                    const count = sys_list.total;\n                    if (count > 500) {\n                        const iter = Math.ceil((count - 500) / 500);\n                        for (let i = 0; i < iter; i++) {\n                            systems.get({ offset: (i + 1) * 500, limit: 500 }).then((list: any) => {\n                                if (list) {\n                                    this.addSystems(list.results);\n                                }\n                            });\n                        }\n                    }\n                    this.addSystems(sys_list.results);\n                } else {\n                    this.timers.system = setTimeout(() => this.loadSystems(tries), 200 * ++tries);\n                }\n            }, (err: any) => {\n                this.timers.system = setTimeout(() => this.loadSystems(tries), 200 * ++tries);\n            });\n        } else {\n            this.timers.system = setTimeout(() => this.loadSystems(tries), 200 * ++tries);\n        }\n    }\n\n    private addSystems(list: any[]) {\n        const system_list = this.subjects.systems.getValue().concat(list);\n        system_list.sort((a, b) => a.name.localeCompare(b.name));\n        this.subjects.systems.next(system_list);\n    }\n\n    private checkCache() {\n        if (this.version.isEnabled) {\n            this.settings.log('SYSTEM', 'Checking cache for updates');\n            this.version.checkForUpdate()\n                .then(() => this.settings.log('SYSTEM', 'Finished checking cache for updates'))\n                .catch(err => this.settings.log('SYSTEM', err, null, 'error'));\n        }\n    }\n\n}\n\n","import { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AnalyticsService {\n    public model: any = {};\n    public parent = null;\n\n    private timers: any = {};\n\n    constructor(private router: Router) { }\n\n    public init() {\n        if (!this.parent || !this.parent.ready()) {\n            return setTimeout(() => this.init(), 500);\n        }\n\n        this.model.settings = this.parent.Settings.get('app.analytics') || {};\n        this.model.prefix = this.model.settings.prefix || 'Panel';\n        if (this.model.settings && this.model.settings.enabled) {\n            this.parent.Settings.log('Analytics', `Initialising...`);\n            // (window as any).ga('create', 'UA-119470294-1', 'auto');\n            (window as any).ga('create', this.model.settings.tracking_id, 'auto');\n            (window as any).ga('send', 'pageview');\n            this.updatePage();\n        }\n    }\n    /**\n     * Set User ID for the Google Analytics session\n     * @param id Identifier of the User\n     */\n    public setUser(id: string) {\n        if (this.model.settings && this.model.settings.enabled && (window as any).ga) {\n            this.timeout(`user|${id}`, () => {\n                this.parent.Settings.log('Analytics', `Set user ID: ${id}`);\n                (window as any).ga('set', 'userId', id);\n                this.event('authentication', 'user-id available');\n            }, 100);\n        }\n    }\n\n    /**\n     * Post event to Google Analytics API\n     * @param category Event Category\n     * @param action Event Action\n     * @param label Event Label\n     * @param value Event Value\n     */\n    public event(category: string, action: string, label?: string, value?: string) {\n        if (this.model.settings && this.model.settings.enabled && (window as any).ga) {\n            this.timeout(`event|${category}|${action}|${label}|${value}`, () => {\n                const l = label ? ', ' + label : '';\n                this.parent.Settings.log('Analytics', `Event: ${category}, ${action}${l}${value ? ', ' + value : ''}`);\n                (window as any).ga('send', 'event', `${this.model.prefix}_${category}`, action, label, value);\n            }, 100);\n        }\n    }\n\n    public screen(name: string, app_name?: string) {\n        if (this.model.settings && this.model.settings.enabled && (window as any).ga && name) {\n            this.timeout(`event|${name}|${app_name || this.parent.Settings.appName}`, () => {\n                this.parent.Settings.log('Analytics', `Screen: ${name}${app_name ? ', ' + app_name : ''}`);\n                (window as any).ga('send', 'screenview', {\n                    appName: app_name || this.parent.Settings.appName,\n                    screenName: name\n                });\n            }, 100);\n        }\n    }\n\n    public page(route: string, origin: boolean = false) {\n        if (this.model.settings && this.model.settings.enabled && (window as any).ga) {\n            this.model.page = route || '/';\n            this.timeout(`page|${route}`, () => {\n                this.parent.Settings.log('Analytics', `Page: ${route}`);\n                (window as any).ga('send', 'pageview', `${origin ? location.origin : ''}${route}`);\n            }, 100);\n        }\n    }\n\n    public timing(category: string, variable: string, value: string, label?: string) {\n        if (this.model.settings && this.model.settings.enabled && (window as any).ga) {\n            this.timeout(`page|${category}|${variable}|${value}|${label}`, () => {\n                this.parent.Settings.log('Analytics', `Timing: ${category}, ${variable}, ${value}${label ? ', ' + label : ''}`);\n                (window as any).ga('send', 'timing', category, variable, value, label);\n            }, 100);\n        }\n    }\n\n    /**\n     * Creates a timeout for the given name and clears a old one if it exists\n     * @param name Name of timer\n     * @param fn Timer callback\n     * @param delay Timer delay\n     */\n    private timeout(name: string, fn: () => void, delay: number = 300) {\n        if (this.timers[name]) {\n            clearTimeout(this.timers[name]);\n            this.timers[name] = null;\n        }\n        this.timers[name] = setTimeout(() => {\n            if (fn instanceof Function) { fn(); }\n            this.timers[name] = null;\n        }, delay);\n    }\n\n    /**\n     * Post page and screen for the current view of the application\n     * @param tries Retry count. DON'T USE\n     */\n    public updatePage(tries: number = 0) {\n        if (tries > 10) { return; }\n        if (!this.model.settings || !this.model.settings.enabled || !(window as any).ga) {\n            return setTimeout(() => this.updatePage(), 200 * ++tries);\n        }\n        this.timeout('update-page', () => {\n            const page = this.router.url.split('?')[0];\n            if (this.model.page !== page) {\n                const title = (this.parent.title || '').split(' | ')[0];\n                this.screen(title);\n                this.page(page);\n            }\n        }, 50);\n    }\n}\n","\nimport { CommsService } from '@acaprojects/ngx-composer';\nimport { BehaviorSubject, Subscription, Observable } from 'rxjs';\n\nimport { Utils } from '../../shared/utility.class';\nimport { AppService } from '../app.service';\n\nimport * as moment from 'moment';\n\nconst FORBIDDEN: string[] = ['model', 'observers', 'subjects'];\n\nexport interface IBaseObject {\n    id?: string;\n    name?: string;\n    email?: string;\n    [name: string]: any;\n}\n\nexport class BaseService<T> {\n    public parent: AppService = null;\n    protected model: { [name: string]: any } = {};\n    protected subjects: { [name: string]: BehaviorSubject<any> } = {};\n    protected observers: { [name: string]: Observable<any> } = {};\n    protected promises: { [name: string]: Promise<any> } = {};\n    protected subs: {\n        timers: { [name: string]: number },\n        intervals: { [name: string]: number },\n        obs: { [name: string]: Subscription | (() => void) }\n    } = {\n        timers: {},     // Store for timers\n        intervals: {},  // Store for intervals\n        obs: {}         // Store for observables\n    };\n\n    protected http: CommsService;\n\n    constructor() {\n        this.set<{ [id: string]: T }>('map', {});\n        this.set<T[]>('list', []);\n    }\n\n    public init() {\n        if (!this.parent || !this.parent.Settings.setup || (this.parent.Settings.get('mock') && !(window as any).backend.is_loaded)) {\n            return setTimeout(() => this.init(), 500);\n        }\n        this.load();\n    }\n\n    protected load() { }\n\n    get endpoint() {\n        return this.parent ? `${this.parent.api_endpoint}${this.model.route}` : `/control/api${this.model.route}`;\n    }\n\n    public list(): T[] {\n        return this.get('list') || [];\n    }\n\n    public filter(filter: string, fields: string[] = ['id', 'name'], items: T[] = this.list()) {\n        return Utils.filter(filter, items, fields);\n    }\n\n    public clearList() {\n        this.set<T[]>('list', []);\n    }\n\n    /**\n     * Listen to changes of given property\n     * @param name Name of the property\n     * @param next Callback for changes to properties value\n     */\n    public listen<U>(name: string, next: (data: U) => void) {\n        if (this.subjects[name]) {\n            return this.observers[name].subscribe(next);\n        } else {\n            // Create new variable to store property's value\n            this.subjects[name] = new BehaviorSubject<U>(this[name] instanceof Function ? null : this[name]);\n            this.observers[name] = this.subjects[name].asObservable();\n            // Create raw getter and setter for property\n            if (!(this[name] instanceof Function)) {\n                Object.defineProperty(this, name, {\n                    get: (): U => this.get(name),\n                    set: (v: U) => this.set<U>(name, v)\n                });\n            }\n            return this.observers[name].subscribe(next);\n        }\n    }\n\n    /**\n     * Get the current value of the given property\n     * @param name Name of the property\n     */\n    public get(name: string) {\n        return this.subjects[name] ? this.subjects[name].getValue() : null;\n    }\n\n    /**\n     * Get item from list with the specific ID\n     * @param id ID to search for\n     */\n    public item(id: string): T {\n        if (!id) { return null; }\n        const list = this.get('list') || [];\n        for (const item of list) {\n            if (item.id === id || item.name === id || (item.email && (item.email || '').toLowerCase() === id.toLowerCase())) {\n                return item;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Get observable for property\n     * @param name Name of the property. Possible values bookings, new_booking, and update_booking\n     */\n    public observer(name: string) {\n        return this.subjects[name] ? this.observers[name] : null;\n    }\n\n    /**\n     * Get item listing\n     * @param fields Key, value pairs for query parameters\n     * @param tries Retry value. DON'T USE\n     */\n    public query(fields?: { [name: string]: any }) {\n        const query = Utils.generateQueryString(fields);\n        let update = true;\n        if (fields && !fields.update) {\n            for (const f in fields) {\n                if (fields.hasOwnProperty(f) && f !== 'offset' && f !== 'limit') {\n                    update = false;\n                    break;\n                }\n            }\n        }\n        const key = `query|${query}`;\n        if (!this.promises[key]) {\n            this.promises[key] = new Promise((resolve, reject) => {\n                const url = `${this.endpoint}${query ? '?' + query : ''}`;\n                this.http.get(url).subscribe(\n                    (resp: any) => {\n                        const item_list = this.processList(resp.results ? resp.results || resp : resp);\n                        if (update) { this.updateList(item_list); }\n                        resolve(item_list);\n                        setTimeout(() => this.promises[key] = null, 5 * 1000);\n                    }, (err) => {\n                        this.promises[key] = null;\n                        reject(err);\n                    });\n            });\n        }\n        return this.promises[key];\n    }\n    /**\n     * Get item with the given ID\n     * @param id ID to get the data for\n     * @param fields Key, value pairs for query parameters\n     */\n    public show(id: string, fields?: { [name: string]: any }) {\n        const key = `show|${id}`;\n        if (!this.promises[key]) {\n            this.promises[key] = new Promise((resolve, reject) => {\n                const control = fields && fields.control;\n                if (control) { delete fields.control; }\n                const query = Utils.generateQueryString(fields) || (fields ? 'complete=true' : '');\n                const url = `${control ? ('/control/api' + this.model.route) : this.endpoint}/${id}${query ? '?' + query : ''}`;\n                this.http.get(url).subscribe(\n                    (resp: any) => {\n                        const item = this.processItem(resp);\n                        resolve(item);\n                        setTimeout(() => this.promises[key] = null, 15 * 1000);\n                    }, (err) => {\n                        this.promises[key] = null;\n                        reject(err);\n                    });\n            });\n        }\n        return this.promises[key];\n    }\n\n    /**\n     * Add new item with the given parameters\n     * @param data\n     */\n    public add(data: { [name: string]: any }) {\n        const key = `add|${data.id || moment().seconds(0).unix()}`;\n        if (!this.promises[key]) {\n            this.promises[key] = new Promise((resolve, reject) => {\n                const formatted_data = this.format(data);\n                const url = `${this.endpoint}`;\n                this.http.post(url, formatted_data).subscribe(\n                    (resp: any) => {\n                        const item = this.processItem(resp);\n                        resolve(item);\n                        this.parent.Analytics.event((this.model.name || '').toUpperCase(), `created_${this.model.name}`);\n                        const list = this.get('list') || [];\n                        list.push(item);\n                        this.updateList(list);\n                        setTimeout(() => this.promises[key] = null, 2 * 1000);\n                    }, (err) => {\n                        this.parent.Analytics.event((this.model.name || '').toUpperCase(), `create_${this.model.name}_fail`);\n                        this.promises[key] = null;\n                        reject(err);\n                    });\n            });\n        }\n        return this.promises[key];\n    }\n\n    /**\n     * Alias for add method\n     * @param data\n     */\n    public new(data: { [name: string]: any }) {\n        return this.add(data);\n    }\n\n    /**\n     * Update item with given ID\n     * @param id ID of the item\n     * @param data New values to replace on the old item\n     */\n    public update(id: string, data: { [name: string]: any }, link?: string) {\n        return new Promise((resolve, reject) => {\n            if (!id) { return reject('Invalid ID given'); }\n            data.link = link;\n            this.parent.confirm(this.confirmSettings('update', data), (event) => {\n                if (event.type === 'Accept') {\n                    this.updateItem(id, data).then((d) => resolve(d), (e) => reject(e));\n                } else {\n                    event.close();\n                    reject('User cancelled');\n                }\n            });\n        });\n    }\n\n    /**\n     * Request to the server to update the given item\n     * @param id ID of the item to update\n     * @param data Data to replace on the server's copy\n     */\n    public updateItem(id: string, data: { [name: string]: any }) {\n        if (!id) { return new Promise((rs, rj) => rj('Invalid ID given')); }\n        const key = `update|${id || moment().seconds(0).unix()}`;\n        if (!this.promises[key]) {\n            this.promises[key] = new Promise((resolve, reject) => {\n                const formatted_data = this.format(data);\n                const url = `${this.endpoint}/${id}`;\n                this.http.put(url, formatted_data).subscribe(\n                    (resp: any) => {\n                        const item = this.processItem(resp);\n                            // Update item data\n                        this.updateList([item]);\n                        resolve(item);\n                        this.parent.Analytics.event((this.model.name || '').toUpperCase(), `updated_${this.model.name}`);\n                        setTimeout(() => this.promises[key] = null, 2 * 1000);\n                    }, (err) => {\n                        this.promises[key] = null;\n                        this.parent.Analytics.event((this.model.name || '').toUpperCase(), `update_${this.model.name}_fail`);\n                        reject(err);\n                    });\n            });\n        }\n        return this.promises[key];\n    }\n\n    /**\n     * Execute task on the the given item\n     * @param id Item ID\n     * @param task Name of the task to execute\n     */\n    public task(id: string, task: string, fields?: { [name: string]: any }) {\n        const key = `task|${id}|${task}`;\n        if (!this.promises[key]) {\n            this.promises[key] = new Promise((resolve, reject) => {\n                const url = `${this.endpoint}/${id}/${task}`;\n                const body: { [name: string]: any } = {\n                    id,\n                    _task: task\n                };\n                if (fields) {\n                    for (const k in fields) {\n                        if (fields.hasOwnProperty(k)) {\n                            body[k] = fields[k];\n                        }\n                    }\n                }\n                this.http.post(url, body).subscribe(\n                    (resp: any) => {\n                        resolve(resp || {});\n                        setTimeout(() => this.promises[key] = null, 200);\n                    }, (err) => {\n                        this.promises[key] = null;\n                        reject(err instanceof Array ? err[0] : err);\n                    });\n            });\n        }\n        return this.promises[key];\n    }\n\n    /**\n     * Remove item with the given ID\n     * @param id ID of the item\n     */\n    public remove(id: string, fields?: { [name: string]: any }) {\n        return new Promise((resolve, reject) => {\n            if (!id) { return reject('Invalid ID given'); }\n            const item = this.item(id) || {};\n            this.parent.confirm(\n                this.confirmSettings('delete', { ...item, link: fields ? fields.link : ''}),\n                (event) => {\n                    if (event.type === 'Accept') {\n                        this.deleteItem(id, fields).then((d) => resolve(d), (e) => reject(e));\n                    } else {\n                        reject('User cancelled');\n                    }\n                    event.close();\n                });\n        });\n    }\n\n    /**\n     * Alias for the remove method\n     * @param id\n     */\n    public delete(id: string, fields?: { [name: string]: any }) {\n        return this.remove(id, fields);\n    }\n\n    /**\n     * Request to delete item on the server\n     * @param id ID of the item to delete\n     */\n    protected deleteItem(id: string, fields?: { [name: string]: any }) {\n        const query = Utils.generateQueryString(fields);\n        const key = `delete|${id || moment().seconds(0).unix()}|${query}`;\n        if (!this.promises[key]) {\n            this.promises[key] = new Promise((resolve, reject) => {\n                const url = `${this.endpoint}/${id}${query ? '?' + query : ''}`;\n                this.http.delete(url).subscribe(\n                    (resp: any) => {\n                        const list = [{ id }];\n                        this.removeFromList(list as any);\n                        resolve();\n                        this.parent.Analytics.event((this.model.name || '').toUpperCase(), `removed_${this.model.name}`);\n                        setTimeout(() => this.promises[key] = null, 2 * 1000);\n                    }, (err) => {\n                        this.promises[key] = null;\n                        this.parent.Analytics.event((this.model.name || '').toUpperCase(), `remove_${this.model.name}_fail`);\n                        reject(err);\n                    });\n            });\n        }\n        return this.promises[key];\n    }\n\n    /**\n     * Adds new items and updates existing items in the item list store\n     * @param input_list List of new/updated items\n     */\n    protected updateList(input_list: T[], clear: boolean = false) {\n        // Get current list\n        const item_list = clear ? [] : this.list() || [];\n        // Add any new items to the list\n        for (const i of (input_list || [])) {\n            const input = i as IBaseObject;\n            let found = false;\n            for (const i2 of item_list) {\n                const item = i2 as IBaseObject;\n                if (item.id === input.id || (input.email && item.email === input.email)) {\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                item_list.push(input as any);\n            }\n        }\n        // Sort list\n        (item_list as IBaseObject[]).sort((a, b) => (a.name || '').localeCompare(b.name || ''));\n        // Store changes to the list\n        this.updateHashMap(item_list);\n        this.set('list', item_list);\n    }\n\n    /**\n     * Remove given items from the item list store\n     * @param list list of items to remove\n     */\n    protected removeFromList(list: T[]) {\n        const item_list = this.list() || [];\n        for (const item of list) {\n            for (const i of item_list) {\n                if ((i as IBaseObject).id === (item as IBaseObject).id) {\n                    item_list.splice(item_list.indexOf(i), 1);\n                    break;\n                }\n            }\n        }\n        this.set('list', item_list);\n    }\n\n    /**\n     * Update random access list of items\n     * @param list List of items. Each item requires an id parameter\n     */\n    protected updateHashMap(list: T[]) {\n        const map: { [id: string]: T } = {};\n        for (const item of list) {\n            map[(item as IBaseObject).id] = item;\n        }\n        this.set('map', map);\n    }\n\n    /**\n     * Process array of items from the server\n     * @param input_list Array of items\n     */\n    public processList(input_list: { [name: string]: any }[]) {\n        const output_list: T[] = [];\n        for (const key in (input_list || [])) {\n            if (input_list.hasOwnProperty(key) && input_list[key]) {\n                const out = this.processItem(input_list[key], key);\n                if (out) { output_list.push(out); }\n            }\n        }\n        (output_list as IBaseObject).sort((a, b) => (a.name || a.id || '').localeCompare(b.name || b.id || ''));\n        return output_list;\n    }\n\n    /**\n     * Post processing for server data to be used locally\n     * @param data Data to format\n     */\n    protected processItem(raw_item: { [name: string]: any }, id?: string): T {\n        return <T>raw_item;\n    }\n\n    /**\n     * Pre-processing for local data to be sent to the server\n     * @param data Data to format\n     */\n    protected format(data: { [name: string]: any }) {\n        const formatted_data = data;\n        return formatted_data;\n    }\n\n    /**\n     * Set the value of the given property\n     * @param name Name of the property\n     * @param value New value to assign to the property\n     */\n    protected set<U>(name: string, value: U) {\n        if (this.subjects[name]) {\n            this.subjects[name].next(value);\n        } else {\n            // Create new variable to store property's value\n            this.subjects[name] = new BehaviorSubject<U>(value);\n            this.observers[name] = this.subjects[name].asObservable();\n            // Create raw getter and setter for property\n            if (!(this[name] instanceof Function)) {\n                Object.defineProperty(this, name, {\n                    get: (): U => this.get(name),\n                    set: (v: U) => this.set(name, v)\n                });\n            }\n        }\n    }\n\n    /**\n     * Generate settings for confirm modal\n     * @param key\n     * @param fields\n     */\n    protected confirmSettings(key: string, fields: { [name: string]: any } = {}) {\n        const settings: { [name: string]: any } = {\n            title: '',\n            message: '',\n            icon: '',\n            link: fields.link,\n            accept: 'Ok',\n            cancel: true\n        };\n        switch (key) {\n            case 'delete':\n                settings.title = `Delete ${this.model.name}`;\n                settings.message = `Are you sure you wish to delete ${this.model.name} '${fields.name || fields.title || ''}'?`;\n                settings.icon = 'delete';\n                break;\n            case 'update':\n                settings.title = `Update ${this.model.name}`;\n                settings.message = `Update ${this.model.name} '${fields.name ? fields.name : ''}'?`;\n                settings.icon = 'cloud_upload';\n                break;\n            case 'add':\n                settings.title = `New ${this.model.name}`;\n                settings.message = `Create new ${this.model.name} '${fields.name ? fields.name : ''}'?`;\n                settings.icon = 'add';\n                break;\n        }\n        return settings;\n    }\n\n    /**\n     * Wrapper for setTimeout. Clears timer with same name\n     * @param name Name of the timer\n     * @param fn Callback function\n     * @param delay Timeout delay in milliseconds\n     */\n    public timeout(name: string, fn: () => void, delay: number = 300) {\n        this.clearTimer(name);\n        if (!(fn instanceof Function)) { return; }\n        this.subs.timers[name] = <any>setTimeout(() => fn(), delay);\n    }\n\n    /**\n     * Clears timer with the given name\n     * @param name Name of the timer\n     */\n    public clearTimer(name: string) {\n        if (this.subs.timers[name]) {\n            clearTimeout(this.subs.timers[name]);\n            this.subs.timers[name] = null;\n        }\n    }\n\n    /**\n     * Wrapper for setInterval. Clears interval with same name\n     * @param name Name of the interval\n     * @param fn Callback function\n     * @param delay Timeout delay in milliseconds\n     */\n    public interval(name: string, fn: () => void, delay: number = 300) {\n        this.clearInterval(name);\n        if (!(fn instanceof Function)) { return; }\n        this.subs.intervals[name] = <any>setInterval(() => fn(), delay);\n    }\n\n    /**\n     * Clears interval with the given name\n     * @param name Name of the interval\n     */\n    public clearInterval(name: string) {\n        if (this.subs.intervals[name]) {\n            clearInterval(this.subs.intervals[name]);\n            this.subs.intervals[name] = null;\n        }\n    }\n}\n","/*\n * @Author: Alex Sorafumo\n * @Date: 2017-06-05 12:39:28\n * @Last Modified by: Alex Sorafumo\n * @Last Modified time: 2018-06-19 13:56:07\n */\n\nimport { CommsService } from '@acaprojects/ngx-composer';\nimport { Injectable } from '@angular/core';\n\nimport { IRoom } from './rooms.service';\nimport { IUser } from './users.service';\nimport { BaseService } from './base.service';\nimport { Utils } from '../../shared/utility.class';\n\nimport * as moment from 'moment';\n\nexport interface IBooking {\n    id: string;\n    icaluid?: string;\n    title: string;\n    date: number;\n    start_hours?: number;\n    duration: number;\n    description?: string;\n    organiser?: IUser;\n    is_organiser?: boolean;\n    attendees?: IUser[];\n    room?: IRoom;\n    display?: { [name: string]: string };\n    catering?: boolean;\n    visitors?: boolean;\n    cost_code?: string;\n    parking?: boolean;\n    asked_end?: boolean;\n    all_day?: boolean;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BookingsService extends BaseService<IBooking> {\n\n    constructor(protected http: CommsService) {\n        super();\n        this.model.name = 'booking';\n        this.model.route = '/bookings';\n        this.set('timeline', {});\n        this.set('new_booking', { state: 'idle' });\n        this.set('update_booking', { state: 'idle' });\n    }\n    /**\n     * Initialise service\n     */\n    public init() {\n        if (!this.parent || !this.parent.Rooms.list(true) || this.parent.Rooms.list(true).length <= 0 || !this.parent.ready()) {\n            return setTimeout(() => this.init(), 500);\n        }\n        if (this.parent && this.parent.Settings.get('app.schedule.enabled')) {\n            this.load();\n        }\n    }\n\n    protected load(tries: number = 0) {\n        this.query();\n        this.interval('load', () => this.query(), 5 * 60 * 1000);\n    }\n\n    /**\n     * Create overlay with the give booking details displayed\n     * @param item Booking to view\n     */\n    public view(item: IBooking) {\n        if (this.parent) {\n            this.parent.Overlay.openModal('meeting-details', { data: { booking: item } })\n                .then((inst: any) => inst.subscribe((e) => e.close()));\n        }\n    }\n\n    /**\n     * Create modal with a booking form\n     * @param room Room to book\n     */\n    public bookRoom(room: IRoom) {\n        const today = moment();\n        today.minutes(Math.ceil(today.minutes() / 5) * 5).seconds(0).milliseconds(0);\n        const bookings = room.bookings.filter(b => moment(b.date).isSame(today, 'd'));\n        let block = this.getNextFreeBlock(bookings);\n        if (block && moment.duration(moment(block.end).diff(today)).asMinutes() < 30) {\n            block = this.getNextFreeBlock(bookings, 30, block.end);\n        }\n        this.parent.Overlay.openModal('booking-form', { data: {\n            room,\n            date: block.start < 0 ? today.valueOf() : Math.max(today.valueOf(), block.start) }\n        }, (e) => e.close());\n    }\n\n    /**\n     * Create confirm modal for booking the specified space with the given parameters\n     * @param item Booking form hash map\n     */\n    public book(item: { [name: string]: any }) {\n        return new Promise((resolve, reject) => {\n            if (this.get('new_booking').state !== 'idle') { return reject('Another booking is in progress'); }\n            const date = moment(item.date);\n            this.parent.confirm(this.confirmSettings('add', item), (event) => {\n                if (event.type === 'Accept') {\n                    this.subjects.new_booking.next({ state: 'processing' });\n                    this.add(item).then((d) => {\n                        this.set('new_booking', { state: 'success', value: d });\n                        resolve(d);\n                        if (localStorage) {\n                            const booking = localStorage.getItem('STAFF.booking_form');\n                            localStorage.removeItem('STAFF.booking_form');\n                            localStorage.setItem('STAFF.last_booking', booking || JSON.stringify(item));\n                        }\n                        this.timeout(`${moment().unix()}`, () => this.set('new_booking', { state: 'idle' }));\n                    }, (e) => {\n                        this.set('new_booking', { state: 'error', value: e });\n                        this.timeout('new_error', () => this.set('new_booking', { state: 'idle' }));\n                        reject(e);\n                    });\n                } else {\n                    reject('Cancelled by user');\n                }\n                event.close();\n            });\n        });\n    }\n\n    /**\n     * Create confirm modal for updating booking of the specified space with the given parameters\n     * @param item Booking form hash map\n     */\n    public update(id: string, item: { [name: string]: any }) {\n        return new Promise((resolve, reject) => {\n            this.parent.confirm(this.confirmSettings('update', item), (event) => {\n                if (event.type === 'Accept') {\n                    this.set('update_booking', { state: 'processing' });\n                    this.updateItem(item.id || id, item)\n                        .then((d) => {\n                            this.set('update_booking', { state: 'success', value: d });\n                            resolve(d);\n                            if (localStorage) {\n                                const booking = localStorage.getItem('STAFF.booking_form');\n                                localStorage.removeItem('STAFF.booking_form');\n                                localStorage.setItem('STAFF.last_booking', booking || JSON.stringify(item));\n                            }\n                            this.parent.Rooms.replaceBooking(d);\n                            this.query();\n                            this.timeout(`${moment().unix()}`, () => this.set('new_booking', { state: 'idle' }));\n                        }, (e) => {\n                            this.set('update_booking', { state: 'error', value: e });\n                            this.timeout('update_error', () => this.set('update_booking', { state: 'idle' }));\n                            reject(e);\n                        });\n                    event.close();\n                } else { reject('Cancelled by user'); }\n                event.close();\n            });\n        });\n    }\n\n    public accept(id: string, fields?: { [name: string]: any }) {\n        return this.task(id, 'accept', fields);\n    }\n\n    /**\n     * Retrieve booking with the given ID\n     * @param id ID of booking\n     */\n    public getWithID(id: string) {\n        return this.item(id);\n    }\n    /**\n     * Get item with the given ID\n     * @param id ID to get the data for\n     * @param fields Key, value pairs for query parameters\n     */\n    public show(id: string, fields?: { [name: string]: any }) {\n        const key = `show|${id}`;\n        if (!this.promises[key]) {\n            this.promises[key] = new Promise((resolve, reject) => {\n                const control = fields && fields.control;\n                if (control) { delete fields.control; }\n                const query = Utils.generateQueryString(fields) || (fields ? 'complete=true' : '');\n                const url = `${control ? ('/control/api' + this.model.route) : this.endpoint}/${id}${query ? '?' + query : ''}`;\n                this.http.get(url).subscribe(\n                    (resp: any) => {\n                        const list = this.processList(resp);\n                        resolve(list);\n                        setTimeout(() => this.promises[key] = null, 15 * 1000);\n                    }, (err) => {\n                        this.promises[key] = null;\n                        reject(err);\n                    });\n            });\n        }\n        return this.promises[key];\n    }\n\n    /**\n     * Check for conflicts between two lists of bookings\n     * @param list First list to check for conflicts\n     * @param comparison Second list to check for conflicts. Defaults to the users bookings\n     */\n    public checkConflicts(list: IBooking[], comparison?: IBooking[]) {\n        if (!comparison) {\n            comparison = this.get('timeline') || [];\n        }\n        let conflict_count = 0;\n        for (const bkn of list) {\n            const bkn_start = moment(bkn.date);\n            const bkn_end = moment(bkn_start).add(bkn.duration, 'm');\n            for (const cmp of comparison) {\n                const cmp_start = moment(cmp.date);\n                const cmp_end = moment(cmp_start).add(cmp.duration, 'm');\n                if (bkn_start.isBetween(cmp_start, cmp_end, 'm', '[)') || bkn_end.isBetween(cmp_start, cmp_end, 'm', '(]')) {\n                    conflict_count++;\n                    break;\n                }\n            }\n        }\n        return conflict_count;\n    }\n\n    /**\n     * Get the free times between a group of booking\n     * @param list List of bookings\n     */\n    public getFreeSlots(list: IBooking[]) {\n        list.sort((a, b) => a.date - b.date);\n        const block: { start: number, end: number }[] = [];\n        let bkn_start = null;\n        let bkn_end = null;\n        for (const bkn of list) {\n            bkn_start = moment(bkn.date).seconds(0).milliseconds(0);\n            if (!bkn_end) {\n                block.push({ start: -1, end: bkn_start.valueOf() });\n            } else if (bkn_end.isBefore(bkn_start, 'm')) {\n                block.push({ start: bkn_end.valueOf(), end: bkn_start.valueOf() });\n            }\n            bkn_end = moment(bkn_start).add(bkn.duration, 'm');\n        }\n        if (bkn_end) {\n            block.push({ start: bkn_end.valueOf(), end: -1 });\n        }\n        return block;\n    }\n\n    public getNextFreeBlock(list: IBooking[], gap: number = 30, time: number = moment().valueOf()) {\n        const blocks = this.getFreeSlots(list);\n        const now = moment(time);\n        let block = null;\n        for (const blk of blocks) {\n            const start = blk.start < 0 ? moment().hours(0).minutes(0) : moment(blk.start);\n            const end = blk.end < 0 ? moment().hours(23).minutes(59) : moment(blk.end);\n            const dur = moment.duration(end.diff(start));\n            const length = Math.floor(dur.asMinutes());\n            if (!block && (now.isBetween(start, end, 'm', '[)') || now.isBefore(start, 'm')) && length >= gap) {\n                block = blk;\n                break;\n            }\n        }\n        return block;\n    }\n\n    public processItem(raw_item: { [name: string]: any }) {\n        const user = this.parent.Users.current();\n        const start = moment(raw_item.start_epoch * 1000 || raw_item.start || raw_item.Start || raw_item.date);\n        const end = moment(raw_item.end_epoch * 1000 || raw_item.end || raw_item.End);\n        const has_end = raw_item.end_epoch * 1000 || raw_item.end || raw_item.End;\n        const duration = moment.duration(start.diff(end));\n        const item: IBooking = {\n            id: raw_item.id,\n            icaluid: raw_item.icaluid,\n            title: raw_item.title || raw_item.Subject || raw_item.subject,\n            date: raw_item.all_day ? start.startOf('d').valueOf() : start.valueOf(),\n            start_hours: start.hours() + start.minutes() / 60,\n            duration: has_end ? Math.abs(duration.asMinutes()) || raw_item.duration : raw_item.duration,\n            description: raw_item.description,\n            attendees: this.parent.Users.processList(raw_item.attendees || []),\n            organiser: { name: raw_item.owner } as IUser,\n            is_organiser: false,\n            room: { id: raw_item.room_id, name: raw_item.room_name } as IRoom,\n            visitors: raw_item.visitors,\n            all_day: !!raw_item.all_day,\n            display: {\n                date: start.format('DD/MM/YYYY'),\n                time: `${start.format('h:mma')} - ${end.format('h:mma')}`,\n                start: start.format('h:mma'),\n                end: has_end ? end.format('h:mma') : moment(start).add(raw_item.duration, 'm').format('h:mma'),\n                duration: duration.humanize()\n            }\n        };\n\n        Object.defineProperty(item, 'room', {\n            get: () => {\n                const room = raw_item.room_id ?\n                    this.parent.Rooms.item(raw_item.room_id) :\n                    { id: raw_item.room_id, name: raw_item.room_name } as IRoom;\n                item.display.room = room ? room.name : '';\n                item.display.level = room && room.level ? room.level.name : '';\n                return room;\n            }\n        });\n        // Setup organiser for booking\n        if (raw_item.organiser || raw_item.organizer) {\n            const email = typeof raw_item.organiser === 'string' ?\n                raw_item.organiser :\n                (typeof raw_item.organizer === 'string' ? raw_item.organizer : (raw_item.organiser || raw_item.organizer || {}).email);\n            // Get the organiser's details\n            item.organiser = this.parent.Users.get(email) || raw_item.organiser || raw_item.organizer;\n            // Check if organiser is the current user\n            item.is_organiser = item.organiser && user && (item.organiser.id === user.id ||\n                item.organiser.email === user.email);\n        }\n        // Get room associated with the booking\n        const id = raw_item.locations && raw_item.locations.length > 0 ? raw_item.locations[0].uniqueId : raw_item.room_id;\n        const rm = this.parent.Rooms.item(id);\n        if (rm) {\n            item.display.room = rm.name || raw_item.room_name;\n            item.display.level = rm.level ? rm.level.name : '';\n        }\n        return item;\n    }\n\n    protected format(item) {\n        const form = item || {};\n        if (!form.room) { form.room = {}; }\n        const date = moment(form.date);\n        const request: any = {\n            start: date.unix(),\n            end: date.add(form.duration, 'm').unix(),\n            room_id: form.room.email || form.room.id,\n            title: form.title,\n            description: form.description,\n            attendees: form.attendees,\n            other: form.other,\n            from_room: form.from_room || '',\n            loan_items: form.loan_items || '',\n            private: form.private || false,\n            catering: form.catering || false,\n            cost_code: form.cost_code,\n            parking: form.catering || false\n        };\n        if (item.icaluid) { request.icaluid = item.icaluid; }\n        if (item.organiser) { request.organiser = item.organiser; }\n        return request;\n    }\n\n    protected updateList(list: IBooking[]) {\n        super.updateList(list);\n        const timeline = this.get('timeline') || {};\n        // Add bookings to timeline\n        for (const item of list) {\n            const date = moment(item.date);\n            const day = timeline[date.format('YYYY/MM/DD')] || [];\n            for (const event of day) {\n                if ((item.id && event.id === item.id) || item.date === event.date) {\n                    day.splice(day.indexOf(event), 1);\n                    break;\n                }\n            }\n            day.push(item);\n            timeline[date.format('YYYY/MM/DD')] = day;\n        }\n        // Sort events in the timeline\n        for (const key in timeline) {\n            if (timeline.hasOwnProperty(key)) {\n                timeline[key].sort((a, b) => a.date - b.date);\n            }\n        }\n        this.set('timeline', timeline);\n    }\n\n    public removeFromList(list: IBooking[]) {\n        super.removeFromList(list);\n            // Also remove booking from timeline\n        const timeline = this.get('timeline') || {};\n        for (const item of list) {\n            const date = moment(item.date);\n            const day = timeline[date.format('YYYY/MM/DD')] || [];\n            for (const event of day) {\n                if ((item.id && event.id === item.id) || item.date === event.date) {\n                    day.splice(day.indexOf(event), 1);\n                    break;\n                }\n            }\n        }\n        this.set('timeline', timeline);\n    }\n\n    protected confirmSettings(key: string, fields: { [name: string]: any } = {}) {\n        const settings = super.confirmSettings(key, fields);\n        const date = moment(fields.date || '');\n        const user = this.parent.Users.current();\n        const room = fields.room ? this.parent.Rooms.item(fields.room.id) : null;\n        const lvl = room ? room.level : null;\n        switch (key) {\n            case 'add':\n                settings.title = `${room.book_type || (!lvl ? 'Schedule' : 'Book')} ${ lvl ? 'space' : 'meeting'}`;\n                if (lvl) {\n                    settings.message = `${room.book_type || 'Book'} space \"${room.name}\"<br>`;\n                } else {\n                    settings.message = 'Meeting ';\n                }\n                settings.message += `\n                    on the ${date.format('Do of MMMM, YYYY')} at ${date.format('h:mma')}<br>\n                    for ${Utils.humaniseDuration(fields.duration)}\n                `;\n                break;\n            case 'delete':\n                if (user && fields.organiser && user.email !== fields.organiser && user.email !== fields.organiser.email) {\n                    settings.title = `Decline meeting`;\n                    settings.message = `Are you sure you wish to decline attendance to meeting '${fields.name || fields.title || ''}'?`;\n                    settings.icon = 'event_busy';\n                }\n                break;\n            case 'update':\n                settings.message = `Change booking for \"${fields.room ? fields.room.name : fields.room_name}\"<br>\n                                    to the ${date.format('Do of MMMM, YYYY')} at ${date.format('h:mma')}<br>\n                                    for ${moment.duration(fields.duration * 60, 's').humanize()}`;\n                break;\n        }\n        return settings;\n    }\n\n    private checkAttendees(list: IUser[]) {\n        const external_attendees = [];\n        for (const user of (list || [])) {\n            if (user.external) {\n                external_attendees.push(user);\n            }\n        }\n        return external_attendees;\n    }\n}\n","/*\n* @Author: Alex Sorafumo\n* @Date:   2017-05-25 16:00:37\n * @Last Modified by: Alex Sorafumo\n * @Last Modified time: 2018-07-02 16:45:34\n*/\n\nimport { CommsService } from '@acaprojects/ngx-composer';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { Utils } from '../../shared/utility.class';\n\nexport interface IBuilding {\n    id: string;\n    zone_id?: string;\n    name: string;\n    extras: IExtra[];\n    levels: ILevel[];\n    settings: any;\n    loan_items?: IExtra[];\n    orgs?: IOrganisation[];\n    roles?: any;\n    lockers?: any;\n    visitor_space?: string;\n    coords?: {\n        longitude: number;\n        latitude: number;\n    };\n    map: {\n        zones?: { id: string, name: string; }[];\n        searchables?: any;\n    };\n    terms?: {\n        title: string,\n        details: string\n    }[];\n}\n\nexport interface IExtra {\n    id: string;\n    name: string;\n}\n\nexport interface ILevel {\n    id: string;\n    bld_id: string;\n    name: string;\n    number: string | number;\n    book_type?: string;\n    map_url?: string;\n    map: {\n        features?: { id: string, name: string; }[];\n        poi?: { id: string, name: string; }[];\n    };\n    type?: string;\n    settings?: any;\n    defaults?: any;\n}\n\nexport interface IOrganisation {\n    id: string;\n    name: string;\n    settings: any;\n    blds?: IBuilding[];\n    orgs?: IOrganisation[];\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BuildingsService {\n    public parent: any = null;\n    public default = '';\n    public data: any = {};\n\n    private model: any = {};\n    private active = '';\n    private org: IOrganisation;\n    private subjects: any = {};\n    private observers: any = {};\n\n    constructor(private http: CommsService) {\n        this.subjects.active = new BehaviorSubject<IBuilding>(null);\n        this.observers.active = this.subjects.active.asObservable();\n    }\n    /**\n     * Initialise service\n     */\n    public init() {\n        if (!this.parent || !this.parent.Settings.setup || (this.parent.Settings.get('mock') && !(window as any).backend.is_loaded)) {\n            return setTimeout(() => this.init(), 500);\n        }\n        this.default = this.parent.Settings.get('building.default');\n        this.model.has_orgs = this.parent.Settings.get('app.orgs');\n        if (localStorage) {\n            this.model.user_set_building = localStorage.getItem('STAFF.building');\n        }\n        const sub = this.parent.Users.listen('state', (state) => {\n            if (state === 'available') {\n                this.load();\n                sub.unsubscribe();\n            }\n        });\n    }\n\n    /**\n     * Load API data\n     * @param tries Retry count. DON'T USE\n     */\n    public load(tries: number = 0) {\n        if (!this.parent) {\n            return setTimeout(() => this.load(), 500);\n        }\n        const url = `${this.parent.endpoint}/control/api/zones?tags=org`;\n        this.http.get(url).subscribe((response: any) => {\n            const o = response instanceof Array ? response : response.results;\n            if (o && o.length > 0) {\n                const org = o[0];\n                const settings = org.settings ? org.settings.discovery_info || {} : {};\n                this.org = {\n                    id: org.id,\n                    name: org.name,\n                    settings: settings.settings || {},\n                    blds: settings.buildings || [],\n                    orgs: settings.organisations || []\n                };\n                if (!this.org.orgs || this.org.orgs.length <= 0 && this.model.has_orgs) {\n                    this.loadOrganisations();\n                }\n            }\n        }, (err) => {\n            this.parent.log('BLD(S)', 'Error loading org:', err, 'error');\n            setTimeout(() => this.load(tries), 500 * ++tries);\n        }, () => {\n            if (!this.org) {\n                setTimeout(() => this.load(tries), 500 * ++tries);\n            } else {\n                this.loadBuildings();\n            }\n        });\n    }\n    /**\n     * Load Organisation Data\n     */\n    public loadOrganisations() {\n        if (!this.parent) {\n            return setTimeout(() => this.loadOrganisations(), 500);\n        }\n        const url = `${this.parent.api_endpoint}/organisations`;\n        this.http.get(url).subscribe((r: any) => {\n            if (this.org) {\n                this.org.orgs = r;\n            }\n            for (const id in this.data) {\n                if (this.data[id]) {\n                    this.data[id].orgs = this.org.orgs;\n                }\n            }\n        }, (e) => null, () => null);\n    }\n\n    /**\n     * Get a list of buildings\n     */\n    public list() {\n        const blds: IBuilding[] = [];\n        for (const b in this.data) {\n            if (this.data.hasOwnProperty(b) && this.data[b]) {\n                blds.push(this.data[b]);\n            }\n        }\n        return blds;\n    }\n\n    /**\n     * Gets the currently active building\n     */\n    public current(): IBuilding {\n        return this.subjects.active.getValue();\n    }\n\n    /**\n     * Observable for current building\n     */\n    public listen(next: (data: any) => void) {\n        return this.observers.active.subscribe(next);\n    }\n\n    /**\n     * Get observable for property\n     * @param name Name of the property. Possible values active\n     */\n    public observer(name: string = 'active') {\n        return this.subjects[name] ? this.observers[name] : null;\n    }\n\n    /**\n     * Get Buidling with the given ID\n     * @param id Building ID\n     */\n    public get(id: string) {\n        if (this.data[id]) {\n            return this.data[id];\n        }\n        return null;\n    }\n\n    /**\n     * Set the active building\n     * @param id ID of Building\n     * @param save Store active building\n     */\n    public set(id: string, save: boolean = true) {\n        if (this.data[id]) {\n            this.active = id;\n            this.subjects.active.next(this.data[id]);\n            if (localStorage && save) {\n                localStorage.setItem('STAFF.building', id);\n            }\n        }\n    }\n\n    /**\n     * Gets the organisation\n     */\n    public organisation() {\n        return this.org;\n    }\n\n    /**\n     * Gets the levels of the current building or building with the given ID\n     * @param {string} id Building ID\n     */\n    public levels(id?: string) {\n        const bld = this.current();\n        if (bld) {\n            if (id) {\n                for (const lvl of bld.levels) {\n                    if (lvl.id === id) { return [lvl]; }\n                }\n            } else {\n                return bld.levels || [];\n            }\n        }\n        return [];\n    }\n    /**\n     * Get first level that matches the given ID/IDs\n     * @param id_list An ID or array of IDs\n     */\n    public getLevel(id_list: string | string[]) {\n        const list = id_list instanceof Array ? id_list : [id_list];\n        for (const id in this.data) {\n            if (this.data.hasOwnProperty(id) && this.data[id]) {\n                const bld = this.data[id];\n                for (const lvl of bld.levels) {\n                    if (list.indexOf(lvl.id) >= 0) {\n                        return lvl;\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Get a list of extras that IDs match\n     * @param id String with the IDs\n     */\n    public getExtras(id: string) {\n        const bld = this.current();\n        const list: IExtra[] = [];\n        if (bld && id) {\n            for (const e of bld.extras) {\n                if (id.indexOf(e.id) >= 0) {\n                    list.push(e);\n                }\n            }\n        }\n        return list;\n    }\n\n    public getSetting(name: string) {\n        const bld = this.current();\n        let item = null;\n        if (bld) {\n            const settings = bld.settings;\n            const parts = name.split('.');\n            if (parts[0] === 'app' && parts.length > 1) { parts.splice(0, 1); }\n            if (parts.length <= 0) { return null; }\n            item = this.getItemFromKeys(parts, settings);\n        }\n        if (!item && this.organisation()) {\n            const settings = this.organisation().settings;\n            const parts = name.split('.');\n            if (parts[0] === 'app' && parts.length > 1) { parts.splice(0, 1); }\n            if (parts.length <= 0) { return null; }\n            item = this.getItemFromKeys(parts, settings);\n        }\n        return item;\n    }\n\n    /**\n     * Gets nested setting value\n     * @param keys List of keys to iterate down the object\n     * @param root Root element of the search\n     * @return Returns the value a the end of the iteration or null\n     */\n    private getItemFromKeys(keys: string[], root: any) {\n        if (keys.length <= 0) {\n            return root;\n        }\n        if (typeof root !== 'object') {\n            return null;\n        }\n        let item = root;\n        // Iterate through keys to traverse object tree\n        for (const k of keys) {\n            // Make sure key has a value\n            if (k !== '') {\n                if (item !== undefined && item !== null && item.hasOwnProperty(k)) {\n                    item = item[k];\n                } else {\n                    return null;\n                }\n            }\n        }\n        return item;\n    }\n\n    /**\n     * Load building data from the API\n     * @param tries Retry count. DON'T USE\n     */\n    private loadBuildings(tries: number = 0) {\n        const url = `${this.parent.endpoint}/control/api/zones?tags=building`;\n        this.http.get(url).subscribe((response: any) => {\n            const blds = response instanceof Array ? response : response.results;\n            for (const bld of blds) {\n                for (const b of this.org.blds) {\n                    if (bld.id === b.zone_id) {\n                        const info = bld.settings.discovery_info || {};\n                        this.data[bld.id] = {\n                            id: bld.id,\n                            name: bld.name,\n                            catering: info.catering,\n                            phone: info.phone,\n                            systems: {\n                                desks: info.desk_tracking,\n                                messaging: info.messaging\n                            },\n                            lockers: info.locker_structure,\n                            roles: info.roles || {},\n                            extras: this.processExtras(info.extras),\n                            levels: this.processLevels(info.levels, bld.id),\n                            loan_items: this.processExtras(info.loan_items),\n                            map: {\n                                zones: info.map_zones || [],\n                                searchables: info.neighbourhoods || {}\n                            },\n                            terms: info.terms,\n                            settings: info.settings || {},\n                            orgs: info.organisations,\n                            visitor_space: info.visitor_space\n                        };\n                        Object.defineProperty(this.data[bld.id], 'orgs', {\n                            get: () => {\n                                const contact_orgs = this.parent.Contacts.get('orgs') || [];\n                                const orgs = info.organisations && info.organisations.length > 1 ? [ ...info.organisations ] : [];\n                                contact_orgs.forEach(i => !orgs.find(o => i === o.name) ? orgs.push({\n                                    id: i.split('').reduce((a = 0, c: string) => a += c.charCodeAt(0)),\n                                    name: i\n                                }) : '');\n                                orgs.sort((a, n) => a.name.localeCompare(n.name));\n                                return orgs;\n                            }\n                        });\n                        if (this.data[bld.id] && this.data[bld.id].roles) {\n                            for (const grp in this.data[bld.id].roles) {\n                                if (this.data[bld.id].roles.hasOwnProperty(grp)) {\n                                    const group = this.data[bld.id].roles[grp];\n                                    for (const user of group) {\n                                        user.type = 'role';\n                                    }\n                                }\n                            }\n                        }\n                            // Set coordinates\n                        if (info.latitude || info.longitude || info.lat || info.long) {\n                            this.data[bld.id].coords = {\n                                longitude: info.longitude || info.long || 0,\n                                latitude: info.latitude || info.lat || 0\n                            };\n                        }\n                    }\n                }\n            }\n        }, (err) => {\n            this.parent.log('BLD(S)', 'Error loading buildings:', err, 'error');\n            setTimeout(() => this.loadBuildings(tries), 500 * ++tries);\n        }, () => {\n            const keys = Object.keys(this.data);\n            if ((!this.default || this.default === '' || !this.data[this.default]) && keys.length > 0) {\n                this.default = keys[0];\n            }\n            if (keys.indexOf(this.model.user_set_building) < 0) {\n                this.model.user_set_building = null;\n                if (localStorage) {\n                    localStorage.removeItem('STAFF.building');\n                }\n            }\n                // Check user's geolocation\n            if (keys.length > 1 && this.data[keys[0]].coords && 'geolocation' in navigator) {\n                navigator.geolocation.getCurrentPosition((loc) => {\n                    let bld = null;\n                    let dist = 999;\n                    for (const id in this.data) {\n                        if (this.data.hasOwnProperty(id)) {\n                            const coords = this.data[id].coords;\n                            const i_dist = Utils.geodistance(coords.latitude, coords.longitude, loc.coords.latitude, loc.coords.longitude);\n                            if (i_dist < dist) {\n                                bld = this.data[id];\n                                dist = i_dist;\n                            }\n                        }\n                    }\n                    if (bld) {\n                        this.parent.log('BLD][S', `Building set to \"${bld.name}\" based of geolocation`);\n                        this.set(bld.id, false);\n                    }\n                });\n            }\n            this.set(this.model.user_set_building || this.default, false);\n            this.parent.log('BLD(S)', 'Loaded building data');\n            setTimeout(() => this.loadLevels(), 300);\n        });\n    }\n\n    /**\n     * Load level data from the API\n     * @param tries Retry count. DON'T USE\n     */\n    private loadLevels(tries: number = 0) {\n        if (tries > 10) { return; }\n        const url = `${this.parent.endpoint}/control/api/zones?tags=level`;\n        let data = null;\n        this.http.get(url).subscribe(\n            (levels: any) => data = levels.results || levels,\n            (err) => {\n                this.parent.log('BLD(S)', 'Error loading levels:', err, 'error');\n                setTimeout(() => this.loadLevels(tries), 500 * ++tries);\n            },\n            () => {\n                this.parent.log('BLD(S)', 'Loaded level data');\n                for (const lvl of (data || [])) {\n                    const level = this.getLevel(lvl.id || lvl.level_id);\n                    if (level) {\n                        level.settings = lvl.settings || {};\n                        level.map.features = level.settings.map_features || [];\n                        level.map.poi = level.settings.map_poi || [];\n                    }\n                }\n            });\n    }\n\n    /**\n     * Covert building level data to local format\n     * @param list Array of Levels\n     * @param id ID of the associated building\n     */\n    private processLevels(list: any[], id: string = ''): ILevel[] {\n        const levels: ILevel[] = [];\n        if (list) {\n            for (const item of list) {\n                levels.push({\n                    id: item.level_id,\n                    bld_id: id,\n                    name: item.level_name,\n                    map_url: item.map_url,\n                    number: item.level_name.indexOf('Level') >= 0 ? item.level_name.replace('Level ', '') : item.level_name[0],\n                    type: item.floor_type || 'staff',\n                    book_type: item.book_type,\n                    map: {},\n                    defaults: item.defaults || {}\n                });\n            }\n        }\n        return levels;\n    }\n\n    /**\n     * Covert building extras data to local format\n     * @param list Array of Extras\n     */\n    private processExtras(list: any[]): IExtra[] {\n        const extras: IExtra[] = [];\n        if (list) {\n            for (const item of list) {\n                extras.push({\n                    id: item.extra_id,\n                    name: item.extra_name,\n                });\n            }\n        }\n        return extras;\n    }\n}\n","\nimport { CommsService } from '@acaprojects/ngx-composer';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\n\nimport * as moment from 'moment';\n\nimport { ILevel, IExtra } from './buildings.service';\nimport { IBooking } from './bookings.service';\nimport { Utils } from '../../shared/utility.class';\nimport { BaseService } from './base.service';\n\nexport interface IRoom {\n    id: string;\n    name: string;\n    long_name?: string;\n    email: string;\n    level: ILevel;\n    map_id: string;\n    available?: boolean;\n    bookable: boolean;\n    in_use: string | boolean;\n    raw_bookings: { [name: string]: any }[];\n    bookings: IBooking[];\n    searchable?: boolean;\n    today?: IBooking[];\n    zones?: string[];\n    timeline?: { [name: string]: IBooking[] };\n    rate?: number;\n    support_url?: string;\n    extras?: IExtra[];\n    capacity?: number;\n    controllable?: boolean;\n    linked_rooms?: string[];\n    book_type?: string;\n    current?: IBooking;\n    order?: number;\n    next?: IBooking;\n    nextFree?: (d: number) => number;\n}\n\nexport interface IRoomAvailabilityRequest {\n    date: number;\n    duration: number;\n    id?: string;\n    bookable?: boolean;\n    rooms?: string;\n    ignore?: string;\n    zone_id?: string;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class RoomsService extends BaseService<IRoom> {\n\n    constructor(protected http: CommsService) {\n        super();\n        this.model.name = 'space';\n        this.model.route = '/rooms';\n        this.set('timelines', {});\n        this.set('search', []);\n        this.set('results', []);\n        this.set('capacities', []);\n        // Initialise state\n        this.set('state', 'loading');\n    }\n\n    protected load() {\n        this.query({}).then((rooms) => null, (e) => null);\n    }\n\n    /**\n     * Get list of rooms\n     * @param all All rooms for client\n     * @param zone_ids List of zones that the rooms must be in\n     */\n    public list(all: boolean = false, zone_ids?: string | string[]) {\n        const zones = zone_ids ? (zone_ids instanceof Array ? zone_ids || [] : [zone_ids]) : [];\n        const list = this.get('list') || [];\n        let rm_list = [];\n        if (all) {\n            rm_list = list;\n        } else {\n            const bld = this.parent && this.parent.Buildings.current() ? this.parent.Buildings.current() : null;\n            const bld_list = list.filter((i) => i.level && i.level.bld_id === bld.id);\n            rm_list = (bld ? bld_list : list);\n        }\n        return zones.length > 0 ? rm_list.filter((i) => {\n            let cnt = 0;\n            for (const id of zones) {\n                if (i.zones.indexOf(id) >= 0) { cnt++; }\n            }\n            return cnt >= zones.length;\n        }) : rm_list;\n    }\n\n    /**\n     * Get list of available rooms\n     * @param date Start time of availabilty block\n     * @param duration Length of availabiliy block. Defaults to 60\n     * @param id ID of room to check availability\n     * @param bookable Only check bookable rooms. Defaults to true\n     */\n    public available(options: IRoomAvailabilityRequest) {\n        if (!this.parent || !this.parent.Buildings.current()) {\n            return new Promise((rs, rj) =>\n                setTimeout(() => this.available(options).then((v) => rs(v), (e) => rj(e)), 500)\n            );\n        }\n        this.set('state', 'loading');\n        const id = options.id;\n        const start = moment(options.date);\n        const end = moment(start).add(options.duration, 'm');\n        const bld = this.parent.Buildings.current();\n        const key = `availiable|${start.unix()}|${options.duration}${id ? '|' + id : ''}|${bld.id}|${options.ignore}|${options.zone_id}`;\n        if (!this.promises[key]) {\n            this.promises[key] = new Promise((resolve, reject) => {\n                const query: any = {\n                    bookable: true,\n                    available_from: start.unix(),\n                    available_to: end.unix(),\n                    zone_id: options.zone_id /* || bld.id */\n                };\n                if (options.ignore) { query.ignore = options.ignore; }\n                if (options.rooms) { query.room_ids = options.rooms; }\n                const response = (list) => {\n                    // Remove unavailable rooms\n                    for (let index = 0; index < list.length; index++) {\n                        const i = list[index];\n                        if (!i.available) {\n                            list.splice(index--, 1);\n                        } else if (i.linked_rooms) {\n                            for (const item of list) {\n                                if (i.linked_rooms.indexOf(item.id) >= 0 && !item.available) {\n                                    list.splice(index--, 1);\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    resolve(list);\n                    this.timeout(key, () => this.promises[key] = null, 1000);\n                    this.set('state', 'idle');\n                };\n                const error = (err) => {\n                    this.subjects.state.next('idle');\n                    this.promises[key] = null;\n                    reject(err);\n                };\n                if (id) {\n                    this.show(id, query).then(response, error);\n                } else {\n                    this.query(query).then(response, error);\n                }\n            });\n        }\n        return this.promises[key];\n    }\n\n    /**\n     * Check if room is available\n     * @param id ID of room\n     * @param date Start time of availabilty block\n     * @param duration Length of availabiliy block. Defaults to 60\n     */\n    public isAvailable(id: string, date: number, duration: number = 60, ignore?: string) {\n        const start = moment(date);\n        const key = `availiable|${id}|${start.unix()}|${duration}`;\n        if (!this.promises[key]) {\n            this.promises[key] = new Promise((resolve, reject) => {\n                // Get availability of room\n                this.available({\n                    date,\n                    duration,\n                    id,\n                    bookable: false,\n                    ignore\n                }).then((result) => {\n                    const item = (result instanceof Array ? result[0] : result) || {};\n                    // Check availability status of room\n                    if (item.available && item.linked_rooms && item.linked_rooms.length > 0) {\n                        this.available({\n                            date,\n                            duration,\n                            bookable: false,\n                            rooms: item.linked_rooms.join(',')\n                        }).then((list) => {\n                            list.length === item.linked_rooms.length ? resolve() : reject('Linked rooms are not free');\n                        });\n                    } else {\n                        item.id === id && item.available ? resolve() : reject();\n                    }\n                    // Prevent new requests for 60 seconds\n                    setTimeout(() => this.promises[key] = null, 60 * 1000);\n                }, (err) => reject());\n            });\n        }\n        return this.promises[key];\n    }\n\n    /**\n     * Update room parameters\n     * @param room Room data\n     */\n    public processRoom(room: IRoom) {\n        if (room) {\n            if (room.raw_bookings) {\n                room.bookings = this.processRoomBookings(room.raw_bookings);\n                room.next = this.nextBooking(room.bookings);\n                room.current = this.currentBooking(room.bookings);\n                room.in_use = this.checkState(room.bookings);\n                this.timelineBookings(room.id, room.bookings);\n            }\n        }\n        return room;\n    }\n\n    public processItem(raw_item) {\n        if (!raw_item.settings) { raw_item.settings = {}; }\n        const settings = raw_item.settings;\n        const lvl = this.parent.Buildings.getLevel(raw_item.zones) || {};\n        if (!lvl.settings) { lvl.settings = {}; }\n        const out: IRoom = {\n            id: raw_item.id,\n            name: raw_item.name,\n            long_name: settings.long_name || raw_item.long_name,\n            email: (raw_item.email || '').toLowerCase(),\n            level: lvl,\n            map_id: raw_item.settings ? raw_item.settings.map_id : raw_item.map_id,\n            available: raw_item.available || raw_item.settings.available,\n            bookable: raw_item.bookable,\n            raw_bookings: raw_item.settings.bookings || raw_item.bookings,\n            order: raw_item.settings.room_order || raw_item.room_order || 999,\n            bookings: [],\n            extras: this.parent.Buildings.getExtras(raw_item.settings.extra_features || raw_item.extra_features),\n            support_url: settings.support_url || raw_item.support_url,\n            capacity: raw_item.capacity,\n            zones: raw_item.zones,\n            book_type: settings.book_type || lvl.book_type || lvl.settings.book_type || '',\n            controllable: settings.controllable,\n            rate: settings.cost_hour || raw_item.cost_hour,\n            linked_rooms: raw_item.linked_rooms || raw_item.settings.linked_rooms,\n            in_use: false,\n            next: null,\n        };\n        if (out.controllable !== false) { out.controllable = lvl.settings.controllable; }\n        if (settings.bookable_by_request !== false && (settings.bookable_by_request || (lvl.settings.bookable_by_request))) {\n            out.book_type = 'Request';\n        }\n        if (raw_item.capacity) {\n            const cap_list = this.get('capacities') || [];\n            let found = false;\n            for (const item of cap_list) {\n                if (item.value === raw_item.capacity) {\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                cap_list.push({\n                    id: raw_item.capacity,\n                    value: raw_item.capacity,\n                    name: `Min. ${raw_item.capacity} ${raw_item.capacity === 1 ? 'Person' : 'People'}`\n                });\n                cap_list.sort((a, b) => a.value - b.value);\n                this.set('capacities', cap_list);\n            }\n        }\n        // Add getter for timelines\n        Object.defineProperty(out, 'timeline', {\n            get: () => {\n                const timeline = this.get('timelines') || {};\n                return timeline[out.id] || {};\n            }\n        });\n        if (!out.level.id) {\n            // Add getter for level\n            Object.defineProperty(out, 'level', {\n                get: () => {\n                    const level = this.parent.Buildings.getLevel(raw_item.zones) || { settings: {} };\n                    if (!level.settings) { level.settings = {}; }\n                    if (settings.bookable_by_request !== false && (settings.bookable_by_request || (level.settings.bookable_by_request))) {\n                        out.book_type = 'Request';\n                    }\n                    return level;\n                }\n            });\n        }\n        Object.defineProperty(out, 'today', {\n            get: () => {\n                const timelines = this.get('timelines') || {};\n                const timeline = timelines[out.id] || {};\n                const now = moment();\n                return timeline[now.format('DD MMM YYYY')] || [];\n            }\n        });\n        out.nextFree = (d) => this.nextFreeTimeForRoom(out, d);\n        this.processRoom(out);\n        return out;\n    }\n\n    /**\n     * Convert booking data into local format\n     * @param bookings Array of room bookings\n     */\n    private processRoomBookings(bookings: any[]): IBooking[] {\n        if (!bookings) { return []; }\n        bookings.forEach(b => b.visitors = false);\n        return this.parent.Bookings.processList(bookings) || [];\n    }\n\n    /**\n     * Get the next upcoming booking\n     * @param bookings Array of bookings\n     */\n    public nextBooking(bookings: any[]) {\n        if (!bookings || bookings.length <= 0) {\n            return null;\n        }\n        const now = moment();\n        let booking: any = null;\n        let booking_start: any = null;\n        for (const event of bookings) {\n            const start = moment(event.date);\n            if (now.isSame(start, 'd') && start.isAfter(now) && (!booking_start || booking_start.isAfter(start))) {\n                booking = event;\n                booking_start = start;\n            }\n        }\n        return booking;\n    }\n\n    /**\n     * Get booking in progress\n     * @param bookings Array of bookings\n     */\n    public currentBooking(bookings: any[]) {\n        if (!bookings || bookings.length <= 0) {\n            return null;\n        }\n        const now = moment();\n        for (const event of bookings) {\n            const start = moment(event.date);\n            const end = moment(start).add(event.duration, 'm');\n            if (now.isBetween(start, end, 'm', '[)')) {\n                return event;\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Get end time of the current booking\n     * @param bookings Array of bookings\n     */\n    public checkState(bookings: any[]) {\n        if (!bookings || bookings.length <= 0) {\n            return false;\n        }\n        const now = moment();\n        let time = moment();\n        for (const event of bookings) {\n            const start = moment(event.date);\n            const end = moment(start).add(event.duration, 'm');\n            if (start.isSameOrBefore(time, 'm') && end.isAfter(time, 'm')) {\n                time = end;\n            }\n        }\n        return !time.isSame(now, 'm') ? time.format('h:mm A') : false;\n    }\n\n    /**\n     * Get bookings on the given date\n     * @param bookings Array of bookings\n     * @param date Date to check\n     */\n    public bookingsForDate(bookings: any[], date: any = moment()) {\n        const list: any[] = [];\n        for (const event of bookings) {\n            const start = moment(event.date);\n            if (start.isSame(date, 'd')) {\n                list.push(event);\n            }\n        }\n        return list;\n    }\n\n    /**\n     * Update booking with the given date\n     * @param booking Updated booking data\n     */\n    public replaceBooking(booking: IBooking) {\n        const timeline = this.get('timelines') || {};\n        if (booking.room && booking.room.id) {\n            if (timeline[booking.room.id] && Object.keys(timeline[booking.room.id]).length > 0) {\n                let found = false;\n                for (const date in timeline[booking.room.id]) {\n                    if (timeline[booking.room.id].hasOwnProperty(date)) {\n                        const list = timeline[booking.room.id][date];\n                        for (const bkn of list) {\n                            if (bkn.id === booking.id) {\n                                found = true;\n                                list[list.indexOf(bkn)] = this.parent.Bookings.processItem(booking);\n                                break;\n                            }\n                        }\n                        list.sort((a, b) => a.date - b.date);\n                        if (found) { break; }\n                    }\n                }\n                if (!found) {\n                    const bkn = this.parent.Bookings.processItem(booking);\n                    const date = moment(bkn.date).format('DD MMM YYYY');\n                    if (!timeline[booking.room.id][date]) { timeline[booking.room.id][date] = []; }\n                    timeline[booking.room.id][date].push(bkn);\n                }\n            } else if (timeline[booking.room.id]) {\n                this.timelineBookings(booking.room.id, [this.parent.Bookings.processItem(booking)]);\n            }\n        }\n    }\n\n    /**\n     * Remove booking from room's timeline\n     * @param room_id Room ID\n     * @param bkn_id Booking ID\n     * @param date Booking date\n     */\n    public removeFromTimeline(room_id: string, bkn_id: string, date: string = moment().format('DD MMM YYYY')) {\n        const timeline = this.get('timelines') || {};\n        if (timeline[room_id] && timeline[room_id][date]) {\n            for (const bkn of timeline[room_id][date]) {\n                if (bkn.id === bkn_id) {\n                    timeline[room_id][date].splice(timeline[room_id][date].indexOf(bkn), 1);\n                    break;\n                }\n            }\n        }\n        this.subjects.timelines.next(timeline);\n    }\n\n    public nextFreeTimeForRoom(room: IRoom, duration: number = 30) {\n        const now = moment();\n        const bookings = room.timeline[now.format('DD MMM YYYY')] || [];\n        const free_blocks = this.parent.Bookings.getFreeSlots(bookings);\n        for (const block of free_blocks) {\n            const start = moment(block.start > 0 ? block.start : '');\n            const end = moment(block.end > 0 ? block.end : '');\n            const time = start.isSameOrBefore(now, 'm') ? now : start;\n            const d = Math.round(moment.duration(end.diff(time)).asMinutes());\n            if (d >= duration) { return time.valueOf(); }\n        }\n        return now.valueOf();\n    }\n\n    /**\n     * Create a list of bookings for each day\n     * @param bookings Array of bookings\n     */\n    public timelineBookings(id: string, bookings: any[]) {\n        const timeline = this.get('timelines') || {};\n        if (!timeline[id]) { timeline[id] = {}; }\n        const now = moment();\n        // Add bookings to the timeline\n        for (const bkn of bookings) {\n            const date = moment(bkn.date).format('DD MMM YYYY');\n            if (!timeline[id][date]) { timeline[id][date] = []; }\n            // Remove matches\n            for (const event of timeline[id][date]) {\n                if (event.id === bkn.id) {\n                    timeline[id][date].splice(timeline[id][date].indexOf(event), 1);\n                    break;\n                }\n            }\n            timeline[id][date].push(bkn);\n        }\n        // Sort timeline\n        for (const i in timeline[id]) {\n            if (timeline[id][i]) {\n                timeline[id][i].sort((a, b) => a.date - b.date);\n            }\n        }\n        this.subjects.timelines.next(timeline);\n    }\n\n    public getRoom(id: string): IRoom {\n        return this.item(id);\n    }\n}\n","import { CommsService } from '@acaprojects/ngx-composer';\nimport { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { BehaviorSubject } from 'rxjs';\n\nimport { Utils } from '../../shared/utility.class';\nimport { BaseService } from './base.service';\n\nimport * as moment from 'moment';\n\nexport interface IUser {\n    id: string;\n    name: string;\n    first_name?: string;\n    last_name?: string;\n    email: string;\n    win_id?: string;\n    type?: 'partner' | 'internal' | 'external';\n    role?: string;\n    state?: string;\n    image: string;\n    phone?: string;\n    lockers?: { id: string, expiry: number }[];\n    external?: boolean;\n    optional?: boolean;\n    staff_code?: string;\n    organisation_id?: string;\n    organisation_name?: string;\n    organisation?: { id: string, name: string } | string;\n    b_unit?: string;\n    timezone?: string;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class UsersService extends BaseService<IUser> {\n\n    constructor(protected http: CommsService, private http_unauth: HttpClient) {\n        super();\n        this.model.name = 'user';\n        this.model.route = '/users';\n        this.subjects.list = new BehaviorSubject<IUser[]>([]);\n        this.observers.list = this.subjects.list.asObservable();\n        this.set('user', null);\n        this.set('state', 'loading');\n    }\n\n    protected load(tries: number = 0) {\n        if (tries > 3) { return this.set('state', 'invalid'); }\n        this.set('state', 'loading');\n        this.show('current', { control: true }).then((user) => {\n            if (user) {\n                this.set('user', user);\n                this.set('state', 'available');\n            } else {\n                this.timeout('load', () => this.load(tries), 300 * ++tries);\n            }\n        }, () => this.timeout('load', () => this.load(tries), 300 * ++tries));\n    }\n\n    /**\n     * Get current user\n     */\n    public current(): IUser {\n        return this.get('user');\n    }\n\n    /**\n     * Sets the access token and expiry for the user\n     * @param token OAuth bearer token\n     * @param expiry Expiry epoch timestamp in ms\n     */\n    public setToken(token: string, expiry?: number) {\n        if (!expiry) { expiry = moment().add(7, 'd').valueOf(); }\n        const path = `${location.origin}${this.parent.Settings.get('composer.route') || ''}/oauth-resp.html`;\n        const client_id = this.http.hash(path);\n        if (sessionStorage) {\n            sessionStorage.setItem(`${client_id}_access_token`, token);\n            sessionStorage.setItem(`${client_id}_expires_at`, `${expiry}`);\n        }\n        if (localStorage) {\n            localStorage.setItem(`${client_id}_access_token`, token);\n            localStorage.setItem(`${client_id}_expires_at`, `${expiry}`);\n            location.reload();\n        }\n        return path;\n    }\n\n    public getFilteredUsers(filter: string, items: IUser[] = this.list(), fields: string[] = ['name', 'email']) {\n        return this.filter(filter, fields, items);\n    }\n\n    /**\n     * Login with given credentials\n     * @param fields Key value pairs of post parameters\n     */\n    public login(fields: { [name: string]: any } = {}) {\n        this.subjects.state.next('loading');\n        const query = Utils.generateQueryString(fields);\n        let headers = new HttpHeaders();\n        headers = headers.append('Content-Type', 'application/x-www-form-urlencoded');\n        this.http_unauth.post('/auth/jwt/callback', query, { headers }).subscribe((res: any) => {\n            if (res.status >= 200 && res.status < 400) {\n                if (sessionStorage) {\n                    const clientId = this.http.hash(`${location.origin}/oauth-resp.html`);\n                    sessionStorage.setItem(`${clientId}_login`, 'true');\n                }\n                this.http.tryLogin();\n            } else {\n                this.subjects.state.next('invalid');\n            }\n            return;\n        }, (err) => {\n            if (err.status >= 400) {\n                this.subjects.state.next('error');\n            } else {\n                if (sessionStorage) {\n                    const clientId = this.http.hash(`${location.origin}/oauth-resp.html`);\n                    sessionStorage.setItem(`${clientId}_login`, 'true');\n                }\n                this.http.tryLogin();\n            }\n        }, () => this.load());\n    }\n\n    /**\n     * Logout of user and redirect to logout URL\n     */\n    public logout() {\n        this.http.logout();\n    }\n\n    /**\n     * Open modal to view user details\n     * @param item User to view\n     */\n    public view(item: IUser) {\n        if (this.parent) {\n            this.parent.Overlay.openModal('user-details', { data: { user: item } })\n                .then((inst: any) => inst.subscribe((event) => {\n                    if (event.type === 'close') { event.close(); }\n                }));\n        }\n    }\n\n    /**\n     * Open modal to create new user\n     * @param next Callback for events on the modal\n     */\n    public new(data: { [name: string]: any }) {\n        return new Promise((resolve) => {\n            if (this.parent) {\n                this.parent.Overlay.openModal('user-details', { data: {} })\n                    .then((inst: any) => inst.subscribe((event) => {\n                        if (event.type === 'close') { event.close(); }\n                        resolve(event);\n                    }));\n            } else {\n                resolve(null);\n            }\n        });\n    }\n\n    /**\n     * Add new user\n     * @param user User data\n     */\n    public add(user: { [name: string]: any }) {\n        return new Promise<any>((resolve, reject) => {\n            const data: { [name: string]: any } = {\n                first_name: user.first_name,\n                last_name: user.last_name,\n                phone: user.phone,\n                email: user.email,\n                organisation: user.organisation,\n                organisation_id: null,\n            };\n            if (user.organisation_id) {\n                data.organisation_id = user.organisation_id;\n            }\n            const url = `${this.endpoint}`;\n            this.http.post(url, data).subscribe(() => null, (err) => {\n                reject(err);\n                this.parent.Analytics.event('Users', 'add_user_fail');\n            }, () => {\n                resolve();\n                this.parent.Analytics.event('Users', 'added_user');\n            });\n        });\n    }\n\n    public availability(email: string, start?: number, end?: number) {\n        const name = `availability|${email}|${start || 'now'}|${end || 'soon'}`;\n        if (!this.promises[name]) {\n            this.promises[name] = new Promise((resolve, reject) => {\n                const url = `${this.endpoint}/${email}`;\n                this.parent.Bookings.show(email, { start, end }).then((list) => {\n                    resolve(!list || list.length <= 0);\n                    this.promises[name] = null;\n                }, (err) => {\n                    reject(err);\n                    this.promises[name] = null;\n                });\n            });\n        }\n        return this.promises[name];\n    }\n\n    /**\n     * Convert user data to local format\n     * @param user User data\n     */\n    public processItem(user: { [name: string]: any }) {\n        if (!user) { return null; }\n        const u_org = user.organisation;\n        const org = {\n            id: typeof u_org !== 'string' && u_org ? u_org.id : user.organisation_id,\n            name: typeof u_org !== 'string' && u_org ? u_org.name : user.organisation_name || user.organisation,\n        };\n        const member: IUser = {\n            id: user.id || user.email,\n            win_id: user.email,\n            name: user.name || `${user.first_name} ${user.last_name}`,\n            first_name: user.first_name,\n            last_name: user.last_name,\n            type: user.visitor ? 'external' : user.type || 'internal',\n            image: null,\n            email: (user.email || '').toLowerCase(),\n            phone: user.phone || user.mobile,\n            b_unit: user.department,\n            lockers: user.lockers,\n            organisation_id: org.id,\n            external: user.type === 'external' || user.visitor,\n            organisation_name: org.name,\n            staff_code: user.staff_code\n        };\n        if (member.id) {\n            member.image = user.image || `${this.parent.endpoint}/assets/users/${member.id}.png`;\n        }\n        return member;\n    }\n\n}\n","/**\n * @Author: Alex Sorafumo <Yuion>\n * @Date:   09/12/2016 3:33 PM\n * @Email:  alex@yuion.net\n * @Filename: settings.service.ts\n * @Last modified by:   Alex Sorafumo\n * @Last modified time: 03/02/2017 9:52 AM\n */\n\nimport { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { BehaviorSubject } from 'rxjs';\n\nimport * as moment from 'moment';\n\nconst APP_NAME = 'ACA_APP';\nconst RESERVED_KEYS = ['route', 'query', 'store'];\nconst OBSERVABLES: any[] = [\n    { name: 'loading', default: false },\n    { name: 'loading_text', default: 'Loading' },\n];\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SettingsService {\n    public parent: any = null;\n    public setup = false;\n    private store: Storage = localStorage;\n    private model: any = {\n        loading: {\n            prefix: 'Loading',\n            text: ['', '.', '..', '...'],\n            state: 0,\n        },\n        app: { name: '' },\n        subjects: {},\n        observers: {},\n        settings: {},\n    };\n    private timers: any = {};\n    private promises: any = {};\n\n    constructor(private http: HttpClient, private route: ActivatedRoute) {\n        this.model.app.name = APP_NAME;\n        for (const n of OBSERVABLES) {\n            this.model.subjects[n.name] = new BehaviorSubject(n.default);\n            this.model.observers[n.name] = this.model.subjects[n.name].asObservable();\n        }\n        this.loadStore();\n        this.init();\n    }\n\n    public init() {\n        // Load settings file\n        this.log('SYSTEM', 'Initialising Settings');\n        this.loadSettings().then((s: any) => {\n            const win = window as any;\n            if (s.app && s.app.code) {\n                this.model.app.name = s.app.code;\n            }\n            if (s.debug) {\n                win.debug = true;\n                if (!win.debug_module) {\n                    win.debug_module = [];\n                }\n                if (s.debug_module) {\n                    win.debug_module = (win.debug_module || []).concat(s.debug_module);\n                }\n                if (win.debug_module.indexOf(this.model.app.name) < 0) {\n                    win.debug_module.push(this.model.app.name);\n                }\n            }\n            this.printVersion();\n            this.setup = true;\n        }, (err: any) => setTimeout(() => this.init(), 500));\n    }\n\n    /**\n     * Prints message to the console\n     * @param  {string} type [description]\n     * @param  {string} msg    Message to print to the console\n     * @param  {string} stream IO Stream to print message to.\n     */\n    public log(type: string, msg: string, args?: any, stream: string = 'debug', force: boolean = false) {\n        const win = window as any;\n        if (win.debug || force) {\n            const colors: string[] = ['color: #E91E63', 'color: #3F51B5', 'color: rgba(#000, 0.87'];\n            if (args) {\n                console[stream](`%c[${this.model.app.name}]%c[${type}] %c${msg}`, ...colors, args);\n            } else {\n                console[stream](`%c[${this.model.app.name}]%c[${type}] %c${msg}`, ...colors);\n            }\n        }\n    }\n\n    /**\n     * Loads settings from a given JSON file\n     * @param file Name of a JSON file to load settings from\n     * @return Returns a promise which returns the settings loaded from the given file\n     */\n    public loadSettings(file: string = 'assets/settings.json') {\n        if (!this.promises[`setting(${file})`]) {\n            this.promises[`setting(${file})`] = new Promise((resolve, reject) => {\n                this.http.get(file)\n                    .subscribe(\n                        (data) => {\n                            for (const i in data) {\n                                if (data[i]) {\n                                    this.model.settings[i] = data[i];\n                                }\n                            }\n                            const win = window as any;\n                            if (win.debug && win.debug_module.indexOf(this.model.app.name) >= 0) {\n                                this.log('Settings', `Loaded settings for application`);\n                            }\n                        }, (err) => {\n                            reject(err);\n                            this.promises[`setting(${file})`] = null;\n                        }, () => {\n                            resolve(this.model.settings);\n                            this.promises[`setting(${file})`] = null;\n                        }\n                    );\n            });\n        }\n        return this.promises[`setting(${file})`];\n    }\n\n    /**\n     * Saves the given value in local storage and add it to the settings.\n     * @param  {string} key   Reference to store the item as\n     * @param  {string} value Value to store in the give key\n     * @return none\n     */\n    public save(key: string, value: string) {\n        if (this.store && RESERVED_KEYS.indexOf(key) < 0) {\n            this.store.setItem(`APP.${key}`, value);\n            this.model.settings[key] = value;\n            if (!this.model.settings.store) {\n                this.model.settings.store = {};\n            }\n            this.model.settings.store[key] = value;\n        }\n    }\n\n    /**\n     * Gets the setting value for the give key\n     * @param key Name of the setting to get\n     * @return Returns the value stored in the settings or null\n     */\n    public get(key: string) {\n        return this.getSetting(key);\n    }\n\n    public getSetting(key: string) {\n        const keys = key.split('.');\n        if (keys.length === 1) {\n            return this.model.settings[key];\n        } else {\n            const use_keys = keys.splice(1, keys.length - 1);\n            let item = this.getItemFromKeys(use_keys, this.model.settings[keys[0]]);\n                // Check that item exists under the reserved keys\n            if (item === undefined || item === null) {\n                for (const r of RESERVED_KEYS) {\n                    if (this.model.settings.hasOwnProperty(r) && this.model.settings[r] !== undefined && this.model.settings[r] !== null) {\n                        item = this.getItemFromKeys(use_keys, this.model.settings[r]);\n                        if (item === undefined && item === null) {\n                            break;\n                        }\n                    }\n                }\n            }\n            return item;\n        }\n    }\n\n    /**\n     * Gets nested setting value\n     * @param keys List of keys to iterate down the object\n     * @param root Root element of the search\n     * @return Returns the value a the end of the iteration or null\n     */\n    public getItemFromKeys(keys: string[], root: any) {\n        if (keys.length <= 0) {\n            return root;\n        }\n        if (typeof root !== 'object') {\n            return null;\n        }\n        let item = root;\n        // Iterate through keys to traverse object tree\n        for (const k of keys) {\n            // Make sure key has a value\n            if (k !== '') {\n                if (item !== undefined && item !== null && item.hasOwnProperty(k)) {\n                    item = item[k];\n                } else {\n                    return null;\n                }\n            }\n        }\n        return item;\n    }\n\n    /**\n     * Wrapper function for get()\n     * @param key Name of the setting to get\n     * @return Returns the value stored in the settings or null\n     */\n    public setting(key: string) {\n        return this.get(key);\n    }\n\n    public setProperty(name: string, value: any) {\n        if (this.model.subjects[name]) {\n            this.model.subjects[name].next(value);\n        }\n    }\n\n    public getProperty(name: string) {\n        if (this.model.subjects[name]) {\n            return this.model.subjects[name].getValue();\n        }\n        return null;\n    }\n\n    public listen(name: string, next: (value: any) => void) {\n        if (this.model.observers[name]) {\n            return this.model.observers[name].subscribe(next);\n        }\n        return null;\n    }\n    /**\n     * Sets the loading state of the application\n     * @param state Loading state of the application\n     * @return none\n     */\n    public loading(state: boolean) {\n        this.setProperty('loading', state);\n    }\n    /**\n     * Returns an object to observe the loading state of the application\n     * @return Observer which updates on the changes to the application's loading state\n     */\n    public loadingState(next: (value: any) => void) {\n        return this.listen('loading', next);\n    }\n\n    public loadingText(next: (value: any) => void) {\n        if (this.timers.loading) {\n            clearInterval(this.timers.loading);\n            this.model.loading.state = 0;\n            const state = `${this.model.loading.prefix}${this.model.loading.text[this.model.loading.state]}`;\n            this.setProperty('loading_text', state);\n        }\n        this.timers.loading = setInterval(() => {\n            const state = `${this.model.loading.prefix}${this.model.loading.text[this.model.loading.state]}`;\n            this.setProperty('loading_text', state);\n        }, 1 * 60 * 1000);\n        return this.listen('loading_text', next);\n    }\n\n    private printVersion() {\n        const now = moment();\n        const built = moment(1573019040000);\n        const build =  now.isSame(built, 'd') ? `Today at ${built.format('h:mma')}` : built.format('MMM Do, YYYY | h:mma');\n        this.log('SYSTEM', 'Version: 0.10.4', null, 'debug', true);\n        this.log('SYSTEM', `Build: ${build}`, null, 'debug', true);\n    }\n\n    /**\n     * Loads all the keys from local storage into the settings.\n     * @return none\n     */\n    private loadStore() {\n        // Load local store settings\n        if (this.store) {\n            for (let i = 0; i < this.store.length; i++) {\n                let key = this.store.key(i);\n                const item = this.store.getItem(key);\n                if (item !== undefined && item !== null && item !== '') {\n                    if (key.indexOf(`STAFF.`) === 0) {\n                        key = key.replace(`STAFF.`, '');\n                    }\n                    if (!this.model.settings.store) {\n                        this.model.settings.store = {};\n                    }\n                    this.model.settings.store[key] = item;\n                }\n            }\n        }\n    }\n}\n","<div class=\"avatar\">\n    <div class=\"icon\">\n        <div center [class]=\"'user-type ' + user?.type\"></div>\n    </div>\n    <div class=\"image\" *ngIf=\"user && user.id && user.image\" [style.background-image]=\"'url(' + user.image + ')'\"></div>\n</div>","\nimport { Component, Input } from '@angular/core';\n\n@Component({\n    selector: 'avatar',\n    templateUrl: './avatar.template.html',\n    styleUrls: ['./avatar.styles.scss'],\n})\nexport class AvatarComponent {\n    @Input() public user: any;\n}\n","\nimport { Component, OnDestroy } from '@angular/core';\n\n@Component({\n    selector: 'app-base-cmp',\n    template: '',\n    styles: ['']\n})\nexport class BaseComponent implements OnDestroy {\n\n    protected subs: any = {\n        timers: {},     // Store for timers\n        intervals: {},  // Store for intervals\n        obs: {}         // Store for observables\n    };\n\n    public ngOnDestroy() {\n            // Cleanup timers\n        for (const k in this.subs.timers) {\n            if (this.subs.timers.hasOwnProperty(k)) {\n                this.clearTimer(this.subs.timers[k]);\n            }\n        }\n            // Cleanup intervals\n        for (const k in this.subs.intervals) {\n            if (this.subs.intervals.hasOwnProperty(k)) {\n                this.clearInterval(this.subs.intervals[k]);\n            }\n        }\n            // Cleanup observables\n        for (const k in this.subs.obs) {\n            if (this.subs.obs.hasOwnProperty(k) && this.subs.obs[k]) {\n                if (this.subs.obs[k] instanceof Function) {\n                    this.subs.obs[k] = null;\n                } else {\n                    this.subs.obs[k].unsubscribe();\n                }\n                this.subs.obs[k] = null;\n            }\n        }\n    }\n\n    public timeout(name: string, fn: () => void, delay: number = 300) {\n        this.clearTimer(name);\n        if (!(fn instanceof Function)) { return; }\n        this.subs.timers[name] = setTimeout(() => fn(), delay);\n    }\n\n    public clearTimer(name: string) {\n        if (this.subs.timers[name]) {\n            clearTimeout(this.subs.timers[name]);\n            this.subs.timers[name] = null;\n        }\n    }\n\n    public interval(name: string, fn: () => void, delay: number = 300) {\n        this.clearInterval(name);\n        if (!(fn instanceof Function)) { return; }\n        this.subs.intervals[name] = setInterval(() => fn(), delay);\n    }\n\n    public clearInterval(name: string) {\n        if (this.subs.intervals[name]) {\n            clearInterval(this.subs.intervals[name]);\n            this.subs.intervals[name] = null;\n        }\n    }\n}\n","<div class=\"container\">\n    <div class=\"header\">Other rooms {{model.room && model.room.level ? 'on ' + model.room.level.name : ''}}</div>\n    <div class=\"list\" *ngIf=\"model.rooms\">\n        <div class=\"item\" *ngFor=\"let item of model.rooms\">\n            <div class=\"name\">{{item.name}}</div>\n            <div class=\"details\" [class.free]=\"item.free\">{{item.display}}</div>\n        </div>\n    </div>\n    <div class=\"loader\" *ngIf=\"model.loading\">\n        <spinner class=\"circle-ring\"></spinner>\n    </div>\n</div>","import { Component, OnInit } from '@angular/core';\n\nimport { BaseComponent } from '../base.component';\nimport { AppService } from '../../../services/app.service';\n\nimport * as moment from 'moment';\n\n@Component({\n    selector: 'room-list',\n    templateUrl: './room-list.template.html',\n    styleUrls: ['./room-list.styles.scss']\n})\nexport class RoomListComponent extends BaseComponent implements OnInit {\n\n    public model: any = {};\n\n    constructor(private service: AppService) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.model.sys_listener = this.service.listen('system', (sys) => {\n            this.model.system = sys;\n            if (this.service.ready()) {\n                this.loadRooms();\n            }\n        });\n        this.init();\n    }\n\n    public init() {\n        if (!this.service.ready()) {\n            return this.timeout('init', () => this.init());\n        }\n        this.loadRooms();\n        this.interval('load', () => this.loadRooms(), 5 * 60 * 1000);\n    }\n\n    public loadRooms() {\n        const room = this.service.Rooms.item(this.model.system) || null;\n        this.model.room = room;\n        const start = moment().hours(0).minutes(0).seconds(0);\n        const end = moment().hours(23).minutes(59).seconds(59);\n        this.model.loading = true;\n        const fields: any = { available_from: start.unix(), available_to: end.unix() };\n        if (room && room.level) {\n            fields.zone_id = room.level.id;\n        }\n        this.service.Rooms.query(fields).then((list) => {\n            const now = moment();\n            this.model.rooms = [];\n            for (const rm of list) {\n                let time = moment(now);\n                let duration = Math.round(moment.duration(end.diff(time)).asMinutes());\n                for (const bkn of rm.bookings) {\n                    const bkn_start = moment(bkn.date);\n                    const bkn_end = moment(bkn_start).add(bkn.duration, 'm');\n                    if (bkn_start.isAfter(time)) {\n                        duration = Math.round(moment.duration(bkn_start.diff(time)).asMinutes());\n                        break;\n                    } else if (time.isBetween(bkn_start, bkn_end, 'm', '[]')) {\n                        time = moment(bkn_end);\n                    }\n                }\n                const until = moment(time).add(duration, 'm');\n                this.model.rooms.push({\n                    id: rm.id,\n                    name: rm.name,\n                    free: time.isSame(now, 'm'),\n                    start: time,\n                    duration,\n                    end: until,\n                    display: time.isSame(now, 'm') ? `Free until ${until.format('h:mm A')}` : `In use until ${time.format('h:mm A')}`,\n                });\n                this.model.rooms.sort((a, b) => {\n                    return a.start.valueOf() - b.start.valueOf() || a.duration - b.duration || (a.name || '').localeCompare(b.name || '');\n                });\n            }\n            this.model.loading = false;\n        }, () => this.model.loading = false);\n    }\n}\n","\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { WidgetsModule } from '@acaprojects/ngx-widgets';\n\nimport { AvatarComponent } from './avatar/avatar.component';\nimport { UserTagComponent } from './user-tag/user-tag.component';\nimport { BaseComponent } from './base.component';\nimport { TimelineComponent } from './timeline/timeline.component';\nimport { RoomListComponent } from './room-list/room-list.component';\n\nconst COMPONENTS: any[] = [\n    AvatarComponent,\n    UserTagComponent,\n    BaseComponent,\n    TimelineComponent,\n    RoomListComponent\n];\n\nconst ENTRY_COMPONENTS: any[] = [\n\n];\n\n\n@NgModule({\n    declarations: [\n        ...COMPONENTS,\n        // ...ENTRY_COMPONENTS\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        WidgetsModule.forRoot(),\n    ],\n    exports: [\n        ...COMPONENTS,\n        // ...ENTRY_COMPONENTS\n    ],\n    entryComponents: [\n        // ...ENTRY_COMPONENTS\n    ]\n})\nexport class SharedComponentModule { }\n","<div class=\"timeline\" widget>\n    <div class=\"container\" #body>\n        <div class=\"staging\">\n            <div class=\"state\" *ngIf=\"model.time\">\n                <div class=\"past\" [style.right]=\"((1 - model.time.progress) * 100 )+ '%'\"></div>\n                <div class=\"future\" [style.left]=\"(model.time.progress * 100 )+ '%'\"></div>\n            </div>\n            <div class=\"dividers\">\n                <div class=\"block\" *ngFor=\"let i of block_list\"\n                    [style.left]=\"(i.position.progress * 100) + '%'\"\n                    [class.hour]=\"i.hour\">\n                </div>\n            </div>\n            <div class=\"tap-zones\">\n                <ng-container *ngFor=\"let i of block_list\">\n                    <div class=\"tap-area\" *ngIf=\"i.position && i.position.progress > model.time.progress\"\n                        [style.left]=\"(i.position.progress * 100) + '%'\"\n                        [style.width]=\"(100 / (((+options.end || 22) - (+options.start || 6)) * (+options.blocks || 2))) + '%'\"\n                        (touchrelease)=\"bookAt(i)\">\n                    </div>\n                </ng-container>\n            </div>\n            <div class=\"events\">\n                <ng-container *ngFor=\"let e of event_list\">\n                    <div class=\"event\" *ngIf=\"e.show\"\n                        [style.left]=\"(e.position.progress * 100) + '%'\"\n                        [style.width]=\"(e.position.width * 100) + '%'\"\n                        [class.active]=\"model.time.value >= e.start && model.time.value < e.end\"\n                        [class.past]=\"model.time.value > e.end\">\n                        <!-- <div class=\"details\" [class.short]=\"e.length < 1\">\n                            <div class=\"time\">{{e.display.start}} - {{e.display.end}}</div>\n                            <div class=\"info\">{{e.display.details}}</div>\n                        </div> -->\n                    </div>\n                </ng-container>\n            </div>\n            <div class=\"now-line\" *ngIf=\"model.time && !model.overlap\" [style.left]=\"(model.time.progress * 100 )+ '%'\"></div>\n        </div>\n    </div>\n    <div class=\"blocks\">\n        <ng-container *ngFor=\"let blk of block_list; let i = index\">\n            <div class=\"block\" #block\n                [style.left]=\"(blk.position.progress * 100) + '%'\"\n                [style.left]=\"(blk.position.progress * 100) + '%'\"\n                [class.hour]=\"blk.hour\"\n                [class.past]=\"blk.hour < model.time.value\">\n\n                <div class=\"text\" *ngIf=\"i < block_list.length - 1\">\n                    {{blk.display}}\n                    <!-- <span class=\"period\" [class.left]=\"blk.left\">{{blk.time >= 12 ? 'pm' : 'am'}}</span> -->\n                </div>\n                <div class=\"hbar\"></div>\n            </div>\n        </ng-container>\n        <div class=\"now\" *ngIf=\"model.time\" [style.left]=\"(model.time.progress * 100 )+ '%'\">\n            <div class=\"line\"></div>\n            <div class=\"triangle\"></div>\n            <div class=\"text\">\n                Time Now<br>\n                {{model.time.display}}\n            </div>\n        </div>\n    </div>\n</div>","import { Component, ElementRef, EventEmitter, Input, Output, QueryList, ViewChild, ViewChildren } from '@angular/core';\nimport { OnInit, OnDestroy, OnChanges } from '@angular/core';\n\nimport * as moment from 'moment';\n\nexport interface ITimelineOptions {\n    start: number;      // First hour of this day to display on the timeline\n    end: number;        // Last hour of the day to display on the timeline\n    blocks: number;     // Number of timeblock per hour i.e. 2 block means 30 minute blocks etc.\n    max_length?: number; // Max length of bookings in minutes\n}\n\n@Component({\n    selector: 'timeline',\n    templateUrl: './timeline.template.html',\n    styleUrls: ['./timeline.styles.scss'],\n})\nexport class TimelineComponent implements OnInit, OnDestroy, OnChanges {\n    @Input() public events: any[] = [];\n    @Input() public date: number = (new Date()).getTime();\n    @Input() public offset = 0;\n    @Input() public options: ITimelineOptions = { start: 6.5, end: 19.5, blocks: 2, max_length: 480 };\n    @Input() public booking: any;\n    @Output() public bookingChange: any = new EventEmitter();\n    @Output() public event: any = new EventEmitter();\n\n    public event_list: any[] = [];\n    public block_list: any[] = [];\n    public model: any = {};\n\n    private timers: any = {};\n\n    public ngOnInit() {\n        this.model.show = {};\n        this.updateTime();\n        this.init();\n        if (this.timers.time) {\n            clearInterval(this.timers.time);\n            this.timers.time = null;\n        }\n        this.timers.time = setInterval(() => this.updateTime(), 10 * 1000);\n    }\n\n    public ngOnDestroy() {\n        if (this.timers.time) {\n            clearInterval(this.timers.time);\n            this.timers.time = null;\n        }\n    }\n\n    public ngOnChanges(changes: any) {\n        if (changes.options) {\n            if (!this.options) {\n                this.options = { start: 6.5, end: 19.5, blocks: 2, max_length: 480 };\n            }\n            if (!this.options.start) { this.options.start = 6.5; }\n            if (!this.options.end) { this.options.end = 19.5; }\n            if (!this.options.blocks) { this.options.blocks = 2; }\n            if (this.options && this.options.max_length && this.options.max_length < 2 * (60 / (this.options.blocks || 2))) {\n                this.options.max_length = 2 * (60 / (this.options.blocks || 2));\n            }\n        }\n        if (changes.events || changes.offset || changes.date) {\n            this.init();\n        }\n        if (changes.booking) {\n            this.processBooking();\n        }\n    }\n\n    public init() {\n        if (!this.date) {\n            this.date = (new Date()).getTime();\n            \n        }\n        if (this.options && this.options.max_length && this.options.max_length < 2 * (60 / (this.options.blocks || 2))) {\n            this.options.max_length = 2 * (60 / (this.options.blocks || 2));\n        }\n        const date = moment(this.date);\n        const end_of_date = moment(date).hours(11).minutes(59).seconds(59).milliseconds(0);\n        this.event_list = [];\n        if (this.events && this.events.length > 0) {\n            this.model.overlap = false;\n            date.add(this.offset, 'days');\n            const day_length = (this.options.end || 22) - (this.options.start || 6);\n            let offset = 0;\n            for (const e of this.events) {\n                const start = moment(e.date);\n                const end = moment(start).add(e.duration, 'm');\n                offset = start.isBefore(date, 'd') ? -24 : (start.isAfter(date, 'd') ? 24 : 0);\n                const start_hour = start.hours() + start.minutes() / 60 + offset;\n                offset = end.isBefore(date, 'd') ? -24 : (end.isAfter(date, 'd') ? 24 : 0);\n                const end_hour = end.hours() + end.minutes() / 60 + offset;\n                const event = {\n                    id: Math.floor(Math.random() * 899999 + 100000),\n                    obj: e,\n                    display: {\n                        start: start.format('h:mm a'),\n                        end: end.format('h:mm a'),\n                        date: start.format('DD MMMM, h:mm a') + end.format('- h:mm a'),\n                        details: e.title || e.organiser ? `Booked by ${e.organiser}` : '',\n                        location: e.location || e.room ? e.room.name : '',\n                    },\n                    organiser: e.organiser,\n                    position: {\n                        progress: (start_hour - (this.options.start || 6)) / (day_length),\n                        width: (end_hour - start_hour) / day_length,\n                    },\n                    show: date.isSame(start, 'd') || end_of_date.isBetween(start, end, 's', '[)'),\n                    start: start_hour,\n                    end: end_hour,\n                    length: end_hour - start_hour,\n                };\n                this.event_list.push(event);\n            }\n        }\n        this.setStart({ time: date.hours() + date.minutes() / 60 });\n        this.initBlocks();\n        this.processBooking();\n        this.updateTime();\n    }\n\n    public initBlocks() {\n        const s = this.options.start || 6.5;\n        const e = this.options.end || 19.5;\n        const blk_cnt = 24 * (this.options.blocks || 2);\n        const time = moment();\n        time.hours(Math.floor(s)).minutes((s - Math.floor(s)) * 60).seconds(0).milliseconds(0);\n        const day_length = (this.options.end || 22) - (this.options.start || 6);\n        this.block_list = [];\n        let hour = time.hours() + time.minutes() / 60;\n        for (; hour <= e && hour >= s && this.block_list.length < blk_cnt;) {\n            this.block_list.push({\n                time: hour,\n                hour: hour === Math.floor(hour),\n                display: time.format(hour === Math.floor(hour) ? 'h' : 'h:mm'),\n                position: {\n                    progress: (hour - (this.options.start || 6)) / day_length,\n                },\n            });\n            time.add(60 / (this.options.blocks || 2), 'minutes');\n            hour = time.hours() + time.minutes() / 60;\n        }\n    }\n\n    public updateTime() {\n        const time = moment();\n        const day_length = (this.options.end || 19.5) - (this.options.start || 6.5);\n        const hours = (time.hours() + (Math.floor(time.minutes() / 5) * 5) / 60);\n        this.model.time = {\n            value: hours,\n            display: time.format('h:mm a'),\n            progress: (hours - (this.options.start || 6)) / day_length,\n        };\n        const date = moment(this.date).format('DD/MM/YYYY');\n        if (date !== time.format('DD/MM/YYYY')) {\n            this.model.time.value = 25;\n            this.model.time.progress = 1.10;\n        }\n        this.model.overlap = false;\n        for (const e of this.event_list) {\n            if (this.model.time.value >= e.start && this.model.time.value < e.end) {\n                this.model.overlap = true;\n            }\n        }\n        if (this.model.booking &&\n            this.model.time.value >= this.model.booking.start &&\n            this.model.time.value < this.model.booking.end) {\n            this.model.overlap = true;\n        }\n    }\n\n    public setStart(e?: any) {\n        setTimeout(() => {\n            if (this.booking) {\n                // Process new booking times\n                const date = moment(this.date || '');\n                date.hour(Math.floor(e.time)).minute(Math.floor((e.time % 1) * 60));\n                const start = date.valueOf();\n                date.add(60 / (+this.options.blocks || 2), 'minutes');\n                const end = date.valueOf();\n                if (!this.checkConflict(start, end)) {\n                    this.booking.start = start;\n                    this.booking.end = end;\n                }\n                // Update display\n                this.processBooking();\n                this.updateBooking();\n                this.updateTime();\n            }\n        }, 30);\n    }\n\n    public processBooking() {\n        this.model.booking = null;\n        if (this.booking) {\n            const start = moment(this.booking.start);\n            const end = moment(this.booking.end);\n            const start_hour = start.hours() + start.minutes() / 60;\n            const end_hour = end.hours() + end.minutes() / 60;\n            const day_length = (this.options.end || 19.5) - (this.options.start || 6.5);\n            this.model.booking = {\n                obj: this.booking,\n                display: {\n                    start: start.format('h:mm a'),\n                    end: end.format('h:mm a'),\n                },\n                position: {\n                    progress: (start_hour - (this.options.start || 6)) / (day_length),\n                    width: (end_hour - start_hour) / day_length,\n                },\n                start: start_hour,\n                end: end_hour,\n                length: end_hour - start_hour,\n            };\n        }\n    }\n\n    public updateBooking() {\n        this.bookingChange.emit(this.booking);\n    }\n\n    public updateBookingTime(e: any) {\n        if (this.model.edit) {\n            if (e.preventDefault) { e.preventDefault(); }\n            const y = e.clientY || e.touches[0].clientY;\n            const ratio = (y - this.model.box.top) / this.model.box.height;\n            const day_length = (this.options.end || 22) - (this.options.start || 6);\n            const position = day_length * ratio;\n            const start_time = position + (this.options.start || 6);\n            const time = moment(this.booking.start);\n            time.hours(Math.floor(start_time));\n            const minutes = Math.floor((start_time * 60) % 60);\n            time.minutes(Math.round(minutes / (60 / (this.options.blocks || 2))) * (60 / (this.options.blocks || 2)));\n\n            if (this.model.edit === 'start') {\n                const start = moment(time);\n                let end = moment(this.booking.end);\n                const duration = moment.duration(end.diff(start)).asMinutes();\n                if (duration < (60 / (this.options.blocks || 2))) {\n                    end = moment(start).add(60 / (this.options.blocks || 2), 'minutes');\n                } else if (this.options && this.options.max_length && duration > this.options.max_length) {\n                    end = moment(start).add(this.options.max_length, 'minutes');\n                }\n                if (!this.checkConflict(start.valueOf(), end.valueOf())) {\n                    this.booking.start = start.valueOf();\n                    this.booking.end = end.valueOf();\n                }\n            } else if (this.model.edit === 'end') {\n                const end = moment(time);\n                let start = moment(this.booking.start);\n                const duration = moment.duration(end.diff(start)).asMinutes();\n                if (duration < (60 / (this.options.blocks || 2))) {\n                    start = moment(end).add(-60 / (this.options.blocks || 2), 'minutes');\n                } else if (this.options && this.options.max_length && duration > this.options.max_length) {\n                    start = moment(end).add(-this.options.max_length, 'minutes');\n                }\n                if (!this.checkConflict(start.valueOf(), end.valueOf())) {\n                    this.booking.start = start;\n                    this.booking.end = end;\n                }\n            }\n            this.processBooking();\n            this.updateBooking();\n            this.updateTime();\n        }\n    }\n\n    public bookAt(e: any) {\n        const date = moment().add(this.offset, 'days').seconds(0).milliseconds(0);\n        date.hour(Math.floor(e.time)).minute(Math.floor((e.time % 1) * 60));\n        const start = date.valueOf();\n        const duration = 60 / (+this.options.blocks || 2);\n        date.add(duration, 'minutes');\n        const end = date.valueOf();\n        if (!this.checkConflict(start, end)) {\n            this.event.emit({ type: 'book', time: start, duration });\n        }\n    }\n\n    private checkConflict(s: number, e: number) {\n        const start = moment(s).seconds(0).milliseconds(0);\n        const end = moment(e).seconds(0).milliseconds(0);\n        for (const event of (this.events || [])) {\n            const e_start = moment(event.date).seconds(0).milliseconds(0);\n            const e_end = moment(e_start).add(event.duration, 'minutes').seconds(0).milliseconds(0);\n            if (start.isBetween(e_start, e_end, 'minutes', '[)') ||\n                end.isBetween(e_start, e_end, 'minutes', '()') ||\n                e_start.isBetween(start, end, 'minutes', '[)')) {\n                return true;\n            }\n\n        }\n        return false;\n    }\n}\n","<div override [class]=\"'user-tag ' + name\" (touchstart)=\"tap()\" (mousedown)=\"tap()\">\n    <div class=\"avatar\">\n        <avatar [user]=\"model\"></avatar>\n    </div>\n    <div class=\"details\" *ngIf=\"details\">\n        <ng-container *ngIf=\"model && (model.match_index === undefined || model.match_index < 0)\">\n            <div class=\"name\">{{model.name || model.email || 'null'}}</div>\n        </ng-container>\n        <ng-container *ngIf=\"model && model.match_index >= 0\">\n            <div class=\"name\"\n            [innerHTML]=\"(model.match_name || model.name || model.match_email || model.email || 'null') | safe\"></div>\n        </ng-container>\n        <div class=\"role\" *ngIf=\"model && !email && model.type !== 'external'\">\n            {{model?.b_unit }}\n            <span *ngIf=\"model.job && job\">| {{model.job}}</span>\n        </div>\n        <div class=\"role\" *ngIf=\"model && email && model\">\n            <ng-container *ngIf=\"(model.match_index === undefined || model.match_index < 0)\">{{model.email}}</ng-container>\n            <ng-container *ngIf=\"model.match_index >= 0\">\n                <div [innerHTML]=\"(model.match_email || model.email) | safe\"></div>\n            </ng-container>\n        </div>\n        <div *ngIf=\"model && model.state\" [class]=\"'state ' + (model.state | lowercase)\">\n            {{ model.state }}\n        </div>\n    </div>\n    <div class=\"action\" *ngIf=\"model && model.action\" (touchstart)=\"actionEvent()\" (mousedown)=\"actionEvent()\">\n        <div center class=\"host\" *ngIf=\"model.action === 'host'\">Host</div>\n        <i center class=\"pwc-close\" *ngIf=\"model.action !== 'host'\"></i>\n    </div>\n</div>","import { Component, EventEmitter, Input, Output } from '@angular/core';\n\nimport * as moment from 'moment';\n\n@Component({\n    selector: 'user-tag',\n    templateUrl: './user-tag.template.html',\n    styleUrls: ['./user-tag.styles.scss'],\n})\nexport class UserTagComponent {\n    @Input() public name: string = '';\n    @Input() public job: boolean = false;\n    @Input() public email: boolean = false;\n    @Input() public details: boolean = true;\n    @Input() public model: any = { action: false };\n    @Output() public tapped: any = new EventEmitter();\n    @Output() public action: any = new EventEmitter();\n\n    public state: any = {};\n    public display: any = {};\n\n    public ngOnChanges(changes) {\n    }\n\n    public tap() {\n        setTimeout(() => {\n            if (this.state.action) { return; }\n            this.tapped.emit();\n        }, 10);\n    }\n\n    public actionEvent() {\n        this.state.action = true;\n        this.action.emit();\n        setTimeout(() => {\n            this.state.action = false;\n        }, 30);\n    }\n}\n","/**\n * The static class that defines utility methods.\n *\n * @class Utils\n */\n\ndeclare let require: any;\ndeclare let process: any;\n\nexport class Utils {\n    /**\n     * Checks whether the platform is NW.js.\n     *\n     * @static\n     * @method isNwjs\n     * @return {Boolean} True if the platform is NW.js\n     */\n    public static isNwjs() {\n        return typeof require === 'function' && typeof process === 'object';\n    }\n    /**\n     * Checks whether the platform is a mobile device.\n     *\n     * @static\n     * @method isMobileDevice\n     * @return {Boolean} True if the platform is a mobile device\n     */\n    public static isMobileDevice() {\n        const r = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\n        return !!navigator.userAgent.match(r);\n    }\n\n    /**\n     * Checks whether the browser is Mobile Safari.\n     *\n     * @static\n     * @method isMobileSafari\n     * @return {Boolean} True if the browser is Mobile Safari\n     */\n    public static isMobileSafari() {\n        const agent = navigator.userAgent;\n        return !!(agent.match(/iPhone|iPad|iPod/) && agent.match(/AppleWebKit/) &&\n            !agent.match('CriOS'));\n    }\n\n    /**\n     * Checks whether the browser is Android Chrome.\n     *\n     * @static\n     * @method isAndroidChrome\n     * @return {Boolean} True if the browser is Android Chrome\n     */\n    public static isAndroidChrome() {\n        const agent = navigator.userAgent;\n        return !!(agent.match(/Android/) && agent.match(/Chrome/));\n    }\n\n    /**\n     * Makes a CSS color string from RGB values.\n     *\n     * @static\n     * @method rgbToCssColor\n     * @param {Number} r The red value in the range (0, 255)\n     * @param {Number} g The green value in the range (0, 255)\n     * @param {Number} b The blue value in the range (0, 255)\n     * @return {String} CSS color string\n     */\n    public static rgbToCssColor(r, g, b) {\n        r = Math.round(r);\n        g = Math.round(g);\n        b = Math.round(b);\n        return 'rgb(' + r + ',' + g + ',' + b + ')';\n    }\n\n    public static unique(array: any[], key: string = '') {\n        return array.filter((el, pos, arr) =>\n            arr.indexOf(key ? arr.find(i => i[key] === el[key]) : arr.find(i => i === el)) === pos\n        );\n    }\n\n    public static padZero(num: number, length: number) {\n        let value = num.toString();\n        for (let i = 0; value.length < length; i++) {\n            value = '0' + value;\n        }\n        return value;\n    }\n\n    public static generateQueryString(fields: any) {\n        let query = '';\n        if (fields) {\n            for (const f in fields) {\n                if (fields[f] && fields[f] !== '') {\n                    if (query !== '') {\n                        query += '&';\n                    }\n                    query += `${f}=${fields[f]}`;\n                }\n            }\n        }\n        return query;\n    }\n\n    public static removeChars(str: string, char_list: string) {\n        if (!str) { return ''; }\n        for (let char of char_list) {\n            char = char.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n            str = str.replace(new RegExp(char, 'g'), '');\n        }\n        return str;\n    }\n\n\n    public static validateEmail(email: string) {\n        const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n        return re.test((email || '').toLowerCase());\n    }\n\n    public static parseXML(data) {\n        const items: any[] = [];\n        // request outages.xml from the server and then you can extract the information like this\n        const parser = new DOMParser();\n        const xmlDoc: any = parser.parseFromString(data, 'text/xml');\n\n        // getElementsByTagName returns a sudo-array\n        const entries = Array.prototype.slice.call(\n            xmlDoc.getElementsByTagName('entry'),\n        );\n\n        entries.forEach((entry) => {\n            // <content> <properties> ==> <id></id><title></title> etc\n            const content = entry.getElementsByTagName('content')[0]\n                .childNodes[0].childNodes;\n            const obj = {};\n\n            content.forEach((field) => {\n                // looks like d:Id, d:Title etc\n                const name = field.nodeName.slice(2).toLowerCase();\n                const c = field.textContent;\n\n                obj[name] = c;\n            });\n            items.push(obj);\n        });\n        return items;\n    }\n\n    /**\n     * Converts a list of objects into a CSV string\n     * @param list List of objects\n     */\n    public static generateCSV(list: any[]) {\n        // Get all the available fields from the list\n        const field_list: string[] = [];\n        for (const item of list) {\n            for (const key in item) {\n                if (key && item.hasOwnProperty(key) && field_list.indexOf(key) < 0) {\n                    field_list.push(key);\n                }\n            }\n        }\n        field_list.sort((a, b) => a.localeCompare(b));\n        // Create CSV of fields\n        let fields = '';\n        for (const field of field_list) {\n            if (fields) { fields += ','; }\n            fields += field;\n        }\n        // Create CSV for each item in the list\n        let csv = '';\n        for (const item of list) {\n            if (csv) { csv += '\\n'; }\n            let line = '';\n            for (const f of field_list) {\n                if (line) { line += ','; }\n                line += item[f] ? (typeof item[f] === 'object' ? JSON.stringify(item[f]) : item[f]) : '';\n            }\n            csv += line;\n        }\n        return `${fields}\\n${csv}`;\n    }\n\n    /**\n     * Conver duration in minutes to human readable string\n     * @static\n     * @param duration Duration in minutes\n     */\n    public static humaniseDuration(duration: number, short: boolean = false) {\n        if (!duration || duration < 0) { return ''; }\n        const h = Math.floor(duration / 60);\n        let d = `${h >= 1 ? (h + (short ? 'h' : (' hour' + (h === 1 ? '' : 's')))) : ''}`;\n        if (duration % 60 !== 0) {\n            if (d) { d += short ? ' ' : ', '; }\n            const m = duration % 60;\n            d += `${m >= 1 ? (m + (short ? 'm' : (' minute' + (m === 1 ? '' : 's')))) : ''}`;\n        }\n        return d;\n    }\n\n    /**\n      * Get list of objects based off passed in CSV\n      * @static\n      * @param csv CSV to parse\n      */\n    public static loadCSV(csv: string) {\n        const lines = csv.split('\\n');\n        let fields = lines.splice(0, 1)[0].split(',');\n        fields = fields.map(v => v.replace('\\r', ''));\n        const list: any[] = [];\n        for (const line of lines) {\n            let parts = line.split(',');\n            parts = parts.map(v => v.replace('\\r', ''));\n            const item: any = {};\n            for (let i = 0; i <= parts.length; i++) {\n                let part = null;\n                part = parts[i];\n                if (part !== undefined) {\n                    item[(fields[i] || '').split(' ').join('_').toLowerCase()] = part;\n\n                }\n            }\n            list.push(item);\n\n        }\n        return list;\n    }\n\n    /**\n     * Get a filtered list of items\n     * @param filter Value to filter on\n     * @param items List of results to filter\n     * @param fields Fields to check for matches on each item\n     */\n    public static filter(filter: string, items?: any[], fields: string[] = ['id']) {\n        let results: any[];\n        // Tokenise filter string\n        const filters = filter.toLowerCase().split(' ');\n        const list = {};\n        for (const f of filters) {\n            if (f) {\n                if (!list[f]) { list[f] = 0; }\n                list[f]++;\n            }\n        }\n        // Group similar tokens\n        const parts = [];\n        for (const f in list) {\n            if (list.hasOwnProperty(f)) {\n                parts.push({ word: f, count: list[f], regex: new RegExp(f, 'gi') });\n            }\n        }\n        parts.sort((a, b) => b.word.length - a.word.length || a.word.localeCompare(b.word));\n        const item_list = JSON.parse(JSON.stringify(items || []));\n        if (filter) {\n            results = item_list.filter(\n                (item) => {\n                    let match_count = 0;\n                    item.match_index = 65535;\n                    item.match = '';\n                    const field_list = {};\n                    // Initialise field match variables\n                    for (const f of fields) {\n                        field_list[f] = {\n                            value: (item[f] || '').toLowerCase(),\n                            index: 65536,\n                            matched: 0\n                        };\n                    }\n                    // Search for matches with the tokenised filter string\n                    for (const i of parts) {\n                        if (i.word) {\n                            // Check fields for matches\n                            for (const f of fields) {\n                                const field = field_list[f];\n                                const index = field.value.indexOf(i.word);\n                                field.index = index < field.index ? index : field.index;\n                                field.matches = (field.value.match(i.regex) || []).length;\n                                field.value = field.value.replace(i.regex, ' ');\n                            }\n                            // Update token match count\n                            for (const f of fields) {\n                                const field = field_list[f];\n                                if (field.matches >= i.count) {\n                                    match_count++;\n                                    // Update field matches\n                                    let changed = 0;\n                                    const tokens = (item[`match_${f}`] || item[f] || '').split(' ');\n                                    for (const k of tokens) {\n                                        if (changed >= i.count) {\n                                            break;\n                                        }\n                                        if (k.toLowerCase().indexOf(i.word) >= 0 && k.indexOf('`') < 0) {\n                                            tokens[tokens.indexOf(k)] = k.replace(i.regex, '`$&`');\n                                            changed++;\n                                        }\n                                    }\n                                    item[`match_${f}`] = tokens.join(' ');\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    // Get field with the most relevent match\n                    for (const f of fields) {\n                        const field = field_list[f];\n                        if (field.index < item.match_index && field.index >= 0) {\n                            item.match_index = field.index;\n                            item.match = f;\n                        }\n                    }\n                    return item.match_index >= 0 && item.match && (match_count >= parts.length);\n                });\n        } else {\n            results = item_list;\n        }\n        // Sort by order of relevence then name\n        results.sort((a, b) => {\n            const diff = a.match_index - b.match_index;\n            return diff === 0 ? a.name.localeCompare(b.name) : diff;\n        });\n        return results;\n    }\n\n    /**\n     * Calculate the distance between two geolocations\n     * @param latitudeA Latitude of the first point\n     * @param longitudeA Longitude of the first point\n     * @param latitudeB Latitude of the second point\n     * @param longitudeB Longitude of the second point\n     */\n    public static geodistance(latitudeA: number, longitudeA: number, latitudeB: number, longitudeB: number) {\n        const R = 6371; // Radius of the earth in km\n        const dLat = this.deg2rad(latitudeB - latitudeA);  // deg2rad below\n        const dLon = this.deg2rad(longitudeB - longitudeA);\n        const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n            Math.cos(this.deg2rad(latitudeA)) * Math.cos(this.deg2rad(latitudeB)) *\n            Math.sin(dLon / 2) * Math.sin(dLon / 2);\n\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n        const d = R * c; // Distance in km\n        return d;\n    }\n\n    public static deg2rad(deg) {\n        return deg * (Math.PI / 180);\n    }\n\n    public static copyToClipboard(value: string) {\n        const el = document.createElement('textarea');  // Create a <textarea> element\n        el.value = value;                               // Set its value to the string that you want copied\n        el.setAttribute('readonly', '');                // Make it readonly to be tamper-proof\n        el.style.position = 'absolute';\n        el.style.left = '-9999px';                      // Move outside the screen to make it invisible\n        document.body.appendChild(el);                  // Append the <textarea> element to the HTML document\n        const selected =\n            document.getSelection().rangeCount > 0        // Check if there is any content selected previously\n                ? document.getSelection().getRangeAt(0)     // Store selection if found\n                : false;                                    // Mark as false to know no selection existed before\n        el.select();                                    // Select the <textarea> content\n        document.execCommand('copy');                   // Copy - only works as a result of a user action (e.g. click events)\n        document.body.removeChild(el);                  // Remove the <textarea> element\n        if (selected) {                                 // If a selection existed before copying\n            document.getSelection().removeAllRanges();    // Unselect everything on the HTML document\n            document.getSelection().addRange(selected);   // Restore the original selection\n        }\n    }\n\n    public static validate(type: string, value: any) {\n        switch (type) {\n            case 'email':\n            case 'Email':\n            case 'e-mail':\n            case 'E-mail':\n                return this.validateEmail(value);\n            case 'Number':\n            case 'number':\n                try {\n                    JSON.parse(`[${value}]`);\n                    return /^[0-9.-]*$/g.test(`${value}`);\n                } catch (e) {\n                    return false;\n                }\n            case 'integer':\n            case 'Integer':\n            case 'int':\n            case 'Int':\n                try {\n                    JSON.parse(`[${value}]`);\n                    return /^[0-9-]*$/g.test(`${value}`);\n                } catch (e) {\n                    return false;\n                }\n            case 'url':\n            case 'URL':\n                return /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w\\.-]+)+[\\w\\-\\._~:/?#[\\]@!\\$&'\\(\\)\\*\\+,;=.]+$/g.test(`${value}`);\n            case 'ip':\n            case 'ipv4':\n            case 'IP':\n                return /^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/g.test(`${value}`);\n        }\n    }\n\n    public static download(filename, text) {\n        const element = document.createElement('a');\n        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));\n        element.setAttribute('download', filename);\n\n        element.style.display = 'none';\n        document.body.appendChild(element);\n\n        element.click();\n\n        document.body.removeChild(element);\n    }\n\n    constructor() {\n        throw new Error('This is a static class');\n    }\n}\n","<!--\n@Author: Alex Sorafumo <alex.sorafumo>\n@Date:   12/10/2016 2:02 PM\n@Email:  alex@yuion.net\n@Filename: simple.template.html\n@Last modified by:   Alex Sorafumo\n@Last modified time: 01/02/2017 1:38 PM\n-->\n\n<div class=\"panel\" (window:resize)=\"update()\">\n    <!-- BINDINGS TO ROOM | START -->\n    <div class=\"binding\" *ngIf=\"model\">\n        <i\n            binding\n            [(value)]=\"model.touch_enabled\"\n            (valueChange)=\"processRoom()\"\n            [sys]=\"model.system\"\n            mod=\"Bookings\"\n            bind=\"touch_enabled\"\n        ></i>\n        <i binding [(value)]=\"model.raw_bookings\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"today\"></i>\n        <i\n            binding\n            [(value)]=\"model.last_started\"\n            (valueChange)=\"processRoom()\"\n            [sys]=\"model.system\"\n            mod=\"Bookings\"\n            bind=\"last_meeting_started\"\n        ></i>\n        <i binding [(value)]=\"model.cancel_timeout\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_cancel_timeout\"></i>\n        <i binding [(value)]=\"model.swiped\" (valueChange)=\"open($event)\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"swiped\"></i>\n        <i binding [(value)]=\"model.timeout\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"timeout\"></i>\n        <i binding [(value)]=\"model.fullname\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"fullname\"></i>\n        <i binding [(value)]=\"model.name\" (valueChange)=\"processRoom(); processRoomName()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"room_name\"></i>\n        <i binding [(value)]=\"model.details\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"details\"></i>\n        <i\n            binding\n            [(value)]=\"model.hearing\"\n            (valueChange)=\"processRoom()\"\n            [sys]=\"model.system\"\n            mod=\"Bookings\"\n            bind=\"hearing_assistance\"\n        ></i>\n        <i binding [(value)]=\"model.control\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_controls\"></i>\n        <i binding (valueChange)=\"model.can_book = $event; processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"touch_enabled\"></i>\n        <i binding [(value)]=\"model.catering\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_catering\"></i>\n        <i\n            binding\n            [(value)]=\"model.hide_details\"\n            (valueChange)=\"processRoom()\"\n            [sys]=\"model.system\"\n            mod=\"Bookings\"\n            bind=\"booking_hide_details\"\n        ></i>\n        <i binding [(value)]=\"model.hide_all\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_hide_all\"></i>\n        <i binding [(value)]=\"model.endable\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_endable\"></i>\n        <i binding [(value)]=\"model.ask_end\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_ask_end\"></i>\n        <i binding [(value)]=\"model.checkin\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_ask_start\"></i>\n        <i\n            binding\n            [(value)]=\"model.hide_avail\"\n            (valueChange)=\"processRoom()\"\n            [sys]=\"model.system\"\n            mod=\"Bookings\"\n            bind=\"booking_hide_availability\"\n        ></i>\n        <i\n            binding\n            [(value)]=\"model.hide_user\"\n            (valueChange)=\"processRoom()\"\n            [sys]=\"model.system\"\n            mod=\"Bookings\"\n            bind=\"booking_hide_user\"\n        ></i>\n        <i\n            binding\n            [(value)]=\"model.disable_future\"\n            (valueChange)=\"processRoom()\"\n            [sys]=\"model.system\"\n            mod=\"Bookings\"\n            bind=\"booking_disable_future\"\n        ></i>\n        <i\n            binding\n            [(value)]=\"model.hide_modal\"\n            (valueChange)=\"processRoom(); model.can_book = !$event\"\n            [sys]=\"model.system\"\n            mod=\"Bookings\"\n            bind=\"booking_hide_modal\"\n        ></i>\n        <i binding [(value)]=\"model.timeline_start\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"timeline_start\"></i>\n        <i binding [(value)]=\"model.timeline_end\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"timeline_end\"></i>\n        <i binding [(value)]=\"model.hide_title\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_hide_title\"></i>\n        <i binding [(value)]=\"model.hide_desc\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_hide_description\"></i>\n        <i binding [(value)]=\"model.hide_timeline\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_hide_timeline\"></i>\n        <i binding [(value)]=\"model.arrow\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"arrow_direction\"></i>\n        <i binding [(value)]=\"model.details_title\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"title\"></i>\n        <i binding [(value)]=\"model.details_icon\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"icon\"></i>\n        <i binding [(value)]=\"model.details_desc\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"description\"></i>\n        <i binding [(value)]=\"model.control_url\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"control_url\"></i>\n        <i binding [(value)]=\"model.bkn_min_duration\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_min_duration\"></i>\n        <i binding [(value)]=\"model.bkn_max_duration\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_max_duration\"></i>\n        <i binding [(value)]=\"model.bkn_step\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_duration_step\"></i>\n        <i binding [(value)]=\"model.reminder_delay\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"reminder_delay\"></i>\n        <i binding [(value)]=\"model.last_notify\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"last_notify_time\"></i>\n        <i binding [(value)]=\"model.status_override\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"status_override\"></i>\n        <i binding [(value)]=\"model.room_type\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"room_type\" (valueChange)=\"processRoomName()\"></i>\n        <!-- BINDING EXECUTE CALLS -->\n        <i binding [value]=\"model.waiter\" [sys]=\"model.system\" mod=\"Bookings\" exec=\"waiter_call\"></i>\n        <i\n            binding\n            [value]=\"model.pending_time\"\n            [sys]=\"model.system\"\n            mod=\"Bookings\"\n            exec=\"set_meeting_pending\"\n            [params]=\"[model.pending_time]\"\n        ></i>\n    </div>\n    <!-- BINDINGS TO ROOM | END -->\n    <div class=\"panel-display\" *ngIf=\"model.name\" [class.no-touch]=\"!model.touch_enabled\" [class.reverse]=\"reverse\" [class.multi]=\"multi\">\n        <div\n            class=\"status\"\n            [class.pending]=\"model.status === 'pending'\"\n            [class.disabled]=\"model.status === 'not-bookable' || model.hide_all || model.hide_timeline\"\n            [class.in-use]=\"model.status === 'busy'\"\n        >\n            <div class=\"time\" *ngIf=\"!multi\" [innerHTML]=\"display_time | safe\"></div>\n        </div>\n        <div class=\"space-info\" [style.background-image]=\"model.image ? 'url(' + model.image + ')' : ''\">\n            <div class=\"space-details\">\n                <div class=\"name\">\n                    <div class=\"icon arrow-left\" *ngIf=\"model.arrow === 'left'\">\n                        <i class=\"material-icons\">arrow_back</i>\n                    </div>\n                    <div class=\"text\">{{ name }}</div>\n                    <div class=\"icon arrow-right\" *ngIf=\"model.arrow === 'right'\">\n                        <i class=\"material-icons\">arrow_forward</i>\n                    </div>\n                </div>\n                <div class=\"room-data\" *ngIf=\"model.hide_all !== true\">\n                    <div\n                        class=\"room-status\"\n                        *ngIf=\"!model.hide_avail\"\n                        [class.pending]=\"model.status === 'pending'\"\n                        [class.disabled]=\"model.status === 'not-bookable'\"\n                        [class.available]=\"model.status === 'available'\"\n                        [class.capcase]=\"!(model.status_override ? model.status_override[model.status] : '')\"\n                    >\n                        {{ (model.status_override ? model.status_override[model.status] : '') || model.status }}\n                    </div>\n                    <div class=\"next c\" *ngIf=\"model.current\">\n                        <div class=\"time\" *ngIf=\"!model.hide_avail && !model.current.all_day\">\n                            Booked until\n                            <span *ngIf=\"model.current\">{{ model.current.display.end }}</span>\n                        </div>\n                        <div class=\"time\" *ngIf=\"!model.hide_avail && model.current.all_day\">Booked All Day</div>\n                        <div class=\"booker\" *ngIf=\"model.current&&!model.hide_details&&!model.hide_user\">{{model.current.host\n                            || model.current?.organiser?.name}}</div>\n                        <div class=\"next-name\" *ngIf=\"model.current&&!model.hide_details&&!model.hide_title\">{{model.current.title}}</div>\n                        <div\n                            class=\"description\"\n                            *ngIf=\"model.current && !model.hide_details && !model.hide_desc && !model.hide_title && model.current.description\"\n                        >\n                            {{ model.current.description }}\n                        </div>\n                        <div class=\"booker\" *ngIf=\"!model.current && !model.hide_details\">No meeting currently</div>\n                    </div>\n                    <div class=\"next\" *ngIf=\"!model.current && model.next\">\n                        <div class=\"time\" *ngIf=\"model.hide_avail !== true\">\n                            Next meeting\n                            <span *ngIf=\"model.next\">{{ model.next.display.start }}</span>\n                        </div>\n                        <div class=\"booker\" *ngIf=\"model.next && !model.hide_details && !model.hide_user\">\n                            {{ model.next.host || model.next?.organiser?.name }}\n                        </div>\n                        <div class=\"next-name\" *ngIf=\"model.next && !model.hide_details && !model.hide_title\">\n                            {{ model.next.title }}\n                        </div>\n                        <div\n                            class=\"description\"\n                            *ngIf=\"model.next && !model.hide_details && !model.hide_desc && !model.hide_title && model.next.description\"\n                        >\n                            {{ model.next.description }}\n                        </div>\n                    </div>\n                    \n                  \n                    <div class=\"room-description\" *ngIf=\"model.details_desc\" [class.smaller]=\"model.details_icon\">\n                        <div class=\"content\">\n                            <h2>{{ model.details_title }}</h2>\n                            <p><img *ngIf=\"model.details_icon\" [src]=\"model.details_icon\" />{{ model.details_desc }}</p>\n                        </div>\n                    </div>\n                    <div class=\"info-block\" *ngIf=\"model.touch_enabled && model.timeout\">\n                        <div class=\"text\">Room options</div>\n                        <btn\n                            [name]=\"model.pending ? 'success-full' : 'disabled-full'\"\n                            [disabled]=\"!model.pending\"\n                            (tapped)=\"confirmStart()\"\n                        >\n                            Check-in Now <i class=\"material-icons\">check</i>\n                        </btn>\n                        <div class=\"text normal\">\n                            <ng-container *ngIf=\"!model.pending; else available\">Check-in now unavailable</ng-container>\n                            <ng-template #available>Check-in is now available for this room</ng-template>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"btns\">\n                <div class=\"btn hearing\" *ngIf=\"model.hearing\">\n                    <div center class=\"hearing-icon white\"></div>\n                </div>\n                <div\n                    class=\"btn control\"\n                    *ngIf=\"model.control && model.control_url && model.control_url !== ''\"\n                    (mousedown)=\"openControl()\"\n                    (touchstart)=\"openControl()\"\n                >\n                    <div center class=\"control-icon\"></div>\n                </div>\n                <div class=\"btn catering\" *ngIf=\"model.catering\" (mousedown)=\"callWaiter()\" (touchstart)=\"callWaiter()\">\n                    <div class=\"catering-icon center\">\n                        <div class=\"dome\">\n                            <div class=\"ccircle\"></div>\n                        </div>\n                        <div class=\"knob\"></div>\n                        <div class=\"base\"></div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"timeline\">\n                <timeline\n                    [date]=\"model.date\"\n                    [events]=\"model.room ? model.room.bookings : null\"\n                    [options]=\"{ start: model.timeline_start || 6.5, end: model.timeline_end || 19.5, blocks: 2, max_length: 240 }\"\n                    (event)=\"$event.type === 'book' ? openBookingAt($event.time, $event.duration) : ''\"\n                >\n                </timeline>\n            </div>\n            <div *ngIf=\"model.control && model.control_url && show_controls\" class=\"control-frame\">\n                <iframe class=\"control\" [src]=\"model.control_url | safeurl\"></iframe>\n                <div class=\"close\">\n                    <btn format=\"mini-action\" (tapped)=\"close($event)\">\n                        <i class=\"material-icons\">close</i>\n                    </btn>\n                </div>\n                <div class=\"refresh\">\n                    <btn format=\"mini-action\" (tapped)=\"refresh()\">\n                        <i class=\"material-icons\">refresh</i>\n                    </btn>\n                </div>\n                <div class=\"countdown\">\n                    <btn format=\"mini-action\">{{ countdown }}</btn>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"panel-loading\" *ngIf=\"!model.name && multi\">\n        <div class=\"loading center\">\n            <div class=\"details\">\n                <div class=\"text\">Connecting to space{{ model.system && model.system !== '' ? '(' + model.system + ')' : '' }}...</div>\n                <div class=\"text normal\">Attempting to connect to the control server...</div>\n                <div class=\"text normal\">\n                    <div *ngIf=\"!model.msg\">If this message persists, check you network connection and then try reloading this page.</div>\n                    <div *ngIf=\"model.msg === 1\">It seems to be taking a while. Make sure the selected model.system is valid.</div>\n                    <div *ngIf=\"model.msg === 2\">Still nothing, huh. Are you authenticated? Do you have have a network connection?</div>\n                    <div *ngIf=\"model.msg === 3\">\n                        Something is definitely wrong at this point. Does the selected model.system have a booking module?\n                    </div>\n                    <div *ngIf=\"model.msg === 4\">Try reloading the page. If this persists contact your administrator.</div>\n                </div>\n            </div>\n            <div class=\"bounce\">\n                <div class=\"circle\">\n                    <div class=\"inner\"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","/**\n * @Author: Alex Sorafumo\n * @Date:   17/10/2016 4:10 PM\n * @Email:  alex@yuion.net\n * @Filename: simple.component.ts\n * @Last modified by:   Alex Sorafumo\n * @Last modified time: 01/02/2017 1:37 PM\n */\n\nimport { Component, OnInit, OnDestroy, Input, OnChanges } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { BaseComponent } from '../../shared/components/base.component';\nimport { AppService } from '../../services/app.service';\nimport { IRoom } from '../../services/data/rooms.service';\nimport { IBooking } from '../../services/data/bookings.service';\n\nimport * as moment from 'moment';\n\nconst TIMEOUT = 10;\n\n@Component({\n    selector: 'app-booking',\n    styleUrls: ['./booking.style.scss'],\n    templateUrl: './booking.template.html',\n})\nexport class BookingComponent extends BaseComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() public system: string;\n    @Input() public reverse: boolean;\n    @Input() public multi: boolean;\n\n    public model: { room?: IRoom, [name: string]: any } = {};\n    public timers: any;\n\n    public time: any = new Date();\n    public module: any = null;\n    public sub: any = null;\n    public show_controls = false;\n    public countdown = 0;\n    public display_time = '';\n    public display_time_simple = '';\n    /** Name of the active room */\n    public name: string;\n\n    private last_cancel: number;\n\n    constructor(private service: AppService, private router: Router, private route: ActivatedRoute) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.model = {};\n        this.timers = {};\n        this.interval('update', () => this.update(), 10 * 1000);\n        this.model.min_duration = 30;\n        this.load();\n        this.model.date = moment().valueOf();\n        // Load bootstrap page if no system is set\n        this.timeout('reload', () => {\n            if (!this.model || !this.model.name || this.model.name === '') {\n                if (window['debug']) {\n                    this.service.log(`MAIN(C)`, `No room name loaded after ${TIMEOUT} minutes, reloading...`);\n                }\n                location.reload();\n            }\n        }, TIMEOUT * 60 * 1000);\n        this.route.paramMap.subscribe((params: any) => {\n            if (params.has('system')) {\n                let system: string = null;\n                if (this.router.url !== '/' && this.router.url !== '/bootstrap') {\n                    system = params.get('system');\n                }\n                this.service.initSystem(system);\n            }\n        });\n\n        this.model.sys_listener = this.service.listen('system', (sys) => {\n            if (!this.system) {\n                this.model.system = sys;\n                this.module = this.service.Systems.getModule(this.model.system, 'Bookings');\n            }\n        });\n        // Create time blocks\n        this.updateTime();\n        this.timeout('update', () => this.update(), 2000);\n        this.init();\n    }\n\n    public init() {\n        if (!this.service.Settings.setup) {\n            return this.timeout('init', () => this.init());\n        }\n        this.model.settings = this.service.Settings.get('app.booking') || {};\n        if (this.service.Settings.get('debug')) {\n            (window as any).panel_ui = this;\n        }\n    }\n\n    public ngOnChanges(changes: any) {\n        if (changes.system) {\n            this.timeout('system_change', () => {\n                this.model = {};\n                this.model.system = this.system;\n                this.module = this.service.Systems.getModule(this.model.system, 'Bookings');\n            }, 100);\n        }\n    }\n\n    public ngOnDestroy() {\n        if (this.sub) { this.sub.unsubscribe(); }\n    }\n\n    public setTitle() {\n        if (this.model && this.model.name) {\n            this.service.title = (this.model.name);\n        } else {\n            this.timeout('title', () => this.setTitle());\n        }\n    }\n\n    public update() {\n        if (!this.model) { return; }\n        this.updateTime();\n        this.model.open = true;\n        this.model.can_end = false;\n        let next = this.model.next;\n        const now = moment();\n        if (next && next.date === this.model.last_started) {\n            const booking = this.model.room.raw_bookings.find(i => i.id === next.id);\n            const date = moment(booking.Start);\n            const diff = date.diff(now, 'm') + 1;\n            booking.Start = date.subtract(diff, 'm').toISOString();\n        }\n        if (this.model.room) {\n            this.service.Rooms.processRoom(this.model.room);\n            this.model.next = this.model.room.next;\n            this.model.current = this.model.room.current;\n            this.updateStatus();\n        }\n        if (!this.model.last_started) { this.model.last_started = 0; }\n        const current = this.model.room ? this.model.room.current : null;\n        next = this.model.room ? this.model.room.next : null;\n        this.model.started = ((current && current.date > this.model.last_started) || (next && next.date > this.model.last_started));\n        if (current && current.duration < 8 * 60) {\n            this.model.can_end = this.model.endable && moment(current.date).add(this.model.endable, 's').isBefore(now);\n            if (this.model.can_end && this.model.ask_end && !current.asked_end) {\n                this.confirmEnd();\n                current.asked_end = true;\n            }\n            if ((this.model.timeout || this.model.cancel_timeout) && this.model.touch_enabled && current.date > this.model.last_started) {\n                const timeout = moment(current.date).add(this.model.cancel_timeout || this.model.timeout, 's');\n                // Cancel meeting that hasn't started after 15 minutes\n                if (now.isAfter(timeout)) {\n                    this.cancelMeeting('pending timeout');\n                } else if (this.model.reminder_delay) {\n                    const notify = moment(current.date).add(this.model.reminder_delay, 's');\n                    if (notify.valueOf() > this.model.last_notify && now.isSameOrAfter(notify, 'm')) {\n                        this.notify('release_reminder');\n                    }\n                }\n            }\n        }\n        this.updateStatus();\n        this.updateFree();\n    }\n\n    public updateTime() {\n        const time = moment();\n        this.time = time.toDate();\n        if (!moment(this.model.date).isSame(time, 'd')) {\n            this.model.date = time.valueOf();\n        }\n        this.display_time_simple = moment().format('h:mm A');\n        this.display_time = this.display_time_simple.split(':').join('<span class=\"flash\">:</span>');\n    }\n\n    public updateStatus() {\n        if (this.model.room) {\n            this.service.Rooms.processRoom(this.model.room);\n        }\n        this.model.status = 'available';\n        this.model.pending = false;\n        if (this.model.room) {\n            const now = moment();\n            const current = this.model.room.current;\n            if (this.model.room.in_use && current) {\n                this.model.status = 'busy';\n            }\n            if (this.model.timeout && this.model.touch_enabled && (current && current.duration < 8 * 60)) {\n                const booking = current || this.model.room.next;\n                if (booking && booking.date > this.model.last_started || 0) {\n                    const end = moment(booking.date).add(booking.duration, 'm');\n                    const pending_start = moment(booking.date).add(-this.model.timeout, 's');\n                    const pending_end = moment(booking.date).add(this.model.timeout, 's');\n                    if (now.isBetween(pending_start, end, 'm', '[)')) {\n                        this.model.status = 'pending';\n                        this.model.pending = now.isBetween(pending_start, pending_end, 'm', '[)');\n                        if (this.model.pending) {\n                            this.model.pending_time = booking.date;\n                        }\n                        if (this.model.checkin && this.model.pending && this.model.checkin_time !== booking.date) {\n                            this.confirmStart(true);\n                            this.model.checkin_time = booking.date;\n                        }\n                        if (this.model.reminder_delay) {\n                            const notify = moment(pending_start).add(this.model.reminder_delay, 's');\n                            const start = moment(booking.date);\n                            if (notify.valueOf() > this.model.last_notify && now.isBefore(start, 'm') && now.isSameOrAfter(notify, 'm')) {\n                                this.notify('checkin_reminder');\n                            }\n                        }\n                    }\n\n                }\n            }\n            if (this.model.hide_all) {\n                this.model.status = 'not-bookable';\n            }\n        }\n        if (this.model.status !== 'busy' && this.model.status_override) {\n            for (const key in this.model.status_override) {\n                if (key === 'pending' || key === 'available' || key === 'not-bookable' || key === 'busy') {\n                    this.model.status = key;\n                    break;\n                }\n            }\n        }\n    }\n\n    public processRoom() {\n        if (!this.model) { return; }\n        if (this.model.name) {\n            this.clearTimer('load');\n        }\n        if (!this.model.loaded) {\n            if (!this.subs.timers.load) {\n                this.timeout('load', () => {\n                    this.model.loaded = true;\n                    this.timers.load = null;\n                    this.processRoom();\n                }, 1000);\n            }\n            return;\n        }\n        if (this.model) {\n            this.model.room = this.service.Rooms.processRoom(this.model as any);\n            this.update();\n        }\n    }\n\n    public open(value?: number) {\n        if (!this.model || !this.model.touch_enabled) { return; }\n        if (value === 0) { return; }\n        this.timeout('open', () => {\n            if (this.model.timeout && this.model.pending) {\n                this.confirmStart();\n            } else if (this.model.endable && this.model.current && this.model.can_end) {\n                this.confirmEnd();\n            } else if (this.model.can_book && !this.model.hide_all) {\n                this.openBookingModal();\n            } else if (this.model.control_url && this.model.status === 'unavailable') {\n                // this.openControl();\n            }\n        }, 300);\n    }\n\n    public openControl() {\n        this.show_controls = true;\n        this.countdown = 20;\n        if (this.timers.close) {\n            clearTimeout(this.timers.close);\n        }\n        this.timeout('close', () => this.countdownClose(), 1000);\n    }\n\n    public callWaiter() {\n        this.service.confirm({\n            title: `Do you want to call a waiter to your room?`,\n            message: 'Call a waiter to your room to order catering',\n            icon: 'call',\n            accept: 'Ok',\n            cancel: true,\n        }, (event) => {\n            if (event.type === 'Accept') {\n                this.service.log('PANEL', 'Calling waiter...');\n                if (this.model) {\n                    this.model.waiter = !this.model.waiter;\n                }\n            }\n            event.close();\n        });\n    }\n\n    public confirmStart(checkin: boolean = false) {\n        const title = checkin ? `Check in to meeting?` : 'Do you wish to start your meeting?';\n        const msg = checkin ? 'check in to' : 'start';\n        this.service.confirm({\n            title,\n            message: `If you don\\'t ${msg} your meeting it will be cancelled ${this.model.timeout / 60} minutes after the start time.`,\n            icon: 'play_arrow',\n            accept: 'Ok',\n            cancel: true,\n        }, (event) => {\n            if (event.type === 'Accept') {\n                this.startMeeting();\n            }\n            event.close();\n        });\n    }\n\n    public confirmEnd() {\n        if (!this.model.endable) {\n            return this.openBookingModal();\n        }\n        this.service.confirm({\n            title: `Are you sure want to end your meeting?`,\n            message: 'Ending your meeting early will free up this room for others to use',\n            icon: 'stop',\n            accept: 'Ok',\n            cancel: true,\n        }, (event) => {\n            if (event.type === 'Accept') {\n                this.cancelMeeting('user cancelled');\n            }\n            event.close();\n        });\n    }\n\n    public startMeeting() {\n        if (!this.model && !this.model.room) { return; }\n        let time: any;\n        if (this.model.room.current) {\n            time = moment(this.model.current.date).valueOf();\n        } else if (this.model.next) {\n            time = moment(this.model.next.date).valueOf();\n        }\n        if (time) {\n            this.model.started = true;\n            if (this.module) {\n                this.service.Analytics.event('Action', 'start_meeting', this.model.system);\n                this.module.exec('start_meeting', time)\n                    .then(() => this.update(), () => null);\n            }\n        }\n    }\n\n    public cancelMeeting(reason?: string) {\n        if (!this.model && !this.model.room) { return; }\n        let time: any;\n        if (this.model.room.current) {\n            time = moment(this.model.current.date).toISOString();\n        } else if (this.model.next) {\n            time = moment(this.model.next.date).toISOString();\n        }\n        if (time && this.module && time !== this.last_cancel) {\n            this.last_cancel = time;\n            this.module.exec('cancel_meeting', [time, reason]).then((value: boolean) => {\n                if (value === false) {\n                    this.last_cancel = null;\n                }\n                this.removeMeeting(time);\n            }, () => this.last_cancel = null);\n        }\n    }\n\n    /**\n     * Send email notification to host for the\n     * @param type Type of notification\n     */\n    public notify(type: 'checkin' | 'checkin_reminder' | 'release_reminder') {\n        this.timeout(`notify_${type}`, () => {\n            if (!this.model && !this.model.room || !type) { return; }\n            // Grab booking details\n            const item: IBooking = this.model.room.current || this.model.room.next;\n            if (item && item.date && this.module) {\n                this.module.exec(`notify`, [item.date, type]);\n            } else {\n                this.service.error('No icaluid or organiser email in notify booking');\n            }\n        });\n    }\n\n    public removeMeeting(time) {\n        const date = moment(time);\n        for (const bkn of this.model.bookings) {\n            const start = moment(bkn.start || bkn.Start);\n            if (date.isSame(start, 'm')) {\n                this.model.bookings.splice(this.model.bookings.indexOf(bkn), 1);\n                break;\n            }\n        }\n        this.processRoom();\n    }\n\n    public bookMeeting(data: any) {\n        return new Promise((resolve, reject) => {\n            if (!this.model) { return reject('No model'); }\n            if (this.module) {\n                // Create start time of booking\n                const now = moment().add(-4, 'm');\n                const start = moment().hours(data.form.time.hours())\n                    .minutes(Math.round(data.form.time.minutes() / 5) * 5)\n                    .seconds(0).milliseconds(0);\n                if (start.isBefore(now)) {\n                    return reject('Start time cannot be in the past');\n                }\n                const end = moment(start).add(data.form.duration, 'm');\n                if (this.model.room.bookings) {\n                    // Validate time and period of booking\n                    for (const booking of this.model.room.bookings) {\n                        const bk_start = moment(booking.date);\n                        const bk_end = moment(bk_start).add(Math.abs(booking.duration), 'm');\n                        if (start.isBetween(bk_start, bk_end, 'm', '[)')) { // Check beginning\n                            return reject(`Booking start time overlaps with another booking.`);\n                        } else if (end.isBetween(bk_start, bk_end, 'm', '(]')) { // Check ending\n                            return reject('Duration of booking is too long. Booking overlaps with another booking.');\n                        } else if (bk_start.isBetween(start, end, 'm', '[)')) {\n                            return reject('Duration of booking is too long. Booking overlaps with another booking.');\n                        }\n                    }\n                }\n                const request = {\n                    title: data.form.title,\n                    num_staff: data.form.num_staff ? +data.form.num_staff : 0,\n                    num_partners: data.form.num_partners ? +data.form.num_partners : 0,\n                    staff_id: '', // data.form.user.staff_code,\n                    start: start.valueOf(),\n                    end: end.valueOf(),\n                    host: data.form.host || data.form.user || { name: 'Panel User' }\n                };\n                this.timeout('reject', () => {\n                    reject('Request timed out');\n                }, 10 * 1000);\n                // Make booking\n                this.module.exec('create_meeting', [request]).then((value: any) => {\n                    const finish = (m?) => {\n                        if (this.subs.timers.reject) {\n                            this.clearTimer('reject');\n                            m ? reject(m) : resolve();\n                        }\n                    };\n                    this.service.Analytics.event('Booking', 'create_booking', this.model.system);\n                    const data_value = value ? value.data : null;\n                    if (value && ((data_value && data_value.bookingId !== '') || value.toLowerCase() === 'ok')) {\n                        this.model.bookings.push({\n                            Start: start.valueOf(),\n                            End: end.valueOf(),\n                            Subject: data.form.meeting_name,\n                            setup: 0,\n                            breakdown: 0,\n                            owner: data.form.user ? data.form.user.name : this.model.name || 'Ad-hoc Booking'\n                        });\n                        this.service.success('Booking Successful');\n                        this.processRoom();\n                        if (this.model.timeout) {\n                            const c = moment();\n                            const s = moment(start).add(-this.model.timeout, 's');\n                            if (c.isAfter(s)) {\n                                if (this.module) { this.module.exec('start_meeting', start.valueOf()); }\n                            }\n                        }\n                        this.update();\n                        finish();\n                    } else {\n                        if (value.message !== 'OK') {\n                            finish(value.message);\n                        } else {\n                            if (data_value && data_value.requestMessage) {\n                                finish(data_value.requestMessage);\n                            } else {\n                                finish('Failed to make booking');\n                            }\n                        }\n                    }\n                }, (err: any) => {\n                    this.service.Analytics.event('Booking', 'create_booking_fail', this.model.system);\n                    if (this.subs.timers.reject) {\n                        this.clearTimer('reject');\n                        reject(err);\n                    }\n                });\n            } else {\n                reject('No module');\n            }\n        });\n        // if (!data.form.user) {\n        //     if (cb instanceof Function) { cb('No user has been set'); }\n        //     return this.service.error('No user has been set');\n        // }\n    }\n\n    public close(e: any) {\n        if (e) { e.preventDefault(); }\n        setTimeout(() => {\n            this.show_controls = false;\n            if (this.timers.close) {\n                clearTimeout(this.timers.close);\n            }\n        }, 20);\n    }\n\n    public refresh() {\n        this.countdown = 20;\n        if (this.timers.close) {\n            clearTimeout(this.timers.close);\n        }\n        this.timers.close = setTimeout(() => this.countdownClose(), 1000);\n    }\n\n    public countdownClose() {\n        if (this.countdown > 0) {\n            this.countdown--;\n            if (this.timers.close) {\n                clearTimeout(this.timers.close);\n            }\n            this.timers.close = setTimeout(() => this.countdownClose(), 1000);\n        } else {\n            this.close(null);\n        }\n    }\n\n    public openBookingModal(time?: number, duration: number = 30) {\n        if (!this.model.room || !this.model.can_book || this.model.hide_all || !!this.model.hide_modal) { return; }\n        const now = moment().seconds(0).milliseconds(0);\n        now.minutes(Math.ceil(now.minutes() / 5) * 5 - 1);\n        let date = moment(time).seconds(0).milliseconds(0);\n        date.minutes(Math.ceil(date.minutes() / 5) * 5);\n        // Check time is in present or future\n        if (now.isAfter(date)) { return; }\n        let next: any = null;\n        // Validate that time is in an available period\n        for (const booking of (this.model.room.bookings || [])) {\n            const bkn_start = moment(booking.date);\n            const min_gap = moment(bkn_start).add(-(this.model.bkn_step || this.model.bkn_min_duration || 15), 'm');\n            const bkn_end = moment(bkn_start).add(booking.duration, 'm');\n            if (date.isBetween(min_gap, bkn_end, 'm', '()')) {\n                date = bkn_end;\n                next = null;\n            } else if (date.isBefore(bkn_start)) {\n                next = !next || next.isAfter(bkn_start) ? bkn_start : next;\n            }\n        }\n        let gap = Math.abs(next ? moment.duration(date.diff(next)).asMinutes() : this.model.bkn_max_duration || 240);\n        if (gap > (this.model.bkn_max_duration || 240)) {\n            gap = this.model.bkn_max_duration || 240;\n        }\n        if (this.model.disable_future && moment().add(5, 'm').isBefore(now)) {\n            return; // No future bookings allow\n        }\n        const data: any = {\n            room: this.model,\n            form: {\n                duration: Math.min(gap, Math.max(30, duration)),\n                name: this.model.fullname,\n                ext: '',\n                time: date,\n            },\n            title_prefix: (this.model.settings || {}).title_prefix || '',\n            gap: gap,\n            system: this.system || this.model.system,\n            free: this.model.free,\n            user: null,\n        };\n        this.service.Overlay.openModal('booking', { data })\n            .then((inst: any) => inst.subscribe((event) => {\n                if (event.type === 'Book') {\n                    this.bookMeeting(event.data).then(\n                        () => { event.close(); },\n                        (err) => {\n                            event.data.loading = false;\n                            // event.data.stopLoading();\n                            if (err.status) {\n                                this.service.error(`Error making booking(${err.status})`);\n                            } else {\n                                this.service.error(`Error: ${err}`);\n                            }\n                        });\n                } else { event.close(); }\n            }), (err: any) => null);\n    }\n\n    public openBookingAt(start: number, duration: number) {\n        if (this.model && this.model.can_book && !this.model.disable_future) {\n            this.openBookingModal(start, duration || 30);\n        }\n    }\n\n    public isInt(value: any) {\n        const x = parseFloat(value);\n        return !isNaN(value) && (x || 0) === x;\n    }\n\n    public updateFree() {\n        this.model.free = [];\n        this.model.next_free = null;\n        if (this.model.room) {\n            let previous: IBooking;\n            const now = moment();\n            const bookings = JSON.parse(JSON.stringify(this.model.room.bookings || []));\n            bookings.sort((a, b) => a.date - b.date);\n            bookings.unshift({ date: moment().hours(0).minutes(0).valueOf(), duration: 0 });\n            bookings.push({ date: moment().hours(23).minutes(59).valueOf(), duration: 0 });\n            for (const booking of bookings) {\n                if (previous) {\n                    const p_end = moment(previous.date).add(previous.duration, 'minutes');\n                    const c_start = moment(booking.date);\n                    const free = {\n                        date: p_end.valueOf(),\n                        duration: moment.duration(c_start.diff(p_end)).asMinutes(),\n                        current: now.isBetween(p_end, c_start, 'minutes', '[)'),\n                        start: p_end.format('h:mma'),\n                        end: c_start.format('h:mma')\n                    };\n                    this.model.free.push(free);\n                    if (!this.model.next_free && free.duration > 0 && c_start.isAfter(now)) {\n                        this.model.next_free = free;\n                    }\n                }\n                previous = booking;\n            }\n        }\n    }\n\n    /**\n     * Process bindings to generate the display value for the room name\n     */\n    public processRoomName() {\n        if (this.model.room_type) {\n            const parts = this.model.room_type.split(' ');\n            if (this.model.name.indexOf(parts[0]) < 0) {\n                this.name = `${this.model.name} - ${this.model.room_type}`;\n            } else {\n                this.name = this.model.name;\n            }\n        } else {\n            this.name = this.model.name;\n        }\n    }\n\n    private load() {\n        this.timeout('load', () => {\n            this.model.msg++;\n            if (this.model.msg < 4) {\n                this.load();\n            }\n        }, 10 * 1000);\n    }\n}\n","<!--\n@Author: Alex Sorafumo <alex.sorafumo>\n@Date:   12/10/2016 2:02 PM\n@Email:  alex@yuion.net\n@Filename: simple.template.html\n@Last modified by:   Alex Sorafumo\n@Last modified time: 01/02/2017 1:38 PM\n-->\n\n<div class=\"panel\" (window:resize)=\"update()\">\n    <!-- BINDINGS TO ROOM | START -->\n    <div class=\"binding\" *ngIf=\"model\">\n        <i binding [(value)]=\"model.touch_enabled\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\"\n            bind=\"touch_enabled\"></i>\n        <i binding [(value)]=\"model.raw_bookings\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\"\n            bind=\"today\"></i>\n        <i binding [(value)]=\"model.last_started\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\"\n            bind=\"last_meeting_started\"></i>\n        <i binding [(value)]=\"model.swiped\" (valueChange)=\"open($event)\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"swiped\"></i>\n        <i binding [(value)]=\"model.timeout\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"timeout\"></i>\n        <i binding [(value)]=\"model.fullname\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"fullname\"></i>\n        <i binding [(value)]=\"model.name\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"room_name\"></i>\n        <i binding [(value)]=\"model.details\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"details\"></i>\n        <i binding [(value)]=\"model.hearing\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"hearing_assistance\"></i>\n        <i binding [(value)]=\"model.control\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_controls\"></i>\n        <i binding (valueChange)=\"model.can_book=$event;processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"touch_enabled\"></i>\n        <i binding [(value)]=\"model.catering\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_catering\"></i>\n        <i binding [(value)]=\"model.hide_details\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\"\n            bind=\"booking_hide_details\"></i>\n        <i binding [(value)]=\"model.hide_all\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_hide_all\"></i>\n        <i binding [(value)]=\"model.endable\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_endable\"></i>\n        <i binding [(value)]=\"model.ask_end\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_ask_end\"></i>\n        <i binding [(value)]=\"model.checkin\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_ask_start\"></i>\n        <i binding [(value)]=\"model.hide_avail\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_hide_availability\"></i>\n        <i binding [(value)]=\"model.hide_user\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_hide_user\"></i>\n        <i binding [(value)]=\"model.disable_future\" (valueChange)=\"processRoom()\" [sys]=\"model.system\" mod=\"Bookings\"\n            bind=\"booking_disable_future\"></i>\n        <i binding [(value)]=\"model.hide_modal\" (valueChange)=\"processRoom(); model.can_book = !$event\" [sys]=\"model.system\"\n            mod=\"Bookings\" bind=\"booking_hide_modal\"></i>\n        <i binding [(value)]=\"model.timeline_start\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"timeline_start\"></i>\n        <i binding [(value)]=\"model.timeline_end\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"timeline_end\"></i>\n        <i binding [(value)]=\"model.hide_title\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_hide_title\"></i>\n        <i binding [(value)]=\"model.hide_desc\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_hide_description\"></i>\n        <i binding [(value)]=\"model.hide_timeline\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_hide_timeline\"></i>\n        <i binding [(value)]=\"model.arrow\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"arrow_direction\"></i>\n        <i binding [(value)]=\"model.details_title\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"title\"></i>\n        <i binding [(value)]=\"model.details_icon\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"icon\"></i>\n        <i binding [(value)]=\"model.details_desc\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"description\"></i>\n        <i binding [(value)]=\"model.control_url\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"control_url\"></i>\n        <i binding [(value)]=\"model.bkn_min_duration\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_min_duration\"></i>\n        <i binding [(value)]=\"model.bkn_max_duration\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_max_duration\"></i>\n        <i binding [(value)]=\"model.bkn_step\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"booking_duration_step\"></i>\n        <!-- BINDING EXECUTE CALLS -->\n        <i binding [value]=\"model.waiter\" [sys]=\"model.system\" mod=\"Bookings\" exec=\"waiter_call\"></i>\n        <i binding [value]=\"model.pending_time\" [sys]=\"model.system\" mod=\"Bookings\" exec=\"set_meeting_pending\" [params]=\"[model.pending_time]\"></i>\n    </div>\n    <!-- BINDINGS TO ROOM | END -->\n    <div class=\"panel-display\" *ngIf=\"model.name\" [class.no-touch]=\"!model.touch_enabled\" [class.reverse]=\"reverse\"\n        [class.multi]=\"multi\">\n        <div class=\"body\" [style.background-image]=\"'url(https://lh3.googleusercontent.com/GUOYVJC9WrBIzjwcZ9GLhr62YNyF-Y__C-XkfmWdes7SU3zidyA6cvRXKt10UlcEI4aGEuKlMmwUE0uWHJlFuSJWO8Nt85rZim54bRo=w0)'\">\n\n        </div>\n        <div class=\"sidebar\" *ngIf=\"model.room\">\n            <div class=\"list\">\n                <div class=\"item\" *ngFor=\"let item of (model.room.bookings || [])\">\n                    <div class=\"details\">\n                        <div class=\"subject\">{{item.title}}</div>\n                        <div class=\"host\">{{item.organiser.name || item.organiser}}</div>\n                    </div>\n                    <div class=\"time\">\n                        <div class=\"period\">{{item.display?.start}} &ndash; {{item.display?.end}}</div>\n                        <div class=\"remainder\">{{item.display?.remainder}}</div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"options\">\n                <btn name=\"meet-full inverse\">Start meeting</btn>\n                <btn name=\"meet-full inverse\">End meeting</btn>\n                <btn name=\"meet-full inverse\">Book meeting</btn>\n                <btn name=\"meet-full inverse\" *ngIf=\"model.control && model.control_url && model.control_url!==''\">Control Room</btn>\n                <btn name=\"meet-full inverse\" *ngIf=\"model.catering\">Call Waiter</btn>\n            </div>\n        </div>\n    </div>\n","/**\n * @Author: Alex Sorafumo\n * @Date:   17/10/2016 4:10 PM\n * @Email:  alex@yuion.net\n * @Filename: simple.component.ts\n * @Last modified by:   Alex Sorafumo\n * @Last modified time: 01/02/2017 1:37 PM\n */\n\nimport { Component, OnInit, OnDestroy, Input, OnChanges } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\n\nimport { BaseComponent } from '../../shared/components/base.component';\nimport { AppService } from '../../services/app.service';\nimport { IBooking } from '../../services/data/bookings.service';\n\nimport * as moment from 'moment';\n\nconst TIMEOUT = 10;\n\n@Component({\n    selector: 'app-meet',\n    styleUrls: ['./meet.style.scss'],\n    templateUrl: './meet.template.html',\n})\nexport class MeetComponent extends BaseComponent implements OnInit, OnChanges, OnDestroy {\n    @Input() public system: string;\n    @Input() public reverse: boolean;\n    @Input() public multi: boolean;\n\n    public model: any;\n    public timers: any;\n\n    public time: any = new Date();\n    public module: any = null;\n    public sub: any = null;\n    public show_controls = false;\n    public countdown = 0;\n    public display_time = '';\n    public display_time_simple = '';\n\n    constructor(private service: AppService, private router: Router, private route: ActivatedRoute) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.model = {};\n        this.timers = {};\n        this.interval('update', () => this.update(), 10 * 1000);\n        this.model.min_duration = 30;\n        this.load();\n        this.model.date = moment().valueOf();\n        // Load bootstrap page if no system is set\n        this.timeout('reload', () => {\n            if (!this.model || !this.model.name || this.model.name === '') {\n                if (window['debug']) {\n                    this.service.log(`MAIN(C)`, `No room name loaded after ${TIMEOUT} minutes, reloading...`);\n                }\n                location.reload();\n            }\n        }, TIMEOUT * 60 * 1000);\n        this.route.paramMap.subscribe((params: any) => {\n            if (params.has('system')) {\n                let system: string = null;\n                if (this.router.url !== '/' && this.router.url !== '/bootstrap') {\n                    system = params.get('system');\n                }\n                this.service.initSystem(system);\n            }\n        });\n\n        this.model.sys_listener = this.service.listen('system', (sys) => {\n            if (!this.system) {\n                this.model.system = sys;\n                this.module = this.service.Systems.getModule(this.model.system, 'Bookings');\n            }\n        });\n        // Create time blocks\n        this.updateTime();\n        this.timeout('update', () => this.update(), 2000);\n        this.init();\n    }\n\n    public init() {\n        if (!this.service.Settings.setup) {\n            return this.timeout('init', () => this.init());\n        }\n        this.model.settings = this.service.Settings.get('app.booking') || {};\n    }\n\n    public ngOnChanges(changes: any) {\n        if (changes.system) {\n            this.timeout('system_change', () => {\n                this.model = {};\n                this.model.system = this.system;\n                this.module = this.service.Systems.getModule(this.model.system, 'Bookings');\n            }, 100);\n        }\n    }\n\n    public ngOnDestroy() {\n        if (this.sub) { this.sub.unsubscribe(); }\n    }\n\n    public setTitle() {\n        if (this.model && this.model.name) {\n            this.service.title = (this.model.name);\n        } else {\n            this.timeout('title', () => this.setTitle());\n        }\n    }\n\n    public update() {\n        if (!this.model) { return; }\n        this.updateTime();\n        this.model.open = true;\n        this.model.can_end = false;\n        if (this.model.room) {\n            this.service.Rooms.processRoom(this.model.room);\n            this.model.next = this.model.room.next;\n            this.model.current = this.model.room.current;\n            this.updateStatus();\n        }\n        if (!this.model.last_started) { this.model.last_started = 0; }\n        const current = this.model.room ? this.model.room.current : null;\n        const next = this.model.room ? this.model.room.next : null;\n        const now = moment();\n        this.model.started = ((current && current.raw_date > this.model.last_started) || (next && next.raw_date > this.model.last_started));\n        if (current) {\n            this.model.can_end = this.model.endable && moment(current.raw_date).add(this.model.endable, 's').isBefore(now);\n            if (this.model.can_end && this.model.ask_end && !current.asked_end) {\n                this.confirmEnd();\n                current.asked_end = true;\n            }\n            if (this.model.timeout && this.model.touch_enabled && this.model.current.raw_date > this.model.last_started) {\n                const timeout = moment(current.raw_date).add(this.model.timeout, 's');\n                // Cancel meeting that hasn't started after 15 minutes\n                if (now.isAfter(timeout)) {\n                    this.cancelMeeting();\n                }\n            }\n        }\n        this.updateStatus();\n        this.updateFree();\n    }\n\n    public updateTime() {\n        const time = moment();\n        this.time = time.toDate();\n        if (!moment(this.model.date).isSame(time, 'd')) {\n            this.model.date = time.valueOf();\n        }\n        this.display_time_simple = moment().format('h:mm A');\n        this.display_time = this.display_time_simple.split(':').join('<span class=\"flash\">:</span>');\n    }\n\n    public updateStatus() {\n        if (this.model.room) {\n            this.service.Rooms.processRoom(this.model.room);\n        }\n        this.model.status = 'available';\n        this.model.pending = false;\n        if (this.model.room) {\n            const now = moment();\n            if (this.model.room.in_use && this.model.room.current) {\n                this.model.status = 'unavailable';\n            }\n            if (this.model.timeout && this.model.touch_enabled) {\n                const event = this.model.room.current || this.model.room.next;\n                if (event && event.raw_date > this.model.last_started) {\n                    const end = moment(event.raw_date).add(event.duration, 'm');\n                    const pending_start = moment(event.raw_date).add(-this.model.timeout, 's');\n                    const pending_end = moment(event.raw_date).add(this.model.timeout, 's');\n                    if (now.isBetween(pending_start, end, 'm', '[)')) {\n                        this.model.status = 'pending';\n                        this.model.pending = now.isBetween(pending_start, pending_end, 'm', '[)');\n                        if (this.model.pending) {\n                            this.model.pending_time = event.date;\n                        }\n                        if (this.model.checkin && this.model.pending && this.model.checkin_time !== event.date) {\n                            this.confirmStart(true);\n                            this.model.checkin_time = event.date;\n                        }\n                    }\n\n                }\n            }\n            if (this.model.hide_all) {\n                this.model.status = 'not-bookable';\n            }\n        }\n    }\n\n    public processRoom() {\n        if (!this.model) { return; }\n        if (this.model.name) {\n            this.clearTimer('load');\n        }\n        if (!this.model.loaded) {\n            if (!this.subs.timers.load) {\n                this.timeout('load', () => {\n                    this.model.loaded = true;\n                    this.timers.load = null;\n                    this.processRoom();\n                }, 1000);\n            }\n            return;\n        }\n        if (this.model) {\n            this.model.room = this.service.Rooms.processRoom(this.model);\n            this.update();\n        }\n    }\n\n    public open(value?: number) {\n        if (!this.model || !this.model.touch_enabled) { return; }\n        if (value === 0) { return; }\n        this.timeout('open', () => {\n            if (this.model.timeout && this.model.pending) {\n                this.confirmStart();\n            } else if (this.model.endable && this.model.current && this.model.can_end) {\n                this.confirmEnd();\n            } else if (this.model.can_book && !this.model.hide_all) {\n                this.openBookingModal();\n            } else if (this.model.control_url && this.model.status === 'unavailable') {\n                // this.openControl();\n            }\n        }, 300);\n    }\n\n    public openControl() {\n        this.show_controls = true;\n        this.countdown = 20;\n        if (this.timers.close) {\n            clearTimeout(this.timers.close);\n        }\n        this.timeout('close', () => this.countdownClose(), 1000);\n    }\n\n    public callWaiter() {\n        this.service.confirm({\n            title: `Do you want to call a waiter to your room?`,\n            message: 'Call a waiter to your room to order catering',\n            icon: 'call',\n            accept: 'Ok',\n            cancel: true,\n        }, (event) => {\n            if (event.type === 'Accept') {\n                this.service.log('PANEL', 'Calling waiter...');\n                if (this.model) {\n                    this.model.waiter = !this.model.waiter;\n                }\n            }\n            event.close();\n        });\n    }\n\n    public confirmStart(checkin: boolean = false) {\n        const title = checkin ? `Check in to meeting?` : 'Do you wish to start your meeting?';\n        const msg = checkin ? 'check in to' : 'start';\n        this.service.confirm({\n            title,\n            message: `If you don\\'t ${msg} your meeting it will be cancelled ${this.model.timeout / 60} minutes after the start time.`,\n            icon: 'play_arrow',\n            accept: 'Ok',\n            cancel: true,\n        }, (event) => {\n            if (event.type === 'Accept') {\n                this.startMeeting();\n            }\n            event.close();\n        });\n    }\n\n    public confirmEnd() {\n        if (!this.model.endable) {\n            return this.openBookingModal();\n        }\n        this.service.confirm({\n            title: `Are you sure want to end your meeting?`,\n            message: 'Ending your meeting early will free up this room for others to use',\n            icon: 'stop',\n            accept: 'Ok',\n            cancel: true,\n        }, (event) => {\n            if (event.type === 'Accept') {\n                this.cancelMeeting();\n            }\n            event.close();\n        });\n    }\n\n    public startMeeting() {\n        if (!this.model && !this.model.room) { return; }\n        let time: any;\n        if (this.model.room.current) {\n            time = moment(this.model.current.date).valueOf();\n        } else if (this.model.next) {\n            time = moment(this.model.next.date).valueOf();\n        }\n        if (time) {\n            this.model.started = true;\n            if (this.module) {\n                this.module.exec('start_meeting', time)\n                    .then(() => this.update(), () => null);\n            }\n        }\n    }\n\n    public cancelMeeting() {\n        if (!this.model && !this.model.room) { return; }\n        let time: any;\n        if (this.model.room.current) {\n            time = moment(this.model.current.date).toISOString();\n        } else if (this.model.next) {\n            time = moment(this.model.next.date).toISOString();\n        }\n        if (time && this.module) {\n            this.module.exec('cancel_meeting', time).then(() => {\n                this.removeMeeting(time);\n            });\n        }\n    }\n\n    public removeMeeting(time) {\n        const date = moment(time);\n        for (const bkn of this.model.bookings) {\n            const start = moment(bkn.start || bkn.Start);\n            if (date.isSame(start, 'm')) {\n                this.model.bookings.splice(this.model.bookings.indexOf(bkn), 1);\n                break;\n            }\n        }\n        this.processRoom();\n    }\n\n    public bookMeeting(data: any) {\n        return new Promise((resolve, reject) => {\n            if (!this.model) { return reject('No model'); }\n            if (this.module) {\n                // Create start time of booking\n                const now = moment().add(-4, 'm');\n                const start = moment().hours(data.form.time.hours())\n                    .minutes(Math.round(data.form.time.minutes() / 5) * 5)\n                    .seconds(0).milliseconds(0);\n                if (start.isBefore(now)) {\n                    return reject('Start time cannot be in the past');\n                }\n                const end = moment(start).add(data.form.duration, 'm');\n                if (this.model.room.bookings) {\n                    // Validate time and period of booking\n                    for (const booking of this.model.room.bookings) {\n                        const bk_start = moment(booking.date || booking.start);\n                        const bk_end = moment(bk_start).add(Math.abs(booking.duration), 'm');\n                        if (start.isBetween(bk_start, bk_end, 'm', '[)')) { // Check beginning\n                            return reject(`Booking start time overlaps with another booking.`);\n                        } else if (end.isBetween(bk_start, bk_end, 'm', '(]')) { // Check ending\n                            return reject('Duration of booking is too long. Booking overlaps with another booking.');\n                        } else if (bk_start.isBetween(start, end, 'm', '[)')) {\n                            return reject('Duration of booking is too long. Booking overlaps with another booking.');\n                        }\n                    }\n                }\n                const request = {\n                    title: data.form.title,\n                    num_staff: data.form.num_staff ? +data.form.num_staff : 0,\n                    num_partners: data.form.num_partners ? +data.form.num_partners : 0,\n                    staff_id: '', // data.form.user.staff_code,\n                    start: start.valueOf(),\n                    end: end.valueOf(),\n                };\n                this.timeout('reject', () => {\n                    reject('Request timed out');\n                }, 10 * 1000);\n                // Make booking\n                this.module.exec('create_meeting', [request]).then((value: any) => {\n                    this.service.Analytics.event('Booking', 'create_booking', this.model.system);\n                    const data_value = value ? value.data : null;\n                    if (value && ((data_value && data_value.bookingId !== '') || value.toLowerCase() === 'ok')) {\n                        this.model.bookings.push({\n                            Start: start.valueOf(),\n                            End: end.valueOf(),\n                            Subject: data.form.meeting_name,\n                            setup: 0,\n                            breakdown: 0,\n                            owner: data.form.user ? data.form.user.name : this.model.name || 'Ad-hoc Booking'\n                        });\n                        this.service.success('Booking Successful');\n                        this.processRoom();\n                        if (this.model.timeout) {\n                            const c = moment();\n                            const s = moment(start).add(-this.model.timeout, 's');\n                            if (c.isAfter(s)) {\n                                if (this.module) { this.module.exec('start_meeting', start.valueOf()); }\n                            }\n                        }\n                        this.update();\n                        if (this.subs.timers.reject) {\n                            this.clearTimer('reject');\n                            resolve();\n                        }\n                    } else {\n                        if (value.message !== 'OK') {\n                            if (this.subs.timers.reject) {\n                                this.clearTimer('reject');\n                                reject(value.message);\n                            }\n                        } else {\n                            if (data_value && data_value.requestMessage) {\n                                if (this.subs.timers.reject) {\n                                    this.clearTimer('reject');\n                                    reject(data_value.requestMessage);\n                                }\n                            } else {\n                                if (this.subs.timers.reject) {\n                                    this.clearTimer('reject');\n                                    reject('Failed to make booking');\n                                }\n                            }\n                        }\n                    }\n                }, (err: any) => {\n                    this.service.Analytics.event('Booking', 'create_booking_fail', this.model.system);\n                    if (this.subs.timers.reject) {\n                        this.clearTimer('reject');\n                        reject(err);\n                    }\n                });\n            } else {\n                reject('No module');\n            }\n        });\n        // if (!data.form.user) {\n        //     if (cb instanceof Function) { cb('No user has been set'); }\n        //     return this.service.error('No user has been set');\n        // }\n    }\n\n    public close(e: any) {\n        if (e) { e.preventDefault(); }\n        setTimeout(() => {\n            this.show_controls = false;\n            if (this.timers.close) {\n                clearTimeout(this.timers.close);\n            }\n        }, 20);\n    }\n\n    public refresh() {\n        this.countdown = 20;\n        if (this.timers.close) {\n            clearTimeout(this.timers.close);\n        }\n        this.timers.close = setTimeout(() => this.countdownClose(), 1000);\n    }\n\n    public countdownClose() {\n        if (this.countdown > 0) {\n            this.countdown--;\n            if (this.timers.close) {\n                clearTimeout(this.timers.close);\n            }\n            this.timers.close = setTimeout(() => this.countdownClose(), 1000);\n        } else {\n            this.close(null);\n        }\n    }\n\n    public openBookingModal(time?: number, duration: number = 30) {\n        if (!this.model.room || !this.model.can_book || this.model.hide_all || !!this.model.hide_modal) { return; }\n        const now = moment().seconds(0).milliseconds(0);\n        now.minutes(Math.ceil(now.minutes() / 5) * 5 - 1);\n        let date = moment(time).seconds(0).milliseconds(0);\n        date.minutes(Math.ceil(date.minutes() / 5) * 5);\n        // Check time is in present or future\n        if (now.isAfter(date)) { return; }\n        let next: any = null;\n        // Validate that time is in an available period\n        for (const booking of (this.model.room.bookings || [])) {\n            const bkn_start = moment(booking.date || booking.start);\n            const min_gap = moment(bkn_start).add(-(this.model.bkn_step || this.model.bkn_min_duration || 15), 'm');\n            const bkn_end = moment(bkn_start).add(booking.duration, 'm');\n            if (date.isBetween(min_gap, bkn_end, 'm', '()')) {\n                date = bkn_end;\n                next = null;\n            } else if (date.isBefore(bkn_start)) {\n                next = !next || next.isAfter(bkn_start) ? bkn_start : next;\n            }\n        }\n        let gap = Math.abs(next ? moment.duration(date.diff(next)).asMinutes() : this.model.bkn_max_duration || 240);\n        if (gap > (this.model.bkn_max_duration || 240)) {\n            gap = this.model.bkn_max_duration || 240;\n        }\n        if (this.model.disable_future && moment().add(5, 'm').isBefore(now)) {\n            return; // No future bookings allow\n        }\n        const data: any = {\n            room: this.model,\n            form: {\n                duration: Math.min(gap, Math.max(30, duration)),\n                name: this.model.fullname,\n                ext: '',\n                time: date,\n            },\n            title_prefix: (this.model.settings || {}).title_prefix || '',\n            gap: gap,\n            system: this.system,\n            free: this.model.free,\n            user: null,\n        };\n        this.service.Overlay.openModal('booking', { data })\n            .then((inst: any) => inst.subscribe((event) => {\n                if (event.type === 'Book') {\n                    this.bookMeeting(event.data).then(\n                        () => { event.close(); },\n                        (err) => {\n                            event.data.loading = false;\n                            // event.data.stopLoading();\n                            if (err.status) {\n                                this.service.error(`Error making booking(${err.status})`);\n                            } else {\n                                this.service.error(`Error: ${err}`);\n                            }\n                        });\n                } else { event.close(); }\n            }), (err: any) => null);\n    }\n\n    public openBookingAt(start: number, duration: number) {\n        if (this.model && this.model.can_book && !this.model.disable_future) {\n            this.openBookingModal(start, duration || 30);\n        }\n    }\n\n    public isInt(value: any) {\n        const x = parseFloat(value);\n        return !isNaN(value) && (x || 0) === x;\n    }\n\n    public updateFree() {\n        this.model.free = [];\n        this.model.next_free = null;\n        if (this.model.room) {\n            let previous: IBooking;\n            const now = moment();\n            const bookings = JSON.parse(JSON.stringify(this.model.room.bookings || []));\n            bookings.sort((a, b) => a.date - b.date);\n            bookings.unshift({ date: moment().hours(0).minutes(0).valueOf(), duration: 0 });\n            bookings.push({ date: moment().hours(23).minutes(59).valueOf(), duration: 0 });\n            for (const booking of bookings) {\n                if (previous) {\n                    const p_end = moment(previous.date).add(previous.duration, 'minutes');\n                    const c_start = moment(booking.date);\n                    const free = {\n                        date: p_end.valueOf(),\n                        duration: moment.duration(c_start.diff(p_end)).asMinutes(),\n                        current: now.isBetween(p_end, c_start, 'minutes', '[)'),\n                        start: p_end.format('h:mma'),\n                        end: c_start.format('h:mma')\n                    };\n                    this.model.free.push(free);\n                    if (!this.model.next_free && free.duration > 0 && c_start.isAfter(now)) {\n                        this.model.next_free = free;\n                    }\n                }\n                previous = booking;\n            }\n        }\n    }\n\n    private load() {\n        this.timeout('load', () => {\n            this.model.msg++;\n            if (this.model.msg < 4) {\n                this.load();\n            }\n        }, 10 * 1000);\n    }\n}\n","\n<div class=\"container\">\n    <ng-container *ngIf=\"model.systems\">\n        <div class=\"block\" *ngFor=\"let sys of model.systems; let i = index\">\n            <app-booking [system]=\"sys\" [reverse]=\"i % 2 === 1\" [multi]=\"model.systems.length > 1\"></app-booking>\n        </div>\n    </ng-container>\n    <div class=\"timer\" *ngIf=\"!model.system || model.system.length > 1\">{{model.time}}</div>\n</div>\n","\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { AppService } from '../../services/app.service';\n\nimport * as moment from 'moment';\n\n@Component({\n    selector: 'multi-display',\n    templateUrl: './multi-display.template.html',\n    styleUrls: ['./multi-display.styles.scss']\n})\nexport class MultiDisplayComponent implements OnInit {\n    public model: any = {};\n\n    private timers: any = {};\n\n    constructor(private service: AppService, private route: ActivatedRoute) {\n        this.route.queryParamMap.subscribe((params) => {\n            if (params.has('sys_ids')) {\n                setTimeout(() => this.model.systems = params.get('sys_ids').split(','), 1000);\n            } else if (params.has('system_ids')) {\n                setTimeout(() => this.model.systems = params.get('system_ids').split(','), 1000);\n            }\n        });\n    }\n\n    public ngOnInit() {\n        if (this.timers.time) {\n            clearInterval(this.timers.time);\n            this.timers.time = null;\n        }\n        this.model.time = moment().format('h:mma');\n        this.timers.time = setInterval(() => {\n            this.model.time = moment().format('h:mma');\n        }, 10 * 1000);\n    }\n}\n","\n<div class=\"container\" (window:tap)=\"reset()\">\n    <ng-container *ngIf=\"model.selected\">\n        <app-booking [system]=\"model.selected.id\"></app-booking>\n        <div class=\"back\">\n            <btn format=\"mini-action\" (tapped)=\"model.selected = null\"><i class=\"material-icons\">arrow_back</i></btn>\n        </div>\n    </ng-container>\n    <div class=\"overlay\" *ngIf=\"!model.selected\">\n        <div class=\"header\">{{model.selection?.header}}</div>\n        <div class=\"body\">\n            <div class=\"item\" *ngFor=\"let item of (model.list || [])\" (touchrelease)=\"select(item)\">\n                <i binding [(value)]=\"item.raw_bookings\" (valueChange)=\"updateItem(item)\" [sys]=\"item.id\" mod=\"Bookings\" bind=\"today\"></i>\n                <div class=\"status\" [class.error]=\"item.in_use\">{{item.name}}</div>\n                <div class=\"image\">\n                    <img *ngIf=\"item.image\" [src]=\"item.image\">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { AppService } from '../../services/app.service';\n\nimport * as moment from 'moment';\nimport { BaseComponent } from '../../shared/components/base.component';\n\n@Component({\n    selector: 'select-display',\n    templateUrl: './select-display.template.html',\n    styleUrls: ['./select-display.styles.scss']\n})\nexport class SelectDisplayComponent extends BaseComponent implements OnInit {\n    public model: any = {};\n\n    private timers: any = {};\n\n    constructor(private service: AppService, private route: ActivatedRoute) {\n        super();\n        this.route.queryParamMap.subscribe((params) => {\n            if (params.has('sys_ids')) {\n                this.timeout('ids', () => this.model.systems = params.get('sys_ids').split(','), 1000);\n            } else if (params.has('system_ids')) {\n                this.timeout('ids', () => this.model.systems = params.get('system_ids').split(','), 1000);\n            }\n        });\n    }\n\n    public ngOnInit() {\n        this.model.time = moment().format('h:mma');\n        this.interval('time', () => this.model.time = moment().format('h:mma'), 10 * 1000);\n        this.init();\n    }\n\n    public init() {\n        console.log('Ready:', this.service.ready());\n        if (!this.service.ready()) {\n            return this.timeout('init', () => this.init());\n        }\n        this.model.selection = this.service.Settings.get('app.selection');\n        console.log('Selection:', this.model);\n        if (this.model.selection) {\n            this.model.list = this.model.selection.list || [];\n        } else {\n            this.service.navigate('bootstrap');\n        }\n    }\n\n    public updateItem(item) {\n        this.service.Rooms.processRoom(item);\n    }\n\n    public reset() {\n        this.timeout('reset', () => {\n            this.model.selected = null;\n            this.service.system = '';\n        }, 2 * 60 * 1000);\n    }\n\n    public select(item) {\n        this.model.selected = item;\n        this.service.system = item.id;\n    }\n}\n","<div class=\"container\">\n    <i binding [(value)]=\"model.name\" (valueChange)=\"check($event)\" [sys]=\"model.system\" mod=\"Bookings\" bind=\"room_name\"></i>\n    <div class=\"topbar\" *ngIf=\"model.topbar\">\n        <div class=\"menu\" [class.show]=\"model.show_sidebar\">\n            <i class=\"material-icons\" (touchrelease)=\"toggleSidebar()\">{{ model.show_sidebar ? 'add' : 'menu' }}</i>\n        </div>\n        <div *ngIf=\"model.logo\" class=\"logo\" (tap)=\"logo()\" [style.background]=\"(model.logo ? model.logo.background : '') | safestyle\">\n            <img *ngIf=\"model.logo.type==='image' || model.logo.type==='img'\" alt=\"\" [src]=\"model.banner && model.banner.full && !model.is_home ? model.logo.inverse || model.logo.src : model.logo.src\">\n            <i *ngIf=\"model.logo.type!=='image' && model.logo.type!=='img'\" [class]=\"model.banner && model.banner.full && !model.is_home ? model.logo.inverse || model.logo.src : model.logo.src\"></i>\n        </div>\n    </div>\n    <div class=\"sidebar\" [class.show]=\"model.show_sidebar\" (touchrelease)=\"resetTimer()\">\n        <room-list></room-list>\n    </div>\n    <main class=\"body\">\n        <router-outlet></router-outlet>\n    </main>\n</div>\n<div class=\"panel-loading\" *ngIf=\"model.system && !model.name\">\n    <div class=\"loading center\">\n        <div class=\"details\">\n            <div class=\"text\">\n                Connecting to space{{model.system && model.system !== '' ? '(' + model.system + ')' : ''}}... {{model.name}}\n            </div>\n            <div class=\"text normal\">Attempting to connect to the control server...</div>\n            <div class=\"text normal\">\n                <div *ngIf=\"!model.msg\">\n                    If this message persists, check you network connection and then try reloading this page.\n                </div>\n                <div *ngIf=\"model.msg === 1\">\n                    It seems to be taking a while. Make sure the selected {{model.system}} is valid.</div>\n                <div *ngIf=\"model.msg === 2\">\n                    Still nothing, huh. Are you authenticated? Do you have have a network connection?\n                </div>\n                <div *ngIf=\"model.msg === 3\">\n                    Something is definitely wrong at this point. Does the selected model.system have a booking module?\n                </div>\n                <div *ngIf=\"model.msg === 4\">\n                    Try reloading the page. If this persists contact your administrator.\n                </div>\n            </div>\n        </div>\n        <div class=\"bounce\">\n            <div class=\"circle\">\n                <div class=\"inner\"></div>\n            </div>\n        </div>\n    </div>\n</div>","\nimport { Component, OnInit } from '@angular/core';\n\nimport { BaseComponent } from '../shared/components/base.component';\nimport { AppService } from '../services/app.service';\n\n@Component({\n    selector: 'app-shell',\n    templateUrl: './shell.template.html',\n    styleUrls: ['./shell.styles.scss']\n})\nexport class  AppShellComponent extends BaseComponent implements OnInit {\n    public model: any = {};\n\n    constructor(private service: AppService) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.subs.obs.system = this.service.listen('system', (value) => {\n            this.timeout('system', () => {\n                this.model.system = value;\n                this.model.msg = 0;\n                this.interval('msg', () => {\n                    this.model.msg++;\n                    if (this.model.msg >= 4) { this.clearInterval('msg'); }\n                }, 10 * 1000);\n            }, 20);\n        });\n        this.init();\n    }\n\n    public init() {\n        if (!this.service.ready()) {\n            return this.timeout('init', () => this.init());\n        }\n        this.model.topbar = this.service.Settings.get('app.topbar');\n        this.model.logo = this.service.Settings.get('app.logo');\n    }\n\n    public toggleSidebar() {\n        this.model.show_sidebar = !this.model.show_sidebar;\n        if (this.model.show_sidebar) {\n            this.timeout('sidebar', () => {\n                this.model.show_sidebar = false;\n                this.subs.timers.sidebar = null;\n            }, 60 * 1000);\n        } else {\n            this.clearTimer('sidebar');\n        }\n    }\n\n    public resetTimer() {\n        if (this.subs.timers.sidebar) {\n            this.timeout('sidebar', () => {\n                this.model.show_sidebar = false;\n                this.subs.timers.sidebar = null;\n            }, 60 * 1000);\n        }\n    }\n\n    public check(v) {\n        console.log('Value:', v);\n    }\n}\n","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n"],"sourceRoot":""}