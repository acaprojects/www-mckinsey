{"version":3,"sources":["webpack:///./src/app/shell/explore/components/map-overlay/map-overlay.template.html","webpack:///./src/app/shell/explore/components/map-overlay/map-overlay.component.ts","webpack:///./src/app/shell/explore/components/search/search.template.html","webpack:///./src/app/shell/explore/components/search/search.component.ts","webpack:///./src/app/shell/explore/explore.template.html","webpack:///./src/app/shell/explore/explore.component.ts","webpack:///./src/app/shell/explore/explore.module.ts"],"names":[],"mappings":"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","file":"shell-explore-explore-module-ngfactory.js","sourcesContent":["<div class=\"container\" (window:tap)=\"tapWindow($event)\" (window:resize)=\"model.show = {}\">\n    <div class=\"bindings\" *ngIf=\"model.level && model.level.active\">\n        <i binding [(value)]=\"model.desks.free\" (valueChange)=\"processRooms()\" [sys]=\"model.system\" mod=\"DeskManagement\" [bind]=\"model.level.active.id + ':free_count'\"></i>\n        <i binding [(value)]=\"model.desks.count\" (valueChange)=\"processRooms()\" [sys]=\"model.system\" mod=\"DeskManagement\" [bind]=\"model.level.active.id + ':desk_count'\"></i>\n    </div>\n    <div class=\"zoom\">\n        <div class=\"item\" (tap)=\"zoom(1.2)\">\n            <i class=\"material-icons\">add</i>\n        </div>\n        <div class=\"item\" (tap)=\"zoom(1 / 1.2)\" [class.disabled]=\"!settings || !settings.zoom || settings.zoom <= 100\">\n            <i class=\"material-icons\">remove</i>\n        </div>\n        <div class=\"item\" (tap)=\"reset()\">\n            <i class=\"material-icons\">refresh</i>\n        </div>\n    </div>\n    <div class=\"not-mobile\">\n        <div class=\"simple\" *ngIf=\"!model.old\">\n            <ng-container *ngFor=\"let item of model.options; let i = index\">\n                <btn name=\"black inverse\" format=\"mini-action\" (tap)=\"action(item)\"\n                    tooltip [(show)]=\"model.show[item.id]\" position=\"left\" [offset]=\"item.offset || 'start'\" [template]=\"model.template[item.id]\"\n                    (tapped)=\"item.template ? (model.show[item.id] = !model.show[item.id]) : ''\">\n                    <i *ngIf=\"item.icon\" [class]=\"item.icon.class\" [class.large]=\"item.large\">{{item.icon.value}}</i>\n                    <div class=\"number\" *ngIf=\"item.number\">{{model.level?.active?.number}}</div>\n                </btn>\n            </ng-container>\n        </div>\n        <div class=\"old-overlay\" *ngIf=\"model.old\">\n            <div class=\"level\" *ngIf=\"model.level && model.level.list && model.level.list.length\" [class.push]=\"model.search === 'spaces' || model.search === 'people'\">\n                <dropdown [list]=\"model.level.names\" [(model)]=\"model.level.index\" (modelChange)=\"setLevel(model.level.list[$event])\"></dropdown>\n                <div class=\"show-state\" *ngIf=\"model.zones && model.zones.enabled && model.search !== 'people'\">\n                    <div class=\"text\">Zones</div>\n                    <div class=\"checkbox\">\n                        <toggle name=\"zones\" [(model)]=\"model.zones.show\" (modelChange)=\"updateState()\" type=\"ios\"></toggle>\n                    </div>\n                </div>\n                <custom-dropdown [content]=\"keys_content\" [template]=\"key_list\">\n                    <ng-template #keys_content>\n                        <div class=\"keys-header\">\n                            <div class=\"value\">{{model.keys.types && model.keys.types.length === 1 ? model.keys.types[0] : '' }} Keys</div>\n                            <div class=\"icon\">\n                                <i class=\"material-icons\">{{model.keys.show ? 'keyboard_arrow_up' : 'keyboard_arrow_down'}}</i>\n                            </div>\n                        </div>\n                    </ng-template>\n                </custom-dropdown>\n            </div>\n            <div class=\"options\">\n                <div class=\"btn\" *ngIf=\"!model.zones.enabled\">\n                    <btn *ngIf=\"!model.map_settings || model.map_settings.settings !== false\"\n                        [name]=\"model.show.settings ? '' : 'black inverse'\" format=\"mini-action\" (tapped)=\"model.show.settings = !model.show.settings\"\n                        tooltip [(show)]=\"model.show.settings\" position=\"left\" offset=\"start\" [template]=\"map_settings\">\n                        <i class=\"material-icons\">settings</i>\n                    </btn>\n                    <ng-template #map_settings>\n                        <div class=\"settings\">\n                            <div class=\"item\">\n                                <div class=\"text\">Desk Status</div>\n                                <div class=\"checkbox\">\n                                    <toggle name=\"zones\" [(model)]=\"model.show.desks\" (modelChange)=\"updateState()\" type=\"ios\"></toggle>\n                                </div>\n                            </div>\n                            <div class=\"item\">\n                                <div class=\"text\">Room Status</div>\n                                <div class=\"checkbox\">\n                                    <toggle name=\"zones\" [(model)]=\"model.show.rooms\" (modelChange)=\"updateState()\" type=\"ios\"></toggle>\n                                </div>\n                            </div>\n                            <div class=\"item\">\n                                <div class=\"text\">Team Tables</div>\n                                <div class=\"checkbox\">\n                                    <toggle name=\"zones\" [(model)]=\"model.show.teams\" (modelChange)=\"updateState()\" type=\"ios\"></toggle>\n                                </div>\n                            </div>\n                            <div class=\"item\">\n                                <div class=\"text\">Zones</div>\n                                <div class=\"checkbox\">\n                                    <toggle name=\"zones\" [(model)]=\"model.zones.show\" (modelChange)=\"updateState()\" type=\"ios\"></toggle>\n                                </div>\n                            </div>\n                        </div>\n                    </ng-template>\n                </div>\n                <div class=\"btn\" *ngIf=\"!model.zones.enabled\">\n                    <btn *ngIf=\"!model.map_settings || model.map_settings.info !== false\"\n                        [name]=\"model.show.info ? '' : 'black inverse'\" format=\"mini-action\" (tapped)=\"model.show.info = !model.show.info\"\n                        tooltip [(show)]=\"model.show.info\" position=\"left\" [template]=\"room_info\">\n                        <i class=\"material-icons\">info</i>\n                    </btn>\n                </div>\n                <div class=\"btn\" *ngIf=\"!model.zones.enabled\">\n                    <btn *ngIf=\"!model.map_settings || model.map_settings.filters !== false\"\n                        [name]=\"model.show_filters ? '' : 'black inverse'\" format=\"mini-action\" (tapped)=\"model.show_filters = !model.show_filters\">\n                        <i class=\"material-icons\">filter_list</i>\n                    </btn>\n                </div>\n                <btn name=\"black\" *ngIf=\"model.back\" format=\"mini-action\" (tapped)=\"back()\">\n                    <i class=\"material-icons\">arrow_back</i>\n                </btn>\n            </div>\n        </div>\n        <ng-template #room_info>\n            <div class=\"room\" *ngIf=\"model.level && model.level.active && model.desks\">\n                <div class=\"item\" *ngIf=\"model.desks && model.desks.count\">\n                    <div class=\"text\">Desks free</div>\n                    <div class=\"value\" [class.low]=\"model.desks.percent > 75\" [class.medium]=\"model.desks.percent > 25 && model.desks.percent <= 75\" [class.high]=\"model.desks.percent <= 25\">\n                        {{model.desks.free}}\n                    </div>\n                    <div class=\"value\">&nbsp;of {{model.desks.count}}</div>\n                </div>\n                <div class=\"item\" *ngIf=\"model.rooms && model.rooms.count\">\n                    <div class=\"text\">Spaces free</div>\n                    <div class=\"value\" [class.low]=\"model.rooms.percent > 75\" [class.medium]=\"model.rooms.percent > 25 && model.rooms.percent <= 75\" [class.high]=\"model.rooms.percent <= 25\">\n                        {{model.rooms.free}}\n                    </div>\n                    <div class=\"value\">&nbsp;of {{model.rooms.count}}</div>\n                </div>\n            </div>\n        </ng-template>\n        <ng-template #key_list>\n            <div class=\"keys\">\n                <ng-container *ngFor=\"let type of model.keys.types\">\n                    <div class=\"divider\" *ngIf=\"model.keys.types.length > 1\">\n                        <div class=\"bar\"></div>\n                        <div class=\"type\">{{type}}</div>\n                        <div class=\"bar\"></div>\n                    </div>\n                    <div class=\"item\" *ngFor=\"let key of model.keys.groups[type]\">\n                        <div class=\"circle\" [style.background-color]=\"key.color\" [class.icon]=\"key.icon || key.image\">\n                            <div class=\"icon\" *ngIf=\"key.icon || key.image\">\n                                <div *ngIf=\"key.image\" class=\"image\" [style.background-image]=\"'url('+key.image+')'\"></div>\n                                <i *ngIf=\"key.icon\" [class]=\"key.icon.class\">{{key.icon.value}}</i>\n                            </div>\n                        </div>\n                        <div class=\"name\">{{key.name}}</div>\n                    </div>\n                </ng-container>\n            </div>\n        </ng-template>\n        <!-- <ng-template #room_info>\n            <div class=\"room\" *ngIf=\"model.level && model.level.active && model.desks\">\n                <div class=\"item\">\n                    <div class=\"text\"># of desks</div>\n                    <div class=\"value\">{{model.desks.count || '0'}}</div>\n                </div>\n                <div class=\"item\">\n                    <div class=\"text\">Free desks</div>\n                    <div class=\"value\" [class.low]=\"model.desks.free > 50\" [class.medium]=\"model.desks.free > 25 && model.desks.free <= 25\" [class.high]=\"model.desks.free <= 25\">\n                        {{model.desks.free || '0'}}\n                    </div>\n                </div>\n            </div>\n        </ng-template> -->\n    </div>\n    <div class=\"mobile\">\n        <div class=\"option-list mobile-only\" [class.show]=\"model.show_menu\">\n            <div class=\"group\">\n                <ng-container *ngFor=\"let item of model.options; let i = index\">\n                    <btn [name]=\"'black inverse no-margin ' + item.class\" format=\"mini-action\" (tapped)=\"action(item)\"\n                        tooltip [(show)]=\"model.show[item.id + '_mobile']\" position=\"left\" [offset]=\"item.offset || 'end'\" [template]=\"model.template[item.id]\"\n                        [style.transform]=\"model.show_menu ? 'translateY(-'+ (2.5 * (model.options.length - i)) +'em)' : ''\"\n                        (tapped)=\"item.template ? (model.show[item.id + '_mobile'] = !model.show[item.id + '_mobile']) : ''\">\n                        <i *ngIf=\"item.icon\" [class]=\"item.icon.class\" [class.large]=\"item.large\">{{item.icon.value}}</i>\n                        <div class=\"number\" *ngIf=\"item.number\">{{model.level?.active?.number}}</div>\n                    </btn>\n                </ng-container>\n            </div>\n            <btn name=\"black inverse no-margin\" format=\"action\" (tap)=\"model.show_menu = !model.show_menu\">\n                <i class=\"material-icons\">{{model.show_menu ? 'add' : 'more_vert'}}</i>\n            </btn>\n        </div>\n    </div>\n\n    <div class=\"filters\" [class.show]=\"model.show_filters\">\n        <div class=\"header\">\n            <div class=\"heading\">Filter zones</div>\n            <div class=\"close\" (touchrelease)=\"model.show_filters = false\">\n                <div class=\"material-icons\">close</div>\n            </div>\n        </div>\n        <div class=\"body\">\n            <div class=\"item\" *ngFor=\"let item of model.level.active.map.features\">\n                <checkbox [(model)]=\"item.active\" [label]=\"item.name\"></checkbox>\n            </div>\n        </div>\n        <div class=\"footer\">\n            <btn name=\"inverse\" (tapped)=\"applyFilters()\">Apply filters</btn>\n        </div>\n    </div>\n</div>","\nimport { Component, Input, OnInit, ViewChild, TemplateRef, OnChanges } from '@angular/core';\n\nimport { AppService } from '../../../../services/app.service';\nimport { ILevel } from '../../../../services/data/buildings.service';\nimport { BaseComponent } from '../../../../shared/components/base.component';\n\n@Component({\n    selector: 'explore-map-overlay',\n    templateUrl: './map-overlay.template.html',\n    styleUrls: ['./map-overlay.styles.scss']\n})\nexport class ExploreMapOverlayComponent extends BaseComponent implements OnInit, OnChanges {\n    @Input() change: boolean;\n\n    public model: any = {};\n    public settings: any = {};\n\n    @ViewChild('room_info') private room_info: TemplateRef<any>;\n    @ViewChild('key_list') private key_list: TemplateRef<any>;\n\n    constructor(private service: AppService) {\n        super();\n    }\n\n    public ngOnInit() {\n        this.service.Buildings.listen((bld) => {\n            if (bld) {\n                this.model.bld = bld;\n                this.model.system = bld.systems.desks;\n                this.loadLevels();\n            }\n        });\n        this.model.desks = {};\n        this.model.show = {};\n        this.model.template = {};\n        this.model.options = [\n            { id: 'level', name: 'Level Select', large: true, icon: { class: 'material-icons', value: 'layers' }, number: true, action: 'pickLevel' },\n            { id: 'keys', name: 'Keys', icon: { class: 'material-icons', value: 'vpn_key' }, template: true },\n            { id: 'settings', name: 'Map Settings', icon: { class: 'material-icons', value: 'settings' }, action: 'updateSettings' },\n            { id: 'filters', name: 'Map Filters', icon: { class: 'material-icons', value: 'filter_list' }, action: 'showFilters' },\n            { id: 'room', name: 'Room Info', icon: { class: 'material-icons', value: 'info' }, offset: 'middle', template: true }\n        ];\n        this.model.rooms = {};\n        this.init();\n        this.setTemplates();\n    }\n\n    public ngOnChanges(changes: any) {\n        if (changes.change) {\n            setTimeout(() => {\n                this.model.rooms.list = this.service.Rooms.list();\n                this.processRooms();\n            }, 100);\n        }\n    }\n\n    public setTemplates() {\n        if (!this.room_info || !this.key_list) {\n            return setTimeout(() => this.setTemplates(), 500);\n        }\n        this.model.template.room = this.room_info;\n        this.model.template.keys = this.key_list;\n        this.subs.obs.explore_lvl = this.service.listen('EXPLORE.level', (value) => this.setLevelByID(value, false));\n        this.subs.obs.explore_search = this.service.listen('EXPLORE.search', (value) => this.model.search = value);\n    }\n\n    public tapWindow(e: any) {\n        this.model.keys.show = (this.model.keys ? false : this.model.keys);\n    }\n\n    public init() {\n        if (!this.service.Settings.setup) {\n            return setTimeout(() => this.init(), 500);\n        }\n        this.model.map_settings = this.service.Settings.get('app.map') || {};\n        this.model.keys = {};\n        this.model.keys.groups = this.model.map_settings.keys || {};\n        this.model.keys.types = Object.keys(this.model.keys.groups);\n        this.model.zones = {};\n        this.model.zones.enabled = this.service.Settings.get('app.zones.enabled');\n        this.model.zones.toggle = this.service.Settings.get('app.zones.toggle');\n        this.model.settings = this.service.Settings.get('app.explore') || {};\n        if (this.model.zones.enabled && this.model.zones.toggle) {\n            this.model.keys.types = [this.model.zones.toggle];\n        }\n        if (this.model.keys) {\n            this.model.keys.list = (this.model.keys.groups.room || []).concat(this.model.keys.groups.general || []);\n        }\n            // Remove keys option if there are no keys to display\n        if ((!this.model.keys.types || this.model.keys.types.length <= 0) && (!this.model.keys.list || this.model.keys.list.length <= 0)) {\n            for (const opt of this.model.options) {\n                if (opt.id === 'keys') {\n                    this.model.options.splice(this.model.options.indexOf(opt), 1);\n                    break;\n                }\n            }\n        }\n        if (this.model.map_settings && this.model.map_settings.settings === false) {\n            for (const opt of this.model.options) {\n                if (opt.id === 'settings') {\n                    this.model.options.splice(this.model.options.indexOf(opt), 1);\n                    break;\n                }\n            }\n        }\n        if (this.model.map_settings && this.model.map_settings.info === false) {\n            for (const opt of this.model.options) {\n                if (opt.id === 'room') {\n                    this.model.options.splice(this.model.options.indexOf(opt), 1);\n                    break;\n                }\n            }\n        }\n        this.settings = { zoom: 0 };\n        this.model.old = this.service.Settings.get('app.explore.old_overlay');\n        this.service.set('EXPLORE.settings', this.settings);\n        this.subs.obs.rooms = this.service.Rooms.listen('room_list', () => {\n            this.model.rooms.list = this.service.Rooms.list();\n            this.processRooms();\n        });\n        this.initOld();\n    }\n\n    public initOld() {\n        this.subs.obs.exp_show_dsks = this.service.listen('EXPLORE.show.desks', (state) => {\n            this.model.show.desks = state;\n        });\n        this.subs.obs.exp_show_rms = this.service.listen('EXPLORE.show.rooms', (state) => {\n            this.model.show.rooms = state;\n        });\n        this.subs.obs.exp_show_tms = this.service.listen('EXPLORE.show.teams', (state) => {\n            this.model.show.teams = state;\n        });\n        this.subs.obs.exp_show_zns = this.service.listen('EXPLORE.show.zones', (state) => {\n            this.model.zones.show = state;\n        });\n    }\n\n    public loadLevels() {\n        this.model.level = { list: [] };\n        if (this.model.bld) {\n            this.model.level.list = this.model.bld.levels;\n            this.model.level.names = [];\n            for (const lvl of this.model.level.list) {\n                this.model.level.names.push(lvl.name);\n            }\n            this.setLevel(this.model.level.list[0]);\n        }\n    }\n\n    public setLevelByID(id: string, emit: boolean = true) {\n        if (id && this.model.level && this.model.level.list) {\n            for (const lvl of this.model.level.list) {\n                if (lvl.id === id) {\n                    this.setLevel(lvl, emit);\n                    return lvl;\n                }\n            }\n        }\n        return null;\n    }\n\n    public setLevel(lvl: ILevel, emit: boolean = true) {\n        if (lvl && this.model.level && this.model.level.list && this.model.level.list.indexOf(lvl) >= 0) {\n            const previous_lvl = this.model.level.active;\n            this.model.level.active = lvl;\n            this.model.level.index = this.model.level.list.indexOf(lvl);\n            if (emit && (!previous_lvl || previous_lvl.id !== lvl.id)) {\n                this.service.set('EXPLORE.level', lvl.id);\n            }\n            this.processRooms();\n        }\n    }\n\n    public pickLevel() {\n        if (this.model.level && this.model.level.list) {\n            const lvl = this.model.level.active;\n            this.service.Overlay.openModal('level-select', { data: { active: lvl ? lvl.id : '' } })\n                .then((inst: any) => inst.subscribe((event) => {\n                    if (event.type === 'Select') {\n                        this.setLevelByID(event.data.active);\n                    }\n                    this.model.show_menu = false;\n                    event.close();\n                }));\n        }\n    }\n\n    public processRooms() {\n        if (this.model.rooms && this.model.rooms.list) {\n            this.model.rooms.count = 0;\n            this.model.rooms.free = 0;\n            for (const rm of this.model.rooms.list) {\n                if (rm.level && rm.level.id === this.model.level.active.id && rm.bookable) {\n                    this.model.rooms.count++;\n                    if (!rm.in_use) {\n                        this.model.rooms.free++;\n                    }\n                }\n            }\n            this.model.rooms.percent = (this.model.rooms.free / (this.model.rooms.count || 1)) * 100;\n        }\n        if (this.model.desks) {\n            this.model.desks.percent = ((this.model.desks.free || 0) / (this.model.desks.count || 1)) * 100;\n        }\n    }\n\n    public updateSettings() {\n        this.service.Overlay.openModal('map-filter', {})\n            .then((inst: any) => inst.subscribe((event) => {\n                event.close();\n                this.model.show_menu = false;\n                this.model.show_filters = false;\n            }));\n    }\n\n    public showFilters() {\n        this.model.show_filters = !this.model.show_filters;\n    }\n\n    public updateState() {\n        this.service.set('EXPLORE.show.desks', this.model.show.desks);\n        this.service.set('EXPLORE.show.rooms', this.model.show.rooms);\n        this.service.set('EXPLORE.show.teams', this.model.show.teams);\n        if (this.model.zones) {\n            this.service.set('EXPLORE.show.zones', this.model.zones.show);\n        }\n        this.service.set('EXPLORE.filters', !this.service.get('EXPLORE.filters'));\n    }\n\n    public action(item: any) {\n        if (item.action && this[item.action] instanceof Function) {\n            this[item.action]();\n        }\n    }\n\n    public toggle(name: string, mobile: boolean = false) {\n        const key = `${name}${mobile ? '_mobile' : ''}`;\n        setTimeout(() => {\n            if (this.model[name]) {\n                this.model[name].show = !this.model[name].show;\n            } else {\n                this.model.show[key] = !this.model.show[key];\n            }\n        }, 300);\n    }\n\n    public zoom(value) {\n        const zoom = Math.max(100, ((this.settings.zoom || 100)) * value);\n        if (!this.settings) { this.settings = {}; }\n        this.settings.zoom = zoom;\n        this.postSettings();\n    }\n\n    public reset() {\n        if (!this.settings) { this.settings = {}; }\n        this.settings.zoom = 100;\n        this.settings.center = { x: .5, y: .5 };\n        this.postSettings();\n    }\n\n    public applyFilters() {\n        const zones = this.model.level.active.map.features;\n        const hide: string[] = [];\n        for (const z of zones) {\n            if (!z.active) { hide.push(z.id); }\n        }\n        this.service.set('EXPLORE.map.hide', hide.length === zones.length ? [] : hide);\n        this.model.show_filters = false;\n    }\n\n    public postSettings() {\n        this.settings = JSON.parse(JSON.stringify(this.settings));\n        this.service.set('EXPLORE.settings', this.settings);\n    }\n\n}\n","<div class=\"container\" [class.route]=\"model.route\">\n    <div class=\"tapzone\" (window:tap)=\"updateShow()\"></div>\n    <div class=\"search\" [class.show]=\"model.show\">\n        <div class=\"header\" [class.banner]=\"model.show && model.banner\" [class.roles]=\"model.banner_roles\">\n            <div class=\"banner-roles\" *ngIf=\"model.banner_roles\">\n                <div class=\"role\" *ngFor=\"let r of model.role.list; let i = index\">\n                    <btn [name]=\"model.role.active === i ? 'wide banner inverse' : 'wide banner'\" (tapped)=\"(model.role.active === i ? model.role.active = -1 : model.role.active = i); filter(true)\">\n                        <div class=\"icon\" *ngIf=\"r.icon || r.image\">\n                            <i *ngIf=\"r.icon\" [class]=\"r.icon.class\">{{r.icon.value}}</i>\n                            <img *ngIf=\"r.image\" [src]=\"r.image\" [alt]=\"r.name\">\n                        </div>\n                        <div class=\"text\">{{r.name}}</div>\n                    </btn>\n                </div>\n            </div>\n            <div class=\"field\">\n                <searchbar [(filter)]=\"model.search\" (filterChange)=\"filter()\" (focus)=\"item = null; model.focus = true; updateShow()\"\n                    (blur)=\"model.focus = false; updateShow()\" [placeholder]=\"model.search_type === 'people' ? 'Search for people...' : (model.search_type === 'spaces' ? 'Search for spaces...' : 'Search...')\">\n                    <div class=\"close\" *ngIf=\"model.search_type !== 'spaces' && !model.banner_roles && model.role && model.role.list && model.role.list.length > 0 && (!model.settings || !model.settings.banner || model.settings.banner.people !== 'roles')\"\n                        (tap)=\"model.show_roles = true\" tooltip [(show)]=\"model.show_roles\" [template]=\"rolelist\"\n                        offset=\"end\">\n                        <i center class=\"material-icons\" [class.active]=\"(model.role.active || model.role.active === 0) && model.role.active !== -1\">filter_list</i>\n                        <ng-template #rolelist>\n                            <div class=\"role-list\" *ngIf=\"model.role.list && model.role.list.length > 0\">\n                                <div class=\"header\">Select Role</div>\n                                <div class=\"role\">\n                                    <btn [name]=\"model.role.active === undefined || model.role.active === -1 ? 'wide' : 'wide inverse'\"\n                                        (tapped)=\"model.role.active = -1; model.show_roles = false; filter()\">\n                                        <div class=\"text\">None</div>\n                                    </btn>\n                                </div>\n                                <div class=\"role\" *ngFor=\"let r of model.role.list; let i = index\">\n                                    <btn [name]=\"model.role.active === i ? 'wide' : 'wide inverse'\" (tapped)=\"(model.role.active === i ? model.role.active = -1 : model.role.active = i); model.show_roles = false; filter()\">\n                                        <div class=\"icon\" *ngIf=\"r.icon || r.image\">\n                                            <i *ngIf=\"r.icon\" [class]=\"r.icon.class\">{{r.icon.value}}</i>\n                                            <img *ngIf=\"r.image\" [src]=\"r.image\" [alt]=\"r.name\">\n                                        </div>\n                                        <div class=\"text\">{{r.name}}</div>\n                                    </btn>\n                                </div>\n                            </div>\n                        </ng-template>\n                    </div>\n                </searchbar>\n            </div>\n        </div>\n        <div class=\"body\">\n            <div class=\"list\" *ngIf=\"!model.loading && model.inited\">\n                <ng-container *ngIf=\"filtered_items\">\n                    <cdk-virtual-scroll-viewport class=\"list\" itemSize=\"90\">\n                        <ng-container *cdkVirtualFor=\"let item of filtered_items\">\n                            <div class=\"user\">\n                                <div class=\"item details\">\n                                    <div class=\"name\">{{item.name}}</div>\n                                    <div class=\"email\" *ngIf=\"!item.level\">\n                                        <a [href]=\"'mailto:' + item.email\">{{item.email}}</a>\n                                    </div>\n                                    <div class=\"email\" *ngIf=\"item.level\">{{item.level?.name}}</div>\n                                </div>\n                                <div class=\"item info\" *ngIf=\"item.location\">\n                                    <div class=\"loc\" *ngIf=\"item.location.fixed\">\n                                        {{item.location.name}}\n                                    </div>\n                                    <div class=\"icon\">\n                                        <i center class=\"material-icons\">{{item.location ? (item.location.fixed ? 'room' :\n                                            'wifi') : ''}}</i>\n                                    </div>\n                                    <div class=\"details\" *ngIf=\"item.location.display\">\n                                        <div class=\"name\">{{item.location.display.building}}</div>\n                                        <div class=\"email\">\n                                            {{item.location.display.level}}\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class=\"item opts\">\n                                    <btn name=\"red\" (tapped)=\"find(item)\">\n                                        <div>Find</div>\n                                    </btn>\n                                    <btn name=\"red\" *ngIf=\"item.level && model.settings.control && item.support_url\" (tapped)=\"control(item)\">\n                                        <div>Control</div>\n                                    </btn>\n                                    <btn (tapped)=\"call(item)\" [disabled]=\"item.phone === -1\" *ngIf=\"!item.level\">\n                                        <div class=\"text\" *ngIf=\"!item.loading\">Contact</div>\n                                        <div class=\"icon\" *ngIf=\"item.loading\">\n                                            <spinner type=\"circle-ring\" color=\"#fff\"></spinner>\n                                        </div>\n                                    </btn>\n                                </div>\n                            </div>\n                        </ng-container>\n                    </cdk-virtual-scroll-viewport>\n                </ng-container>\n            </div>\n            <div class=\"no-item center\" *ngIf=\"(model.loading || (!filtered_items || filtered_items.length <= 0) || !model.inited)\">\n                <div class=\"icon\">\n                    <spinner *ngIf=\"model.loading\" type=\"circle-ring\" color=\"#999\"></spinner>\n                    <i *ngIf=\"!model.loading\" class=\"material-icons\">{{model.search && model.search.length >=\n                        model.min_search ? 'close' : 'keyboard'}}</i>\n                </div>\n                <div class=\"text\">\n                    {{model.loading ? 'Searching...' : (model.search && model.search.length >= model.min_search ? 'No\n                    matches found' : 'Type\n                    above to search')}}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n","\nimport { Component, EventEmitter, Input, Output, ViewChild, ElementRef, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router, NavigationStart, NavigationEnd } from '@angular/router';\nimport { CdkVirtualScrollViewport } from '@angular/cdk/scrolling';\n\nimport { AppService } from '../../../../services/app.service';\nimport { Utils } from '../../../../shared/utility.class';\nimport { IUser } from '../../../../services/data/users.service';\nimport { IRoom } from '../../../../services/data/rooms.service';\nimport { BaseComponent } from '../../../../shared/components/base.component';\n\n@Component({\n    selector: 'explore-search',\n    templateUrl: './search.template.html',\n    styleUrls: ['./search.styles.scss'],\n})\nexport class ExploreSearchComponent extends BaseComponent implements OnInit {\n    @Input() public item: any = null;\n    @Output() public itemChange: any = new EventEmitter();\n    public model: any = {};\n    public filtered_items: any[] = [];\n\n    @ViewChild('input') private input: ElementRef;\n    @ViewChild(CdkVirtualScrollViewport) private viewport: CdkVirtualScrollViewport;\n\n    private timers: any = {};\n\n    constructor(private service: AppService, private route: ActivatedRoute, private router: Router) {\n        super();\n    }\n\n    public ngOnInit() {\n        const win = self as any;\n        this.model.loaded = false;\n        this.model.isScrolling;\n        this.model.speech = !!(win.SpeechRecognition || win.webkitSpeechRecognition);\n        this.model.settings = {};\n        this.subs.obs.users = this.service.Users.listen('user_list', (list) => {\n            this.model.user_list = list || [];\n            this.model.user_list.sort((a, b) => a.name.localeCompare(b.name));\n            this.filter();\n        });\n        this.subs.obs.rooms = this.service.Rooms.listen('room_list', () => {\n            this.model.room_list = this.service.Rooms.list();\n            this.filter();\n        });\n\n        this.subs.obs.bld = this.service.Buildings.listen((bld) => {\n            if (bld) {\n                this.model.search = '';\n                this.model.room_list = this.service.Rooms.list();\n                this.filter();\n            }\n        });\n        this.subs.obs.query = this.route.queryParamMap.subscribe((params) => {\n            if (params.has('role')) {\n                this.model.role_param = params.get('role');\n                this.initRole();\n            }\n        });\n        this.subs.obs.route = this.route.paramMap.subscribe((params) => {\n            if (params.has('search')) {\n                this.model.search_type = params.get('search');\n                this.updateShow();\n                this.filter();\n            }\n        });\n            // Clear results when route changes\n        this.subs.obs.routing = this.router.events.subscribe((event) => {\n            if (event instanceof NavigationStart) {\n                this.filtered_items = [];\n                this.model.search = '';\n                this.service.set('BANNER.block_height', 0);\n            } else if (event instanceof NavigationEnd) {\n                this.updateShow();\n            }\n        });\n        this.init();\n    }\n\n    public init() {\n        const bld = this.service.Buildings.current();\n        if (!this.service.Settings.setup || !bld) {\n            return setTimeout(() => this.init(), 500);\n        }\n        this.model.route = this.service.Settings.get('app.style.popout');\n        this.model.min_search = this.service.Settings.get('app.people_min_char') || 0;\n        this.model.settings = this.service.Settings.get('app.explore') || {};\n        this.model.role = {\n            details: this.service.Settings.get('app.roles'),\n            list: [],\n            active: -1\n        };\n        if (bld.roles) {\n            for (const role in bld.roles) {\n                if (bld.roles.hasOwnProperty(role)) {\n                    this.model.role.list.push({\n                        id: role,\n                        name: role.split('-').join(' '),\n                        icon: this.model.role.details ? this.model.role.details[role] : null,\n                        users: bld.roles[role]\n                    });\n                }\n            }\n        }\n        this.filter();\n        this.updateShow();\n        this.model.inited = true;\n    }\n\n    public initRole() {\n        if (this.model.role_param && this.model.role && this.model.role.list) {\n            for (const i of this.model.role.list) {\n                if (i.id === this.model.role_param) {\n                    this.model.role.active = this.model.role.list.indexOf(i);\n                    this.filter();\n                    break;\n                }\n            }\n        } else if (!this.model.role || !this.model.role.list) {\n            setTimeout(() => this.initRole(), 500);\n        }\n    }\n\n    /**\n     * Update list of filtered items\n     */\n    public filter(focused: boolean = false) {\n        if (!this.model.settings) { return; }\n        this.model.loading = true;\n        this.timeout('loading', () => this.model.loading = false, 310);\n            // Prevent deselection o\n        if (focused && this.input && this.input.nativeElement) {\n            this.input.nativeElement.focus();\n            this.model.focus = true;\n            this.updateShow();\n        }\n        if (this.timers.search) {\n            clearTimeout(this.timers.search);\n            this.timers.search = null;\n        }\n        this.timeout('filter', () => {\n            this.clearTimer('loading');\n            this.model.loading = true;\n            if (this.model.search_type === 'spaces') {\n                    // Only return rooms/spaces\n                this.filterRooms().then((rooms: IRoom[]) => {\n                    this.filtered_items = rooms;\n                    this.filtered_items.sort((a, b) => a.name.localeCompare(b.name));\n                    return (this.model.loading = false);\n                });\n            } else if (this.model.search_type === 'people') {\n                    // Only return people\n                this.filterUsers().then((users: IUser[]) => {\n                    this.filtered_items = users;\n                    return (this.model.loading = false);\n                });\n            } else {\n                    // Return both spaces and people\n                this.filterUsers().then((users: IUser[]) => {\n                    const role = this.model.role;\n                    if (role && role.active >= 0) {\n                        this.filtered_items = users;\n                        return (this.model.loading = false);\n                    } else {\n                        this.filterRooms().then((rooms: IRoom[]) => {\n                            this.filtered_items = ((users || []) as any[]).concat(rooms);\n                            this.filtered_items.sort((a, b) => a.name.localeCompare(b.name));\n                            return (this.model.loading = false);\n                        });\n                    }\n                });\n            }\n        });\n    }\n\n    /**\n     * Promise of filtered users\n     */\n    public filterUsers() {\n        return new Promise((resolve) => {\n            const search = (this.model.search || '').toLowerCase();\n            const role = this.model.role;\n            if ((search && search.length >= this.model.min_search) || (role && role.active >= 0) || !this.model.min_search) {\n                let users: IUser[] = [];\n                    // Get filtered users\n                if (role && role.active >= 0) {\n                    users = this.service.Users.getFilteredUsers(search, role.list[role.active].users);\n                    resolve(users);\n                } else if (!this.model.min_search && this.model.user_list && this.model.user_list.length > 0) {\n                    users = this.service.Users.getFilteredUsers(search, this.model.user_list);\n                    resolve(users);\n                } else {\n                    const request_id = Math.floor(Math.random() * 899999 + 100000);\n                    this.model.request_id = request_id;\n                    this.service.Users.query({ q: search, limit: 50 })\n                        .then((list) => {\n                            if (request_id === this.model.request_id) {\n                                users = this.service.Users.getFilteredUsers(search, list);\n                                resolve(users);\n                            }\n                        }, () => resolve(users));\n                }\n            } else {\n                resolve([]);\n            }\n        });\n    }\n\n    /**\n     * Promise of filtered spaces\n     */\n    public filterRooms() {\n        return new Promise((resolve) => {\n            const search = (this.model.search || '').toLowerCase();\n            const list = [];\n            for (const item of this.model.room_list) {\n                list.push({\n                    id: item.id,\n                    prefix: item.prefix,\n                    bookable: item.bookable,\n                    map_id: item.map_id,\n                    name: item.name,\n                    level: item.level\n                });\n            }\n            const bld = this.service.Buildings.current();\n            if (bld && bld.map && bld.map.searchables) {\n                for (const level in bld.map.searchables) {\n                    if (bld.map.searchables.hasOwnProperty(level)) {\n                        for (const name in bld.map.searchables[level]) {\n                            if (bld.map.searchables[level].hasOwnProperty(name)) {\n                                const lvl = this.service.Buildings.getLevel(level);\n                                list.push({ map_id: bld.map.searchables[level][name], name, level: lvl, prefix: false });\n                            }\n                        }\n                    }\n                }\n            }\n            if (!search) {\n                return resolve(list);\n            }\n            const rooms: IRoom[] = [];\n            for (const rm of list) {\n                if (((rm.name || '').toLowerCase().indexOf(search) >= 0 ||\n                    (rm.level && (rm.level.name || '').toLowerCase().indexOf(search) >= 0)) && rm.searchable !== false) {\n                    rooms.push(rm);\n                }\n            }\n            resolve(rooms);\n        });\n    }\n\n    /**\n     * Get phone number for users\n     * @param users List of users\n     */\n    public async getPhoneNumber(user: IUser) {\n        if (!user.phone) {\n            const person = await this.service.Users.show(user.email).catch(() => null);\n            if (person && person.phone) {\n                user.phone = person.phone;\n            }\n        }\n        return user;\n    }\n\n    /**\n     * On scroll\n     */\n    public scrollChange() {\n        if (this.filtered_items && this.filtered_items.length !== 0 && this.model.search_type === 'people') {\n            this.model.loading_phone = true;\n            const { start, end } = this.viewport.getRenderedRange();\n            const visible_users = this.filtered_items.slice(start, end);\n            const promises = Promise.all(visible_users.map(user => {\n                return this.getPhoneNumber(user)\n            }));\n\n            clearTimeout(this.model.isScrolling);\n            this.model.isScrolling = setTimeout(() => {\n                promises.then((users) => {\n                    this.filtered_items.map(item => {\n                        let user = users.find(el => el.id === item.id)\n                        if (user) return user;\n                        return item;\n                    });\n                    this.model.loading_phone = false;\n                })\n            }, 200);\n        }\n    }\n\n    /**\n     * Post item to find on map\n     * @param item Displayed item selected by the user\n     */\n    public find(item: any) {\n        this.item = item;\n        this.model.search = item.name;\n        this.model.focus = false;\n        this.model.dictate = false;\n        if (this.input && this.input.nativeElement) {\n            this.input.nativeElement.blur();\n        }\n        this.itemChange.emit(item);\n        this.updateShow();\n    }\n\n    /**\n     * Open telephone URL for item\n     * @param item Displayed item selected by the user\n     */\n    public call(item: any) {\n        let phone = '';\n        item.phone = -1;\n        if (!item.phone || item.phone === -1) {\n                // Load user phone number from API\n            this.service.Users.show(item.email).then((person) => {\n                if (person && person.phone) {\n                    phone = Utils.removeChars(person.phone, ' ()_-');\n                    location.href = `tel:${phone}`;\n                } else {\n                    item.phone = -1;\n                }\n                item.loading = false;\n            }, () => item.phone = -1);\n        } else {\n            phone = Utils.removeChars(item.phone, ' ()_-');\n            location.href = `tel:${phone}`;\n            item.loading = false;\n        }\n    }\n    /**\n     * Open support URL for the selected item\n     * @param item Selected item\n     */\n    public control(item) {\n        if (item.support_url) {\n            window.open(item.support_url, 'blank_');\n        }\n    }\n\n    /**\n     * Close the search and clear the selected item\n     */\n    public close() {\n        this.model.search = '';\n        this.item = null;\n        this.model.role.active = -1;\n        this.filter();\n        if (this.input && this.input.nativeElement) {\n            this.input.nativeElement.blur();\n        }\n        this.itemChange.emit(this.item);\n    }\n\n    /**\n     * Activate dictation search\n     */\n    public startDictation() {\n        if (!this.input) { return; }\n        if (this.model.recognition) {\n            this.model.recognition.stop();\n            this.model.dictate = false;\n            this.model.recognition = null;\n            return;\n        }\n        const win = self as any;\n        const Speech: any = win.SpeechRecognition || win.webkitSpeechRecognition;\n        if (Speech) {\n            this.model.recognition = new Speech();\n\n            this.model.recognition.continuous = false;\n            this.model.recognition.interimResults = false;\n\n            this.model.recognition.lang = 'en-US';\n            this.model.recognition.start();\n            this.model.dictate = true;\n\n            this.model.recognition.onresult = (e: any) => {\n                    // Update search field with dictation result\n                this.input.nativeElement.value = e.results[0][0].transcript;\n                this.model.search = e.results[0][0].transcript;\n                this.model.recognition.stop();\n                this.filter();\n                this.model.dictate = false;\n            };\n\n            this.model.recognition.onerror = (e: any) => {\n                this.model.recognition.stop();\n                this.model.dictate = false;\n            };\n        }\n    }\n\n    public updateShow() {\n        this.timeout('update_show', () => {\n            const people = (!this.item && this.model.role.active !== -1) || (this.model.search_type === 'people' && !this.item);\n            this.model.show =  people || this.model.focus || this.model.dictate;\n            this.model.banner = this.model.settings && this.model.settings.banner && this.model.settings.banner.search;\n            const r = this.model.role && this.model.role.list && this.model.role.list.length > 0;\n            this.model.banner_roles = this.model.banner && this.model.settings.banner.roles && this.model.search_type !== 'spaces' && r;\n            if (this.model.show && this.model.banner) {\n                const h = this.model.banner_roles ? 6.5 : 4;\n                this.service.set('BANNER.block_height', h);\n            } else {\n                this.service.set('BANNER.block_height', 0);\n            }\n        }, 500);\n    }\n}\n","<div class=\"container\">\n    <div class=\"topbar\">\n        <div class=\"search\">\n            <!-- <space-search *ngIf=\"model.search === 'spaces'\" [(model)]=\"model.found_item\" (modelChange)=\"focusSpace($event)\"></space-search>\n            <people-search *ngIf=\"model.search === 'people'\" [(model)]=\"model.found_user\" (modelChange)=\"focusUser($event)\"></people-search> -->\n            <explore-search *ngIf=\"model.search\" [(item)]=\"model.found_item\" (itemChange)=\"focus($event)\"></explore-search>\n        </div>\n    </div>\n    <div class=\"map-space\">\n        <div class=\"bindings\">\n            <div class=\"desks\" *ngIf=\"model.desks && model.level && model.level.active\">\n                <!-- DESK BINDINGS -->\n                <i binding [(value)]=\"model.desks.in_use\" [sys]=\"model.system\" mod=\"DeskManagement\" (valueChange)=\"updateListeners()\" [bind]=\"model.level.active.id\"></i>\n                <i binding [(value)]=\"model.desks.reserved\" [sys]=\"model.system\" mod=\"DeskManagement\" (valueChange)=\"updateStyles()\" [bind]=\"model.level.active.id + ':reserved'\"></i>\n                <i binding *ngIf=\"model.user\" [(value)]=\"model.desks.user\" [sys]=\"model.system\" mod=\"DeskManagement\" (valueChange)=\"updateStyles()\"\n                    [bind]=\"model.user.win_id\"></i>\n                <i binding [(value)]=\"model.desks.list\" [sys]=\"model.system\" mod=\"DeskManagement\" (valueChange)=\"updateStyles()\" [bind]=\"model.level.active.id + ':desk_ids'\"></i>\n                <i binding [(value)]=\"model.desks.usage\" [sys]=\"model.system\" mod=\"DeskManagement\" [bind]=\"model.level.active.id + ':occupied_count'\"></i>\n                <i binding [(value)]=\"model.desks.free\" [sys]=\"model.system\" mod=\"DeskManagement\" [bind]=\"model.level.active.id + ':free_count'\"></i>\n                <i binding [(value)]=\"model.desks.count\" [sys]=\"model.system\" mod=\"DeskManagement\" [bind]=\"model.level.active.id + ':desk_count'\"></i>\n                <!-- DESK EXECUTES -->\n                <i binding [value]=\"model.desks.checkin\" [sys]=\"model.system\" mod=\"DeskManagement\" exec=\"manual_checkin\" [params]=\"[model.desks.id]\"></i>\n                <i binding [value]=\"model.desks.cancel\" [sys]=\"model.system\" mod=\"DeskManagement\" exec=\"cancel_reservation\" [params]=\"[]\"></i>\n            </div>\n            <div class=\"bookings\" *ngIf=\"model.rooms\">\n                <!-- ROOM BOOKINGS BINDINGS -->\n                <ng-container *ngFor=\"let room of model.rooms\">\n                    <i binding [(value)]=\"room.raw_bookings\" (valueChange)=\"processBookings(room)\" [sys]=\"room.id\" mod=\"Bookings\" bind=\"today\"></i>\n                </ng-container>\n            </div>\n            <div class=\"zones\" *ngIf=\"model.zones && model.level && model.level.active\">\n                <i binding [(value)]=\"model.zone_usage\" (valueChange)=\"updateStyles()\" [sys]=\"model.system\" mod=\"FloorManagement\" [bind]=\"model.level.active.id\"></i>\n            </div>\n        </div>\n        <div class=\"map\">\n            <map [(zoom)]=\"model.map.zoom\" (zoomChange)=\"updateZoom()\" [(center)]=\"model.map.center\" [src]=\"model.map.src\" [poi]=\"model.map.poi\" [styles]=\"model.map.styles\" [listeners]=\"model.map.listeners\"\n                 [focus]=\"model.map.focus\" (event)=\"check($event)\">\n            </map>\n        </div>\n        <div class=\"level mobile-only\" *ngIf=\"!(model.found_user && (!model.found_user.location || (!model.found_user.location.map_id && !model.found_user.location.x && !model.found_user.location.y)))\">\n            <div *ngIf=\"model.level && model.level.active\">\n                {{model.found_user && model.found_user.external && model.found_user.location && model.found_user.location.building ? model.found_user.location.building.name + ' - ' : ''}}{{model.level.active?.name}}\n            </div>\n        </div>\n        <div class=\"level not-mobile\" [class.old]=\"!model.old\" *ngIf=\"model.found_user && model.found_user.location && model.found_user.external\">\n            <div *ngIf=\"model.level && model.level.active\">\n                {{model.found_user.location?.building?.name}} - {{model.level.active?.name}}\n            </div>\n        </div>\n        <div class=\"not-located\" *ngIf=\"model.found_user\">\n            <ng-container *ngIf=\"!model.found_user.location || (!model.found_user.location.map_id && !model.found_user.location.x && !model.found_user.location.y)\">\n                <div *ngIf=\"!model.found_user.external\"><div>{{model.found_user.name}}</div>&nbsp;<div>is currently not locatable</div></div>\n                <div *ngIf=\"model.found_user.external\"><div>{{model.found_user.name}}</div>&nbsp;<div>is located in another building</div></div>\n            </ng-container>\n            <ng-container *ngIf=\"!(!model.found_user.location || (!model.found_user.location.map_id && !model.found_user.location.x && !model.found_user.location.y)) && model.found_user.pin_error\">\n                <div>{{model.found_user.name}} is located on {{model.level.active?.name}}</div>\n            </ng-container>\n        </div>\n        <explore-map-overlay [change]=\"model.change\"></explore-map-overlay>\n    </div>\n</div>","\nimport { MapPinComponent, MapRangeComponent } from '@acaprojects/ngx-widgets';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router, NavigationEnd, NavigationStart } from '@angular/router';\n\nimport { AppService } from '../../services/app.service';\nimport { ILevel, IBuilding } from '../../services/data/buildings.service';\n\nimport * as moment from 'moment';\nimport { RoomInfoComponent } from '../../shared/components/room-info/room-info.component';\nimport { BaseComponent } from '../../shared/components/base.component';\nimport { DeskInfoComponent } from '../../shared/components/desk-info/desk-info.component';\n\n@Component({\n    selector: 'app-explore',\n    templateUrl: './explore.template.html',\n    styleUrls: ['./explore.styles.scss']\n})\nexport class ExploreComponent extends BaseComponent implements OnInit {\n    public model: any = [];\n\n    constructor(private route: ActivatedRoute, private router: Router, private service: AppService) {\n        super();\n        this.model.setting_list = [\n            { id: 'desks', name: 'Desks Status' },\n            { id: 'rooms', name: 'Rooms Status' },\n            { id: 'teams', name: 'Team Tables' },\n            { id: 'zones', name: 'Zones Status' }\n        ];\n    }\n\n    public ngOnInit() {\n        this.subs.obs.router = this.router.events.subscribe((e) => {\n            if (e instanceof NavigationStart) {\n                this.service.set('APP.swipe_disabled', e.url.indexOf('explore') >= 0);\n            } else if (e instanceof NavigationEnd) {\n                if (this.model.zones) {\n                    this.model.zones.show = false;\n                }\n                if (this.model.map) {\n                    this.model.map.zoom = 100;\n                    this.model.map.center = { x: .5, y: .5 };\n                }\n                this.clear();\n                this.update();\n            }\n        });\n        this.subs.obs.params = this.route.paramMap.subscribe((params) => {\n            if (params.has('search')) {\n                this.model.search = params.get('search');\n            }\n        });\n        this.service.set('BANNER.block_height', 0);\n        this.subs.obs.query = this.route.queryParamMap.subscribe((params) => {\n            if (params.has('room_id')) { this.focusOnRoom(params.get('room_id')); }\n            if (params.has('level')) { this.setLevelByID(params.get('level')); }\n            if (params.has('level_id')) { this.setLevelByID(params.get('level_id')); }\n            if (params.has('back')) { this.model.back = params.get('back'); }\n        });\n        this.subs.obs.user = this.service.Users.listen('user', (item) => this.model.user = item);\n        this.model.map = {};\n        this.model.show = { rooms: true, desks: true };\n        this.model.map.poi = [];\n        this.model.desks = {};\n        this.model.zones = {};\n        this.model.settings = {};\n        this.service.set('EXPLORE.show.desks', this.model.show.desks);\n        this.service.set('EXPLORE.show.rooms', this.model.show.rooms);\n        this.subs.obs.exp_filter = this.service.listen('EXPLORE.filters', () => this.update());\n        this.subs.obs.exp_features = this.service.listen('EXPLORE.map.hide', (a) => {\n            this.update();\n        });\n        this.subs.obs.exp_settings = this.service.listen('EXPLORE.settings', (value) => this.updateSettings(value));\n        this.subs.obs.exp_level = this.service.listen('EXPLORE.level', (value) => this.setLevelByID(value));\n        this.model.colours = { rooms: {}, desks: {}, zones: {} };\n        if (this.model.keys) {\n            this.model.keys.show = false;\n        }\n        this.clear();\n        this.service.set('APP.swipe_disabled', true);\n        this.subs.obs.building = this.service.Buildings.listen((bld) => {\n            if (bld) {\n                const active = this.model.level ? this.model.level.active : null;\n                this.model.level = {};\n                this.model.system = bld.systems.desks;\n                this.model.focus_user = null;\n                this.model.found_room = null;\n                this.model.info = null;\n                this.model.level.list = bld.levels;\n                this.model.rooms = this.service.Rooms.list();\n                this.model.room_pin = null;\n                if (this.model.level.list) {\n                    this.model.level.names = [];\n                    for (const level of this.model.level.list) {\n                        this.model.level.names.push(level.name);\n                    }\n                    let lvl = null;\n                    if (active) { lvl = this.setLevelByID(active.id); }\n                    if (!lvl && this.model.level.list.length > 0) {\n                        this.setLevel(this.model.level.list[0]);\n                    }\n                }\n                if (this.model.found_user) {\n                    this.focusUser(this.model.found_user);\n                }\n                this.update();\n            }\n        });\n        this.init();\n    }\n\n    public init() {\n        if (!this.service.ready()) {\n            this.timeout('init', () => this.init(), 500);\n        }\n        this.model.colours = {};\n        this.model.colours.rooms = this.service.Settings.get('app.colors.rooms') || {};\n        this.model.colours.desks = this.service.Settings.get('app.colors.desks') || {};\n        this.model.colours.zones = this.service.Settings.get('app.colors.zones') || {};\n        this.model.keys = this.service.Settings.get('app.map_keys') || {};\n        this.model.keys.types = Object.keys(this.model.keys);\n        this.model.zones.enabled = this.service.Settings.get('app.zones.enabled');\n        this.model.zones.toggle = this.service.Settings.get('app.zones.toggle');\n        this.model.settings = this.service.Settings.get('app.explore') || {};\n        this.model.old = this.service.Settings.get('app.explore.old_overlay');\n        if (this.model.zones.enabled && this.model.zones.toggle) {\n            this.model.keys.types = [this.model.zones.toggle];\n        }\n        if (this.model.keys) {\n            this.model.keys.list = (this.model.keys.room || []).concat(this.model.keys.general || []);\n        }\n        this.subs.obs.rooms = this.service.Rooms.listen('list', () => {\n            this.model.rooms = this.service.Rooms.list();\n            this.update();\n        });\n        this.model.map_bookable = this.service.Settings.get('app.map.bookings');\n        this.interval('rooms', () => this.updateRoomState(), 25 * 1000);\n        this.service.Analytics.screen('Explore');\n        this.service.Analytics.page(`/explore${this.model.search ? '/' + this.model.search : ''}`);\n    }\n\n    public focusOnRoom(id: string, tries: number = 0) {\n        if (tries > 10) { return; }\n        if (this.model.rooms && this.model.rooms.length > 0) {\n            for (const rm of this.model.rooms) {\n                if (rm.id === id) {\n                    this.focusSpace(rm);\n                    break;\n                }\n            }\n        } else {\n            this.timeout('focus_room', () => this.focusOnRoom(id, tries++), 300 * tries++);\n        }\n    }\n\n    public toggle(name: string) {\n        this.timeout(`toggle_${name}`, () => this.model[name].show = !this.model[name].show, 100);\n    }\n\n    public setLevelByID(id: string, emit: boolean = true) {\n        if (id && this.model.level && this.model.level.list) {\n            for (const lvl of this.model.level.list) {\n                if (lvl.id === id) {\n                    this.setLevel(lvl, emit);\n                    return lvl;\n                }\n            }\n        }\n        return null;\n    }\n\n    public setLevel(lvl: ILevel, emit: boolean = true, force: boolean = false) {\n        if (lvl && ((this.model.level && this.model.level.list && this.model.level.list.indexOf(lvl) >= 0) || force)) {\n            const previous_lvl = this.model.level.active;\n            this.model.level.active = lvl;\n            this.model.level.index = this.model.level.list.indexOf(lvl);\n            this.model.map.src = lvl.map_url;\n            this.model.room_pin = null;\n            this.model.map.focus = null;\n            this.update();\n            if (emit && (!previous_lvl || previous_lvl.id !== lvl.id)) {\n                this.service.set('EXPLORE.level', lvl.id);\n            }\n        }\n    }\n\n    public updateLevel() {\n        for (const lvl of this.model.level.list) {\n            if (this.model.map.src === lvl.map_url) {\n                this.model.level.active = lvl;\n                break;\n            }\n        }\n        this.update();\n    }\n\n    public updateSettings(settings: any) {\n        this.model.map.zoom = settings && settings.zoom !== undefined ? settings.zoom : this.model.map.zoom;\n        this.model.map.center = settings && settings.center !== undefined ? settings.center : this.model.map.center;\n        if (settings && settings.center) { delete settings.center; }\n        this.update();\n    }\n\n    public updateRoomState() {\n        if (this.model.rooms) {\n            for (const rm of this.model.rooms) {\n                this.processBookings(rm, false);\n            }\n            this.update();\n        }\n    }\n\n    public processBookings(room: any, update: boolean = true) {\n        if (room.raw_bookings && room.raw_bookings.length > 0) {\n            this.service.Rooms.processRoom(room);\n            if (update) { this.update(); }\n            this.model.change = !this.model.change;\n        }\n    }\n\n    public updateZoom() {\n        const settings = this.service.get('EXPLORE.settings');\n        settings.zoom = this.model.map.zoom;\n        this.service.set('EXPLORE.settings', settings);\n    }\n\n    public update() {\n        if (this.model.zones && this.model.show) {\n            this.model.zones.show = this.model.show.zones;\n        }\n        if (!this.model.show) { this.model.show = {}; }\n        this.model.show.desks = this.service.get('EXPLORE.show.desks');\n        this.model.show.rooms = this.service.get('EXPLORE.show.rooms');\n        this.model.show.teams = this.service.get('EXPLORE.show.teams');\n        if (this.model.zones && this.model.zones.enabled) {\n            this.model.zones.show = this.service.get('EXPLORE.show.zones');\n            if (this.model.zones.toggle) {\n                this.model.keys.types = [this.model.zones.show ? 'zone' : this.model.zones.toggle];\n            }\n        }\n        this.updateListeners();\n    }\n\n    public updateState() {\n        if (this.model.show) {\n            this.service.set('EXPLORE.show.desks', this.model.show.desks);\n            this.service.set('EXPLORE.show.rooms', this.model.show.rooms);\n            this.service.set('EXPLORE.show.teams', this.model.show.teams);\n        }\n        if (this.model.zones) {\n            this.service.set('EXPLORE.show.zones', this.model.zones.show);\n        }\n        this.update();\n    }\n\n    public updateListeners() {\n        this.model.map.listeners = [];\n        if (this.model.rooms && this.model.level && this.model.level.active) {\n            for (const room of this.model.rooms) {\n                if (room.map_id && room.level && room.level.id === this.model.level.active.id) {\n                    this.model.map.listeners.push({ id: `area-${room.map_id}-status`, event: 'mouseenter', callback: () => {\n                        this.model.info = room;\n                        this.updatePointsOfInterest();\n                    }});\n                    this.model.map.listeners.push({ id: `area-${room.map_id}-status`, event: 'mouseleave', callback: () => {\n                        this.model.info = null;\n                        this.updatePointsOfInterest();\n                    }});\n                    if (room.bookable) {\n                        this.model.map.listeners.push({ id: `area-${room.map_id}-status`, event: 'tap', callback: () => {\n                            this.model.selected = null;\n                            this.model.display = null;\n                            this.service.Bookings.bookRoom(room);\n                        }});\n                    }\n                }\n            }\n        }\n        if (this.model.desks && this.model.desks.in_use) {\n            for (const desk of this.model.desks.in_use) {\n                this.model.map.listeners.push({ id: `${desk}`, event: 'mouseenter', callback: () => this.setDesk(desk) });\n                this.model.map.listeners.push({ id: `${desk}`, event: 'mouseleave', callback: () => this.setDesk(null) });\n            }\n            for (const desk of (this.model.desks.reserved || [])) {\n                this.model.map.listeners.push({ id: `${desk}`, event: 'mouseenter' , callback: () => this.setDesk(desk) });\n                this.model.map.listeners.push({ id: `${desk}`, event: 'mouseleave' , callback: () => this.setDesk(null) });\n            }\n        }\n        this.model.desk = null;\n        this.updateStyles();\n        this.updatePointsOfInterest();\n    }\n\n    public setDesk(desk) {\n        this.model.desk = desk;\n        this.updatePointsOfInterest();\n    }\n\n    public updateStyles() {\n        this.timeout('styles', () => {\n            this.model.style = {};\n            this.model.map.styles = {};\n            this.model.style.general = {};\n            this.updateRoomStyles();\n            this.updateDeskStyles();\n            this.updateZoneStyles();\n            this.updateFeatureStyles();\n            for (const k in this.model.style) {\n                if (this.model.style.hasOwnProperty(k) && this.model.style[k]) {\n                    for (const i in this.model.style[k]) {\n                        if (this.model.style[k].hasOwnProperty(i)) {\n                            this.model.map.styles[i] = this.model.style[k][i];\n                        }\n                    }\n                }\n            }\n            this.clearTimer('styles');\n        });\n    }\n\n    public updateRoomStyles() {\n        this.model.style.rooms = {};\n        if (!this.model.show.rooms) {\n            this.model.style.rooms[`[id$=\"-status\"]`] = { opacity: '0' };\n            return;\n        }\n        if (this.model.rooms && this.model.rooms.length > 0) {\n            for (const room of this.model.rooms) {\n                if (this.model.level && this.model.level.active && this.model.level.active.id === room.level.id) {\n                    let color = this.model.colours.rooms['not-bookable'] || '#ccc';\n                    if (room.bookable && room.in_use) {\n                        color = this.model.colours.rooms['unavailable'] || '#E53935';\n                    } else if (room.bookable) {\n                        color = this.model.colours.rooms['available'] || '#4CAF50';\n                    }\n                    this.model.style.rooms[`#area-${room.map_id}-status`] = {\n                        fill: color,\n                        opacity: '0.8',\n                    };\n                }\n            }\n\n        } else {\n            this.timeout('room_styles', () => this.updateRoomStyles());\n        }\n    }\n\n    public updateDeskStyles() {\n        this.model.style.desks = {};\n        const colours = this.model.colours.desks || {};\n        if (!this.model.show.desks) {\n            this.model.style.desks[`[id^=\"table-\"]`] = {\n                fill: colours['not-bookable-fill'] || '#fff',\n                stroke: colours['not-bookable-stroke'] || '#ccc'\n            };\n            return;\n        }\n        if (this.model.found_user && this.model.found_user.location && this.model.found_user.location.fixed) {\n            const loc = this.model.found_user.location;\n            this.model.style.desks[`#${loc.map_id}`] = {\n                fill: colours['unavailable-fill'] || '#fff',\n                stroke: colours['unavailable-stroke'] || '#ccc'\n            };\n        }\n        if (this.model.desks) {\n            const u_desk = this.model.desks.user;\n            const list = this.model.desks.in_use || [];\n            const reserved = this.model.desks.reserved;\n            if (this.model.desks.list) {\n                for (const label of this.model.desks.list) {\n                    if (label) {\n                        const desk = `${label}`;\n                        const desk_obj = {\n                            level: this.model.active,\n                            id: desk,\n                            name: `Desk ${label.split('-')[1]}`,\n                        };\n                        const is_reserved = reserved && reserved.indexOf(label) >= 0;\n                        const in_use = list && list.indexOf(label) >= 0;\n                        const users_desk = u_desk && u_desk.connected && u_desk.desk_id === label;\n                        this.model.style.desks[`#${desk}`] = {\n                            fill: colours['available-fill'] || '#4CAF50',\n                            stroke: colours['available-stroke'] || '#4CAF50'\n                        };\n                        if (in_use || is_reserved) {\n                            const type = users_desk ? 'user' : (is_reserved ? 'reserved' :  'unavailable');\n                            this.model.style.desks[`#${desk}`].fill = colours[`${type}-fill`] || colours['unavailable-fill'] || '#fff';\n                            this.model.style.desks[`#${desk}`].stroke = colours[`${type}-stroke`] || colours['unavailable-stroke'] || '#ccc';\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    public updateZoneStyles() {\n        this.model.style.zones = {};\n        const colors = this.model.colours.zones || {};\n        const lvl = this.model.level.active;\n        if (!this.model.zones || !this.model.zones.enabled || !this.model.zones.show) {\n            this.model.style.zones['#Zones'] = { opacity: '0' };\n        }\n        if (this.model.colours && this.model.level && lvl) {\n            this.model.style.zones['[id^=\"zone\"]'] = {\n                fill: colors[lvl.defaults.zone] || colors.default || '#317c36'\n            };\n        }\n        if (this.model.zone_usage) {\n            for (const zone in this.model.zone_usage) {\n                if (this.model.zone_usage.hasOwnProperty(zone)) {\n                    const min_percent = lvl.defaults.zone_min || 0;\n                    const zone_usage = (this.model.zone_usage[zone].people_count / this.model.zone_usage[zone].capacity) * 100;\n                    const percent = Math.max(min_percent, zone_usage);\n\n                    const fill = percent < 40 ? colors.low || '#317c36' : (percent < 75 ? colors.medium || '#f4a81d' : colors.high || '#cd212e');\n                    this.model.map.styles[`#${zone}`] = { fill };\n                    this.model.map.styles[`#${zone}-status`] = { fill };\n                }\n            }\n        }\n    }\n\n    public updateFeatureStyles() {\n        this.model.style.features = {};\n        const hidden_features = this.service.get('EXPLORE.map.hide') || [];\n        for (const id of hidden_features) {\n            this.model.style.features[`#${id}`] = { opacity: '0' };\n        }\n    }\n\n    public check(e: any) {\n        if (e.type === 'warning' && this.model.found_user && this.model.found_user.location &&\n                this.model.found_user.location.map_id && e.msg.indexOf(this.model.found_user.location.map_id) >= 0) {\n            this.model.found_user.pin_error = true;\n        }\n    }\n\n    public focus(item: any) {\n        this.model.map.zoom = 100;\n        this.model.map.center = { x: .5, y: .5 };\n        if (item.type) {\n            this.focusUser(item);\n        } else {\n            this.focusSpace(item);\n        }\n    }\n\n    public focusUser(user: any) {\n        if (user) {\n            this.model.found_item = null;\n            this.model.focus_room = null;\n            if (user.type === 'role') {\n                this.updatePointsOfInterest();\n                this.service.Users.show(user.email).then((u) => {\n                    this.locate(u);\n                }, (err) => null);\n            } else {\n                this.locate(user);\n            }\n        }\n    }\n\n    public locate(user) {\n        user.location = null;\n        this.model.found_user = user;\n        this.service.Users.location(user.id, user.win_id).then((location) => {\n            this.model.found_user.location = location;\n            let found = false;\n            const bld = this.service.Buildings.current();\n                // Cross building location finding is enabled\n            if (this.model.settings.cblf) {\n                const level: ILevel = this.service.Buildings.getLevel(location.level);\n                if (level) {\n                    for (const lvl of (bld ? bld.levels : this.model.level.list)) {\n                        if (level.id === lvl.id) {\n                            this.setLevel(lvl);\n                            found = true;\n                            break;\n                        }\n                    }\n                        // Level is in another building\n                    if (!found) {\n                        this.setLevel(level, false, true);\n                        this.model.found_user.location.building = this.service.Buildings.get(level.bld_id);\n                        this.model.found_user.external = true;\n                        found = true;\n                    }\n                }\n            } else { // Only locate users in the current building\n                for (const lvl of (bld ? bld.levels : this.model.level.list)) {\n                    if (location.level === lvl.id) {\n                        this.setLevel(lvl);\n                        found = true;\n                        break;\n                    }\n                }\n            }\n            if (found) {\n                this.model.map.focus = {\n                    coordinates: !location.fixed ? { x: location.x, y: location.y } : null,\n                    id: location.map_id,\n                    zoom: 0,\n                };\n            } else {\n                this.model.found_user.location = null;\n                this.model.found_user.external = true;\n            }\n            this.updatePointsOfInterest();\n            this.timeout('focus', () => this.model.map.zoom = 100);\n        }, (err) => {\n            this.model.found_user.location = null;\n            this.updatePointsOfInterest();\n        });\n    }\n\n    public focusSpace(item: any) {\n        if (!this.model || !this.model.level || !this.model.level.list || !item) {\n            return;\n        }\n        const focus = `${item.prefix === false ? '' : 'area-'}${item.map_id}${item.bookable ? '-status' : ''}`;\n        const lvl = item.level;\n        if (lvl) {\n            for (const level of this.model.level.list) {\n                if (lvl.id === level.id) {\n                    this.setLevel(level);\n                    this.timeout('focus_space', () => this.model.map.focus = { id: focus, zoom: 150 }, 100);\n                    break;\n                }\n            }\n            this.timeout('update_space', () => {\n                this.model.found_user = null;\n                this.model.focus_room = item;\n                this.updatePointsOfInterest();\n            }, 20);\n        }\n    }\n\n    public clear() {\n        this.model.found_item = null;\n        this.model.focus_room = null;\n        this.model.found_user = null;\n        this.model.info = null;\n        this.updatePointsOfInterest();\n    }\n\n    public updatePointsOfInterest() {\n        this.timeout('poi', () => {\n            this.model.map.poi = [];\n            this.model.toggle = !this.model.toggle;\n            if (this.model.found_user && this.model.found_user.location && this.model.found_user.location.level) {\n                if (this.model.found_user.location.level === this.model.level.active.id) {\n                    const loc = this.model.found_user.location;\n                    this.model.map.poi.push({\n                        id: loc.map_id || `person-${this.model.found_user.id}`,\n                        cmp: loc.fixed ? MapPinComponent : MapRangeComponent,\n                        coordinates: !loc.fixed ? { x: loc.x, y: loc.y } : null,\n                        model: { text: `${this.model.found_user.name} is here`, back: '#F44336', diameter: loc.confidence * 2 }\n                    });\n                }\n            }\n            if (this.model.info) {\n                const room = this.model.info;\n                if (room.current) {\n                    this.model.selected_time = `Booked until ${room.in_use}`;\n                } else if (room.next) {\n                    this.model.selected_time = `Free until ${room.next.display.start}`;\n                } else {\n                    this.model.selected_time = `Free today`;\n                }\n                this.model.display = null;\n                this.model.map.poi.push({\n                    id: `area-${room.map_id}-status`,\n                    cmp: RoomInfoComponent,\n                    model: {\n                        room,\n                        display: { time: this.model.selected_time },\n                        available: !room.current\n                    }\n                });\n            }\n            if (this.model.desk) {\n                this.model.map.poi.push({\n                    id: this.model.desk,\n                    cmp: DeskInfoComponent,\n                    model: {\n                        system: this.model.system,\n                        desk_id: this.model.desk\n                    }\n                });\n            }\n            if (this.model.focus_room && this.model.focus_room.level.id === this.model.level.active.id) {\n                const rm = this.model.focus_room;\n                this.model.map.poi.push({\n                    id: `${rm.prefix === false ? '' : 'area-'}${rm.map_id}${rm.bookable ? '-status' : ''}`,\n                    prefix: 'pin',\n                    cmp: MapPinComponent,\n                    model: {\n                        back: this.model.colours.rooms.pin || '#03A9F4',\n                        text: this.model.focus_room.name\n                    }\n                });\n            }\n            this.clearTimer('poi');\n        });\n    }\n\n    public back() {\n        if (this.model.back) {\n            this.service.navigate(this.model.back);\n        } else {\n            this.service.back();\n        }\n    }\n\n}\n","\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { WidgetsModule } from '@acaprojects/ngx-widgets';\nimport { ComposerModule } from '@acaprojects/ngx-composer';\nimport { RouterModule, Scroll } from '@angular/router';\nimport { ScrollingModule } from '@angular/cdk/scrolling';\n\nimport { ROUTES } from './explore.routes';\nimport { SharedComponentModule } from '../../shared/components/shared.module';\n\nimport { ExploreComponent } from './explore.component';\nimport { ExploreMapOverlayComponent } from './components/map-overlay/map-overlay.component';\nimport { ExploreSearchComponent } from './components/search/search.component';\n\nconst COMPONENTS: any = [\n    ExploreComponent,\n    ExploreMapOverlayComponent,\n    ExploreSearchComponent\n];\n\n@NgModule({\n    declarations: [\n        ...COMPONENTS\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        WidgetsModule,\n        ComposerModule,\n        RouterModule.forChild(ROUTES),\n        SharedComponentModule,\n        ScrollingModule\n    ],\n    exports: [\n        ...COMPONENTS\n    ]\n})\nexport class AppExploreModule { }\n"],"sourceRoot":""}